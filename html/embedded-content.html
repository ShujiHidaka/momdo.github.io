<!DOCTYPE html><html class=split lang=ja><meta charset=utf-8><title>HTML Standard 日本語訳</title>
<script defer="" src=https://resources.whatwg.org/dfn.js></script>
<script data-file-issue-url=https://github.com/momdo/momdo.github.io/issues/new defer="" src=https://resources.whatwg.org/file-issue.js></script>
<script>
   function F( /* varargs... */) {
     var fragment = document.createDocumentFragment();
     for (var index = 0; index < arguments.length; index += 1) {
       if (arguments[index] instanceof Array) {
         fragment.appendChild(F.apply(this, arguments[index]));
       } else if (typeof arguments[index] == 'string') {
         fragment.appendChild(document.createTextNode(arguments[index]));
       } else {
         fragment.appendChild(arguments[index]);
       }
     }
     return fragment;
   }
   function E(name, /* optional */ attributes /*, varargs... */) {
     var element = document.createElement(name);
     var index = 1;
     if ((arguments.length > 1) && (typeof attributes != 'string') &&
         (!(attributes instanceof Node)) && (!(attributes instanceof Array))) {
       for (var attName in attributes) {
         if (typeof attributes[attName] == 'boolean') {
           if (attributes[attName])
             element.setAttribute(attName, '');
         } else if (typeof attributes[attName] == 'function') {
           element[attName] = attributes[attName];
         } else {
           element.setAttribute(attName, attributes[attName]);
         }
       }
       index = 2;
     }
     for (; index < arguments.length; index += 1) {
       if (arguments[index] instanceof Array) {
         element.appendChild(F.apply(this, arguments[index]));
       } else if (typeof arguments[index] == 'string') {
         element.appendChild(document.createTextNode(arguments[index]));
       } else {
         element.appendChild(arguments[index]);
       }
     }
     return element;
   }
   var currentAlert;
   var currentAlertTimeout;
   function showAlert(s, href) {
     if (!currentAlert) {
       currentAlert = document.createElement('div');
       currentAlert.id = 'alert';
       var x = document.createElement('button');
       x.textContent = '\u2573';
       x.onclick = closeAlert2;
       currentAlert.appendChild(x);
       currentAlert.appendChild(document.createElement('span'));
       currentAlert.onmousemove = function () {
         clearTimeout(currentAlertTimeout);
         currentAlert.className = '';
         currentAlertTimeout = setTimeout(closeAlert, 10000);
       }
       document.body.appendChild(currentAlert);
     } else {
       clearTimeout(currentAlertTimeout);
       currentAlert.className = '';
     }
     currentAlert.lastChild.textContent = '';
     currentAlert.lastChild.appendChild(F(s));
     if (href) {
       var link = document.createElement('a');
       link.href = href;
       link.textContent = href;
       currentAlert.lastChild.appendChild(F(' ', link));
     }
     currentAlertTimeout = setTimeout(closeAlert, 10000);
   }
   function closeAlert() {
     clearTimeout(currentAlertTimeout);
     if (currentAlert) {
       currentAlert.className = 'closed';
       currentAlertTimeout = setTimeout(closeAlert2, 3000);
     }
   }
   function closeAlert2() {
     clearTimeout(currentAlertTimeout);
     if (currentAlert) {
       currentAlert.parentNode.removeChild(currentAlert);
       currentAlert = null;
     }
   }
   window.addEventListener('keydown', function (event) {
     if (event.keyCode == 27) {
       if (currentAlert)
         closeAlert2();
     } else {
       closeAlert();
     }
   }, false);
   window.addEventListener('scroll', function (event) {
     closeAlert();
   }, false);

   var startedInit = 0;
   function init() {
     startedInit = 1;
   }
   if (document.documentElement.className == "")
     setTimeout(function () {
       if (!startedInit)
         showAlert("Too slow? Try reading the multipage copy of the spec instead:", "https://whatwg.org/html");
     }, 6000);

   window.addEventListener('keypress', function (event) {
     if ((event.which == 114) && (event.metaKey)) {
       if (!confirm('Are you sure you want to reload this page?'))
         event.preventDefault();
     }
   }, false);
  </script>
<script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script><link rel=stylesheet href=https://resources.whatwg.org/standard.css><link rel=icon href=https://resources.whatwg.org/logo.svg>
<style>
   [hidden] { display: none; }

   .proposal { border: blue solid; padding: 1em; }
   .bad, .bad *:not(.X\58X) { color: gray; border-color: gray; background: transparent; }
   #updatesStatus { display: none; z-index: 10; }
   #updatesStatus.relevant { display: block; position: fixed; right: 1em; top: 1em; padding: 0.5em; font: bold small sans-serif; min-width: 25em; width: 30%; max-width: 40em; height: auto; border: ridge 4px gray; background: #EEEEEE; color: black; }
   div.head .logo { width: 11em; margin-bottom: 20em; }

   #configUI { position: absolute; z-index: 20; top: auto; right: 0; width: 11em; padding: 0 0.5em 0 0.5em; font-size: small; background: gray; background: rgba(32,32,32,0.9); color: white; border-radius: 0.5em 0 0 0.5em; }
   #configUI p { margin: 0.75em 0; padding: 0.3em; }
   #configUI p label { display: block; }
   #configUI #updateUI, #configUI .loginUI { text-align: center; }
   #configUI input[type=button] { display: block; margin: auto; }
   #configUI :link, #configUI :visited { color: white; }
   #configUI :link:hover, #configUI :visited:hover { background: transparent; }

   #alert { position: fixed; top: 20%; left: 20%; right: 20%; font-size: 2em; padding: 0.5em; z-index: 40; background: gray; background: rgba(32,32,32,0.9); color: white; border-radius: 0.5em; transition: opacity 1s linear; }
   #alert.closed { opacity: 0; }
   #alert button { position: absolute; top: -1em; right: 2em; border-radius: 0.5em 0.5em 0 0; border: none; line-height: 0.9; color: white; background: rgb(64,64,64); font-size: 0.6em; font-weight: 900; cursor: pointer; padding: 0.25em; }
   #alert :link, #alert :visited { color: white; text-decoration: underline; }
   #alert :link:hover, #alert :visited:hover { background: transparent; }

   @media print { #configUI, #alert { display: none; } }

   .fingerprint { position: absolute; right: 0; z-index: 5; }

   .status { font: 1em sans-serif; width: 9em; padding: 0.3em; position: absolute; z-index: 8; top: auto; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; margin: -2em 0 0 0; border-collapse: initial; border-spacing: initial; }
   .status.wrapped { width: 1em; height: 1em; }
   .status.wrapped > :not(input) { display: none; }
   .status > input { position: absolute; right: 0; top: 0; width: 1em; height: 1em; border: none; background: transparent; padding: 0; margin: 0; }
   .status > p { font-size: 0.6em; margin: 0; padding: 0; }
   .status > p + p { padding-top: 0.5em; }
   .status > .support { display: block; }
   .status > .support > span { padding: 0.2em 0; display: block; display: table; }
   .status > .support > span.partial { color: #666666; filter: grayscale(50%); }
   .status > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
   .status > .support > span:first-of-type { padding-top: 0.5em; }
   .status > .support > span > span { padding: 0 0.5em; display: table-cell; vertical-align: top; }
   .status > .support > span > span:first-child { width: 100%; }
   .status > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
   .status > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
   .status > .support > .and_chr::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome-android.png); }
   .status > .support > .and_ff::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .and_uc::before { background-image: url(https://resources.whatwg.org/browser-logos/uc.png); } /* UC Browser for Android */
   .status > .support > .android::before { background-image: url(https://resources.whatwg.org/browser-logos/android.svg); }
   .status > .support > .bb::before { background-image: url(https://resources.whatwg.org/browser-logos/bb.jpg); } /* Blackberry Browser */
   .status > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.png); }
   .status > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
   .status > .support > .ie_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/ie-mobile.svg); }
   .status > .support > .ios_saf::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
   .status > .support > .op_mini::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mobile.png); }
   .status > .support > .op_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mobile.png); }
   .status > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
   .status > .caniuse { text-align: right; font-style: italic; }

   .panel { position: fixed; z-index: 30; top: 10%; left: 0; margin: auto; right: 0; width: 35em; border: double thick; background: #EEEEEE; color: black; padding: 1em; font: 1em sans-serif; max-height: 70%; overflow: auto; }
   .panel h2 { margin: 0; text-align: center; }
   .panel ul { min-height: 6em; }
   .panel p { text-align: right; margin: 0; }
   .panel form { background: transparent; color: black; margin: 0.5em -0.5em 1em; padding: 0.5em; }
   .panel form.changed { background: yellow; color: black; }
   .panel form p { text-align: left; margin: 1em 0 0; }
   .panel form p:first-child { margin-top: 0; }
   .panel form p:last-child { margin-bottom: 0; }
   .panel form p textarea { width: 100% /* TODO: need the keyword that makes it fit to the parent here */; min-height: 4em; display: block; }
   .panel form dl { line-height: 1.5em; }
   .panel form dt { display: inline-block; width: 20em; white-space: nowrap; text-align: right; font-weight: normal; margin: 0; padding: 0; }
   .panel form dd { display: inline; margin: 0 0 0 1em; padding: 0; }
   .panel form dd:after { display: block; }
   ul.checkboxes { list-style-type: none; }
   .progress { text-decoration: blink; }

   .applies .yes { background: yellow; }
  </style>
<style>
   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   #base64-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 6em;
     column-count: 5;
     column-gap: 1em;
     -moz-column-width: 6em;
     -moz-column-count: 5;
     -moz-column-gap: 1em;
     -webkit-column-width: 6em;
     -webkit-column-count: 5;
     -webkit-column-gap: 1em;
   }
   #base64-table thead { display: none; }
   #base64-table * { border: none; }
   #base64-table tbody td:first-child:after { content: ':'; }
   #base64-table tbody td:last-child { text-align: right; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }
  </style>
<style>
   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('/fonts/Essays1743-BoldItalic.ttf');
   }
  </style>
<script src=link-fixup.js></script>
<body onload=init()>
  <header id=head class="head with-buttons">
   <p><a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a></p>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>27 February 2016</span></h2></hgroup>
   
   
  </header>

  

  

  
  

  
  

  

  <nav><a href=semantics.html>← 4 HTMLの要素</a> – <a href=index.html>目次</a> – <a href=tables.html>4.9 テーブルデータ →</a></nav><ol class=toc><li id=toc-semantics><ol><li><a href=embedded-content.html#embedded-content>4.8 エンベディッドコンテンツ</a><ol><li><a href=embedded-content.html#introduction-3>4.8.1 導入</a><ol><li><a href=embedded-content.html#adaptive-images>4.8.1.1 Adaptive images</a></li></ol></li><li><a href=embedded-content.html#the-picture-element>4.8.2 <code>picture</code>要素</a></li><li><a href=embedded-content.html#the-source-element-when-used-with-the-picture-element>4.8.3 <code>picture</code>要素とともに使用される場合の<code>source</code>要素</a></li><li><a href=embedded-content.html#the-img-element>4.8.4 <code>img</code>要素</a><ol><li><a href=embedded-content.html#alt>4.8.4.1 画像に対して代替として動作するテキストを提供に対する要件</a><ol><li><a href=embedded-content.html#general-guidelines>4.8.4.1.1 一般的なガイドライン</a></li><li><a href=embedded-content.html#a-link-or-button-containing-nothing-but-the-image>4.8.4.1.2 画像のみを含むリンクまたはボタン</a></li><li><a href=embedded-content.html#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations>4.8.4.1.3 代替グラフィカル表現をもつフレーズまたは段落：チャート、図、グラフ、マップ、イラスト</a></li><li><a href=embedded-content.html#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos>4.8.4.1.4 代替グラフィカル表現をもつ短いフレーズまたはラベル：アイコン、ロゴ</a></li><li><a href=embedded-content.html#text-that-has-been-rendered-to-a-graphic-for-typographical-effect>4.8.4.1.5 印刷効果のためにグラフィックに描画されたテキスト</a></li><li><a href=embedded-content.html#a-graphical-representation-of-some-of-the-surrounding-text>4.8.4.1.6 周囲のテキストの一部をグラフィカルに表現</a></li><li><a href=embedded-content.html#ancillary-images>4.8.4.1.7 Ancillary images</a></li><li><a href="embedded-content.html#a-purely-decorative-image-that-doesn't-add-any-information">4.8.4.1.8 情報を追加しない、純粋に装飾的な画像</a></li><li><a href=embedded-content.html#a-group-of-images-that-form-a-single-larger-picture-with-no-links>4.8.4.1.9 リンクのない単一の大きな画像を形成する画像のグループ</a></li><li><a href=embedded-content.html#a-group-of-images-that-form-a-single-larger-picture-with-links>4.8.4.1.10 リンクのある単一の大きな画像を形成する画像のグループ</a></li><li><a href=embedded-content.html#a-key-part-of-the-content>4.8.4.1.11 コンテンツのキーパート</a></li><li><a href=embedded-content.html#an-image-not-intended-for-the-user>4.8.4.1.12 ユーザーを意図しない画像</a></li><li><a href=embedded-content.html#an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images>4.8.4.1.13 An image in an e-mail or private document intended for a specific person who is known to be able to view images</a></li><li><a href=embedded-content.html#guidance-for-markup-generators>4.8.4.1.14 Guidance for markup generators</a></li><li><a href=embedded-content.html#guidance-for-conformance-checkers>4.8.4.1.15 Guidance for conformance checkers</a></li></ol></li></ol></li><li><a href=embedded-content.html#the-iframe-element>4.8.5 <code>iframe</code>要素</a></li><li><a href=embedded-content.html#the-embed-element>4.8.6 <code>embed</code>要素</a></li><li><a href=embedded-content.html#the-object-element>4.8.7 <code>object</code>要素</a></li><li><a href=embedded-content.html#the-param-element>4.8.8 <code>param</code>要素</a></li><li><a href=embedded-content.html#the-video-element>4.8.9 <code>video</code>要素</a></li><li><a href=embedded-content.html#the-audio-element>4.8.10 <code>audio</code>要素</a></li><li><a href=embedded-content.html#the-source-element>4.8.11 <code>source</code>要素</a></li><li><a href=embedded-content.html#the-track-element>4.8.12 <code>track</code>要素</a></li><li><a href=embedded-content.html#media-elements>4.8.13 メディア要素</a><ol><li><a href=embedded-content.html#error-codes>4.8.13.1 エラーコード</a></li><li><a href=embedded-content.html#location-of-the-media-resource>4.8.13.2 メディアリソースの場所</a></li><li><a href=embedded-content.html#mime-types>4.8.13.3 MIMEタイプ</a></li><li><a href=embedded-content.html#network-states>4.8.13.4 ネットワーク状態</a></li><li><a href=embedded-content.html#loading-the-media-resource>4.8.13.5 メディアリソースの読み込み</a></li><li><a href=embedded-content.html#offsets-into-the-media-resource>4.8.13.6 メディアリソースからのオフセット</a></li><li><a href=embedded-content.html#ready-states>4.8.13.7 準備状態</a></li><li><a href=embedded-content.html#playing-the-media-resource>4.8.13.8 メディアリソースの再生</a></li><li><a href=embedded-content.html#seeking>4.8.13.9 シーク</a></li><li><a href=embedded-content.html#media-resources-with-multiple-media-tracks>4.8.13.10 複数のメディアトラックを伴うメディアリソース</a><ol><li><a href=embedded-content.html#audiotracklist-and-videotracklist-objects> <code>AudioTrackList</code>および<code>VideoTrackList</code>オブジェクト</a></li><li><a href=embedded-content.html#selecting-specific-audio-and-video-tracks-declaratively>4.8.13.10.2 宣言的に特定のオーディオとビデオトラックを選択する</a></li></ol></li><li><a href=embedded-content.html#synchronising-multiple-media-elements>4.8.13.11 複数のメディア要素を同期する</a><ol><li><a href=embedded-content.html#introduction-4>4.8.13.11.1 導入</a></li><li><a href=embedded-content.html#media-controllers>4.8.13.11.2 メディアコントローラ</a></li><li><a href=embedded-content.html#assigning-a-media-controller-declaratively>4.8.13.11.3 宣言的メディアコントローラを割り当てる</a></li></ol></li><li><a href=embedded-content.html#timed-text-tracks>4.8.13.12 時限テキストトラック</a><ol><li><a href=embedded-content.html#text-track-model>4.8.13.12.1 テキストトラックモデル</a></li><li><a href=embedded-content.html#sourcing-in-band-text-tracks>4.8.13.12.2 帯域内テキストトラックの情報源</a></li><li><a href=embedded-content.html#sourcing-out-of-band-text-tracks>4.8.13.12.3 Sourcing out-of-band text tracks</a></li><li><a href=embedded-content.html#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues>4.8.13.12.4 Guidelines for exposing cues in various formats as text track cues</a></li><li><a href=embedded-content.html#text-track-api>4.8.13.12.5 テキストトラックAPI</a></li><li><a href=embedded-content.html#text-tracks-describing-chapters>4.8.13.12.6 章を記述するテキストトラック</a></li><li><a href=embedded-content.html#cue-events>4.8.13.12.7 Event handlers for objects of the text track APIs</a></li><li><a href=embedded-content.html#best-practices-for-metadata-text-tracks>4.8.13.12.8 メタデータテキストトラックに対するベストプラクティス</a></li></ol></li><li><a href=embedded-content.html#user-interface>4.8.13.13 ユーザーインターフェース</a></li><li><a href=embedded-content.html#time-ranges>4.8.13.14 時間範囲</a></li><li><a href=embedded-content.html#the-trackevent-interface>4.8.13.15 <code>TrackEvent</code>インターフェース</a></li><li><a href=embedded-content.html#mediaevents>4.8.13.16 イベントの概要</a></li><li><a href=embedded-content.html#security-and-privacy-considerations>4.8.13.17 Security and privacy considerations</a></li><li><a href=embedded-content.html#best-practices-for-authors-using-media-elements>4.8.13.18 メディア要素を使用する著者に対するベストプラクティス</a></li><li><a href=embedded-content.html#best-practices-for-implementors-of-media-elements>4.8.13.19 メディア要素を使用する著者に対するベストプラクティス</a></li></ol></li><li><a href=embedded-content.html#the-map-element>4.8.14 <code>map</code>要素</a></li><li><a href=embedded-content.html#the-area-element>4.8.15 <code>area</code>要素</a></li><li><a href=embedded-content.html#image-maps>4.8.16 イメージマップ</a><ol><li><a href=embedded-content.html#authoring>4.8.16.1 オーサリング</a></li><li><a href=embedded-content.html#processing-model>4.8.16.2 処理モデル</a></li></ol></li><li><a href=embedded-content.html#mathml>4.8.17 MathML</a></li><li><a href=embedded-content.html#svg-0>4.8.18 SVG</a></li><li><a href=embedded-content.html#dimension-attributes>4.8.19 次元属性</a></li></ol></li></ol></li></ol><h3 id=embedded-content>4.8 エンベディッドコンテンツ</h3>

  <h4 id=introduction-3>4.8.1 導入</h4>

  <p><i>この節は非規範的である。</i></p>

  <p>単独の画像リソースのみが存在する場合、HTMLにおいて画像を埋め込むために、<code id=introduction-3:the-img-element><a href=#the-img-element>img</a></code>要素および<code id=introduction-3:attr-img-src><a href=#attr-img-src>src</a></code>属性を使用する。</p>

  <div class=example>

<pre>&lt;h2&gt;From today's featured article&lt;/h2&gt;
<strong>&lt;img src="/uploads/100-marie-lloyd.jpg" alt="" width="100" height="150"&gt;</strong>
&lt;p&gt;&lt;b&gt;&lt;a href="/wiki/Marie_Lloyd"&gt;Marie Lloyd&lt;/a&gt;&lt;/b&gt; (1870–1922)
was an English &lt;a href="/wiki/Music_hall"&gt;music hall&lt;/a&gt; singer, ...</pre>

  </div>

  <p>しかし、ユーザーエージェントが選択することができる複数の画像リソースを用いることを著者が望むかもしれない多数の状況が存在する：</p>

  <ul><li>

    <p>異なるユーザーが異なる環境特性を持つかもしれない：</p>

    <ul><li>

      <p>ユーザーの物理スクリーンサイズは他のものと異なるかもしれない。</p>

      <div class=example>
       <p>ラップトップのスクリーンは14インチ型であるかもしれない一方で、携帯電話のスクリーンは4インチ型であるかもしれない。</p>

       <svg font-size=2.5 role=img viewBox="0 0 80 32" font-family=sans-serif height=200 aria-label="The phone's screen is much smaller compared to the laptop's screen.">
        
        <rect width=6 fill=white stroke=black x=6 height=12 y=18 rx=1></rect>
        <text transform="translate(9 24)
        rotate(-60)" text-anchor=middle dominant-baseline=middle>4″</text>
        
        <rect width=40 stroke-width=2 fill=white stroke=black x=30 height=26 y=2 rx=2></rect>
        <line y2=30 stroke-linecap=round stroke-width=2 stroke=black x1=26 y1=30 x2=74></line>
        <text transform="translate(50 15)
        rotate(-30)" text-anchor=middle dominant-baseline=middle>14″</text>
       </svg>
      </div>

      <p class=note>This is only relevant when an image's rendered size depends on the
      <a id=introduction-3:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> size.</p>

     </li><li>

      <p>ユーザーのスクリーンピクセル密度は、別のスクリーンと異なるかもしれない。</p>

      <div class=example>
       <p>携帯電話のスクリーンは、物理スクリーンサイズに関わらず、別の携帯電話のスクリーンと比較してインチあたり物理ピクセルとして3倍になるかもしれない。</p>

       <svg font-size=2.5 role=img viewBox="0 0 56 27" font-family=sans-serif height=170 aria-label="One phone has big pixels, the other has small pixels.">
        <defs>
         <pattern id=img-intro-pixel width=3 patternUnits=userSpaceOnUse stroke-linecap=round x=0 y=0 height=3>
          <rect fill=black width=3 x=0 height=3 y=0></rect>
          <line y2=2.5 stroke=red x1=0.5 x2=0.5 y1=0.5></line>
          <line y2=2.5 stroke=lime x1=1.5 x2=1.5 y1=0.5></line>
          <line y2=2.5 stroke=blue x1=2.5 x2=2.5 y1=0.5></line>
         </pattern>
        </defs>
        
        <rect width=6 fill=white stroke=black x=6 height=12 y=8 rx=1></rect>
        <rect width=6 fill=white stroke=black x=36 height=12 y=8 rx=1></rect>
        
        <line y2=24 stroke-width=3 stroke=brown x1=15 y1=16 x2=22></line>
        <circle cx=10 cy=10 fill=url(#img-intro-pixel) stroke=black r=8></circle>
        <line y2=24 stroke-width=3 stroke=brown x1=45 y1=16 x2=52></line>
        <circle cx=120 transform=scale(0.333333) cy=30 r=24 stroke-width=3 fill=url(#img-intro-pixel) stroke=black></circle>
        
        <text x=20 y=10 dominant-baseline=middle>1x</text>
        <text x=50 y=10 dominant-baseline=middle>3x</text>
       </svg>
      </div>

     </li><li>

      <p>ユーザーのズームレベルは別のものと異なるかもしれず、時間とともに単独のユーザーに対して変化するかもしれない。</p>

      <p class=example>ユーザーは、特定の画像の詳細を見るためにズームするかもしれない。</p>

      <p>ズームレベルおよびスクリーンピクセル密度（前のポイント）は、CSSピクセル密度あたり多数の物理スクリーンピクセルに影響を与えることができる。この比率は、一般に<dfn id=device-pixel-ratio>デバイスピクセル比</dfn>として参照される。</p>

     </li><li>

      <p>ユーザーのスクリーン方向は別のものと異なるかもしれず、時間とともに単独のユーザーに対して変化するかもしれない。</p>

      <div class=example>
       <p>タブレットは縦型または90度回転して固定されることができ、その結果スクリーンは、"縦長"（portrait）または"横長"（landscape）のいずれかとなる。</p>

       <svg font-size=2.5 role=img viewBox="0 0 60 32" font-family=sans-serif height=200 aria-label="The tablet has two orientations.">
        
        <rect width=14 fill=white stroke=black x=6 height=20 y=5 rx=1></rect>
        <line y2=24 stroke-width=1.1 stroke=black x1=6 y1=24 x2=20></line>
        <text text-anchor=middle x=13 y=14.5 dominant-baseline=middle>Portrait</text>
        <rect width=20 fill=white stroke=black x=30 height=14 y=11 rx=1></rect>
        <line y2=11 stroke-width=1.1 stroke=black x1=31 y1=25 x2=31></line>
        <text text-anchor=middle x=40.5 y=18 dominant-baseline=middle>Landscape</text>
       </svg>
      </div>

     </li><li>

      <p>ユーザーのネットワーク速度、ネットワークレイテンシおよび帯域幅コストは異なるかもしれず、時間とともに単独のユーザーに対して変化するかもしれない。</p>

      <p class=example>ユーザーは、仕事で低レイテンシおよび一定コスト接続の高速かもしれないし、家で低レイテンシおよび一定コスト接続の低速かもしれないし、他の場所で高レイテンシおよび可変コスト接続の速度変化かもしれない。</p>

     </li></ul>

   </li><li>

    <p>Authors might want to show the same image content but with different rendered size depending
    on, usually, the width of the <a id=introduction-3:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>. This is usually referred to as
    <dfn id=viewport-based-selection>viewport-based selection</dfn>.</p>

    <div class=example>
     <p>A Web page might have a banner at the top that always spans the entire <a id=introduction-3:viewport-3 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> width. この場合、画像のレンダリングサイズはスクリーンの物理サイズに依存する（最大化されたブラウザーウィンドウを仮定する）。</p>

     <svg viewBox="0 0 52 25.6" height=160 aria-label="The upright-held phone shows a
     small wolf at the top, and the tablet shows the same image but it is bigger." role=img>
      

      
      <rect width=6 fill=white stroke=black x=6 height=12 y=8 rx=1></rect>
      <rect fill=#716966 x=7 width=4 height=2 y=9></rect>
      <image xlink:href=images/wolf.jpg width=4 x=7 y=9 height=2></image>

      
      <rect width=20 fill=white stroke=black x=25 height=14 y=6 rx=1></rect>
      <line y2=6 stroke-width=1.1 stroke=black x1=26 y1=20 x2=26></line>
      <rect fill=#716966 x=27 width=17 height=8.5 y=7></rect>
      <image xlink:href=images/wolf.jpg width=17 x=27 y=7 height=8.5></image>

     </svg>
    </div>

    <div class=example>
     <p>Another Web page might have images in columns, with a single column for screens with a small
     physical size, two columns for screens with medium physical size, and three columns for screens
     with big physical size, with the images varying in rendered size in each case to fill up the
     <a id=introduction-3:viewport-4 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>. In this case, the rendered size of an image might be <em>bigger</em> in
     the one-column layout compared to the two-column layout, despite the screen being smaller.</p>

     <svg font-size=2.5 role=img viewBox="0 0 115 32" font-family=sans-serif height=200 aria-label="The rotated phone shows a top part of an image of a kettlebell swing; the
     upright-held tablet shows a bit smaller images in two columns; the laptop shows images in three
     columns.">
      

      
      <rect width=12 fill=white stroke=black x=6 height=6 y=24 rx=1></rect>
      <rect fill=#987b5a width=10 x=7 height=4.5 y=25></rect>
      <image xlink:href=images/kettlebell.jpg preserveAspectRatio="xMinYMin slice" width=10 x=7 y=25 height=4.5></image>
      <text text-anchor=middle x=12 y=21>Narrow, 1 column</text>

      
      <rect width=14 fill=white stroke=black x=32 height=20 y=10 rx=1></rect>
      <line y2=29 stroke-width=1.1 stroke=black x1=32 y1=29 x2=46></line>
      <rect fill=#987b5a width=5.5 x=33 height=5.5 y=11></rect>
      <image xlink:href=images/kettlebell.jpg width=5.5 x=33 y=11 height=5.5></image>
      <rect fill=burlywood width=5.5 x=39.5 height=5.5 y=11></rect>
      <rect fill=silver width=5.5 x=33 height=5.5 y=17.5></rect>
      <text text-anchor=middle x=39 y=7>Medium, 2 columns</text>

      
      <rect width=40 stroke-width=2 fill=white stroke=black x=65 height=26 y=2 rx=2></rect>
      <line y2=30 stroke-linecap=round stroke-width=2 stroke=black x1=61 y1=30 x2=109></line>
      <rect fill=#987b5a width=10 x=67 height=10 y=4></rect>
      <image xlink:href=images/kettlebell.jpg width=10 x=67 y=4 height=10></image>
      <rect fill=burlywood width=10 x=80 height=10 y=4></rect>
      <rect fill=silver width=10 x=93 height=10 y=4></rect>
      <text text-anchor=middle x=85 y=25>Wide, 3 columns</text>
     </svg>
    </div>

   </li><li>

    <p>著者は、画像のレンダリングサイズ次第で異なる画像コンテンツを表示したいかもしれない。これは通常<dfn id=art-direction>art direction</dfn>として参照される。</p>

    <div class=example>
     <p>When a Web page is viewed on a screen with a large physical size (assuming a maximised browser window), the author might wish to include some less relevant parts surrounding the critical part of the image. ウェブページが小さなな物理サイズをもつスクリーンで見られる場合、著者は画像の重要な部分のみを表示することを望むかもしれない。</p>

     <svg viewBox="0 0 52 25.6" height=160 aria-label="The upright-held phone shows a
     cropped image of a wolf; the rotated tablet shows the uncropped image." role=img>
      

      
      <rect width=6 fill=white stroke=black x=6 height=12 y=8 rx=1></rect>
      <rect fill=#716966 x=7 width=4 height=6 y=9></rect>
      <image xlink:href=images/wolf.jpg preserveAspectRatio="xMidYMid slice" width=4 x=7 y=9 height=6></image>

      
      <rect width=20 fill=white stroke=black x=25 height=14 y=6 rx=1></rect>
      <line y2=6 stroke-width=1.1 stroke=black x1=26 y1=20 x2=26></line>
      <rect fill=#716966 x=27 width=17 height=8.5 y=7></rect>
      <image xlink:href=images/wolf.jpg width=17 x=27 y=7 height=8.5></image>

     </svg>
    </div>

   </li><li>

    <p>著者は、ユーザーエージェントがサポートする画像フォーマットに応じて、同じ画像コンテンツだが異なる画像フォーマットを表示したいかもしれない。これは通常<dfn id=image-format-based-selection>画像フォーマットベースの選択</dfn>として参照される。</p>

    <p class=example>ウェブページは、JPEG、JPEGと比較してより圧縮能力のよいWebPおよびJPEG XRで画像を持つかもしれない。異なるユーザーエージェントは、よりよい圧縮比を提供するフォーマットをもつ、異なる画像フォーマットをサポートすることができるため、サポートしないユーザーエージェントに対してJPEGフォールバックを提供する一方で、著者はフォーマットをサポートするユーザーエージェントに対してよりよいフォーマットを配信したいだろう。</p>

   </li></ul>

  <p>上記の状況は、相互に排他的ではない。たとえば、<a href=#art-direction id=introduction-3:art-direction>art direction</a>に対する異なるリソースをもつ異なる<a href=#device-pixel-ratio id=introduction-3:device-pixel-ratio>デバイスピクセル比</a>が異なるリソースを組み合わせることは理にかなっている。</p>

  <p>スクリプトを使用することでこれら問題を解決することは可能である間、そのようにすることは他の問題を導入する：</p>

  <ul><li><p>ウェブページがすぐに読み込み完了するように、スクリプトが実行する機会を持つ前に、一部のユーザーエージェントは、HTMLマークアップで指定される画像を積極的にダウンロードする。スクリプトがダウンロードする画像を変更する場合、より悪いページ読み込みパフォーマンスを引き起こすことができるダウンロードの代わりに、ユーザーエージェントはダウンロードを分離する2つを潜在的に開始するだろう。</li><li><p>If the author avoids specifying any image in the HTML markup and instead instantiates a
   single download from script, that avoids the double download problem above but then no image will
   be downloaded at all for users with scripting disabled and the aggressive image downloading
   optimisation will also be disabled.</li></ul>

  <p>このことを考慮して、この仕様は宣言する方法で上記の問題を申し立てるための多数の機能を導入する。</p>

  <dl><dt>画像のレンダリングサイズが固定される場合で<a href=#device-pixel-ratio id=introduction-3:device-pixel-ratio-2>デバイスピクセル比</a>ベースの選択<dd>

    <p><code id=introduction-3:the-img-element-2><a href=#the-img-element>img</a></code>要素の<code id=introduction-3:attr-img-src-2><a href=#attr-img-src>src</a></code>および<code id=introduction-3:attr-img-srcset><a href=#attr-img-srcset>srcset</a></code>は、（より小さいサイズがより大きい画像のスケールダウンバージョンとなる）画像サイズで変化するのみの複数の画像を提供するために<code>x</code>記述子を用いて使用することができる。</p>

    <p class=note>The <code>x</code> descriptor is not appropriate when the rendered
    size of the image depends on the <a id=introduction-3:viewport-5 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> width
    (<a href=#viewport-based-selection id=introduction-3:viewport-based-selection>viewport-based selection</a>), but can be used together with
    <a href=#art-direction id=introduction-3:art-direction-2>art direction</a>.</p>

    <div class=example>

<pre>&lt;h2&gt;From today's featured article&lt;/h2&gt;
&lt;img <strong>src="/uploads/100-marie-lloyd.jpg"</strong>
     <strong>srcset="/uploads/150-marie-lloyd.jpg 1.5x, /uploads/200-marie-lloyd.jpg 2x"</strong>
     alt="" width="100" height="150"&gt;
&lt;p&gt;&lt;b&gt;&lt;a href="/wiki/Marie_Lloyd"&gt;Marie Lloyd&lt;/a&gt;&lt;/b&gt; (1870–1922)
was an English &lt;a href="/wiki/Music_hall"&gt;music hall&lt;/a&gt; singer, ...</pre>

     <p>ユーザーエージェントは、ユーザーのスクリーンのピクセル密度、ズームレベルおよびユーザーのネットワーク状態のような可能性のあるその他の要素に依存する与えられたリソースのどれでも選択することができる。</p>

     <p><code id=introduction-3:attr-img-srcset-2><a href=#attr-img-srcset>srcset</a></code>属性を解釈しない古いユーザーエージェントの後方互換性のために、URLの1つは、<code id=introduction-3:the-img-element-3><a href=#the-img-element>img</a></code>要素の<code id=introduction-3:attr-img-src-3><a href=#attr-img-src>src</a></code>属性で指定される。これは（ユーザーが好むよりももしかすると低い解像度だけれども）古いユーザーエージェントにおいてさえも表示されるという何かしら役に立つ結果になるだろう。新しいユーザーエージェントに対して、あたかも属性が<code>1x</code>記述子とともに<code id=introduction-3:attr-img-srcset-3><a href=#attr-img-srcset>srcset</a></code>で指定されたかのように、<code id=introduction-3:attr-img-src-4><a href=#attr-img-src>src</a></code>属性はリソース選択に参加する。</p>

     <p>画像のレンダリングサイズは、画像がダウンロードされる前に画像に対する空間を割り当てることがユーザーエージェントにできる<code id=introduction-3:attr-dim-width><a href=#attr-dim-width>width</a></code>および<code id=introduction-3:attr-dim-height><a href=#attr-dim-height>height</a></code>属性で与えられる。</p>

    </div>

   <dt><a href=#viewport-based-selection id=introduction-3:viewport-based-selection-2>ビューポートベースの選択</a><dd>

    <p><code id=introduction-3:attr-img-srcset-4><a href=#attr-img-srcset>srcset</a></code>および<code id=introduction-3:attr-img-sizes><a href=#attr-img-sizes>sizes</a></code>は、（より小さいサイズがより大きい画像のスケールダウンバージョンとなる）画像サイズで変化するのみの複数の画像を提供するために<code>w</code>記述子を用いて使用することができる。</p>

    <div class=example>

     <p>In this example, a banner image takes up the entire <a id=introduction-3:viewport-6 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> width (using
     appropriate CSS).</p>

<pre>&lt;h1&gt;&lt;img <strong>sizes="100vw" srcset="wolf-400.jpg 400w, wolf-800.jpg 800w, wolf-1600.jpg 1600w"</strong>
     src="wolf-400.jpg" alt="The rad wolf"&gt;&lt;/h1&gt;</pre>

     <p>ユーザーエージェントは、指定される<code>w</code>記述子および<code id=introduction-3:attr-img-sizes-2><a href=#attr-img-sizes>sizes</a></code>属性で指定されるレンダリングサイズから各画像の効果的なピクセル密度を算出するだろう。 ユーザーエージェントは、ユーザーのスクリーンのピクセル密度、ズームレベルおよびユーザーのネットワーク状態のような可能性のあるその他の要素に依存する与えられたリソースのどれでも選択することができる。</p>

     <p>ユーザーのスクリーンが320 CSSピクセル幅である場合、これは<code>wolf-400.jpg 1.25x, wolf-800.jpg 2.5x, wolf-1600.jpg 5x</code>に指定するのと等価である。言い換えると、ユーザーのスクリーン1200 CSSピクセル幅である場合、これは<code>wolf-400.jpg 0.33x, wolf-800.jpg 0.67x, wolf-1600.jpg 1.33x</code>に指定するのと等価である。By using the <code>w</code>記述子および<code id=introduction-3:attr-img-sizes-3><a href=#attr-img-sizes>sizes</a></code>属性を使用することによって、ユーザーエージェントはユーザーのデバイスの大きさにかかわらず、ダウンロードする正確な画像リソースを選択することができる。</p>

     <p>後方互換性のために、URLの1つは<code id=introduction-3:the-img-element-4><a href=#the-img-element>img</a></code>要素の<code id=introduction-3:attr-img-src-5><a href=#attr-img-src>src</a></code>属性で指定される。新しいユーザーエージェントにおいて、<code id=introduction-3:attr-img-srcset-5><a href=#attr-img-srcset>srcset</a></code>属性が<code>w</code>記述子を使用する場合、<code id=introduction-3:attr-img-src-6><a href=#attr-img-src>src</a></code>属性は無視される。</p>

    </div>

    <div class=example>

     <p>In this example, the Web page has three layouts depending on the width of the <a id=introduction-3:viewport-7 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>. 狭いレイアウトは1列目の画像（各画像の幅が約100%）、中程度のレイアウトは2列目の画像（各画像の幅が約50%）、広いレイアウトは3列目の画像（各画像の幅が約33%）、およびページマージンを持つ。It breaks between these layouts when the <a id=introduction-3:viewport-8 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> is <code>30em</code> wide and <code>50em</code> wide, respectively.</p>

<pre>&lt;img <strong>sizes="(max-width: 30em) 100vw, (max-width: 50em) 50vw, calc(33vw - 100px)"</strong>
     <strong>srcset="swing-200.jpg 200w, swing-400.jpg 400w, swing-800.jpg 800w, swing-1600.jpg 1600w"</strong>
     src="swing-400.jpg" alt="Kettlebell Swing"&gt;</pre>

     <p><code id=introduction-3:attr-img-sizes-4><a href=#attr-img-sizes>sizes</a></code>属性は、<code>30em</code>および<code>50em</code>でレイアウトのブレークポイントを設定し、これらブレークポイントの間で <code>100vw</code>、<code>50vw</code>または<code>calc(33vw - 100px)</code>に画像サイズを宣言する。これらサイズは、CSSで指定されたように実際の画像幅と厳密にマッチする必要が必然的にない。</p>

     <p>ユーザーエージェントは、trueに評価する<a id=introduction-3:media-condition href=infrastructure.html#media-condition>&lt;media-condition&gt;</a>（丸括弧の一部）をもつ最初の項目を用いる、またはそれらがfalseにすべて評価する場合、最後の項目（<code>calc(33vw - 100px)</code>）を用いて、<code id=introduction-3:attr-img-sizes-5><a href=#attr-img-sizes>sizes</a></code>属性から幅を選ぶだろう。</p>

     <p>For example, if the <a id=introduction-3:viewport-9 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> width is <code>29em</code>, then <code>(max-width: 30em)</code> evaluates to true and <code>100vw</code> is used,
     so the image size, for the purpose of resource selection, is <code>29em</code>. If
     the <a id=introduction-3:viewport-10 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> width is instead <code>32em</code>, then
     <code>(max-width: 30em)</code> evaluates to false, but
     <code>(max-width: 50em)</code> evaluates to true
     and <code>50vw</code> is used, so the image size, for the purpose of resource
     selection, is <code>16em</code> (half the <a id=introduction-3:viewport-11 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> width). Notice that
     the slightly wider <a id=introduction-3:viewport-12 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> results in a smaller image because of the different
     layout.</p>

     <p>ユーザーエージェントは、効果的なピクセル密度を選択し、前の例と似た適切なリソースを選択することができる。</p>

    </div>

   <dt><a href=#art-direction id=introduction-3:art-direction-3>Art direction</a>-ベースの選択<dd>

    <p><code id=introduction-3:attr-picture-source-media><a href=#attr-picture-source-media>media</a></code>属性と共に<code id=introduction-3:the-picture-element><a href=#the-picture-element>picture</a></code>要素および<code id=introduction-3:the-source-element-when-used-with-the-picture-element><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素は、（たとえばより小さい画像がより大きい画像の収穫されたバージョンかもしれない）画像コンテンツを変化させる複数の画像を提供するために使用することができる。</p>

    <div class=example>

<pre>&lt;picture&gt;
  &lt;source <strong>media="(min-width: 45em)"</strong> srcset="large.jpg"&gt;
  &lt;source <strong>media="(min-width: 32em)"</strong> srcset="med.jpg"&gt;
  &lt;img src="small.jpg" alt="The wolf runs through the snow."&gt;
&lt;/picture&gt;</pre>

     <p>ユーザーエージェントが<code id=introduction-3:attr-picture-source-media-2><a href=#attr-picture-source-media>media</a></code>属性におけるメディアクエリがマッチする最初の<code id=introduction-3:the-source-element-when-used-with-the-picture-element-2><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素を選択し、要素の<code id=introduction-3:attr-picture-source-srcset><a href=#attr-picture-source-srcset>srcset</a></code>属性から適切なURLを選択する。</p>

     <p>画像のレンダリングサイズは、ソースが選択されるものに依存して変化する。ダウンロードされた画像を持つ前にユーザーエージェントが使用することができる次元を指定するために、CSSは使用することができる。</p>

<pre class=css>img { width: 300px; height: 300px }
@media (min-width: 32em) { img { width: 500px; height:300px } }
@media (min-width: 45em) { img { width: 700px; height:400px } }</pre>

    </div>

    <div class=example>

     <p>この例は、<a href=#art-direction id=introduction-3:art-direction-4>art direction</a>および<a href=#device-pixel-ratio id=introduction-3:device-pixel-ratio-3>デバイスピクセル比</a>ベースの選択を組み合わせる。A banner that takes half the <a id=introduction-3:viewport-13 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> is provided in two versions, one for wide screens and one for narrow screens.</p>

<pre>&lt;h1&gt;
 &lt;picture&gt;
  &lt;source media="(max-width: 500px)" srcset="banner-phone.jpeg, banner-phone-HD.jpeg 2x"&gt;
  &lt;img src="banner.jpeg" srcset="banner-HD.jpeg 2x" alt="The Breakfast Combo"&gt;
 &lt;/picture&gt;
&lt;/h1&gt;</pre>

    </div>

   <dt><a href=#image-format-based-selection id=introduction-3:image-format-based-selection>Image format-based selection</a><dd>

    <p><code id=introduction-3:the-source-element-when-used-with-the-picture-element-3><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素の<code id=introduction-3:attr-picture-source-type><a href=#attr-picture-source-type>type</a></code>属性は、異なるフォーマットで複数の画像を提供するために、使用することができる。</p>

    <div class=example>

<pre>&lt;h2&gt;From today's featured article&lt;/h2&gt;
&lt;picture&gt;
 &lt;source srcset="/uploads/100-marie-lloyd.webp" <strong>type="image/webp"</strong>&gt;
 &lt;source srcset="/uploads/100-marie-lloyd.jxr" <strong>type="image/vnd.ms-photo"</strong>&gt;
 &lt;img src="/uploads/100-marie-lloyd.jpg" alt="" width="100" height="150"&gt;
&lt;/picture&gt;
&lt;p&gt;&lt;b&gt;&lt;a href="/wiki/Marie_Lloyd"&gt;Marie Lloyd&lt;/a&gt;&lt;/b&gt; (1870–1922)
was an English &lt;a href="/wiki/Music_hall"&gt;music hall&lt;/a&gt; singer, ...</pre>

     <p>この例において、ユーザーエージェントは、サポートされるMIMEタイプをもつ<code id=introduction-3:attr-picture-source-type-2><a href=#attr-picture-source-type>type</a></code>属性を持つ最初のリソースを選択する。ユーザーエージェントがWebP画像をサポートする場合、最初の<code id=introduction-3:the-source-element-when-used-with-the-picture-element-4><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素が選択される。WebP画像をサポートしないが、ユーザーエージェントがJPEG XR画像をサポートする場合、2つ目の<code id=introduction-3:the-source-element-when-used-with-the-picture-element-5><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素が選択される。これらのフォーマットがいずれもサポートされない場合、<code id=introduction-3:the-img-element-5><a href=#the-img-element>img</a></code>要素が選択されるだろう。</p>

    </div>

   </dl>


  <h5 id=adaptive-images>4.8.1.1 Adaptive images</h5>

  <p><i>この節は非規範的である。</i></p>

  <p>CSS and media queries can be used to construct graphical page layouts that adapt dynamically to
  the user's environment, in particular to different <a id=adaptive-images:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> dimensions and pixel
  densities. For content, however, CSS does not help; instead, we have the <code id=adaptive-images:the-img-element><a href=#the-img-element>img</a></code> element's
  <code id=adaptive-images:attr-img-srcset><a href=#attr-img-srcset>srcset</a></code> attribute and the <code id=adaptive-images:the-picture-element><a href=#the-picture-element>picture</a></code> element.
  This section walks through a sample case showing how to use these features.</p>

  <p>Consider a situation where on wide screens (wider than 600 CSS pixels) a 300×150 image
  named <code>a-rectangle.png</code> is to be used, but on smaller screens (600 CSS pixels
  and less), a smaller 100×100 image called <code>a-square.png</code> is to be used.
  The markup for this would look like this:</p>

  <pre>&lt;figure&gt;
 &lt;picture&gt;
  &lt;source srcset="a-square.png" media="(max-width: 600px)"&gt;
  &lt;img src="a-rectangle.png" alt="Barney Frank wears a suit and glasses."&gt;
 &lt;/picture&gt;
 &lt;figcaption&gt;Barney Frank, 2011&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

  <p class=note>For details on what to put in the <code id=adaptive-images:attr-img-alt><a href=#attr-img-alt>alt</a></code>
  attribute, see the <a href=#alt>Requirements for providing text to act as an alternative for
  images</a> section.</p>

  <p>The problem with this is that the user agent does not necessarily know what dimensions to use
  for the image when the image is loading. To avoid the layout having to be reflowed multiple times
  as the page is loading, CSS and CSS media queries can be used to provide the dimensions:</p>

  <pre>&lt;figure&gt;
 &lt;style scoped&gt;
  #a { width: 300px; height: 150px; }
  @media (max-width: 600px) { #a { width: 100px; height: 100px; } }
 &lt;/style&gt;
 &lt;picture&gt;
  &lt;source srcset="a-square.png" media="(max-width: 600px)"&gt;
  &lt;img src="a-rectangle.png" alt="Barney Frank wears a suit and glasses." id="a"&gt;
 &lt;/picture&gt;
 &lt;figcaption&gt;Barney Frank, 2011&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

  <p>Alternatively, the <code id=adaptive-images:attr-dim-width><a href=#attr-dim-width>width</a></code> and <code id=adaptive-images:attr-dim-height><a href=#attr-dim-height>height</a></code> attributes can be used to provide the width for legacy user
  agents, using CSS just for the user agents that support <code id=adaptive-images:the-picture-element-2><a href=#the-picture-element>picture</a></code>:</p>

  <pre>&lt;figure&gt;
 &lt;style scoped media="(max-width: 600px)"&gt;
  #a { width: 100px; height: 100px; }
 &lt;/style&gt;
 &lt;picture&gt;
  &lt;source srcset="a-square.png" media="(max-width: 600px)"&gt;
  &lt;img src="a-rectangle.png" width="300" height="150"
  alt="Barney Frank wears a suit and glasses." id="a"&gt;
 &lt;/picture&gt;
 &lt;figcaption&gt;Barney Frank, 2011&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

  <hr>

  <p>The <code id=adaptive-images:the-img-element-2><a href=#the-img-element>img</a></code> element is used with the <code id=adaptive-images:attr-img-src><a href=#attr-img-src>src</a></code> attribute,
  which gives the URL of the image to use for legacy user agents that do not support the
  <code id=adaptive-images:the-picture-element-3><a href=#the-picture-element>picture</a></code> element. This leads to a question of which image to provide in the <code id=adaptive-images:attr-img-src-2><a href=#attr-img-src>src</a></code> attribute.</p>

  <p>If the author wants the biggest image in legacy user agents, the markup could be as
  follows:</p>

  <pre>&lt;picture&gt;
 &lt;source srcset="pear-mobile.jpeg" media="(max-width: 720px)"&gt;
 &lt;source srcset="pear-tablet.jpeg" media="(max-width: 1280px)"&gt;
 &lt;img src="pear-desktop.jpeg" alt="The pear is juicy."&gt;
&lt;/picture&gt;</pre>

  <p>However, if legacy mobile user agents are more important, one can list all three images in the
  <code id=adaptive-images:the-source-element-when-used-with-the-picture-element><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> elements, overriding the <code id=adaptive-images:attr-img-src-3><a href=#attr-img-src>src</a></code> attribute entirely.</p>

  <pre>&lt;picture&gt;
 &lt;source srcset="pear-mobile.jpeg" media="(max-width: 720px)"&gt;
 &lt;source srcset="pear-tablet.jpeg" media="(max-width: 1280px)"&gt;
 &lt;source srcset="pear-desktop.jpeg"&gt;
 &lt;img src="pear-mobile.jpeg" alt="The pear is juicy."&gt;
&lt;/picture&gt;</pre>

  <p>Since at this point the <code id=adaptive-images:attr-img-src-4><a href=#attr-img-src>src</a></code> attribute is actually being
  ignored entirely by <code id=adaptive-images:the-picture-element-4><a href=#the-picture-element>picture</a></code>-supporting user agents, the <code id=adaptive-images:attr-img-src-5><a href=#attr-img-src>src</a></code> attribute can default to any image, including one that is neither
  the smallest nor biggest:</p>

  <pre>&lt;picture&gt;
 &lt;source srcset="pear-mobile.jpeg" media="(max-width: 720px)"&gt;
 &lt;source srcset="pear-tablet.jpeg" media="(max-width: 1280px)"&gt;
 &lt;source srcset="pear-desktop.jpeg"&gt;
 &lt;img src="pear-tablet.jpeg" alt="The pear is juicy."&gt;
&lt;/picture&gt;</pre>

  <hr>

  <p>Above the <code>max-width</code> media feature is used, giving the maximum
  (<a id=adaptive-images:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>) dimensions that an image is intended for. It is also possible to use <code>min-width</code> instead.</p>

  <pre>&lt;picture&gt;
 &lt;source srcset="pear-desktop.jpeg" media="(min-width: 1281px)"&gt;
 &lt;source srcset="pear-tablet.jpeg" media="(min-width: 721px)"&gt;
 &lt;img src="pear-mobile.jpeg" alt="The pear is juicy."&gt;
&lt;/picture&gt;</pre>


  <h4 id=the-picture-element>4.8.2 <dfn><code>picture</code></dfn>要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>38+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>9.3+</span></span><span class="firefox yes"><span>Firefox</span> <span>38+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android yes"><span>Android Browser</span> <span>47+</span></span><span class="safari yes"><span>Safari</span> <span>9.1+</span></span><span class="opera yes"><span>Opera</span> <span>25+</span></span><span class="edge yes"><span>Edge</span> <span>13+</span></span><span class="ie_mob no"><span>IE Mobile</span> <span>None</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=picture">caniuse.com</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-picture-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-picture-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-picture-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-picture-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-picture-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-picture-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-picture-element:concept-element-content-model>コンテンツモデル</a>：<dd>1つ以上の<code id=the-picture-element:the-source-element-when-used-with-the-picture-element><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素、その後に来る1つの<code id=the-picture-element:the-img-element><a href=#the-img-element>img</a></code>要素、任意で<a id=the-picture-element:script-supporting-elements-2 href=dom.html#script-supporting-elements-2>スクリプトサポート要素</a>と混合される。<dt><a href=dom.html#concept-element-tag-omission id=the-picture-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-picture-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-picture-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dt><a href=dom.html#concept-element-dom id=the-picture-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlpictureelement>HTMLPictureElement</dfn> : <a id=the-picture-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {};</pre>
   </dl>

  <p>The <code id=the-picture-element:the-picture-element><a href=#the-picture-element>picture</a></code> element is a container
  which provides multiple sources to its contained <code id=the-picture-element:the-img-element-2><a href=#the-img-element>img</a></code> element
  to allow authors to declaratively control or give hints to the user agent about which image resource to use,
  based on the screen pixel density, <a id=the-picture-element:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a> size, image format, and other factors.
  It <a id=the-picture-element:represents href=dom.html#represents>represents</a> its children.</p>

  <p class=note><code id=the-picture-element:the-picture-element-2><a href=#the-picture-element>picture</a></code>要素は、<code id=the-picture-element:the-video-element><a href=#the-video-element>video</a></code>および<code id=the-picture-element:the-audio-element><a href=#the-audio-element>audio</a></code>要素によく似た異なる何かである。それら要素のすべてが<code id=the-picture-element:the-source-element-when-used-with-the-picture-element-2><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素を含む一方で、<code id=the-picture-element:the-source-element-when-used-with-the-picture-element-3><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素の<code id=the-picture-element:attr-source-src><a href=#attr-source-src>src</a></code>属性は、要素が<code id=the-picture-element:the-picture-element-3><a href=#the-picture-element>picture</a></code>要素内でネストされる場合に意味を持たず、リソース選択アルゴリズムは異なる。その上、<code id=the-picture-element:the-picture-element-4><a href=#the-picture-element>picture</a></code>要素自身は何も表示しない。要素は複数の<a href=infrastructure.html#url id=the-picture-element:url>URL</a>から選択する要素を有効にする 要素の含まれる<code id=the-picture-element:the-img-element-3><a href=#the-img-element>img</a></code>要素にコンテキストを単に提供する。</p>


  <h4 id=the-source-element-when-used-with-the-picture-element>4.8.3 <code id=the-source-element-when-used-with-the-picture-element:the-picture-element><a href=#the-picture-element>picture</a></code>要素とともに使用される場合の<dfn><code>source</code></dfn>要素</h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-source-element-when-used-with-the-picture-element:concept-element-categories>カテゴリー</a>：<dd><code id=the-source-element-when-used-with-the-picture-element:the-source-element><a href=#the-source-element>source</a></code>要素と同じ。<dt><a href=dom.html#concept-element-contexts id=the-source-element-when-used-with-the-picture-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><code id=the-source-element-when-used-with-the-picture-element:the-img-element><a href=#the-img-element>img</a></code>要素の前の、<code id=the-source-element-when-used-with-the-picture-element:the-picture-element-2><a href=#the-picture-element>picture</a></code>要素の子として。<dt><a href=dom.html#concept-element-content-model id=the-source-element-when-used-with-the-picture-element:concept-element-content-model>コンテンツモデル</a>：<dd><code id=the-source-element-when-used-with-the-picture-element:the-source-element-2><a href=#the-source-element>source</a></code>要素と同じ。<dt><a href=dom.html#concept-element-attributes id=the-source-element-when-used-with-the-picture-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-source-element-when-used-with-the-picture-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-srcset><a href=#attr-picture-source-srcset>srcset</a></code> - 異なる状況で使用するための画像（たとえば、高解像度ディスプレイ、小さなモニタ、など）<dd><code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-sizes><a href=#attr-picture-source-sizes>sizes</a></code> — Image sizes for different page layouts<dd><code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-media><a href=#attr-picture-source-media>media</a></code> — 受け入れ可能なメディア<dd><code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-type><a href=#attr-picture-source-type>type</a></code> — 埋め込みリソースタイプ<dt><a href=dom.html#concept-element-dom id=the-source-element-when-used-with-the-picture-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>partial interface <a href=#htmlsourceelement id=the-source-element-when-used-with-the-picture-element:htmlsourceelement>HTMLSourceElement</a> {
           attribute DOMString <a href=#dom-picture-source-srcset id=the-source-element-when-used-with-the-picture-element:dom-picture-source-srcset>srcset</a>;
           attribute DOMString <a href=#dom-picture-source-sizes id=the-source-element-when-used-with-the-picture-element:dom-picture-source-sizes>sizes</a>;
           attribute DOMString <a href=#dom-picture-source-media id=the-source-element-when-used-with-the-picture-element:dom-picture-source-media>media</a>;
};</pre>
   </dl>

  <p><code id=the-source-element-when-used-with-the-picture-element:the-source-element-when-used-with-the-picture-element><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素が親として<code id=the-source-element-when-used-with-the-picture-element:the-picture-element-3><a href=#the-picture-element>picture</a></code>要素を持つ場合、この節におけるオーサリング要求のみが適用する</p>

  <p><code id=the-source-element-when-used-with-the-picture-element:the-source-element-when-used-with-the-picture-element-2><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素は、著者に<code id=the-source-element-when-used-with-the-picture-element:the-img-element-2><a href=#the-img-element>img</a></code>要素に対する複数の代替<a href=#source-set id=the-source-element-when-used-with-the-picture-element:source-set>ソースセット</a>の指定を許可する。この要素は、自分自身で何かを<a href=dom.html#represents id=the-source-element-when-used-with-the-picture-element:represents>表す</a>ものではない。</p>

  <p><dfn id=attr-picture-source-srcset><code>srcset</code></dfn>属性は存在しなければならず、1つ以上の<a href=#image-candidate-string id=the-source-element-when-used-with-the-picture-element:image-candidate-string>画像候補文字列</a>から成らなければならず、U+002C COMMA文字（,）でそれぞれ分離される。<a href=#image-candidate-string id=the-source-element-when-used-with-the-picture-element:image-candidate-string-2>画像候補文字列</a>が記述子およびURLの後に<a href=infrastructure.html#space-character id=the-source-element-when-used-with-the-picture-element:space-character>空白文字</a>を一切含まない場合、次の<a href=#image-candidate-string id=the-source-element-when-used-with-the-picture-element:image-candidate-string-3>画像候補文字列</a>が存在するならば、1つ以上の<a href=infrastructure.html#space-character id=the-source-element-when-used-with-the-picture-element:space-character-2>空白文字</a>で開始しなければならない。</p>

  <p>If the <code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-srcset-2><a href=#attr-picture-source-srcset>srcset</a></code> attribute has any
  <a href=#image-candidate-string id=the-source-element-when-used-with-the-picture-element:image-candidate-string-4>image candidate strings</a> using a <i>width descriptor</i>,
  the <dfn id=attr-picture-source-sizes><code>sizes</code></dfn> attribute must also be present,
  and the value must be a <a href=#valid-source-size-list id=the-source-element-when-used-with-the-picture-element:valid-source-size-list>valid source size list</a>.</p>

  <p><dfn id=attr-picture-source-media><code>media</code></dfn>属性は存在してもよい。存在する場合、値は<a id=the-source-element-when-used-with-the-picture-element:valid-media-query-list href=infrastructure.html#valid-media-query-list>妥当なメディアクエリーリスト</a>でなければならない。</p>

  <p><dfn id=attr-picture-source-type><code>type</code></dfn>属性は存在してもよい。存在する場合、値は<a id=the-source-element-when-used-with-the-picture-element:valid-mime-type href=infrastructure.html#valid-mime-type>妥当なMIMEタイプ</a>でなければならない。属性が与えられた種類をサポートしない場合、次の<code id=the-source-element-when-used-with-the-picture-element:the-source-element-when-used-with-the-picture-element-3><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素にスキップするためにユーザーエージェントを許可するために、属性は<a href=#source-set id=the-source-element-when-used-with-the-picture-element:source-set-2>ソースセット</a>で画像の種類を与える。</p>

  <p class=note><code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-type-2><a href=#attr-picture-source-type>type</a></code>属性が指定され<em>ない</em>場合、ユーザーエージェントがフェッチする後で画像フォーマットをサポートしないならば、ユーザーエージェントは異なる<code id=the-source-element-when-used-with-the-picture-element:the-source-element-when-used-with-the-picture-element-4><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素を選択しないだろう。</p>

  <p><code id=the-source-element-when-used-with-the-picture-element:the-source-element-when-used-with-the-picture-element-5><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素が次の兄弟<code id=the-source-element-when-used-with-the-picture-element:the-source-element-when-used-with-the-picture-element-6><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素または指定される<code id=the-source-element-when-used-with-the-picture-element:attr-img-srcset><a href=#attr-img-srcset>srcset</a></code>属性をもつ<code id=the-source-element-when-used-with-the-picture-element:the-img-element-3><a href=#the-img-element>img</a></code>要素を持つ場合、この要素は少なくとも以下の1つを持たなければならない：</p>

  <ul><li><p><a href=infrastructure.html#strip-leading-and-trailing-whitespace id=the-source-element-when-used-with-the-picture-element:strip-leading-and-trailing-whitespace>先頭および末尾の空白を除去する</a>後で、空文字列でなくかつ<a id=the-source-element-when-used-with-the-picture-element:ascii-case-insensitive href=infrastructure.html#ascii-case-insensitive>ASCII大文字・小文字不区別</a>で文字列"<code>all</code>"にマッチしないような値で指定される<code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-media-2><a href=#attr-picture-source-media>media</a></code>属性。</li><li><p>指定される<code id=the-source-element-when-used-with-the-picture-element:attr-picture-source-type-3><a href=#attr-picture-source-type>type</a></code>属性。</li></ul>

  <p><code id=the-source-element-when-used-with-the-picture-element:attr-source-src><a href=#attr-source-src>src</a></code>属性は存在してはならない。</p>

  

  <p>IDL属性<dfn id=dom-picture-source-srcset><code>srcset</code></dfn>、<dfn id=dom-picture-source-sizes><code>sizes</code></dfn>および<dfn id=dom-picture-source-media><code>media</code></dfn>のそれぞれは、同じ名前の各コンテンツ属性を<a id=the-source-element-when-used-with-the-picture-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  


  <h4 id=the-img-element>4.8.4 <dfn><code>img</code></dfn>要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24055" title="&lt;img&gt;: Making &lt;img&gt; processing model text reusable (see comment 5)">24055</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26068" title="&lt;img&gt; Maybe avoid infinite recursion when setting src in onerror">26068</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28096" title="&lt;img&gt; Fire the loadend event (and possible progress events) for multipart/x-mixed-replace image streams">28096</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-img-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-img-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-img-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-img-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd><a id=the-img-element:form-associated-element href=forms.html#form-associated-element>フォーム関連要素</a>。<dd>要素が<code id=the-img-element:attr-hyperlink-usemap><a href=#attr-hyperlink-usemap>usemap</a></code>属性をもつ場合：<a id=the-img-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd><a id=the-img-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-img-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-img-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-img-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-img-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-img-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-img-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-img-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-img-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-img-element:attr-img-alt><a href=#attr-img-alt>alt</a></code> — 画像が利用不可である場合に使用する置換テキスト<dd><code id=the-img-element:attr-img-src><a href=#attr-img-src>src</a></code> — リソースのアドレス<dd><code id=the-img-element:attr-img-srcset><a href=#attr-img-srcset>srcset</a></code> - 異なる状況で使用するための画像（たとえば、高解像度ディスプレイ、小さなモニタ、など）<dd><code id=the-img-element:attr-img-sizes><a href=#attr-img-sizes>sizes</a></code> — Image sizes for different page layouts<dd><code id=the-img-element:attr-img-crossorigin><a href=#attr-img-crossorigin>crossorigin</a></code> — 要素がcrossorigin要求を処理する方法<dd><code id=the-img-element:attr-hyperlink-usemap-2><a href=#attr-hyperlink-usemap>usemap</a></code> — 使用する<a href=#image-map id=the-img-element:image-map>イメージマップ</a>の名前<dd><code id=the-img-element:attr-img-ismap><a href=#attr-img-ismap>ismap</a></code> — 画像がサーバ側イメージマップであるかどうか<dd><code id=the-img-element:attr-dim-width><a href=#attr-dim-width>width</a></code> — 横の次元<dd><code id=the-img-element:attr-dim-height><a href=#attr-dim-height>height</a></code> — 縦の次元<dt><a href=dom.html#concept-element-dom id=the-img-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>[NamedConstructor=<a href=#dom-image id=the-img-element:dom-image>Image</a>(optional unsigned long width, optional unsigned long height)]
interface <dfn id=htmlimageelement>HTMLImageElement</dfn> : <a id=the-img-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
           attribute DOMString <a href=#dom-img-alt id=the-img-element:dom-img-alt>alt</a>;
           attribute DOMString <a href=#dom-img-src id=the-img-element:dom-img-src>src</a>;
           attribute DOMString <a href=#dom-img-srcset id=the-img-element:dom-img-srcset>srcset</a>;
           attribute DOMString <a href=#dom-img-sizes id=the-img-element:dom-img-sizes>sizes</a>;
           attribute DOMString? <a href=#dom-img-crossorigin id=the-img-element:dom-img-crossorigin>crossOrigin</a>;
           attribute DOMString <a href=#dom-img-usemap id=the-img-element:dom-img-usemap>useMap</a>;
           attribute boolean <a href=#dom-img-ismap id=the-img-element:dom-img-ismap>isMap</a>;
           attribute unsigned long <a href=#dom-img-width id=the-img-element:dom-img-width>width</a>;
           attribute unsigned long <a href=#dom-img-height id=the-img-element:dom-img-height>height</a>;
  readonly attribute unsigned long <a href=#dom-img-naturalwidth id=the-img-element:dom-img-naturalwidth>naturalWidth</a>;
  readonly attribute unsigned long <a href=#dom-img-naturalheight id=the-img-element:dom-img-naturalheight>naturalHeight</a>;
  readonly attribute boolean <a href=#dom-img-complete id=the-img-element:dom-img-complete>complete</a>;
  readonly attribute DOMString <a href=#dom-img-currentsrc id=the-img-element:dom-img-currentsrc>currentSrc</a>;
};</pre>
   </dl>

  <p><code id=the-img-element:the-img-element><a href=#the-img-element>img</a></code>要素は画像を表す。</p>

  

  <p>親が<code id=the-img-element:the-picture-element><a href=#the-picture-element>picture</a></code>要素である場合、<dfn id=attr-img-src><code>src</code></dfn>および<dfn id=attr-img-srcset><code>srcset</code></dfn>属性、および任意の兄<code id=the-img-element:the-source-element-when-used-with-the-picture-element><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素の<code id=the-img-element:attr-picture-source-srcset><a href=#attr-picture-source-srcset>srcset</a></code>属性によって与えられる画像は、エンベティッドコンテンツである。<dfn id=attr-img-alt><code>alt</code></dfn>属性の値は、画像を処理することができないまたは読み込みが無効である画像に対して、等価なコンテンツを提供する。（すなわち、<code id=the-img-element:the-img-element-2><a href=#the-img-element>img</a></code>要素の<a id=the-img-element:fallback-content href=dom.html#fallback-content>フォールバックコンテンツ</a>である）。<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>38+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>9.0-9.2+</span></span><span class="firefox yes"><span>Firefox</span> <span>38+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android yes"><span>Android Browser</span> <span>47+</span></span><span class="safari yes"><span>Safari</span> <span>9+</span></span><span class="opera yes"><span>Opera</span> <span>25+</span></span><span class="edge yes"><span>Edge</span> <span>13+</span></span><span class="ie_mob no"><span>IE Mobile</span> <span>None</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=srcset">caniuse.com</a></div>

  <p><code id=the-img-element:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>属性の値に関する要件は、<a href=#alt>次節で</a>説明される。</p>

  <p><code id=the-img-element:attr-img-src-2><a href=#attr-img-src>src</a></code>属性は存在しなければならず、画像リソースは潜在的にページ化もスクリプト化もされていない、任意でアニメーションである、非対話型を参照する<a id=the-img-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>を含めなければならない。</p>

  <p><code id=the-img-element:attr-img-srcset-2><a href=#attr-img-srcset>srcset</a></code>属性は存在してもよい。属性が存在する場合、属性値は、U+002C COMMA文字（,）でそれぞれ分離される1つ以上の<a href=#image-candidate-string id=the-img-element:image-candidate-string>画像候補文字列</a>から成らなければならない。<a href=#image-candidate-string id=the-img-element:image-candidate-string-2>画像候補文字列</a>が記述子およびURLの後に<a href=infrastructure.html#space-character id=the-img-element:space-character>空白文字</a>を一切含まない場合、次の<a href=#image-candidate-string id=the-img-element:image-candidate-string-3>画像候補文字列</a>が存在するならば、1つ以上の<a href=infrastructure.html#space-character id=the-img-element:space-character-2>空白文字</a>で開始しなければならない。</p>

  

  <p><dfn id=image-candidate-string>画像候補文字列</dfn>は、以下のリストで説明される追加の制限とともに、順に、以下のコンポーネントから成る：</p>

  <ol><li><p>0個以上の<a href=infrastructure.html#space-character id=the-img-element:space-character-3>空白文字</a>。</li><li><p>U+002C COMMA（,）文字で開始または終了しない<a id=the-img-element:valid-non-empty-url href=infrastructure.html#valid-non-empty-url>妥当な空でないURL</a>で、非インタラクティブを参照し、任意でアニメーション、ページ化もスクリプト化もされない画像リソース。</li><li><p>0個以上の<a href=infrastructure.html#space-character id=the-img-element:space-character-4>空白文字</a>。</li><li>

    <p>次の0または1つ：</p>

    <ul><li><p><a id=the-img-element:space-character-5 href=infrastructure.html#space-character>空白文字</a>、<i>幅記述子</i> 値を表す0より大きい数値を与える<a id=the-img-element:valid-non-negative-integer href=infrastructure.html#valid-non-negative-integer>妥当な非負整数</a>、およびU+0077 LATIN SMALL LETTER W文字から成る、<i>幅記述子</i>。</li><li><p><a id=the-img-element:space-character-6 href=infrastructure.html#space-character>空白文字</a>、<i>ピクセル密度記述子</i>値を表す0より大きい数値を与える<a id=the-img-element:valid-floating-point-number href=infrastructure.html#valid-floating-point-number>妥当な浮動小数点数</a>、およびU+0078 LATIN SMALL LETTER X文字から成る、<i>ピクセル密度記述子</i>。</li></ul>

   </li><li><p>0個以上の<a href=infrastructure.html#space-character id=the-img-element:space-character-7>空白文字</a>。</li></ol>

  <p>同じ要素に対して別の<a href=#image-candidate-string id=the-img-element:image-candidate-string-5>画像候補文字列</a>の<i>幅記述子</i>値と同じ<i>幅記述子</i>値を持つ要素に対する<a href=#image-candidate-string id=the-img-element:image-candidate-string-4>画像候補文字列</a>が存在してはならない。</p>

  <p>同じ要素に対して別の<a href=#image-candidate-string id=the-img-element:image-candidate-string-7>画像候補文字列</a>の<i>ピクセル密度記述子</i>値と同じ<i>ピクセル密度記述子</i>値を持つ要素に対する<a href=#image-candidate-string id=the-img-element:image-candidate-string-6>画像候補文字列</a>が存在してはならない。この要求の目的のために、記述子をもたない<a href=#image-candidate-string id=the-img-element:image-candidate-string-8>画像候補文字列</a>は、<code>1x</code>記述子をもつ<a href=#image-candidate-string id=the-img-element:image-candidate-string-9>画像候補文字列</a>と等価である。</p>

  <p><code id=the-img-element:the-source-element-when-used-with-the-picture-element-2><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素が<code id=the-img-element:attr-picture-source-sizes><a href=#attr-picture-source-sizes>sizes</a></code>属性を存在させる、または<code id=the-img-element:the-img-element-3><a href=#the-img-element>img</a></code>が<code id=the-img-element:attr-img-sizes-2><a href=#attr-img-sizes>sizes</a></code>属性属性を存在させる場合、その要素に対するすべての<a href=#image-candidate-string id=the-img-element:image-candidate-string-10>画像候補文字列</a>は、指定される<i>幅記述子</i>を持たなければならない。</p>

  <p><code id=the-img-element:the-source-element-when-used-with-the-picture-element-3><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>または<code id=the-img-element:the-img-element-4><a href=#the-img-element>img</a></code>要素に対する<a href=#image-candidate-string id=the-img-element:image-candidate-string-11>画像候補文字列</a>は、指定される<i>幅記述子</i>を持つ場合、その要素に対するすべての他の<a href=#image-candidate-string id=the-img-element:image-candidate-string-12>画像候補文字列</a>はまた、指定される<i>幅記述子</i>を持たなければならない。</p>

  <p><a href=#image-candidate-string id=the-img-element:image-candidate-string-13>画像候補文字列</a>の<i>幅記述子</i>における指定される幅は、リソースが<a id=the-img-element:intrinsic-width-2 href=infrastructure.html#intrinsic-width>内在幅</a>を持つ場合、<a href=#image-candidate-string id=the-img-element:image-candidate-string-14>画像候補文字列</a>のURLによって指定されるリソースにおける<a id=the-img-element:intrinsic-width href=infrastructure.html#intrinsic-width>内在幅</a>にマッチしなければならない。</p>

  <p class=note>上記の要件は、画像が静的ビットマップ（たとえばPNG、GIF、JPEG）、単一ページのベクター文書（単一ページのPDF、SVGルート要素を持つXMLファイル）、アニメーションビットマップ（APNG、アニメーションGIF）、アニメーションベクターグラフィックス（宣言型SMILアニメーションを使用するSVGルート要素を持つXMLファイル）などであることを意味する。しかし、これらの定義は、スクリプトを伴うSVGファイル、複数ページのPDFファイル、インタラクティブMNGファイル、HTML文書、プレーンテキスト文書などを排除する。<a href=references.html#refsPNG>[PNG]</a> <a href=references.html#refsGIF>[GIF]</a> <a href=references.html#refsJPEG>[JPEG]</a> <a href=references.html#refsPDF>[PDF]</a> <a href=references.html#refsXML>[XML]</a> <a href=references.html#refsAPNG>[APNG]</a> <a href=references.html#refsSVG>[SVG]</a> <a href=references.html#refsMNG>[MNG]</a> </p>

  <p>If the <code id=the-img-element:attr-img-srcset-3><a href=#attr-img-srcset>srcset</a></code> attribute is present and has any
  <a href=#image-candidate-string id=the-img-element:image-candidate-string-15>image candidate strings</a> using a <i>width descriptor</i>,
  the <dfn id=attr-img-sizes><code>sizes</code></dfn> attribute must also be present,
  and the value must be a <a href=#valid-source-size-list id=the-img-element:valid-source-size-list>valid source size list</a>.</p>

  <p><dfn id=valid-source-size-list>妥当なソースサイズのリスト</dfn>は、以下の文法にマッチする文字列である：<a href=references.html#refsCSSVALUES>[CSSVALUES]</a> <a href=references.html#refsMQ>[MQ]</a></p>

<pre><dfn id=source-size-list>&lt;source-size-list&gt;</dfn> = [ <a href=source-size id=the-img-element:source-size>&lt;source-size&gt;</a># , ]? <a href=#source-size-value id=the-img-element:source-size-value>&lt;source-size-value&gt;</a>
<dfn id=source-size>&lt;source-size&gt;</dfn> = <a id=the-img-element:media-condition href=infrastructure.html#media-condition>&lt;media-condition&gt;</a> <a href=#source-size-value id=the-img-element:source-size-value-2>&lt;source-size-value&gt;</a>
<dfn id=source-size-value>&lt;source-size-value&gt;</dfn> = <a id=the-img-element:length href=infrastructure.html#length>&lt;length&gt;</a></pre>

  <p><a href=#source-size-value id=the-img-element:source-size-value-3>&lt;source-size-value&gt;</a>は負であってはならない。</p>

  <p class=note>Percentages are not allowed in a <a href=#source-size-value id=the-img-element:source-size-value-4>&lt;source-size-value&gt;</a>,
  to avoid confusion about what it would be relative to.
  The <code>vw</code> unit can be used for sizes relative to the <a id=the-img-element:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>
  width.</p>

  <p><code id=the-img-element:the-img-element-5><a href=#the-img-element>img</a></code>要素は、レイアウトツールとして使用してはならない。特に、画像はめったに意味および文書に有用なものを追加しないので、<code id=the-img-element:the-img-element-6><a href=#the-img-element>img</a></code>要素は、透明な画像を表示するために使用すべきでない。</p>

  <hr>

  <p><dfn id=attr-img-crossorigin><code>crossorigin</code></dfn>属性は<a id=the-img-element:cors-settings-attribute href=infrastructure.html#cors-settings-attribute>CORS設定属性</a>である。その目的は、クロスオリジンなアクセスに<code id=the-img-element:the-canvas-element><a href=scripting.html#the-canvas-element>canvas</a></code>とともに使用できるサードパーティのサイトからの画像を許可することである。</p>

  

  <hr>

  <p>An <code id=the-img-element:the-img-element-7><a href=#the-img-element>img</a></code> element has a <dfn id=current-request>current request</dfn> and a <dfn id=pending-request>pending request</dfn>.
  The <a href=#current-request id=the-img-element:current-request>current request</a> is initially set to a new <a href=#image-request id=the-img-element:image-request>image request</a>.
  The <a href=#pending-request id=the-img-element:pending-request>pending request</a> is initially set to null.
  The <a href=#current-request id=the-img-element:current-request-2>current request</a> is usually referred to as the <code id=the-img-element:the-img-element-8><a href=#the-img-element>img</a></code> element itself.<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27484" title="&lt;img&gt; How should .complete interact with pending requests?">27484</a></div>

  <p>An <dfn id=image-request>image request</dfn> has a <dfn id=img-req-state>state</dfn>, <dfn id=img-req-url>current URL</dfn> and <dfn id=img-req-data>image data</dfn>.</p>

  <p>An <a href=#image-request id=the-img-element:image-request-2>image request</a>'s <a href=#img-req-state id=the-img-element:img-req-state>state</a> is one of the following:</p>

  <dl><dt><dfn id=img-none>Unavailable</dfn><dd>The user agent hasn't obtained any image data,
   or has obtained some or all of the image data but
   hasn't yet decoded enough of the image to get the image dimensions.<dt><dfn id=img-inc>Partially available</dfn><dd>The user agent has obtained some of the image data and at least the image dimensions are
   available.<dt><dfn id=img-all>Completely available</dfn><dd>The user agent has obtained all of the image data and at least the image dimensions are
   available.<dt><dfn id=img-error>Broken</dfn><dd>The user agent has obtained all of the image data that it can, but it cannot even decode the
   image enough to get the image dimensions (e.g. the image is corrupted, or the format is not
   supported, or no data could be obtained).</dl>

  <p>An <a href=#image-request id=the-img-element:image-request-3>image request</a>'s <a href=#img-req-url id=the-img-element:img-req-url>current URL</a> is initially the empty string.</p>

  <p>An <a href=#image-request id=the-img-element:image-request-4>image request</a>'s <a href=#img-req-data id=the-img-element:img-req-data>image data</a> is the decoded image data.</p>

  <p>When an <a href=#image-request id=the-img-element:image-request-5>image request</a> is either in the <a href=#img-inc id=the-img-element:img-inc>partially
  available</a> state or in the <a href=#img-all id=the-img-element:img-all>completely available</a> state, it is
  said to be <dfn id=img-available>available</dfn>.</p>

  <p>An <a href=#image-request id=the-img-element:image-request-6>image request</a> is initially <a href=#img-none id=the-img-element:img-none>unavailable</a>.</p>

  <p>When an <code id=the-img-element:the-img-element-9><a href=#the-img-element>img</a></code> element is <a href=#img-available id=the-img-element:img-available>available</a>,
  it <a id=the-img-element:provides-a-paint-source href=infrastructure.html#provides-a-paint-source>provides a paint source</a>
  whose width is the image's <a href=#density-corrected-intrinsic-width-and-height id=the-img-element:density-corrected-intrinsic-width-and-height>density-corrected intrinsic width</a> (if any),
  whose height is the image's <a href=#density-corrected-intrinsic-width-and-height id=the-img-element:density-corrected-intrinsic-width-and-height-2>density-corrected intrinsic height</a> (if any),
  and whose appearance is the intrinsic appearance of the image.</p>

  <p>In a <a id=the-img-element:browsing-context href=browsers.html#browsing-context>browsing context</a> where <a href=webappapis.html#concept-bc-noscript id=the-img-element:concept-bc-noscript>scripting is
  disabled</a>, user agents may obtain images immediately or on demand. In a <a id=the-img-element:browsing-context-2 href=browsers.html#browsing-context>browsing
  context</a> where <a href=webappapis.html#concept-bc-noscript id=the-img-element:concept-bc-noscript-2>scripting is enabled</a>, user agents
  must obtain images immediately.</p>

  <p>A user agent that obtains images immediately must synchronously
  <a href=#update-the-image-data id=the-img-element:update-the-image-data>update the image data</a> of an <code id=the-img-element:the-img-element-10><a href=#the-img-element>img</a></code> element,
  with the <i>restart animation</i> flag set if so stated,
  whenever that element is created or has experienced <a href=#relevant-mutations id=the-img-element:relevant-mutations>relevant mutations</a>.</p>

  <p>A user agent that obtains images on demand must <a href=#update-the-image-data id=the-img-element:update-the-image-data-2>update the image data</a> of an
  <code id=the-img-element:the-img-element-11><a href=#the-img-element>img</a></code> element whenever it needs the image data (i.e. on demand),
  but only if the <code id=the-img-element:the-img-element-12><a href=#the-img-element>img</a></code> element is in the
  <a href=#img-none id=the-img-element:img-none-2>unavailable</a> state. When an <code id=the-img-element:the-img-element-13><a href=#the-img-element>img</a></code> element
  has experienced <a href=#relevant-mutations id=the-img-element:relevant-mutations-2>relevant mutations</a>, if the user
  agent only obtains images on demand, the <code id=the-img-element:the-img-element-14><a href=#the-img-element>img</a></code> element must return to the <a href=#img-none id=the-img-element:img-none-3>unavailable</a> state.</p>

  <p>The <dfn id=relevant-mutations>relevant mutations</dfn> for an <code id=the-img-element:the-img-element-15><a href=#the-img-element>img</a></code> element are as follows:</p>

  <ul><li><p>The element's <code id=the-img-element:attr-img-src-3><a href=#attr-img-src>src</a></code>, <code id=the-img-element:attr-img-srcset-4><a href=#attr-img-srcset>srcset</a></code>, <code id=the-img-element:attr-dim-width-2><a href=#attr-dim-width>width</a></code>, or <code id=the-img-element:attr-img-sizes-3><a href=#attr-img-sizes>sizes</a></code> attributes are set, changed, or removed.</li><li><p>The element's <code id=the-img-element:attr-img-src-4><a href=#attr-img-src>src</a></code> attribute is set to the same value as the previous value.
   This must set the <i>restart animation</i> flag for the <a href=#update-the-image-data id=the-img-element:update-the-image-data-3>update the image data</a> algorithm.</li><li><p>The element's <code id=the-img-element:attr-img-crossorigin-2><a href=#attr-img-crossorigin>crossorigin</a></code> attribute's state is changed.</li><li><p>The <a href=infrastructure.html#nodes-are-inserted id=the-img-element:nodes-are-inserted>element is inserted</a> into or
   <a href=infrastructure.html#nodes-are-removed id=the-img-element:nodes-are-removed>removed</a> from a <code id=the-img-element:the-picture-element-2><a href=#the-picture-element>picture</a></code> parent element.</li><li><p>The element's parent is a <code id=the-img-element:the-picture-element-3><a href=#the-picture-element>picture</a></code> element and a
   <code id=the-img-element:the-source-element-when-used-with-the-picture-element-4><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> <a href=infrastructure.html#nodes-are-inserted id=the-img-element:nodes-are-inserted-2>element is inserted</a> as a previous sibling.</li><li><p>The element's parent is a <code id=the-img-element:the-picture-element-4><a href=#the-picture-element>picture</a></code> element and a
   <code id=the-img-element:the-source-element-when-used-with-the-picture-element-5><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> element that was a previous sibling is <a href=infrastructure.html#nodes-are-removed id=the-img-element:nodes-are-removed-2>removed</a>.</li><li><p>The element's parent is a <code id=the-img-element:the-picture-element-5><a href=#the-picture-element>picture</a></code> element and a
   <code id=the-img-element:the-source-element-when-used-with-the-picture-element-6><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> element that is a previous sibling has its
   <code id=the-img-element:attr-picture-source-srcset-2><a href=#attr-picture-source-srcset>srcset</a></code>,
   <code id=the-img-element:attr-picture-source-sizes-2><a href=#attr-picture-source-sizes>sizes</a></code>,
   <code id=the-img-element:attr-picture-source-media><a href=#attr-picture-source-media>media</a></code>
   or <code id=the-img-element:attr-picture-source-type><a href=#attr-picture-source-type>type</a></code> attributes set, changed, or removed.</li><li><p>The element's <a href=https://dom.spec.whatwg.org/#concept-node-adopt-ext id=the-img-element:concept-node-adopt-ext data-x-internal=concept-node-adopt-ext>adopting steps</a> are run.</li></ul>

  <p>Each <code id=the-img-element:the-img-element-16><a href=#the-img-element>img</a></code> element has a <dfn id=last-selected-source>last selected source</dfn>, which must initially be
  null.</p>

  <p>Each <a href=#image-request id=the-img-element:image-request-7>image request</a> has a <dfn id=current-pixel-density>current pixel density</dfn>, which must initially be undefined.</p>

  <p>When an <code id=the-img-element:the-img-element-17><a href=#the-img-element>img</a></code> element has a <a href=#current-pixel-density id=the-img-element:current-pixel-density>current pixel density</a> that is not 1.0, the
  element's image data must be treated as if its resolution, in device pixels per CSS pixels, was
  the <a href=#current-pixel-density id=the-img-element:current-pixel-density-2>current pixel density</a>.
  The image's <dfn id=density-corrected-intrinsic-width-and-height>density-corrected intrinsic width and height</dfn> are the <a href=https://drafts.csswg.org/css2/conform.html#intrinsic id=the-img-element:intrinsic-dimensions data-x-internal=intrinsic-dimensions>intrinsic width and height</a>
  after taking into account the <a href=#current-pixel-density id=the-img-element:current-pixel-density-3>current pixel density</a>.</p>

  <p class=example>For example, if the <a href=#current-pixel-density id=the-img-element:current-pixel-density-4>current pixel density</a> is 3.125, that means
  that there are 300 device pixels per CSS inch, and thus if the image data is 300x600, it has
  <a id=the-img-element:intrinsic-dimensions-2 href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> of 96 CSS pixels by 192 CSS pixels.</p>

  <p>Each <code id=the-img-element:document><a href=dom.html#document>Document</a></code> object must have a <dfn id=list-of-available-images>list of available images</dfn>. Each image
  in this list is identified by a tuple consisting of an <a id=the-img-element:absolute-url href=infrastructure.html#absolute-url>absolute URL</a>, a <a id=the-img-element:cors-settings-attribute-2 href=infrastructure.html#cors-settings-attribute>CORS
  settings attribute</a> mode, and, if the mode is not <a href=infrastructure.html#attr-crossorigin-none id=the-img-element:attr-crossorigin-none>No
  CORS</a>, an <a id=the-img-element:origin-2 href=browsers.html#origin-2>origin</a>.
  Each image furthermore has an <dfn id=ignore-higher-layer-caching>ignore higher-layer caching</dfn> flag.
  User agents may copy entries from one <code id=the-img-element:document-2><a href=dom.html#document>Document</a></code>
  object's <a href=#list-of-available-images id=the-img-element:list-of-available-images>list of available images</a> to another at any time (e.g. when the
  <code id=the-img-element:document-3><a href=dom.html#document>Document</a></code> is created, user agents can add to it all the images that are loaded in
  other <code id=the-img-element:document-4><a href=dom.html#document>Document</a></code>s), but must not change the keys of entries copied in this way when
  doing so, and must unset the <a href=#ignore-higher-layer-caching id=the-img-element:ignore-higher-layer-caching>ignore higher-layer caching</a> flag for the copied entry.
  User agents may also remove images from such lists at any time (e.g. to save
  memory).
  User agents must remove entries in the <a href=#list-of-available-images id=the-img-element:list-of-available-images-2>list of available images</a> as appropriate
  given higher-layer caching semantics for the resource (e.g. the HTTP `<code>Cache-Control</code>` response header) when the <a href=#ignore-higher-layer-caching id=the-img-element:ignore-higher-layer-caching-2>ignore higher-layer caching</a>
  flag is unset.</p>

  <p class=note>The <a href=#list-of-available-images id=the-img-element:list-of-available-images-3>list of available images</a> is intended to enable synchronous
  switching when changing the <code id=the-img-element:attr-img-src-5><a href=#attr-img-src>src</a></code> attribute to a URL that has
  previously been loaded, and to avoid re-downloading images in the same document even when they
  don't allow caching per HTTP. It is not used to avoid re-downloading the same image while the
  previous image is still loading.</p>

  <p class=note>The user agent can also store the image data separately from the <a href=#list-of-available-images id=the-img-element:list-of-available-images-4>list of available images</a>.</p>

  <p class=example>For example, if a resource has the HTTP response header
  `<code>Cache-Control: must-revalidate</code>`, and its <a href=#ignore-higher-layer-caching id=the-img-element:ignore-higher-layer-caching-3>ignore higher-layer
  caching</a> flag is unset, the user agent would remove it from the <a href=#list-of-available-images id=the-img-element:list-of-available-images-5>list of available
  images</a> but could keep the image data separately, and use that if the server responds with a
  <code>304 Not Modified</code> status.</p>

  <p>When the user agent is to <dfn id=update-the-image-data>update the image data</dfn> of an <code id=the-img-element:the-img-element-18><a href=#the-img-element>img</a></code> element,
  optionally with the <i>restart animations</i> flag set,
  it must run the following steps:<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24597" title="Maybe make the &lt;img&gt; fetch outlive the document (like ping)">24597</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24712" title="&lt;img&gt;: Should probably not fire load if selected source is the same as the last selected source. (step 7.3)">24712</a></div>

  <ol><li>

    <p>If the element's <a id=the-img-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is not the <a id=the-img-element:active-document href=browsers.html#active-document>active document</a>,
    then run these substeps:</p>

    <ol><li><p>Continue running this algorithm <a id=the-img-element:in-parallel href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Wait until the element's <a id=the-img-element:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is the <a id=the-img-element:active-document-2 href=browsers.html#active-document>active document</a>.</li><li><p>If another instance of this algorithm for this <code id=the-img-element:the-img-element-19><a href=#the-img-element>img</a></code> element was started after this instance
     (even if it aborted and is no longer running), then abort these steps.</li><li><p><a id=the-img-element:queue-a-microtask href=webappapis.html#queue-a-microtask>Queue a microtask</a> to continue this algorithm.</li></ol>

   </li><li><p>If the user agent cannot support images, or its support for images has been disabled, then
   <a href=#abort-the-image-request id=the-img-element:abort-the-image-request>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-3>current request</a> and the <a href=#pending-request id=the-img-element:pending-request-2>pending request</a>,
   set <a href=#current-request id=the-img-element:current-request-4>current request</a> to the <a href=#img-none id=the-img-element:img-none-4>unavailable</a> state,
   let <a href=#pending-request id=the-img-element:pending-request-3>pending request</a> be null,
   and abort these steps.</li><li>

    <p>If the element does not <a href=#use-srcset-or-picture id=the-img-element:use-srcset-or-picture>use <code>srcset</code> or <code>picture</code></a>,
    and it has a <code id=the-img-element:attr-img-src-6><a href=#attr-img-src>src</a></code> attribute specified and
    its value is not the empty string, let <var>selected source</var> be the value of the
    element's <code id=the-img-element:attr-img-src-7><a href=#attr-img-src>src</a></code> attribute, and <var>selected pixel
    density</var> be 1.0. Otherwise, let <var>selected source</var> be null and <var>selected pixel density</var> be undefined.</p>

   </li><li><p>Let the <code id=the-img-element:the-img-element-20><a href=#the-img-element>img</a></code> element's <a href=#last-selected-source id=the-img-element:last-selected-source>last selected source</a> be <var>selected source</var>.</li><li>

    <p>If <var>selected source</var> is not null, run these substeps:</p>

    <ol><li><p><a href=infrastructure.html#parse-a-url id=the-img-element:parse-a-url>Parse</a> <var>selected source</var>, relative to the
     element's <a id=the-img-element:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>. If that is not successful, then abort this inner set of
     steps. Otherwise, let <var>urlString</var> be the <a id=the-img-element:resulting-url-string href=infrastructure.html#resulting-url-string>resulting URL string</a>.</li><li><p>Let <var>key</var> be a tuple consisting of <var>urlString</var>, the <code id=the-img-element:the-img-element-21><a href=#the-img-element>img</a></code>
     element's <code id=the-img-element:attr-img-crossorigin-3><a href=#attr-img-crossorigin>crossorigin</a></code> attribute's mode, and, if that
     mode is not <a href=infrastructure.html#attr-crossorigin-none id=the-img-element:attr-crossorigin-none-2>No CORS</a>, the <a id=the-img-element:node-document-4 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
     document</a>'s <a id=the-img-element:origin-2-2 href=browsers.html#origin-2>origin</a>.</li><li>

      <p>If the <a href=#list-of-available-images id=the-img-element:list-of-available-images-6>list of available images</a> contains an entry for <var>key</var>, run
      these subsubsteps:</p>

      <ol><li><p>Set the <a href=#ignore-higher-layer-caching id=the-img-element:ignore-higher-layer-caching-4>ignore higher-layer caching</a> flag for that entry.</li><li><p><a href=#abort-the-image-request id=the-img-element:abort-the-image-request-2>Abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-5>current request</a> and the
        <a href=#pending-request id=the-img-element:pending-request-4>pending request</a>.</li><li><p>Let <a href=#pending-request id=the-img-element:pending-request-5>pending request</a> be null.</li><li><p>Let <a href=#current-request id=the-img-element:current-request-6>current request</a> be a new <a href=#image-request id=the-img-element:image-request-8>image request</a> whose <a href=#img-req-data id=the-img-element:img-req-data-2>image data</a> is that of the entry and whose state is set to the
        <a href=#img-all id=the-img-element:img-all-2>completely available</a> state.</li><li><p>Update the presentation of the image appropriately.</li><li><p>Let the <a href=#current-request id=the-img-element:current-request-7>current request</a>'s <a href=#current-pixel-density id=the-img-element:current-pixel-density-5>current pixel density</a> be
        <var>selected pixel density</var>.</li><li><p><a id=the-img-element:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a id=the-img-element:restart-the-animation href=rendering.html#restart-the-animation>restart the animation</a> if <i>restart
        animation</i> is set, change <a href=#current-request id=the-img-element:current-request-8>current request</a>'s <a href=#img-req-url id=the-img-element:img-req-url-2>current URL</a> to <var>urlString</var>, and then <a id=the-img-element:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a
        simple event</a> named <code id=the-img-element:event-load><a href=indices.html#event-load>load</a></code> at the <code id=the-img-element:the-img-element-22><a href=#the-img-element>img</a></code>
        element.</li><li><p>Abort the <a href=#update-the-image-data id=the-img-element:update-the-image-data-4>update the image data</a> algorithm.</li></ol>

     </li></ol>

   </li><li><p><a id=the-img-element:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>, allowing the <a href=webappapis.html#concept-task id=the-img-element:concept-task>task</a> that invoked this algorithm to continue.
   The <a id=the-img-element:synchronous-section href=webappapis.html#synchronous-section>synchronous
   section</a> consists of all the remaining steps of this algorithm until the algorithm says the
   <a id=the-img-element:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=the-img-element:synchronous-section-3>synchronous sections</a> are marked with ⌛.)</li><li>

    <p>⌛ If another instance of this algorithm for this <code id=the-img-element:the-img-element-23><a href=#the-img-element>img</a></code> element was started
    after this instance (even if it aborted and is no longer running), then abort these steps.</p>

    <p class=note>Only the last instance takes effect, to avoid multiple requests when, for
    example, the <code id=the-img-element:attr-img-src-8><a href=#attr-img-src>src</a></code>, <code id=the-img-element:attr-img-srcset-5><a href=#attr-img-srcset>srcset</a></code>,
    and <code id=the-img-element:attr-img-crossorigin-4><a href=#attr-img-crossorigin>crossorigin</a></code> attributes are all set in
    succession.</p>

   </li><li>

    <p>⌛ Let <var>selected source</var> and <var>selected pixel density</var> be the
    URL and pixel density that results from <a href=#select-an-image-source id=the-img-element:select-an-image-source>selecting an image source</a>,
    respectively.</p>

   </li><li>

    <p>⌛ If <var>selected source</var> is null, run these substeps:</p>

    <ol><li><p>⌛ Set the <a href=#current-request id=the-img-element:current-request-9>current request</a> to the <a href=#img-error id=the-img-element:img-error>broken</a> state,
     <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-3>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-10>current request</a> and the <a href=#pending-request id=the-img-element:pending-request-6>pending request</a>,
     and let <a href=#pending-request id=the-img-element:pending-request-7>pending request</a> be null.</li><li><p>⌛ <a id=the-img-element:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to change the <a href=#current-request id=the-img-element:current-request-11>current request</a>'s <a href=#img-req-url id=the-img-element:img-req-url-3>current URL</a> to the empty string, and then, if the element has a
     <code id=the-img-element:attr-img-src-9><a href=#attr-img-src>src</a></code> attribute or it <a href=#use-srcset-or-picture id=the-img-element:use-srcset-or-picture-2>uses <code>srcset</code> or <code>picture</code></a>, <a id=the-img-element:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple
     event</a> named <code id=the-img-element:event-error><a href=indices.html#event-error>error</a></code> at the <code id=the-img-element:the-img-element-24><a href=#the-img-element>img</a></code>
     element.</li><li><p>⌛ Abort this algorithm.</li></ol>

   </li><li>

    <p>⌛ <a id=the-img-element:queue-a-task-3 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=the-img-element:fire-a-progress-event href=infrastructure.html#fire-a-progress-event>fire a progress event</a> named <code id=the-img-element:event-loadstart><a href=indices.html#event-loadstart>loadstart</a></code> at
    the <code id=the-img-element:the-img-element-25><a href=#the-img-element>img</a></code> element.</p>

   </li><li>

    <p>⌛ <a href=infrastructure.html#parse-a-url id=the-img-element:parse-a-url-2>Parse</a> <var>selected source</var>, relative to the
    element's <a id=the-img-element:node-document-5 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>, and let <var>urlString</var> be the <a id=the-img-element:resulting-url-string-2 href=infrastructure.html#resulting-url-string>resulting URL
    string</a>. If that is not successful, run these substeps:</p>

    <ol><li><p>⌛ <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-4>Abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-12>current request</a> and
     the <a href=#pending-request id=the-img-element:pending-request-8>pending request</a>.</li><li><p>⌛ Set the <a href=#current-request id=the-img-element:current-request-13>current request</a> to the <a href=#img-error id=the-img-element:img-error-2>broken</a> state.</li><li><p>⌛ Let <a href=#pending-request id=the-img-element:pending-request-9>pending request</a> be null.</li><li><p>⌛ <a id=the-img-element:queue-a-task-4 href=webappapis.html#queue-a-task>Queue a task</a> to change the <a href=#current-request id=the-img-element:current-request-14>current request</a>'s <a href=#img-req-url id=the-img-element:img-req-url-4>current URL</a> to <var>selected source</var>, <a id=the-img-element:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple
     event</a> named <code id=the-img-element:event-error-2><a href=indices.html#event-error>error</a></code> at the <code id=the-img-element:the-img-element-26><a href=#the-img-element>img</a></code> element and
     then <a id=the-img-element:fire-a-simple-event-4 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-img-element:event-loadend><a href=indices.html#event-loadend>loadend</a></code> at the
     <code id=the-img-element:the-img-element-27><a href=#the-img-element>img</a></code> element.</li><li><p>⌛ Abort the <a href=#update-the-image-data id=the-img-element:update-the-image-data-5>update the image data</a> algorithm.</li></ol>

   </li><li>

    <p>⌛ If the <a href=#pending-request id=the-img-element:pending-request-10>pending request</a> is not null,
    and <var>urlString</var> is the same as the <a href=#pending-request id=the-img-element:pending-request-11>pending request</a>'s <a href=#img-req-url id=the-img-element:img-req-url-5>current URL</a>,
    then abort these steps.</p>

    <p>⌛ If <var>urlString</var> is the same as the <a href=#current-request id=the-img-element:current-request-15>current request</a>'s <a href=#img-req-url id=the-img-element:img-req-url-6>current URL</a>,
    and <a href=#current-request id=the-img-element:current-request-16>current request</a> is in the <a href=#img-inc id=the-img-element:img-inc-2>partially available</a> state,
    then <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-5>abort the image request</a> for the <a href=#pending-request id=the-img-element:pending-request-12>pending request</a>,
    <a id=the-img-element:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to <a id=the-img-element:restart-the-animation-2 href=rendering.html#restart-the-animation>restart the animation</a> if <i>restart animation</i> is set,
    and abort these steps.</p>

    <p>⌛ If the <a href=#pending-request id=the-img-element:pending-request-13>pending request</a> is not null,
    <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-6>abort the image request</a> for the <a href=#pending-request id=the-img-element:pending-request-14>pending request</a>.</p>

    <p>⌛ Let <var>image request</var> be a new <a href=#image-request id=the-img-element:image-request-9>image request</a>
    whose <a href=#img-req-url id=the-img-element:img-req-url-7>current URL</a> is <var>urlString</var>.</p>

    <p>⌛ If <a href=#current-request id=the-img-element:current-request-17>current request</a> is in the <a href=#img-none id=the-img-element:img-none-5>unavailable</a> state
    or the <a href=#img-error id=the-img-element:img-error-3>broken</a> state,
    let the <a href=#current-request id=the-img-element:current-request-18>current request</a> be <var>image request</var>.
    Otherwise, let the <a href=#pending-request id=the-img-element:pending-request-15>pending request</a> be <var>image request</var>.</p>

    <p>⌛ Let <var>request</var> be the result of <a href=infrastructure.html#create-a-potential-cors-request id=the-img-element:create-a-potential-cors-request>creating a potential-CORS request</a> given
    <var>urlString</var> and the current state of the element's <code id=the-img-element:attr-img-crossorigin-5><a href=#attr-img-crossorigin>crossorigin</a></code> content attribute.</p>

    <p>⌛ Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=the-img-element:concept-request-client data-x-internal=concept-request-client>client</a> to the
    element's <a id=the-img-element:node-document-6 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <code id=the-img-element:window><a href=browsers.html#window>Window</a></code> object's <a id=the-img-element:environment-settings-object href=webappapis.html#environment-settings-object>environment settings
    object</a> and <a href=https://fetch.spec.whatwg.org/#concept-request-type id=the-img-element:concept-request-type data-x-internal=concept-request-type>type</a> to "<code>image</code>".</p>

    <p>⌛ If the element <a href=#use-srcset-or-picture id=the-img-element:use-srcset-or-picture-3>uses <code>srcset</code> or
    <code>picture</code></a>, set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-initiator id=the-img-element:concept-request-initiator data-x-internal=concept-request-initiator>initiator</a> to "<code>imageset</code>".</p>

    <p>⌛ Set <var>request</var>'s <a id=the-img-element:same-origin-data-url-flag href=https://fetch.spec.whatwg.org/#same-origin-data-url-flag data-x-internal=same-origin-data-url-flag>same-origin data-URL flag</a>.</p>

    <p>⌛ <a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-img-element:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>. Let this
    instance of the <a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-img-element:concept-fetch-2 data-x-internal=concept-fetch>fetching</a> algorithm be associated with
    <var>image request</var>.</p>

    <p>The resource obtained in this fashion, if any, is <var>image request</var>'s <a href=#img-req-data id=the-img-element:img-req-data-3>image data</a>.
    It can be either <a id=the-img-element:cors-same-origin href=infrastructure.html#cors-same-origin>CORS-same-origin</a> or <a id=the-img-element:cors-cross-origin href=infrastructure.html#cors-cross-origin>CORS-cross-origin</a>; this affects
    the <a id=the-img-element:origin-2-3 href=browsers.html#origin-2>origin</a> of the image itself (e.g. when used on a <code id=the-img-element:the-canvas-element-2><a href=scripting.html#the-canvas-element>canvas</a></code>).</p>

    
    <p>Fetching the image must <a id=the-img-element:delay-the-load-event href=syntax.html#delay-the-load-event>delay the load event</a> of the element's <a id=the-img-element:node-document-7 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> until the
    <a href=webappapis.html#concept-task id=the-img-element:concept-task-2>task</a> that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-6>queued</a> by the
    <a id=the-img-element:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> once the resource has been fetched (<a href=#img-load>defined below</a>) has been run.
    
    </p>

    <p class=warning>This, unfortunately, can be used to perform a rudimentary port scan of the
    user's local network (especially in conjunction with scripting, though scripting isn't actually
    necessary to carry out such an attack). User agents may implement <a href=browsers.html#origin-2 id=the-img-element:origin-2-4>cross-origin</a> access control policies that are stricter than those
    described above to mitigate this attack, but unfortunately such policies are typically not
    compatible with existing Web content.</p>

    <p>If the resource is <a id=the-img-element:cors-same-origin-2 href=infrastructure.html#cors-same-origin>CORS-same-origin</a>, each <a href=webappapis.html#concept-task id=the-img-element:concept-task-3>task</a>
    that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-7>queued</a> by the <a id=the-img-element:networking-task-source-2 href=webappapis.html#networking-task-source>networking task source</a>
    while the image is being fetched, if <var>image request</var> is the <a href=#current-request id=the-img-element:current-request-19>current
    request</a>, must <a id=the-img-element:fire-a-progress-event-2 href=infrastructure.html#fire-a-progress-event>fire a progress event</a> named <code id=the-img-element:event-progress><a href=indices.html#event-progress>progress</a></code> at the <code id=the-img-element:the-img-element-28><a href=#the-img-element>img</a></code> element.</p>

   </li><li><p>End the <a id=the-img-element:synchronous-section-4 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps <a id=the-img-element:in-parallel-2 href=infrastructure.html#in-parallel>in
   parallel</a>, but without missing any data from fetching.</li><li>

    <p>As soon as possible, jump to the first applicable entry from the following list:</p>

    <dl class=switch><dt>If the resource type is <code id=the-img-element:multipart/x-mixed-replace><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code><dd>

      <p>The next <a href=webappapis.html#concept-task id=the-img-element:concept-task-4>task</a> that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-8>queued</a> by the <a id=the-img-element:networking-task-source-3 href=webappapis.html#networking-task-source>networking task source</a> while the image is being
      fetched must run the following steps:</p>

      <ol><li>

        <p>If <var>image request</var> is the <a href=#pending-request id=the-img-element:pending-request-16>pending request</a>
        and at least one body part has been completely decoded,
        <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-7>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-20>current request</a>,
        <a href=#upgrade-the-pending-request-to-the-current-request id=the-img-element:upgrade-the-pending-request-to-the-current-request>upgrade the pending request to the current request</a>.</p>

       </li><li>

        <p>Otherwise, if <var>image request</var> is the <a href=#pending-request id=the-img-element:pending-request-17>pending request</a>
        and the user agent is able to determine that <var>image request</var>'s image
        is corrupted in some fatal way such that the image dimensions cannot be obtained,
        <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-8>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-21>current request</a>,
        <a href=#upgrade-the-pending-request-to-the-current-request id=the-img-element:upgrade-the-pending-request-to-the-current-request-2>upgrade the pending request to the current request</a>
        and set the <a href=#current-request id=the-img-element:current-request-22>current request</a>'s state to <a href=#img-error id=the-img-element:img-error-4>broken</a>.</p>

       </li><li>

        <p>Otherwise, if <var>image request</var> is the <a href=#current-request id=the-img-element:current-request-23>current request</a>,
        it is in the <a href=#img-none id=the-img-element:img-none-6>unavailable</a> state,
        and the user agent is able to determine <var>image request</var>'s image's width and height,
        set the <a href=#current-request id=the-img-element:current-request-24>current request</a>'s state to <a href=#img-inc id=the-img-element:img-inc-3>partially available</a>.</p>

       </li><li>

        <p>Otherwise, if <var>image request</var> is the <a href=#current-request id=the-img-element:current-request-25>current request</a>,
        it is in the <a href=#img-none id=the-img-element:img-none-7>unavailable</a> state,
        and the user agent is able to determine that <var>image request</var>'s image
        is corrupted in some fatal way such that the image dimensions cannot be obtained,
        set the <a href=#current-request id=the-img-element:current-request-26>current request</a>'s state to <a href=#img-error id=the-img-element:img-error-5>broken</a>.
        
        </p>

       </li></ol>

      <p>Each <a href=webappapis.html#concept-task id=the-img-element:concept-task-5>task</a> that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-9>queued</a> by the <a id=the-img-element:networking-task-source-4 href=webappapis.html#networking-task-source>networking task source</a> while the image is being
      fetched must update the presentation of the image, but as each new body part comes in, it must
      replace the previous image. Once one body part has been completely decoded, the user agent
      must set the <code id=the-img-element:the-img-element-29><a href=#the-img-element>img</a></code> element to the <a href=#img-all id=the-img-element:img-all-3>completely
      available</a> state and <a id=the-img-element:queue-a-task-10 href=webappapis.html#queue-a-task>queue a task</a> to <a id=the-img-element:fire-a-simple-event-5 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named
      <code id=the-img-element:event-load-2><a href=indices.html#event-load>load</a></code> at the <code id=the-img-element:the-img-element-30><a href=#the-img-element>img</a></code> element.  </p>

      <p class=note>The <code id=the-img-element:event-progress-2><a href=indices.html#event-progress>progress</a></code> and <code id=the-img-element:event-loadend-2><a href=indices.html#event-loadend>loadend</a></code> events are not fired for
      <code id=the-img-element:multipart/x-mixed-replace-2><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code> image streams.</p>

     <dt>If the resource type and data corresponds to a supported image format, <a href=#img-determine-type>as described below</a><dd>

      <p>The next <a href=webappapis.html#concept-task id=the-img-element:concept-task-6>task</a> that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-11>queued</a> by the <a id=the-img-element:networking-task-source-5 href=webappapis.html#networking-task-source>networking task source</a> while the image is being
      fetched must run the following steps:</p>

      <ol><li>

        <p>If the user agent is able to determine <var>image request</var>'s image's width and height,
        and <var>image request</var> is <a href=#pending-request id=the-img-element:pending-request-18>pending request</a>,
        set <var>image request</var>'s state to <a href=#img-inc id=the-img-element:img-inc-4>partially available</a>.</p>

       </li><li>

        <p>Otherwise, if the user agent is able to determine <var>image request</var>'s image's width and height,
        and <var>image request</var> is <a href=#current-request id=the-img-element:current-request-27>current request</a>,
        update the <code id=the-img-element:the-img-element-31><a href=#the-img-element>img</a></code> element's presentation appropriately
        and set <var>image request</var>'s state to <a href=#img-inc id=the-img-element:img-inc-5>partially available</a>.</p>

       </li><li>

        <p>Otherwise, if the user agent is able to determine that <var>image request</var>'s image
        is corrupted in some fatal way such that the image dimensions cannot be obtained,
        and <var>image request</var> is <a href=#pending-request id=the-img-element:pending-request-19>pending request</a>,
        <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-9>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-28>current request</a> and the <a href=#pending-request id=the-img-element:pending-request-20>pending request</a>,
        <a href=#upgrade-the-pending-request-to-the-current-request id=the-img-element:upgrade-the-pending-request-to-the-current-request-3>upgrade the pending request to the current request</a>,
        set <a href=#current-request id=the-img-element:current-request-29>current request</a> to the <a href=#img-error id=the-img-element:img-error-6>broken</a> state,
        <a id=the-img-element:fire-a-simple-event-6 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-img-element:event-error-3><a href=indices.html#event-error>error</a></code> at the <code id=the-img-element:the-img-element-32><a href=#the-img-element>img</a></code> element,
        <a id=the-img-element:fire-a-simple-event-7 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-img-element:event-loadend-3><a href=indices.html#event-loadend>loadend</a></code> at the <code id=the-img-element:the-img-element-33><a href=#the-img-element>img</a></code> element,
        and abort these steps.</p>

       </li><li>

        <p>Otherwise, if the user agent is able to determine that <var>image request</var>'s image
        is corrupted in some fatal way such that the image dimensions cannot be obtained,
        and <var>image request</var> is <a href=#current-request id=the-img-element:current-request-30>current request</a>,
        <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-10>abort the image request</a> for <var>image request</var>,
        <a id=the-img-element:fire-a-simple-event-8 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-img-element:event-error-4><a href=indices.html#event-error>error</a></code> at the <code id=the-img-element:the-img-element-34><a href=#the-img-element>img</a></code> element,
        <a id=the-img-element:fire-a-simple-event-9 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-img-element:event-loadend-4><a href=indices.html#event-loadend>loadend</a></code> at the <code id=the-img-element:the-img-element-35><a href=#the-img-element>img</a></code> element,
        and abort these steps.</p>

       </li></ol>

      <p id=img-load>That <a href=webappapis.html#concept-task id=the-img-element:concept-task-7>task</a>, and each subsequent <a href=webappapis.html#concept-task id=the-img-element:concept-task-8>task</a>, that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-12>queued</a> by the
      <a id=the-img-element:networking-task-source-6 href=webappapis.html#networking-task-source>networking task source</a> while the image is being fetched, if <var>image
      request</var> is the <a href=#current-request id=the-img-element:current-request-31>current request</a>, must update the presentation of the image
      appropriately (e.g., if the image is a progressive JPEG, each packet can improve the
      resolution of the image).<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25797" title='&lt;img&gt; "list of available images" and fragment in the URL'>25797</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25798" title="&lt;img&gt; should maybe cache broken images">25798</a></div>

      <p>Furthermore, the last <a href=webappapis.html#concept-task id=the-img-element:concept-task-9>task</a> that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-13>queued</a> by the <a id=the-img-element:networking-task-source-7 href=webappapis.html#networking-task-source>networking task source</a> once the resource has been
      fetched must additionally run these steps:</p>

      <ol><li><p>If <var>image request</var> is the <a href=#pending-request id=the-img-element:pending-request-21>pending request</a>,
       <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-11>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-32>current request</a>,
       <a href=#upgrade-the-pending-request-to-the-current-request id=the-img-element:upgrade-the-pending-request-to-the-current-request-4>upgrade the pending request to the current request</a> and
       update the <code id=the-img-element:the-img-element-36><a href=#the-img-element>img</a></code> element's presentation appropriately.</li><li><p>Set <var>image request</var> to the <a href=#img-all id=the-img-element:img-all-4>completely
       available</a> state.</li><li><p>Add the image to the <a href=#list-of-available-images id=the-img-element:list-of-available-images-7>list of available images</a> using the key <var>key</var>, with the <a href=#ignore-higher-layer-caching id=the-img-element:ignore-higher-layer-caching-5>ignore higher-layer caching</a> flag set.</li><li><p><a href=#fire-a-progress-event-or-simple-event id=the-img-element:fire-a-progress-event-or-simple-event>Fire a progress event or simple event</a> named <code id=the-img-element:event-load-3><a href=indices.html#event-load>load</a></code>
       at the <code id=the-img-element:the-img-element-37><a href=#the-img-element>img</a></code> element, depending on the resource in <var>image request</var>.</li><li><p><a href=#fire-a-progress-event-or-simple-event id=the-img-element:fire-a-progress-event-or-simple-event-2>Fire a progress event or simple event</a> named <code id=the-img-element:event-loadend-5><a href=indices.html#event-loadend>loadend</a></code>
       at the <code id=the-img-element:the-img-element-38><a href=#the-img-element>img</a></code> element, depending on the resource in <var>image request</var>.</li></ol>

     <dt>そうでなければ<dd>

      <p>The image data is not in a supported file format; the user agent must set
      <var>image request</var> to the <a href=#img-error id=the-img-element:img-error-7>broken</a> state,
      <a href=#abort-the-image-request id=the-img-element:abort-the-image-request-12>abort the image request</a> for the <a href=#current-request id=the-img-element:current-request-33>current request</a> and the <a href=#pending-request id=the-img-element:pending-request-22>pending request</a>,
      <a href=#upgrade-the-pending-request-to-the-current-request id=the-img-element:upgrade-the-pending-request-to-the-current-request-5>upgrade the pending request to the current request</a> if <var>image request</var> is the <a href=#pending-request id=the-img-element:pending-request-23>pending request</a>,
      and then <a id=the-img-element:queue-a-task-14 href=webappapis.html#queue-a-task>queue a task</a> to first <a id=the-img-element:fire-a-simple-event-10 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-img-element:event-error-5><a href=indices.html#event-error>error</a></code> at the <code id=the-img-element:the-img-element-39><a href=#the-img-element>img</a></code> element and then <a id=the-img-element:fire-a-simple-event-11 href=webappapis.html#fire-a-simple-event>fire a simple
      event</a> named <code id=the-img-element:event-loadend-6><a href=indices.html#event-loadend>loadend</a></code> at the <code id=the-img-element:the-img-element-40><a href=#the-img-element>img</a></code>
      element.</p>

     </dl>

   </li></ol>

  <p>To <dfn id=abort-the-image-request>abort the image request</dfn> for an <a href=#image-request id=the-img-element:image-request-10>image request</a> <var>image request</var> means to run the following steps:</p>

  <ol><li><p>Forget <var>image request</var>'s <a href=#img-req-data id=the-img-element:img-req-data-4>image data</a>, if any.</li><li><p>Abort any instance of the <a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-img-element:concept-fetch-3 data-x-internal=concept-fetch>fetching</a> algorithm for
   <var>image request</var>, discarding any pending tasks generated by that algorithm.</li></ol>

  <p>To <dfn id=upgrade-the-pending-request-to-the-current-request>upgrade the pending request to the current request</dfn> for an <code id=the-img-element:the-img-element-41><a href=#the-img-element>img</a></code> element means to run the following steps:</p>

  <ol><li><p>Let the <code id=the-img-element:the-img-element-42><a href=#the-img-element>img</a></code> element's <a href=#current-request id=the-img-element:current-request-34>current request</a> be the <a href=#pending-request id=the-img-element:pending-request-24>pending request</a>.</li><li><p>Let the <code id=the-img-element:the-img-element-43><a href=#the-img-element>img</a></code> element's <a href=#pending-request id=the-img-element:pending-request-25>pending request</a> be null.</li></ol>

  <p>To <dfn id=fire-a-progress-event-or-simple-event>fire a progress event or simple event</dfn> named <var>type</var> at an element <var>e</var>,
  depending on resource <var>r</var>, means to
  <a id=the-img-element:fire-a-progress-event-3 href=infrastructure.html#fire-a-progress-event>fire a progress event</a> named <var>type</var> at <var>e</var> if <var>r</var> is <a id=the-img-element:cors-same-origin-3 href=infrastructure.html#cors-same-origin>CORS-same-origin</a>,
  and otherwise <a id=the-img-element:fire-a-simple-event-12 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <var>type</var> at <var>e</var>.</p>

  <p>While a user agent is running the above algorithm for an element <var>x</var>, there
  must be a strong reference from the element's <a id=the-img-element:node-document-8 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> to the element <var>x</var>,
  even if that element is not <a href=infrastructure.html#in-a-document id=the-img-element:in-a-document>in its <code>Document</code></a>.</p>

  <p>An <code id=the-img-element:the-img-element-44><a href=#the-img-element>img</a></code> element is said to <dfn id=use-srcset-or-picture>use <code>srcset</code> or
  <code>picture</code></dfn> if it has a <code id=the-img-element:attr-img-srcset-6><a href=#attr-img-srcset>srcset</a></code> attribute
  specified or if it has a parent that is a <code id=the-img-element:the-picture-element-6><a href=#the-picture-element>picture</a></code> element.</p>

  <p>When an <code id=the-img-element:the-img-element-45><a href=#the-img-element>img</a></code> element is in the <a href=#img-all id=the-img-element:img-all-5>completely available</a>
  state <em>and</em> the user agent can decode the media data without errors, then the
  <code id=the-img-element:the-img-element-46><a href=#the-img-element>img</a></code> element is said to be <dfn id=img-good>fully decodable</dfn>.</p>

  <p>Whether the image is fetched successfully or not (e.g. whether the response status was an
  <a id=the-img-element:ok-status href=https://fetch.spec.whatwg.org/#ok-status data-x-internal=ok-status>ok status</a>) must be ignored when determining the image's type and whether it is a
  valid image.</p>

  <p class=note>This allows servers to return images with error responses, and have them
  displayed.</p>

  <p id=img-determine-type>The user agent should apply the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically id=the-img-element:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image>image sniffing rules</a> to determine the type of the image, with the image's <a href=infrastructure.html#content-type id=the-img-element:content-type>associated Content-Type headers</a> giving the <var>official
  type</var>. If these rules are not applied, then the type of the image must be the type given by
  the image's <a href=infrastructure.html#content-type id=the-img-element:content-type-2>associated Content-Type headers</a>.<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25889" title="&lt;img&gt; When to swap the image for the environment changes case">25889</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26702" title="What &lt;img&gt; represents should support srcset/picture">26702</a></div>

  <p>User agents must not support non-image resources with the <code id=the-img-element:the-img-element-47><a href=#the-img-element>img</a></code> element (e.g. XML
  files whose root element is an HTML element). User agents must not run executable code (e.g.
  scripts) embedded in the image resource. User agents must only display the first page of a
  multipage resource (e.g. a PDF file). User agents must not allow the resource to act in an
  interactive fashion, but should honour any animation in the resource.</p>

  <p>This specification does not specify which image types are to be supported.</p>

  <hr>

  <p>An <code id=the-img-element:the-img-element-48><a href=#the-img-element>img</a></code> element is associated with a <a href=#source-set id=the-img-element:source-set>source set</a>.</p>

  <p>A <dfn id=source-set>source set</dfn> is an ordered set of zero or more <a href=#image-source id=the-img-element:image-source>image sources</a>
  and a <a href=#source-size-2 id=the-img-element:source-size-2>source size</a>.</p>

  <p>An <dfn id=image-source>image source</dfn> is a <a id=the-img-element:url href=infrastructure.html#url>URL</a>,
  and optionally either a density descriptor, or a width descriptor.</p>

  <p>A <dfn id=source-size-2>source size</dfn> is a <a href=#source-size-value id=the-img-element:source-size-value-5>&lt;source-size-value&gt;</a>.
  When a <a href=#source-size-2 id=the-img-element:source-size-2-2>source size</a> has a unit relative to the <a id=the-img-element:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>,
  it must be interpreted relative to the <code id=the-img-element:the-img-element-49><a href=#the-img-element>img</a></code> element's <a id=the-img-element:node-document-9 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s
  <a id=the-img-element:viewport-3 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>.
  Other units must be interpreted the same as in Media Queries. <a href=references.html#refsMQ>[MQ]</a></p>

  <p>A <a href=#source-size-2 id=the-img-element:source-size-2-3>source size</a> must not use CSS functions other than the <code>calc()</code> function.</p>

  <p>When asked to <dfn id=select-an-image-source>select an image source</dfn> for a given <code id=the-img-element:the-img-element-50><a href=#the-img-element>img</a></code> element <var>el</var>,
  user agents must do the following:</p>

  <ol><li><p><a href=#update-the-source-set id=the-img-element:update-the-source-set>Update the source set</a> for <var>el</var>.</li><li><p>If <var>el</var>'s <a href=#source-set id=the-img-element:source-set-2>source set</a> is empty,
   return null as the URL and undefined as the pixel density and abort these steps.</li><li><p>Otherwise, take <var>el</var>'s <a href=#source-set id=the-img-element:source-set-3>source set</a>
   and let it be <var>source set</var>.</li><li><p>If an entry <var>b</var> in <var>source set</var> has the same associated density descriptor
   as an earlier entry <var>a</var> in <var>source set</var>, then remove entry <var>b</var>.
   Repeat this step until none of the entries in <var>source set</var> have the same associated density descriptor as an earlier entry.</li><li><p>In a user agent-specific manner,
   choose one <a href=#image-source id=the-img-element:image-source-2>image source</a> from <var>source set</var>.
   Let this be <var>selected source</var>.</li><li><p>Return <var>selected source</var> and its associated pixel density.</li></ol>

  <p>When asked to <dfn id=update-the-source-set>update the source set</dfn> for a given <code id=the-img-element:the-img-element-51><a href=#the-img-element>img</a></code> element <var>el</var>,
  user agents must do the following:</p>

  <ol><li><p>Set <var>el</var>'s <a href=#source-set id=the-img-element:source-set-4>source set</a> to an empty <a href=#source-set id=the-img-element:source-set-5>source set</a>.</li><li><p>If <var>el</var> has a parent node and that is a <code id=the-img-element:the-picture-element-7><a href=#the-picture-element>picture</a></code> element,
   let <var>elements</var> be an array containing <var>el</var>'s parent node's child elements, retaining relative order.
   Otherwise, let <var>elements</var> be array containing only <var>el</var>.</li><li><p>If <var>el</var> has a <code id=the-img-element:attr-dim-width-3><a href=#attr-dim-width>width</a></code> attribute, and parsing
   that attribute's value using the <a id=the-img-element:rules-for-parsing-dimension-values href=infrastructure.html#rules-for-parsing-dimension-values>rules for parsing dimension values</a> doesn't generate
   an error or a percentage value, then let <var>width</var> be the returned integer value.
   Otherwise, let <var>width</var> be null.</li><li>

    <p>Iterate through <var>elements</var>,
    doing the following for each item <var>child</var>:</p>

    <ol><li>

      <p>If <var>child</var> is <var>el</var>:</p>

      <ol><li><p>If <var>child</var> has a <code id=the-img-element:attr-img-srcset-7><a href=#attr-img-srcset>srcset</a></code> attribute,
       <a href=#parse-a-srcset-attribute id=the-img-element:parse-a-srcset-attribute>parse <var>child</var>'s srcset attribute</a>
       and let the returned <a href=#source-set id=the-img-element:source-set-6>source set</a> be <var>source set</var>.
       Otherwise, let <var>source set</var> be an empty <a href=#source-set id=the-img-element:source-set-7>source set</a>.</li><li><p><a href=#parse-a-sizes-attribute id=the-img-element:parse-a-sizes-attribute>Parse <var>child</var>'s sizes
       attribute</a> with the fallback width <var>width</var>, and let <var>source set</var>'s
       <a href=#source-size-2 id=the-img-element:source-size-2-4>source size</a> be the returned value.</li><li><p>If <var>child</var> has a <code id=the-img-element:attr-img-src-10><a href=#attr-img-src>src</a></code> attribute
       whose value is not the empty string
       and <var>source set</var> does not contain an
       <a href=#image-source id=the-img-element:image-source-3>image source</a> with a density descriptor value of 1,
       and no <a href=#image-source id=the-img-element:image-source-4>image source</a> with a width descriptor,
       append <var>child</var>'s <code id=the-img-element:attr-img-src-11><a href=#attr-img-src>src</a></code> attribute value to <var>source set</var>.</li><li><p><a href=#normalise-the-source-densities id=the-img-element:normalise-the-source-densities>Normalise the source densities</a> of <var>source set</var>.</li><li><p>Let <var>el</var>'s <a href=#source-set id=the-img-element:source-set-8>source set</a> be <var>source set</var>.</li><li><p>Abort this algorithm.</li></ol>

     </li><li><p>If <var>child</var> is not a <code id=the-img-element:the-source-element-when-used-with-the-picture-element-7><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> element,
     continue to the next child.
     Otherwise, <var>child</var> is a <code id=the-img-element:the-source-element-when-used-with-the-picture-element-8><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> element.</li><li><p>If <var>child</var> does not have a <code id=the-img-element:attr-picture-source-srcset-3><a href=#attr-picture-source-srcset>srcset</a></code> attribute,
     continue to the next child.</li><li><p><a href=#parse-a-srcset-attribute id=the-img-element:parse-a-srcset-attribute-2>Parse <var>child</var>'s srcset attribute</a> and
     let the returned <a href=#source-set id=the-img-element:source-set-9>source set</a> be <var>source set</var>.</li><li><p>If <var>source set</var> has zero <a href=#image-source id=the-img-element:image-source-5>image sources</a>,
     continue to the next child.</li><li><p>If <var>child</var> has a <code id=the-img-element:attr-picture-source-media-2><a href=#attr-picture-source-media>media</a></code> attribute,
     and its value does not <a href=infrastructure.html#matches-the-environment id=the-img-element:matches-the-environment>match the environment</a>,
     continue to the next child.</li><li><p><a href=#parse-a-sizes-attribute id=the-img-element:parse-a-sizes-attribute-2>Parse <var>child</var>'s sizes attribute</a>
     with the fallback width <var>width</var>, and let <var>source set</var>'s <a href=#source-size-2 id=the-img-element:source-size-2-5>source
     size</a> be the returned value.</li><li><p>If <var>child</var> has a <code id=the-img-element:attr-picture-source-type-2><a href=#attr-picture-source-type>type</a></code> attribute,
     and its value is an unknown or unsupported <a id=the-img-element:mime-type href=infrastructure.html#mime-type>MIME type</a>,
     continue to the next child.</li><li><p><a href=#normalise-the-source-densities id=the-img-element:normalise-the-source-densities-2>Normalise the source densities</a> of <var>source set</var>.</li><li><p>Let <var>el</var>'s <a href=#source-set id=the-img-element:source-set-10>source set</a> be <var>source set</var>.</li><li><p>Abort this algorithm.</li></ol>

   </li></ol>

  <p class=note>Each <code id=the-img-element:the-img-element-52><a href=#the-img-element>img</a></code> element independently considers
  its previous sibling <code id=the-img-element:the-source-element-when-used-with-the-picture-element-9><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> elements
  plus the <code id=the-img-element:the-img-element-53><a href=#the-img-element>img</a></code> element itself
  for selecting an <a href=#image-source id=the-img-element:image-source-6>image source</a>, ignoring any other (invalid) elements,
  including other <code id=the-img-element:the-img-element-54><a href=#the-img-element>img</a></code> elements in the same <code id=the-img-element:the-picture-element-8><a href=#the-picture-element>picture</a></code> element,
  or <code id=the-img-element:the-source-element-when-used-with-the-picture-element-10><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> elements that are following siblings
  of the relevant <code id=the-img-element:the-img-element-55><a href=#the-img-element>img</a></code> element.</p>

  <p>When asked to <dfn id=parse-a-srcset-attribute>parse a srcset attribute</dfn> from an element,
  parse the value of the element's <code>srcset</code> attribute as follows:</p>

  <ol><li><p>Let <var>input</var> be the value passed to this algorithm.</li><li><p>Let <var>position</var> be a pointer into <var>input</var>,
   initially pointing at the start of the string.</li><li><p>Let <var>candidates</var> be an initially empty <a href=#source-set id=the-img-element:source-set-11>source set</a>.</li><li><p><i>Splitting loop</i>: <a id=the-img-element:collect-a-sequence-of-characters href=infrastructure.html#collect-a-sequence-of-characters>Collect a sequence of characters</a>
   that are <a href=infrastructure.html#space-character id=the-img-element:space-character-8>space characters</a> or U+002C COMMA characters.
   If any U+002C COMMA characters were collected, that is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error>parse error</a>.</li><li><p>If <var>position</var> is past the end of <var>input</var>,
   return <var>candidates</var> and abort these steps.</li><li><p><a id=the-img-element:collect-a-sequence-of-characters-2 href=infrastructure.html#collect-a-sequence-of-characters>Collect a sequence of characters</a> that are not
   <a href=infrastructure.html#space-character id=the-img-element:space-character-9>space characters</a>, and let that be <var>url</var>.</li><li><p>Let <var>descriptors</var> be a new empty list.</li><li>

    <p>If <var>url</var> ends with a U+002C COMMA character (,),
    follow these substeps:</p>

    <ol><li><p>Remove all trailing U+002C COMMA characters from <var>url</var>.
     If this removed more than one character,
     that is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-2>parse error</a>.</li></ol>

    <p>Otherwise, follow these substeps:</p>

    <ol><li><p><i>Descriptor tokeniser</i>: <a id=the-img-element:skip-whitespace href=infrastructure.html#skip-whitespace>Skip whitespace</a></li><li><p>Let <var>current descriptor</var> be the empty string.</li><li><p>Let <var>state</var> be <i>in descriptor</i>.</li><li>

      <p>Let <var>c</var> be the character at <var>position</var>.
      Do the following depending on the value of <var>state</var>.
      For the purpose of this step, "EOF" is a special character representing
      that <var>position</var> is past the end of <var>input</var>.</p>

      <dl class=switch><dt><i title="">In descriptor</i><dd>

        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt><a id=the-img-element:space-character-10 href=infrastructure.html#space-character>Space character</a><dd><p>If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>
         and let <var>current descriptor</var> be the empty string.
         Set <var>state</var> to <i>after descriptor</i>.<dt>U+002C COMMA (,)<dd><p>Advance <var>position</var> to the next character in <var>input</var>.
         If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>U+0028 LEFT PARENTHESIS (()<dd><p>Append <var>c</var> to <var>current descriptor</var>.
         Set <var>state</var> to <i>in parens</i>.<dt>EOF<dd><p>If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>

       <dt><i title="">In parens</i><dd>

        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt>U+0029 RIGHT PARENTHESIS ())<dd><p>Append <var>c</var> to <var>current descriptor</var>.
         Set <var>state</var> to <i>in descriptor</i>.<dt>EOF<dd><p>Append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>

       <dt><i title="">After descriptor</i><dd>

        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt><a id=the-img-element:space-character-11 href=infrastructure.html#space-character>Space character</a><dd><p>Stay in this state.<dt>EOF<dd><p>Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Set <var>state</var> to <i>in descriptor</i>.
         Set <var>position</var> to the <em>previous</em> character in <var>input</var>.</dl>

       </dl>

      <p>Advance <var>position</var> to the next character in <var>input</var>.
      Repeat this substep.</p>

      <p class=note>In order to be compatible with future additions,
      this algorithm supports multiple descriptors and descriptors with parens.</p>

     </li></ol>

   </li><li><p><i>Descriptor parser</i>: Let <var>error</var> be <i>no</i>.</li><li><p>Let <var>width</var> be <i>absent</i>.</li><li><p>Let <var>density</var> be <i>absent</i>.</li><li><p>Let <var>future-compat-h</var> be <i>absent</i>.</li><li>

    <p>For each descriptor in <var>descriptors</var>,
    run the appropriate set of steps from the following list:</p>

    <dl class=switch><dt>If the descriptor consists of a <a id=the-img-element:valid-non-negative-integer-2 href=infrastructure.html#valid-non-negative-integer>valid non-negative integer</a>
     followed by a U+0077 LATIN SMALL LETTER W character<dd>

      <ol><li>

        <p>If the user agent does not support the <code id=the-img-element:attr-img-sizes-4><a href=#attr-img-sizes>sizes</a></code> attribute,
        let <var>error</var> be <i>yes</i>.</p>

        <p class=note>A conforming user agent will support the <code id=the-img-element:attr-img-sizes-5><a href=#attr-img-sizes>sizes</a></code> attribute.
        However, user agents typically implement and ship features in an incremental manner in practice.</p>

       </li><li><p>If <var>width</var> and <var>density</var>
       are not both <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.</li><li><p>Apply the <a id=the-img-element:rules-for-parsing-non-negative-integers href=infrastructure.html#rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a> to the descriptor.
       If the result is zero, let <var>error</var> be <i>yes</i>.
       Otherwise, let <var>width</var> be the result.</li></ol>

     <dt>If the descriptor consists of a <a id=the-img-element:valid-floating-point-number-2 href=infrastructure.html#valid-floating-point-number>valid floating-point number</a>
     followed by a U+0078 LATIN SMALL LETTER X character<dd>

      <ol><li><p>If <var>width</var>, <var>density</var> and <var>future-compat-h</var>
       are not all <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.</li><li>

        <p>Apply the <a id=the-img-element:rules-for-parsing-floating-point-number-values href=infrastructure.html#rules-for-parsing-floating-point-number-values>rules for parsing floating-point number values</a> to the descriptor.
        If the result is less than zero, let <var>error</var> be <i>yes</i>.
        Otherwise, let <var>density</var> be the result.</p>

        <p class=note>If <var>density</var> is zero,
        the <a id=the-img-element:intrinsic-dimensions-3 href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> will be infinite.
        User agents are expected to have limits in how big images can be rendered,
        which is allowed by the <a href=infrastructure.html#hardwareLimitations>hardware limitations</a> clause.</p>

       </li></ol>

     <dt>If the descriptor consists of a <a id=the-img-element:valid-non-negative-integer-3 href=infrastructure.html#valid-non-negative-integer>valid non-negative integer</a>
     followed by a U+0068 LATIN SMALL LETTER H character<dd>

      <p>This is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-3>parse error</a>.</p>

      <ol><li><p>If <var>future-compat-h</var> and <var>density</var>
       are not both <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.</li><li><p>Apply the <a id=the-img-element:rules-for-parsing-non-negative-integers-2 href=infrastructure.html#rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a> to the descriptor.
       If the result is zero, let <var>error</var> be <i>yes</i>.
       Otherwise, let <var>future-compat-h</var> be the result.</li></ol>

     <dt>Anything else<dd><p>Let <var>error</var> be <i>yes</i>.</dl>

   </li><li><p>If <var>future-compat-h</var> is not <i>absent</i> and <var>width</var> is <i>absent</i>,
   let <var>error</var> be <i>yes</i>.</li><li><p>If <var>error</var> is still <i>no</i>,
   then append a new <a href=#image-source id=the-img-element:image-source-7>image source</a> to <var>candidates</var>
   whose URL is <var>url</var>,
   associated with a width <var>width</var> if not <i>absent</i>
   and a pixel density <var>density</var> if not <i>absent</i>.
   Otherwise, there is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-4>parse error</a>.</li><li><p>Return to the step labeled <i>splitting loop</i>.</li></ol>

  <p>When asked to <dfn id=parse-a-sizes-attribute>parse a sizes attribute</dfn> from an element, with a fallback width
  <var>width</var>, <a id=the-img-element:parse-a-comma-separated-list-of-component-values href=infrastructure.html#parse-a-comma-separated-list-of-component-values>parse a comma-separated list of component values</a> from the value of
  the element's <code>sizes</code> attribute (or the empty string, if the attribute is
  absent), and let <var>unparsed sizes list</var> be the result. <a href=references.html#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

  <p>For each <var>unparsed size</var> in <var>unparsed sizes list</var>:</p>

  <ol><li><p>Remove all consecutive <a id=the-img-element:whitespace-token href=infrastructure.html#whitespace-token>&lt;whitespace-token&gt;</a>s
   from the end of <var>unparsed size</var>.
   If <var>unparsed size</var> is now empty,
   that is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-5>parse error</a>;
   continue to the next iteration of this algorithm.</li><li><p>If the last <a id=the-img-element:component-value href=infrastructure.html#component-value>component value</a> in <var>unparsed size</var>
   is a valid non-negative <a href=#source-size-value id=the-img-element:source-size-value-6>&lt;source-size-value&gt;</a>,
   let <var>size</var> be its value
   and remove the <a id=the-img-element:component-value-2 href=infrastructure.html#component-value>component value</a> from <var>unparsed size</var>.
   Any CSS function other than the <code>calc()</code> function is invalid.
   Otherwise, there is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-6>parse error</a>;
   continue to the next iteration of this algorithm.</li><li><p>Remove all consecutive <a id=the-img-element:whitespace-token-2 href=infrastructure.html#whitespace-token>&lt;whitespace-token&gt;</a>s
   from the end of <var>unparsed size</var>.
   If <var>unparsed size</var> is now empty,
   return <var>size</var> and exit this algorithm.
   If this was not the last item in <var>unparsed sizes list</var>,
   that is a <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-7>parse error</a>.</li><li><p>Parse the remaining <a href=infrastructure.html#component-value id=the-img-element:component-value-3>component values</a> in <var>unparsed size</var>
   as a <a id=the-img-element:media-condition-2 href=infrastructure.html#media-condition>&lt;media-condition&gt;</a>.
   If it does not parse correctly,
   or it does parse correctly but the <a id=the-img-element:media-condition-3 href=infrastructure.html#media-condition>&lt;media-condition&gt;</a> evaluates to false,
   continue to the next iteration of this algorithm. <a href=references.html#refsMQ>[MQ]</a></li><li><p>Return <var>size</var> and exit this algorithm.</li></ol>

  <p>If the above algorithm exhausts <var>unparsed sizes list</var> without returning a
  <var>size</var> value, follow these steps:</p>

  <ol><li><p>If <var>width</var> is not null, return a <a id=the-img-element:length-2 href=infrastructure.html#length>&lt;length&gt;</a> with the value
   <var>width</var> and the unit <code>px</code>.</li><li><p>Return <code>100vw</code>.</li></ol>

  <p>A <dfn id=concept-microsyntax-parse-error>parse error</dfn> for the algorithms above
  indicates a non-fatal mismatch between input and requirements.
  User agents are encouraged to expose <a href=#concept-microsyntax-parse-error id=the-img-element:concept-microsyntax-parse-error-8>parse error</a>s somehow.</p>

  <p class=note>While a <a href=#valid-source-size-list id=the-img-element:valid-source-size-list-2>valid source size list</a> only contains a bare <a href=#source-size-value id=the-img-element:source-size-value-7>&lt;source-size-value&gt;</a>
  (without an accompanying <a id=the-img-element:media-condition-4 href=infrastructure.html#media-condition>&lt;media-condition&gt;</a>)
  as the last entry in the <a href=#source-size-list id=the-img-element:source-size-list>&lt;source-size-list&gt;</a>,
  the parsing algorithm technically allows such at any point in the list,
  and will accept it immediately as the size
  if the preceding entries in the list weren't used.
  This is to enable future extensions,
  and protect against simple author errors such as a final trailing comma.</p>

  <p>An <a href=#image-source id=the-img-element:image-source-8>image source</a> can have a density descriptor,
  a width descriptor,
  or no descriptor at all accompanying its URL.
  Normalising a <a href=#source-set id=the-img-element:source-set-12>source set</a> gives every <a href=#image-source id=the-img-element:image-source-9>image source</a> a density descriptor.</p>

  <p>When asked to <dfn id=normalise-the-source-densities>normalise the source densities</dfn> of a <a href=#source-set id=the-img-element:source-set-13>source set</a> <var>source set</var>,
  the user agent must do the following:</p>

  <ol><li><p>Let <var>source size</var> be <var>source set</var>'s <a href=#source-size-2 id=the-img-element:source-size-2-6>source size</a>.</li><li>

    <p>For each <a href=#image-source id=the-img-element:image-source-10>image source</a> in <var>source set</var>:</p>

    <ol><li><p>If the <a href=#image-source id=the-img-element:image-source-11>image source</a> has a density descriptor,
     continue to the next <a href=#image-source id=the-img-element:image-source-12>image source</a>.</li><li>

      <p>Otherwise, if the <a href=#image-source id=the-img-element:image-source-13>image source</a> has a width descriptor,
      replace the width descriptor with a density descriptor
      with a value of the width descriptor divided by the <a href=#source-size-2 id=the-img-element:source-size-2-7>source size</a>
      and a unit of <code>x</code>.</p>

      <p class=note>If the <a href=#source-size-2 id=the-img-element:source-size-2-8>source size</a> is zero,
      the density would be infinity,
      which results in the <a id=the-img-element:intrinsic-dimensions-4 href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> being zero by zero.</p>

     </li><li><p>Otherwise, give the <a href=#image-source id=the-img-element:image-source-14>image source</a> a density descriptor of <code>1x</code>.</li></ol>

   </li></ol>

  <p id=img-environment-changes>The user agent may at any time run the following algorithm to update an <code id=the-img-element:the-img-element-56><a href=#the-img-element>img</a></code>
  element's image in order to react to changes in the environment. (User agents are <em>not
  required</em> to ever run this algorithm; for example, if the user is not looking at the page any
  more, the user agent might want to wait until the user has returned to the page before determining
  which image to use, in case the environment changes again in the meantime.)</p>

  <p class=note>User agents are encouraged to run this algorithm in particular when the user changes
  the <a id=the-img-element:viewport-4 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>'s size (e.g. by resizing the window or changing the page zoom),
  and when an <code id=the-img-element:the-img-element-57><a href=#the-img-element>img</a></code> element is <span>inserted into a document</span>,
  so that the <a href=#density-corrected-intrinsic-width-and-height id=the-img-element:density-corrected-intrinsic-width-and-height-3>density-corrected intrinsic width and height</a> match the
  new <a id=the-img-element:viewport-5 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>, and so that the correct image is chosen when <a href=#art-direction id=the-img-element:art-direction>art direction</a>
  is involved.</p>

  <ol><li><p><a id=the-img-element:await-a-stable-state-2 href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=the-img-element:synchronous-section-5 href=webappapis.html#synchronous-section>synchronous section</a>
   consists of all the remaining steps of this algorithm until the algorithm says the
   <a id=the-img-element:synchronous-section-6 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=the-img-element:synchronous-section-7>synchronous sections</a> are marked with ⌛.)</li><li><p>⌛ If the <code id=the-img-element:the-img-element-58><a href=#the-img-element>img</a></code> element does not <a href=#use-srcset-or-picture id=the-img-element:use-srcset-or-picture-4>use <code>srcset</code> or
   <code>picture</code></a>, its <a id=the-img-element:node-document-10 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is not the <a id=the-img-element:active-document-3 href=browsers.html#active-document>active
   document</a>, has image data whose resource type is <code id=the-img-element:multipart/x-mixed-replace-3><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code>, or
   the <a href=#pending-request id=the-img-element:pending-request-26>pending request</a> is not null, then abort this algorithm.</li><li><p>⌛ Let <var>selected source</var> and <var>selected pixel
   density</var> be the URL and pixel density that results from <a href=#select-an-image-source id=the-img-element:select-an-image-source-2>selecting an image source</a>, respectively.</li><li><p>⌛ If <var>selected source</var> is null, then abort these steps.</li><li><p>⌛ If <var>selected source</var> and <var>selected pixel
   density</var> are the same as the element's <a href=#last-selected-source id=the-img-element:last-selected-source-2>last selected source</a> and <a href=#current-pixel-density id=the-img-element:current-pixel-density-6>current
   pixel density</a>, then abort these steps.</li><li><p>⌛ <a href=infrastructure.html#parse-a-url id=the-img-element:parse-a-url-3>Parse</a> <var>selected source</var>, relative to
   the element's <a id=the-img-element:node-document-11 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>, and let <var>urlString</var> be the <a id=the-img-element:resulting-url-string-3 href=infrastructure.html#resulting-url-string>resulting URL
   string</a>. If that is not successful, abort these steps.</li><li><p>⌛ Let <var>corsAttributeState</var> be the state of the element's <code id=the-img-element:attr-img-crossorigin-6><a href=#attr-img-crossorigin>crossorigin</a></code> content attribute.</li><li><p>⌛ Let <var>origin</var> be the <a id=the-img-element:origin-2-5 href=browsers.html#origin-2>origin</a> of the <code id=the-img-element:the-img-element-59><a href=#the-img-element>img</a></code> element's <a id=the-img-element:node-document-12 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.</li><li><p>⌛ Let <var>client</var> be the <code id=the-img-element:the-img-element-60><a href=#the-img-element>img</a></code> element's <a id=the-img-element:node-document-13 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
   document</a>'s <code id=the-img-element:window-2><a href=browsers.html#window>Window</a></code> object's <a id=the-img-element:environment-settings-object-2 href=webappapis.html#environment-settings-object>environment settings object</a>.</li><li><p>⌛ Let <var>key</var> be a tuple consisting of <var>urlString</var>,
   <var>corsAttributeState</var>, and, if <var>corsAttributeState</var> is not <a href=infrastructure.html#attr-crossorigin-none id=the-img-element:attr-crossorigin-none-3>No CORS</a>, <var>origin</var>.</li><li><p>⌛ Let <var>image request</var> be a new <a href=#image-request id=the-img-element:image-request-11>image request</a>
   whose <a href=#img-req-url id=the-img-element:img-req-url-8>current URL</a> is <var>urlString</var></li><li><p>⌛ Let the element's <a href=#pending-request id=the-img-element:pending-request-27>pending request</a> be <var>image request</var>.</li><li><p>End the <a id=the-img-element:synchronous-section-8 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
   <a id=the-img-element:in-parallel-3 href=infrastructure.html#in-parallel>in parallel</a>.</li><li>

    <p>If the <a href=#list-of-available-images id=the-img-element:list-of-available-images-8>list of available images</a> contains an entry for <var>key</var>,
    then set <var>image request</var>'s <a href=#img-req-data id=the-img-element:img-req-data-5>image data</a> to that of the entry.
    Continue to the next step.</p>

    <p>そうでなければ、以下のサブ手順を実行する：</p>

    <ol><li><p>Let <var>request</var> be the result of <a href=infrastructure.html#create-a-potential-cors-request id=the-img-element:create-a-potential-cors-request-2>creating a potential-CORS request</a> given
     <var>urlString</var> and <var>corsAttributeState</var>.</li><li><p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=the-img-element:concept-request-client-2 data-x-internal=concept-request-client>client</a> to
     <var>client</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-type id=the-img-element:concept-request-type-2 data-x-internal=concept-request-type>type</a> to "<code>image</code>", and set <var>request</var>'s <a id=the-img-element:synchronous-flag href=https://fetch.spec.whatwg.org/#synchronous-flag data-x-internal=synchronous-flag>synchronous flag</a>.</li><li><p>Let <var>response</var> be the result of <a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-img-element:concept-fetch-4 data-x-internal=concept-fetch>fetching</a> <var>request</var>.</li><li><p>If <var>response</var>'s <a id=the-img-element:unsafe-response href=infrastructure.html#unsafe-response>unsafe response</a> is a <span>network error</span> or
     if the image format is unsupported (as determined by applying the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically id=the-img-element:content-type-sniffing:-image-2 data-x-internal=content-type-sniffing:-image>image sniffing rules</a>, again as mentioned earlier),
     or if the user agent is able to determine that <var>image request</var>'s image is corrupted in
     some fatal way such that the image dimensions cannot be obtained, or if the resource type is
     <code id=the-img-element:multipart/x-mixed-replace-4><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code>, then let <a href=#pending-request id=the-img-element:pending-request-28>pending request</a> be null and abort
     these steps.</li><li><p>Otherwise, <var>response</var>'s <a id=the-img-element:unsafe-response-2 href=infrastructure.html#unsafe-response>unsafe response</a> is <var>image
     request</var>'s <a href=#img-req-data id=the-img-element:img-req-data-6>image data</a>. It can be either
     <a id=the-img-element:cors-same-origin-4 href=infrastructure.html#cors-same-origin>CORS-same-origin</a> or <a id=the-img-element:cors-cross-origin-2 href=infrastructure.html#cors-cross-origin>CORS-cross-origin</a>; this affects the
     <a id=the-img-element:origin-2-6 href=browsers.html#origin-2>origin</a> of the image itself (e.g., when used on a <code id=the-img-element:the-canvas-element-3><a href=scripting.html#the-canvas-element>canvas</a></code>).</li></ol>

   </li><li>

    <p><a id=the-img-element:queue-a-task-15 href=webappapis.html#queue-a-task>Queue a task</a> to run the following substeps:</p>

    <ol><li><p>If the <code id=the-img-element:the-img-element-61><a href=#the-img-element>img</a></code> element has experienced <a href=#relevant-mutations id=the-img-element:relevant-mutations-3>relevant mutations</a>
     since this algorithm started, then let <a href=#pending-request id=the-img-element:pending-request-29>pending request</a> be null and abort these steps.</p>

     </li><li><p>Let the <code id=the-img-element:the-img-element-62><a href=#the-img-element>img</a></code> element's <a href=#last-selected-source id=the-img-element:last-selected-source-3>last selected source</a> be <var>selected source</var>
     and the <code id=the-img-element:the-img-element-63><a href=#the-img-element>img</a></code> element's <a href=#current-pixel-density id=the-img-element:current-pixel-density-7>current pixel density</a> be <var>selected pixel density</var>.</li><li><p>Set <var>image request</var> to the <a href=#img-all id=the-img-element:img-all-6>completely available</a> state.</li><li><p>Add the image to the <a href=#list-of-available-images id=the-img-element:list-of-available-images-9>list of available images</a> using the key <var>key</var>,
     with the <a href=#ignore-higher-layer-caching id=the-img-element:ignore-higher-layer-caching-6>ignore higher-layer caching</a> flag set.</li><li><p><a href=#upgrade-the-pending-request-to-the-current-request id=the-img-element:upgrade-the-pending-request-to-the-current-request-6>Upgrade the pending request to the current request</a>.</li><li><p>Update the <code id=the-img-element:the-img-element-64><a href=#the-img-element>img</a></code> element's presentation appropriately.</li><li><p><a id=the-img-element:fire-a-simple-event-13 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=the-img-element:event-load-4><a href=indices.html#event-load>load</a></code> at the
     <code id=the-img-element:the-img-element-65><a href=#the-img-element>img</a></code> element.</li></ol>

   </li></ol>

  <hr>

  <p>The <a id=the-img-element:task-source href=webappapis.html#task-source>task source</a> for the <a href=webappapis.html#concept-task id=the-img-element:concept-task-10>tasks</a> <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-16>queued</a> by algorithms in this section is the <a id=the-img-element:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task
  source</a>.</p>

  <hr>

  <p>What an <code id=the-img-element:the-img-element-66><a href=#the-img-element>img</a></code> element represents depends on the <code id=the-img-element:attr-img-src-12><a href=#attr-img-src>src</a></code> attribute and the <code id=the-img-element:attr-img-alt-3><a href=#attr-img-alt>alt</a></code>
  attribute.</p>

  <dl class=switch><dt>If the <code id=the-img-element:attr-img-src-13><a href=#attr-img-src>src</a></code> attribute is set and the <code id=the-img-element:attr-img-alt-4><a href=#attr-img-alt>alt</a></code> attribute is set to the empty string<dd>

    <p>The image is either decorative or supplemental to the rest of the content, redundant with
    some other information in the document.</p>

    <p>If the image is <a href=#img-available id=the-img-element:img-available-2>available</a> and the user agent is configured
    to display that image, then the element <a id=the-img-element:represents href=dom.html#represents>represents</a> the element's image data.</p>

    <p>Otherwise, the element <a id=the-img-element:represents-2 href=dom.html#represents>represents</a> nothing, and may be omitted completely from
    the rendering. User agents may provide the user with a notification that an image is present but
    has been omitted from the rendering.</p>

   <dt>If the <code id=the-img-element:attr-img-src-14><a href=#attr-img-src>src</a></code> attribute is set and the <code id=the-img-element:attr-img-alt-5><a href=#attr-img-alt>alt</a></code> attribute is set to a value that isn't empty<dd>

    <p>The image is a key part of the content; the <code id=the-img-element:attr-img-alt-6><a href=#attr-img-alt>alt</a></code> attribute
    gives a textual equivalent or replacement for the image.</p>

    <p>If the image is <a href=#img-available id=the-img-element:img-available-3>available</a> and the user agent is configured
    to display that image, then the element <a id=the-img-element:represents-3 href=dom.html#represents>represents</a> the element's image data.</p>

    <p>Otherwise, the element <a id=the-img-element:represents-4 href=dom.html#represents>represents</a> the text given by the <code id=the-img-element:attr-img-alt-7><a href=#attr-img-alt>alt</a></code> attribute. User agents may provide the user with a notification
    that an image is present but has been omitted from the rendering.</p>

   <dt>If the <code id=the-img-element:attr-img-src-15><a href=#attr-img-src>src</a></code> attribute is set and the <code id=the-img-element:attr-img-alt-8><a href=#attr-img-alt>alt</a></code> attribute is not<dd>

    <p>The image might be a key part of the content, and there is no textual equivalent of the image
    available.</p>

    <p class=note>In a conforming document, the absence of the <code id=the-img-element:attr-img-alt-9><a href=#attr-img-alt>alt</a></code> attribute indicates that the image is a key part of the content
    but that a textual replacement for the image was not available when the image was generated.</p>

    <p>If the image is <a href=#img-available id=the-img-element:img-available-4>available</a> and the user agent is configured
    to display that image, then the element <a id=the-img-element:represents-5 href=dom.html#represents>represents</a> the element's image data.</p>

    <p>Otherwise, the user agent should display some sort of indicator that there is an image that
    is not being rendered, and may, if requested by the user, or if so configured, or when required
    to provide contextual information in response to navigation, provide caption information for the
    image, derived as follows:</p>

    <ol><li><p>If the image has a <code id=the-img-element:attr-title><a href=dom.html#attr-title>title</a></code> attribute whose value is not
     the empty string, then the value of that attribute is the caption information; abort these
     steps.</li><li><p>If the image is a descendant of a <code id=the-img-element:the-figure-element><a href=semantics.html#the-figure-element>figure</a></code> element that has a child
     <code id=the-img-element:the-figcaption-element><a href=semantics.html#the-figcaption-element>figcaption</a></code> element, and, ignoring the <code id=the-img-element:the-figcaption-element-2><a href=semantics.html#the-figcaption-element>figcaption</a></code> element and its
     descendants, the <code id=the-img-element:the-figure-element-2><a href=semantics.html#the-figure-element>figure</a></code> element has no <a id=the-img-element:flow-content-2-2 href=dom.html#flow-content-2>flow content</a> descendants other
     than <a id=the-img-element:inter-element-whitespace href=dom.html#inter-element-whitespace>inter-element whitespace</a> and the <code id=the-img-element:the-img-element-67><a href=#the-img-element>img</a></code> element, then the contents of the first such
     <code id=the-img-element:the-figcaption-element-3><a href=semantics.html#the-figcaption-element>figcaption</a></code> element are the caption information; abort these steps.</li><li><p>There is no caption information.</li></ol>

   <dt>If the <code id=the-img-element:attr-img-src-16><a href=#attr-img-src>src</a></code> attribute is not set and either the <code id=the-img-element:attr-img-alt-10><a href=#attr-img-alt>alt</a></code> attribute is set to the empty string or the <code id=the-img-element:attr-img-alt-11><a href=#attr-img-alt>alt</a></code> attribute is not set at all<dd>

    <p>The element <a id=the-img-element:represents-6 href=dom.html#represents>represents</a> nothing.</p>

   <dt>そうでなければ<dd>

    <p>The element <a id=the-img-element:represents-7 href=dom.html#represents>represents</a> the text given by the <code id=the-img-element:attr-img-alt-12><a href=#attr-img-alt>alt</a></code> attribute.</p>

   </dl>

  <p>The <code id=the-img-element:attr-img-alt-13><a href=#attr-img-alt>alt</a></code> attribute does not represent advisory information.
  User agents must not present the contents of the <code id=the-img-element:attr-img-alt-14><a href=#attr-img-alt>alt</a></code> attribute
  in the same way as content of the <code id=the-img-element:attr-title-2><a href=dom.html#attr-title>title</a></code> attribute.</p>

  <p>User agents may always provide the user with the option to display any image, or to prevent any
  image from being displayed. User agents may also apply heuristics to help the user make use of the
  image when the user is unable to see it, e.g. due to a visual disability or because they are using
  a text terminal with no graphics capabilities. Such heuristics could include, for instance,
  optical character recognition (OCR) of text found within the image.</p>

  <p class=warning>While user agents are encouraged to repair cases of missing <code id=the-img-element:attr-img-alt-15><a href=#attr-img-alt>alt</a></code> attributes, authors must not rely on such behaviour. <a href=#alt>Requirements for providing text to act as an alternative for images</a> are described
  in detail below.</p>

  <p>The <em>contents</em> of <code id=the-img-element:the-img-element-68><a href=#the-img-element>img</a></code> elements, if any, are ignored for the purposes of
  rendering.</p>

  

  <hr>

  <p><code id=the-img-element:attr-hyperlink-usemap-3><a href=#attr-hyperlink-usemap>usemap</a></code>属性が存在する場合、画像が関連付けられた<a href=#image-map id=the-img-element:image-map-2>イメージマップ</a>を示すことができる。</p>

  <p><code id=the-img-element:attr-hyperlink-href><a href=semantics.html#attr-hyperlink-href>href</a></code>属性を持つ<code id=the-img-element:the-a-element><a href=semantics.html#the-a-element>a</a></code>要素の子孫である要素で使用される場合、<dfn id=attr-img-ismap><code>ismap</code></dfn>属性は、要素がサーバーサイドのイメージマップへのアクセスを提供することによって、その存在を示す。これは、イベントが対応する<code id=the-img-element:the-a-element-2><a href=semantics.html#the-a-element>a</a></code>要素でどのように処理されるかに影響する。</p>

  <p><code id=the-img-element:attr-img-ismap-2><a href=#attr-img-ismap>ismap</a></code>属性は<a id=the-img-element:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>である。属性は、<code id=the-img-element:attr-hyperlink-href-2><a href=semantics.html#attr-hyperlink-href>href</a></code>属性を持つ祖先<code id=the-img-element:the-a-element-3><a href=semantics.html#the-a-element>a</a></code>要素を持たない要素に指定してはならない。</p>

  <p class=note>The <code id=the-img-element:attr-hyperlink-usemap-4><a href=#attr-hyperlink-usemap>usemap</a></code> and <code id=the-img-element:attr-img-ismap-3><a href=#attr-img-ismap>ismap</a></code> attributes can result in confusing behavior when used together with <code id=the-img-element:the-source-element-when-used-with-the-picture-element-11><a href=#the-source-element-when-used-with-the-picture-element>source</a></code> elements with the <code id=the-img-element:attr-picture-source-media-3><a href=#attr-picture-source-media>media</a></code> attribute specified in a <code id=the-img-element:the-picture-element-9><a href=#the-picture-element>picture</a></code> element.
<code id=the-img-element:attr-hyperlink-usemap-4><a href=#attr-hyperlink-usemap>usemap</a></code>および<code id=the-img-element:attr-img-ismap-3><a href=#attr-img-ismap>ismap</a></code>属性は、<code id=the-img-element:the-picture-element-9><a href=#the-picture-element>picture</a></code>要素で指定される<code id=the-img-element:attr-picture-source-media-3><a href=#attr-picture-source-media>media</a></code>属性をもつ<code id=the-img-element:the-source-element-when-used-with-the-picture-element-11><a href=#the-source-element-when-used-with-the-picture-element>source</a></code>要素と一緒に使用される場合に混乱する振る舞いをもたらすかもしれない。</p>

  <p><code id=the-img-element:the-img-element-69><a href=#the-img-element>img</a></code>要素は、<a href=#dimension-attributes id=the-img-element:dimension-attributes>寸法属性</a>をサポートする。</p>

  

  <p><dfn id=dom-img-alt><code>alt</code></dfn>、<dfn id=dom-img-src><code>src</code></dfn>、<dfn id=dom-img-srcset><code>srcset</code></dfn>、<dfn id=dom-img-sizes><code>sizes</code></dfn> IDL属性は、同じ名前の各コンテンツ属性を<a id=the-img-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p><dfn id=dom-img-crossorigin><code>crossOrigin</code></dfn> IDL属性は、<code id=the-img-element:attr-img-crossorigin-7><a href=#attr-img-crossorigin>crossorigin</a></code>コンテンツ属性を<a id=the-img-element:reflect-2 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p><dfn id=dom-img-usemap><code>useMap</code></dfn> IDL属性は、<code id=the-img-element:attr-hyperlink-usemap-5><a href=#attr-hyperlink-usemap>usemap</a></code>コンテンツ属性を<a id=the-img-element:reflect-3 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p><dfn id=dom-img-ismap><code>isMap</code></dfn> IDL属性は、<code id=the-img-element:attr-img-ismap-4><a href=#attr-img-ismap>ismap</a></code>コンテンツ属性を<a id=the-img-element:reflect-4 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  


  <dl class=domintro><dt><var>image</var> . <code id=the-img-element:dom-img-width-2><a href=#dom-img-width>width</a></code> [ = <var>value</var> ]<dt><var>image</var> . <code id=the-img-element:dom-img-height-2><a href=#dom-img-height>height</a></code> [ = <var>value</var> ]<dd>


    <p>これらの属性は、実際のレンダリングされた画像の大きさ、または寸法が未知である場合に0を返す。</p>

    <p>対応するコンテンツ属性を変更するために、設定が可能である。</p>

   <dt><var>image</var> . <code id=the-img-element:dom-img-naturalwidth-2><a href=#dom-img-naturalwidth>naturalWidth</a></code><dt><var>image</var> . <code id=the-img-element:dom-img-naturalheight-2><a href=#dom-img-naturalheight>naturalHeight</a></code><dd>


    <p>これらの属性は、画像の内在寸法、または寸法が未知の場合に0を返す。</p>

   <dt><var>image</var> . <code id=the-img-element:dom-img-complete-2><a href=#dom-img-complete>complete</a></code><dd>


    <p>画像が完全にダウンロードされている場合、または、何も画像が指定されない場合にtrueを返す。そうでなければ、falseを返す。</p>

   <dt><var>image</var> . <code id=the-img-element:dom-img-currentsrc-2><a href=#dom-img-currentsrc>currentSrc</a></code><dd>

    <p>画像の<a id=the-img-element:absolute-url-2 href=infrastructure.html#absolute-url>絶対URL</a>を返す。</p>

   <dt><var>image</var> = new <code id=the-img-element:dom-image-2><a href=#dom-image>Image</a></code>( [ <var>width</var> [, <var>height</var> ] ] )<dd>


    <p>該当する場合、適切な引数で渡された値に設定された<code id=the-img-element:attr-dim-width-4><a href=#attr-dim-width>width</a></code>と<code id=the-img-element:attr-dim-height-2><a href=#attr-dim-height>height</a></code>属性を持つ、新しい<code id=the-img-element:the-img-element-70><a href=#the-img-element>img</a></code>要素を返す。</p>

   </dl>

  

  <p>The IDL attributes <dfn id=dom-img-width><code>width</code></dfn> and <dfn id=dom-img-height><code>height</code></dfn> must return the rendered width and height of the
  image, in CSS pixels, if the image is <a id=the-img-element:being-rendered href=rendering.html#being-rendered>being rendered</a>, and is being rendered to a
  visual medium; or else the <a href=#density-corrected-intrinsic-width-and-height id=the-img-element:density-corrected-intrinsic-width-and-height-4>density-corrected intrinsic width and height</a>
  of the image, in CSS pixels, if the image has <a id=the-img-element:intrinsic-dimensions-5 href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> and is
  <i id=the-img-element:img-available-5><a href=#img-available>available</a></i> but not being rendered to a visual medium; or else 0, if
  the image is not <i id=the-img-element:img-available-6><a href=#img-available>available</a></i> or does not have
  <a id=the-img-element:intrinsic-dimensions-6 href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a>. <a href=references.html#refsCSS>[CSS]</a></p>

  <p>On setting, they must act as if they <a href=infrastructure.html#reflect id=the-img-element:reflect-5>reflected</a> the respective
  content attributes of the same name.</p>

  <p>The IDL attributes <dfn id=dom-img-naturalwidth><code>naturalWidth</code></dfn> and
  <dfn id=dom-img-naturalheight><code>naturalHeight</code></dfn> must return
  the <a href=#density-corrected-intrinsic-width-and-height id=the-img-element:density-corrected-intrinsic-width-and-height-5>density-corrected intrinsic width and height</a>
  of the image, in CSS pixels, if the image has <a id=the-img-element:intrinsic-dimensions-7 href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> and is
  <i id=the-img-element:img-available-7><a href=#img-available>available</a></i>, or else 0. <a href=references.html#refsCSS>[CSS]</a><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23581" title="The case when @src refers to a image without intrinsic width/height (SVG) is undefined.">23581</a></div>

  <p>The IDL attribute <dfn id=dom-img-complete><code>complete</code></dfn> must return true if
  any of the following conditions is true:<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=18742" title="tests relying on HTMLImageElement.complete are incorrect">18742</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26113" title='&lt;img&gt; .complete should be changed by "update the image data" algorithm'>26113</a></div>

  <ul class=brief><li>Both the <code id=the-img-element:attr-img-src-17><a href=#attr-img-src>src</a></code> attribute and the <code id=the-img-element:attr-img-srcset-8><a href=#attr-img-srcset>srcset</a></code> attribute are omitted.

   

   </li><li>The <code id=the-img-element:attr-img-srcset-9><a href=#attr-img-srcset>srcset</a></code> attribute is omitted and the <code id=the-img-element:attr-img-src-18><a href=#attr-img-src>src</a></code> attribute's value is the empty string. 

    

   </li><li>The final <a href=webappapis.html#concept-task id=the-img-element:concept-task-11>task</a> that is <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-17>queued</a> by the <a id=the-img-element:networking-task-source-8 href=webappapis.html#networking-task-source>networking task source</a> once the resource has been fetched
   has been <a href=webappapis.html#queue-a-task id=the-img-element:queue-a-task-18>queued</a>.

   

   </li><li>The <code id=the-img-element:the-img-element-71><a href=#the-img-element>img</a></code> element is <a href=#img-all id=the-img-element:img-all-7>completely available</a>.

   

   </li><li>The <code id=the-img-element:the-img-element-72><a href=#the-img-element>img</a></code> element is <a href=#img-error id=the-img-element:img-error-8>broken</a>.

  

  </li></ul>

  <p>Otherwise, the attribute must return false.</p>

  <p class=note>The value of <code id=the-img-element:dom-img-complete-3><a href=#dom-img-complete>complete</a></code> can thus change while
  a <a href=webappapis.html#concept-script id=the-img-element:concept-script>script</a> is executing.</p>

  <p>The <dfn id=dom-img-currentsrc><code>currentSrc</code></dfn> IDL attribute
  must return the <code id=the-img-element:the-img-element-73><a href=#the-img-element>img</a></code> element's <a href=#current-request id=the-img-element:current-request-35>current request</a>'s <a href=#img-req-url id=the-img-element:img-req-url-9>current URL</a>.</p>

  <p>A constructor is provided for creating <code id=the-img-element:htmlimageelement><a href=#htmlimageelement>HTMLImageElement</a></code> objects (in addition to
  the factory methods from DOM such as <code>createElement()</code>): <dfn id=dom-image><code>Image(<var>width</var>, <var>height</var>)</code></dfn>.
  When invoked as a constructor, this must return a new <code id=the-img-element:htmlimageelement-2><a href=#htmlimageelement>HTMLImageElement</a></code> object (a new
  <code id=the-img-element:the-img-element-74><a href=#the-img-element>img</a></code> element). If the <var>width</var> argument is present, the new object's
  <code id=the-img-element:attr-dim-width-5><a href=#attr-dim-width>width</a></code> content attribute must be set to <var>width</var>. If the <var>height</var> argument is also present, the new object's
  <code id=the-img-element:attr-dim-height-3><a href=#attr-dim-height>height</a></code> content attribute must be set to <var>height</var>.
  The element's <a id=the-img-element:node-document-14 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> must be the <a id=the-img-element:active-document-4 href=browsers.html#active-document>active document</a> of the
  <a id=the-img-element:browsing-context-3 href=browsers.html#browsing-context>browsing context</a> of the <code id=the-img-element:window-3><a href=browsers.html#window>Window</a></code> object on which the interface object of
  the invoked constructor is found.</p>

  


  <div class=example>

   <p>1つの画像は、コンテキストに応じて異なる適切な代替テキストを持つことができる。</p>

   <p>次の場合のそれぞれにおいて、同じ画像を使用するが、<code id=the-img-element:attr-img-alt-16><a href=#attr-img-alt>alt</a></code>テキストは毎回異なる。画像は、スイスのジュネーブ州カルージュ自治体の紋章である。</p>

   <p>ここでは、補足的なアイコンとして使用される：</p>
   <pre>&lt;p&gt;I lived in &lt;img src="carouge.svg" alt=""&gt; Carouge.&lt;/p&gt;</pre>

   <p>ここでは、町を表すアイコンとして使用される：</p>
   <pre>&lt;p&gt;Home town: &lt;img src="carouge.svg" alt="Carouge"&gt;&lt;/p&gt;</pre>

   <p>ここでは町でのテキストの一部として使用される：</p>

   <pre>&lt;p&gt;Carouge has a coat of arms.&lt;/p&gt;
&lt;p&gt;&lt;img src="carouge.svg" alt="The coat of arms depicts a lion, sitting in front of a tree."&gt;&lt;/p&gt;
&lt;p&gt;It is used as decoration all over the town.&lt;/p&gt;</pre>

   <p>ここでは代わりに代替物として、説明が与えられる場所で類似のテキストだけでなく画像もサポートするための方法として使用される：</p>

   <pre>&lt;p&gt;Carouge has a coat of arms.&lt;/p&gt;
&lt;p&gt;&lt;img src="carouge.svg" alt=""&gt;&lt;/p&gt;
&lt;p&gt;The coat of arms depicts a lion, sitting in front of a tree.
It is used as decoration all over the town.&lt;/p&gt;</pre>

   <p>ここでは、物語の一部として使用される：</p>

   <pre>&lt;p&gt;She picked up the folder and a piece of paper fell out.&lt;/p&gt;
&lt;p&gt;&lt;img src="carouge.svg" alt="Shaped like a shield, the paper had a
red background, a green tree, and a yellow lion with its tongue
hanging out and whose tail was shaped like an S."&gt;&lt;/p&gt;
&lt;p&gt;She stared at the folder. S! The answer she had been looking for all
this time was simply the letter S! How had she not seen that before? It all
came together now. The phone call where Hector had referred to a lion's tail,
the time Maria had stuck her tongue out...&lt;/p&gt;</pre>

   <p>ここでは、ある種の紋章であることのみで、どのような画像であるかを公表時点で未知であり、したがって、置換テキストが提供されず、<code id=the-img-element:attr-title-3><a href=dom.html#attr-title>title</a></code>属性で、代わりに画像に対して簡単なキャプションが提供される：
</p>

   <pre>&lt;p&gt;The last user to have uploaded a coat of arms uploaded this one:&lt;/p&gt;
&lt;p&gt;&lt;img src="last-uploaded-coat-of-arms.cgi" title="User-uploaded coat of arms."&gt;&lt;/p&gt;</pre>

   <p>理想的には、著者は、この場合ですら実際の置換テキストを提供するための方法を見つけるだろう。たとえば、前のユーザーを尋ねることによってなど。置換テキストを提供しないことは、画像を見ることができない人々、たとえば、視覚障害者のユーザー、または非常に低帯域幅の接続や従量課金、またはテキストのみのウェブブラウザを使用することを余儀なくされているユーザーに対して文書の利用をより困難にする。</p>

  </div>

  <div class=example>

   <p>ここで、毎回別の適切な代替テキストをともなう、異なるコンテキストで使用したのと同じ写真を示す複数の例を次に示す。</p>

   <pre>&lt;article&gt;
 &lt;h1&gt;My cats&lt;/h1&gt;
 &lt;h2&gt;Fluffy&lt;/h2&gt;
 &lt;p&gt;Fluffy is my favourite.&lt;/p&gt;
 &lt;img src="fluffy.jpg" alt="She likes playing with a ball of yarn."&gt;
 &lt;p&gt;She's just too cute.&lt;/p&gt;
 &lt;h2&gt;Miles&lt;/h2&gt;
 &lt;p&gt;My other cat, Miles just eats and sleeps.&lt;/p&gt;
&lt;/article&gt;</pre>

   <pre>&lt;article&gt;
 &lt;h1&gt;Photography&lt;/h1&gt;
 &lt;h2&gt;Shooting moving targets indoors&lt;/h2&gt;
 &lt;p&gt;The trick here is to know how to anticipate; to know at what speed and
 what distance the subject will pass by.&lt;/p&gt;
 &lt;img src="fluffy.jpg" alt="A cat flying by, chasing a ball of yarn, can be
 photographed quite nicely using this technique."&gt;
 &lt;h2&gt;Nature by night&lt;/h2&gt;
 &lt;p&gt;To achieve this, you'll need either an extremely sensitive film, or
 immense flash lights.&lt;/p&gt;
&lt;/article&gt;</pre>

   <pre>&lt;article&gt;
 &lt;h1&gt;About me&lt;/h1&gt;
 &lt;h2&gt;My pets&lt;/h2&gt;
 &lt;p&gt;I've got a cat named Fluffy and a dog named Miles.&lt;/p&gt;
 &lt;img src="fluffy.jpg" alt="Fluffy, my cat, tends to keep itself busy."&gt;
 &lt;p&gt;My dog Miles and I like go on long walks together.&lt;/p&gt;
 &lt;h2&gt;music&lt;/h2&gt;
 &lt;p&gt;After our walks, having emptied my mind, I like listening to Bach.&lt;/p&gt;
&lt;/article&gt;</pre>

   <pre>&lt;article&gt;
 &lt;h1&gt;Fluffy and the Yarn&lt;/h1&gt;
 &lt;p&gt;Fluffy was a cat who liked to play with yarn. She also liked to jump.&lt;/p&gt;
 &lt;aside&gt;&lt;img src="fluffy.jpg" alt="" title="Fluffy"&gt;&lt;/aside&gt;
 &lt;p&gt;She would play in the morning, she would play in the evening.&lt;/p&gt;
&lt;/article&gt;</pre>

  </div>


  <h5 id=alt>4.8.4.1 画像に対して代替として動作するテキストを提供に対する要件</h5>


  <h6 id=general-guidelines>4.8.4.1.1 一般的なガイドライン</h6>

  <p>特に指定されている場合を除き、<code id=general-guidelines:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性を指定しなければならず、その値が空であってはならない。値は画像に対して適切な置換でなければならない。<code id=general-guidelines:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>属性に対する具体的な要件は、以下の節で説明するように、画像が表現することを意図する内容によって異なる。</p>

  <p>代替テキストを記述する場合に考慮すべき最も一般的な規則は以下の通り：<strong><code id=general-guidelines:attr-img-alt-3><a href=#attr-img-alt>alt</a></code>のテキストとすべての画像を置換してもページの意味を変えない属性</strong>。</p>

  <p>よって、一般に、代替テキストは、画像を含めることができなかったものが書かれていたか考慮して書き込むことができる。</p>

  <p>この原則は、<code id=general-guidelines:attr-img-alt-4><a href=#attr-img-alt>alt</a></code>属性の値は画像の<em>caption</em>、<em>title</em>、<em>legend</em>を考えることができ、テキストを含めるべきではないということである。画像の<em>代わりに</em>ユーザーによって使用できる置換テキストを含むことを仮定する。画像を補完することを意味しない。<code id=general-guidelines:attr-title><a href=dom.html#attr-title>title</a></code>属性は、補足情報のために使用することができる。</p>

  <p>別の原則は、<code id=general-guidelines:attr-img-alt-5><a href=#attr-img-alt>alt</a></code>属性の値は既に画像の横に文で提供される情報を繰り返すべきではないということである。</p>

  <p class=note>代替テキストを考える一つの方法は、画像の存在があることを言及することなく、電話で誰かに画像を含むページをどのように読むかを考えることである。通常、画像の代わりに言うものは何でも、代替テキストを記述するための良いスタートである。</p>


  <h6 id=a-link-or-button-containing-nothing-but-the-image>4.8.4.1.2 画像のみを含むリンクまたはボタン</h6>

  <p><a id=a-link-or-button-containing-nothing-but-the-image:hyperlink href=semantics.html#hyperlink>ハイパーリンク</a>、または<code id=a-link-or-button-containing-nothing-but-the-image:the-button-element><a href=forms.html#the-button-element>button</a></code>要素を作成する<a id=a-link-or-button-containing-nothing-but-the-image:the-a-element href=semantics.html#the-a-element>a</a>要素が、テキスト内容がないものの1つ以上の画像を含む場合、<code id=a-link-or-button-containing-nothing-but-the-image:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性はリンクやボタンの目的を併せて伝えるテキストを含まなければならない。</p>

  <div class=example>

   <p>この例では、ユーザーは、3つのリストから好みの色を選択するよう求められている。各色は画像で与えられるが、画像を表示しないようにユーザーエージェントを設定しているユーザーのために、色名が代わりに使用される：</p>

   <pre>&lt;h1&gt;Pick your colour&lt;/h1&gt;
&lt;ul&gt;
 &lt;li&gt;&lt;a href="green.html"&gt;<strong>&lt;img src="green.jpeg" alt="Green"&gt;</strong>&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="blue.html"&gt;<strong>&lt;img src="blue.jpeg" alt="Blue"&gt;</strong>&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href="red.html"&gt;<strong>&lt;img src="red.jpeg" alt="Red"&gt;</strong>&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</pre>

  </div>

  <div class=example>

   <p>この例において、それぞれのボタンは、ユーザーが望む色の出力の種類を示すために、画像のセットを持つ。最初の画像は、代替テキストを提供するために使用される。</p>

   <pre>&lt;button name="rgb"&gt;<strong>&lt;img src="red" alt="RGB"&gt;&lt;img src="green" alt=""&gt;&lt;img src="blue" alt=""&gt;</strong>&lt;/button&gt;
&lt;button name="cmyk"&gt;<strong>&lt;img src="cyan" alt="CMYK"&gt;&lt;img src="magenta" alt=""&gt;&lt;img src="yellow" alt=""&gt;&lt;img src="black" alt=""&gt;</strong>&lt;/button&gt;</pre>

   <p>各画像はテキストの一部を表すため、このようにも書くことができる：</p>

   <pre>&lt;button name="rgb"&gt;<strong>&lt;img src="red" alt="R"&gt;&lt;img src="green" alt="G"&gt;&lt;img src="blue" alt="B"&gt;</strong>&lt;/button&gt;
&lt;button name="cmyk"&gt;<strong>&lt;img src="cyan" alt="C"&gt;&lt;img src="magenta" alt="M"&gt;&lt;img src="yellow" alt="Y"&gt;&lt;img src="black" alt="K"&gt;</strong>&lt;/button&gt;</pre>

   <p>しかし、他の代替テキストとともに、これは動作しないかもしれず、それぞれの場合に1つの画像にすべての代替テキストを入れる方が理にかなっているかもしれない：</p>

   <pre>&lt;button name="rgb"&gt;<strong>&lt;img src="red" alt="sRGB profile"&gt;&lt;img src="green" alt=""&gt;&lt;img src="blue" alt=""&gt;</strong>&lt;/button&gt;
&lt;button name="cmyk"&gt;<strong>&lt;img src="cyan" alt="CMYK profile"&gt;&lt;img src="magenta" alt=""&gt;&lt;img src="yellow" alt=""&gt;&lt;img src="black" alt=""&gt;</strong>&lt;/button&gt;</pre>

  </div>



  <h6 id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations>4.8.4.1.3 代替グラフィカル表現をもつフレーズまたは段落：チャート、図、グラフ、マップ、イラスト</h6>

  <p>時に、視覚的な形式、たとえばフローチャート、図、グラフ、または方角を示す簡単な地図などでより明確に記述できる。そのような例において、画像は<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-img-element><a href=#the-img-element>img</a></code>要素を使って指定できるが、より少ないテキスト版が依然として与えられなければならず、画像を表示できない（たとえば、非常に低速な接続を持つ、またはテキストのみのブラウザを使用している、またはハンズフリー自動車用音声ウェブブラウザによって読み出されているページを聞いている、または単に目が見えないため）ユーザーは依然としてメッセージが搬送されて理解できる。</p>

  <p>テキストは<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性で指定されなければならず、かつ<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-src><a href=#attr-img-src>src</a></code>属性で指定される画像と同じメッセージを伝えなければならない。</p>

  <p>代替テキストが画像の説明でなく、画像の<em>置換</em>であることを認識することが重要である。</p>

  <div class=example>

   <p>次の例において、文形式のフローチャートを言い換える<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>属性のテキストをともなう、画像形式の<a href=https://html.spec.whatwg.org/multipage/images/parsing-model-overview.png>フローチャート</a>を持つ：</p>

   <pre>&lt;p&gt;In the common case, the data handled by the tokenization stage
comes from the network, but it can also come from script.&lt;/p&gt;
&lt;p&gt;<strong>&lt;img src="images/parsing-model-overview.png" alt="The Network
passes data to the Input Stream Preprocessor, which passes it to the
Tokenizer, which passes it to the Tree Construction stage. From there,
data goes to both the DOM and to Script Execution. Script Execution is
linked to the DOM, and, using document.write(), passes data to the
Tokenizer."&gt;</strong>&lt;/p&gt;</pre>

  </div>

  <div class=example>

   <p>これは別の例であり、説明に画像を含める問題に良い解決策と悪い解決策を示すものである。</p>

   <p>まず、これは良い解決策である。このサンプルは、画像が存在しなかった場合、代替テキストがちょうど文に入れたであろうものがどうあるべきかを示す。</p>

   <pre>&lt;!-- This is the correct way to do things. --&gt;
&lt;p&gt;
 You are standing in an open field west of a house.
 <strong>&lt;img src="house.jpeg" alt="The house is white, with a boarded front door."&gt;</strong>
 There is a small mailbox here.
&lt;/p&gt;</pre>

   <p>つぎに、これは悪い解決策である。この間違った方法では、画像に対するテキスト置換の代わりに、代替テキストは画像の簡単な説明である。画像が表示されていない場合、テキストは最初の例と同様に流れない。</p>

   <pre class=bad>&lt;!-- <em>This is the wrong way to do things.</em> --&gt;
&lt;p&gt;
 You are standing in an open field west of a house.
 &lt;img src="house.jpeg" alt="A white house, with a boarded front door."&gt;
 There is a small mailbox here.
&lt;/p&gt;</pre>

   <p>（<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-title><a href=dom.html#attr-title>title</a></code>属性に対して、または、この画像をもつ<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figure-element><a href=semantics.html#the-figure-element>figure</a></code>の<code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figcaption-element><a href=semantics.html#the-figcaption-element>figcaption</a></code>要素内で適当かもしれないが）"Photo of white house with boarded door"などのテキストは同様に悪い代替テキストとなる。</p>

  </div>


  <h6 id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos>4.8.4.1.4 代替グラフィカル表現をもつ短いフレーズまたはラベル：アイコン、ロゴ</h6>

  <p>文書は、アイコン形式で情報を含むことができる。アイコンは、視覚ブラウザのユーザーに一目で機能を認識するのを助けることを意図する。</p>

  <p>ある場合、アイコンは同じ意味を伝えるテキストラベルを補足する。これらの場合において、<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性は存在しなければならないが、空でなければならない。</p>

  <div class=example>

   <p>Here the icons are next to text that conveys the same meaning, so they have an empty <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-2><a href=#attr-img-alt>alt</a></code> attribute:</p>

   <pre>&lt;nav&gt;
 &lt;p&gt;&lt;a href="/help/"&gt;<strong>&lt;img src="/icons/help.png" alt=""&gt;</strong> Help&lt;/a&gt;&lt;/p&gt;
 &lt;p&gt;&lt;a href="/configure/"&gt;<strong>&lt;img src="/icons/configuration.png" alt=""&gt;</strong>
 Configuration Tools&lt;/a&gt;&lt;/p&gt;
&lt;/nav&gt;</pre>

  </div>

  <p>他の場合において、アイコンは何かを意味する記述をもつ横のテキストを持たない。アイコンは自明であると仮定される。この場合において、同等のテキストラベルは<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-3><a href=#attr-img-alt>alt</a></code>属性で指定しなければならない。</p>

  <div class=example>

   <p>ここで、ニュースサイトの記事は、そのトピックを示すアイコンが表示される。</p>

   <pre>&lt;body&gt;
 &lt;article&gt;
  &lt;header&gt;
   &lt;h1&gt;Ratatouille wins &lt;i&gt;Best Movie of the Year&lt;/i&gt; award&lt;/h1&gt;
   &lt;p&gt;<strong>&lt;img src="movies.png" alt="Movies"&gt;</strong>&lt;/p&gt;
  &lt;/header&gt;
  &lt;p&gt;Pixar has won yet another &lt;i&gt;Best Movie of the Year&lt;/i&gt; award,
  making this its 8th win in the last 12 years.&lt;/p&gt;
 &lt;/article&gt;
 &lt;article&gt;
  &lt;header&gt;
   &lt;h1&gt;Latest TWiT episode is online&lt;/h1&gt;
   &lt;p&gt;<strong>&lt;img src="podcasts.png" alt="Podcasts"&gt;</strong>&lt;/p&gt;
  &lt;/header&gt;
  &lt;p&gt;The latest TWiT episode has been posted, in which we hear
  several tech news stories as well as learning much more about the
  iPhone. This week, the panelists compare how reflective their
  iPhones' Apple logos are.&lt;/p&gt;
 &lt;/article&gt;
&lt;/body&gt;</pre>

  </div>

  <p>多くのページは、会社、組織、プロジェクト、バンド、ソフトウェアパッケージ、国、またはその他団体を表すロゴ、記号、旗、またはエンブレムを含む。</p>

  <p>たとえばページの見出しのように、ロゴが団体を表すために使用されている場合、<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-4><a href=#attr-img-alt>alt</a></code>属性はロゴによって表されるその団体の名前を含まなければならない。<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-5><a href=#attr-img-alt>alt</a></code>属性は、伝えられているロゴであるという事実はないので、単語"ロゴ"のようなテキストを含んではなら<em>ない</em>。団体そのものである。</p>

  <p>ロゴが表すものの名前の横にロゴが使用される場合、そのロゴは補足であり、その<code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-6><a href=#attr-img-alt>alt</a></code>属性は空でなければならない。</p>

  <p>ロゴが単なる装飾材料（ブランディングとして、たとえば、ロゴが所属する実体を言及する記事でサイドイメージ）として使用される場合、純粋に装飾的な画像で以下のエントリが適用される。ロゴが実際に議論されている場合、それは代替グラフィック表現（ロゴ自体）、および適用される上記の最初のエントリを持つ語句や段落（ロゴの説明）として使用されている。</p>

  <div class=example>

   <p>以下の断片において、上記の例のすべての4つが存在している。まず、会社を表すために使用されるロゴを見てみる：</p>

   <pre>&lt;h1&gt;<strong>&lt;img src="XYZ.gif" alt="The XYZ company"&gt;</strong>&lt;/h1&gt;</pre>

   <p>次に、会社名の隣でロゴを使用する段落を見てみよう。何ら代替テキストを持たない：

   <pre>&lt;article&gt;
 &lt;h2&gt;News&lt;/h2&gt;
 &lt;p&gt;We have recently been looking at buying the <strong>&lt;img src="alpha.gif"
 alt=""&gt; ΑΒΓ company</strong>, a small Greek company
 specializing in our type of product.&lt;/p&gt;</pre>

   <p>この3番目の断片において、購買を吟味するarticleの一部として、asideに使用されているロゴを持つ：</p>

<pre> <strong>&lt;aside&gt;&lt;p&gt;&lt;img src="alpha-large.gif" alt=""&gt;&lt;/p&gt;&lt;/aside&gt;</strong>
 &lt;p&gt;The ΑΒΓ company has had a good quarter, and our
 pie chart studies of their accounts suggest a much bigger blue slice
 than its green and orange slices, which is always a good sign.&lt;/p&gt;
&lt;/article&gt;</pre>

   <p>最後に、ロゴを話題にする意見記事であり、ロゴは代替テキストで詳細に記載される。</p>

   <pre>&lt;p&gt;Consider for a moment their logo:&lt;/p&gt;

<strong>&lt;p&gt;&lt;img src="/images/logo" alt="It consists of a green circle with a
green question mark centered inside it."&gt;&lt;/p&gt;</strong>

&lt;p&gt;How unoriginal can you get? I mean, oooooh, a question mark, how
&lt;em&gt;revolutionary&lt;/em&gt;, how utterly &lt;em&gt;ground-breaking&lt;/em&gt;, I'm
sure everyone will rush to adopt those specifications now! They could
at least have tried for some sort of, I don't know, sequence of
rounded squares with varying shades of green and bold white outlines,
at least that would look good on the cover of a blue book.&lt;/p&gt;</pre>

   <p>この例は、画像が<i id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:img-available><a href=#img-available>利用可能</a></i>でない場合、どのように代替テキストは記述すべきかを示し、代わりにテキストが使用され、あたかも画像が最初の場所になかったかのように、テキストは周囲のテキストにシームレスに流れる。</p>

  </div>


  <h6 id=text-that-has-been-rendered-to-a-graphic-for-typographical-effect>4.8.4.1.5 印刷効果のためにグラフィックに描画されたテキスト</h6>

  <p>時に、画像がテキストだけで構成されており、画像の目的が、テキストをレンダリングするために使用される実際の印刷効果を強調するだけでなく、単にテキスト自体を伝えるもの。</p>

  <p>このような場合、<code id=text-that-has-been-rendered-to-a-graphic-for-typographical-effect:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性が存在しなければならないが、画像自身に書かれたものと同じテキストで構成されなければならない。</p>

  <div class=example>

   <p>テキスト"Earth Day"を含むグラフィックを考慮するが、文字はすべての花や植物で飾られる。グラフィカルなユーザーに対してページに味わいを加えるために、テキストが単に見出しとして使用される場合、適切な代替テキストはまさに同じテキスト"Earth Day"であり、装飾的な言及は何ら必要ない：</p>

   <pre>&lt;h1&gt;<strong>&lt;img src="earthdayheading.png" alt="Earth Day"&gt;</strong>&lt;/h1&gt;</pre>

  </div>

  <div class=example>

   <p>彩色写本は、その画像の一部のグラフィックスを使用するかもしれない。このような状況で代替テキストは、単に画像が表す文字である。</p>

   <pre>&lt;p&gt;&lt;img src="initials/o.svg" alt="O"&gt;nce upon a time and a long long time ago, late at
night, when it was dark, over the hills, through the woods, across a great ocean, in a land far
away, in a small house, on a hill, under a full moon...</pre> 

  </div>

  <p>画像がUnicodeで表現できない文字を表すために別の方法で使用される場合、たとえば外字、異体字、または新規の通貨記号のような新しい文字において、テキストによる代替は、たとえば、文字の発音を与えるために表音のひらがなやカタカナを使用するなど、同じものを記述するより伝統的な方法であるべきである。</p>

  <div class=example>

   <p>1997年からのこの例において、中央の2つのバーとともに渦巻き状のEのように見える最新式の通貨記号のかわりに、画像を使用して表現される。代替テキストは、文字の発音を与える。</p>

   <pre>&lt;p&gt;Only &lt;img src="euro.png" alt="euro "&gt;5.99!</pre>

  </div>

  <p>Unicode文字が同じ目的を果たすならば画像を使用すべきでない。たとえば装飾のためや、文字がUnicode文字集合にない（外字の場合のような）文字であるためなど、テキストが直接Unicodeを使用して表すことができない場合にのみ、画像が適切だろう。</p>

  <p class=note>デフォルトのシステムフォントが指定された文字をサポートしないため、著者が画像を使用するように誘惑される場合、ウェブフォントは画像よりも優れた解決策である。</p>



  <h6 id=a-graphical-representation-of-some-of-the-surrounding-text>4.8.4.1.6 周囲のテキストの一部をグラフィカルに表現</h6>

  <p>多くの場合、画像は実際には単なる補足であり、その存在は単に周囲のテキストを強調するだけである。この場合、<code id=a-graphical-representation-of-some-of-the-surrounding-text:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性が存在しなければならないが、その値は空文字列でなければならない。</p>

  <p>一般に画像は、画像を削除してもページの有用性が弱まるわけでない場合にこのカテゴリに分類されるが、画像を含めることは、視覚ブラウザのユーザーにとって概念を理解することがはるかに容易になる。</p>

  <div class=example>

   <p>グラフィカルな形式で、前の段落を繰り返すフローチャート：</p>

   <pre>&lt;p&gt;The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p&gt;
<strong>&lt;p&gt;&lt;img src="images/parsing-model-overview.png" alt=""&gt;&lt;/p&gt;</strong></pre>

   <p>この場合、単なるキャプションで構成する代替テキストを含めることが間違っているだろう。キャプションが含まれるべき場合、<code id=a-graphical-representation-of-some-of-the-surrounding-text:attr-title><a href=dom.html#attr-title>title</a></code>属性、または、<code id=a-graphical-representation-of-some-of-the-surrounding-text:the-figure-element><a href=semantics.html#the-figure-element>figure</a></code>および<code id=a-graphical-representation-of-some-of-the-surrounding-text:the-figcaption-element><a href=semantics.html#the-figcaption-element>figcaption</a></code>要素のいずれかを使用できる。後者の場合、画像は実際に代替グラフィック表現を伴うフレーズまたは段落かもしれず、したがって代替テキストを必要とする。</p>

   <pre>&lt;!-- Using the title="" attribute --&gt;
&lt;p&gt;The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p&gt;
&lt;p&gt;<strong>&lt;img src="images/parsing-model-overview.png" alt=""
        title="Flowchart representation of the parsing model."&gt;</strong>&lt;/p&gt;</pre>

   <pre>&lt;!-- Using &lt;figure&gt; and &lt;figcaption&gt; --&gt;
&lt;p&gt;The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p&gt;
&lt;figure&gt;
 <strong>&lt;img src="images/parsing-model-overview.png" alt="The Network leads to
 the Input Stream Preprocessor, which leads to the Tokenizer, which
 leads to the Tree Construction stage. The Tree Construction stage
 leads to two items. The first is Script Execution, which leads via
 document.write() back to the Tokenizer. The second item from which
 Tree Construction leads is the DOM. The DOM is related to the Script
 Execution."&gt;</strong>
 &lt;figcaption&gt;Flowchart representation of the parsing model.&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

   <pre class=bad>&lt;!-- This is WRONG. Do not do this. Instead, do what the above examples do. --&gt;
&lt;p&gt;The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p&gt;
&lt;p&gt;&lt;img src="images/parsing-model-overview.png"
        alt="Flowchart representation of the parsing model."&gt;&lt;/p&gt;
&lt;!-- Never put the image's caption in the alt="" attribute! --&gt;</pre>

  </div>

  <div class=example>

   <p>グラフィカルな形式で、前の段落を繰り返すグラフ：</p>

   <pre>&lt;p&gt;According to a study covering several billion pages,
about 62% of documents on the Web in 2007 triggered the Quirks
rendering mode of Web browsers, about 30% triggered the Almost
Standards mode, and about 9% triggered the Standards mode.&lt;/p&gt;
<strong>&lt;p&gt;&lt;img src="rendering-mode-pie-chart.png" alt=""&gt;&lt;/p&gt;</strong></pre>

  </div>



  <h6 id=ancillary-images>4.8.4.1.7 Ancillary images</h6>

  <p>Sometimes, an image is not critical to the content, but is nonetheless neither purely
  decorative nor entirely redundant with the text. In these cases, the <code id=ancillary-images:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute must be present, and its value should either be the
  empty string, or a textual representation of the information that the image conveys. If the image
  has a caption giving the image's title, then the <code id=ancillary-images:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>
  attribute's value must not be empty (as that would be quite confusing for non-visual readers).</p>

  <div class=example>

   <p>Consider a news article about a political figure, in which the individual's face was shown in
   an image that, through a style sheet, is floated to the right. The image is not purely
   decorative, as it is relevant to the story. The image is not entirely redundant with the story
   either, as it shows what the politician looks like. Whether any alternative text need be provided
   is an authoring decision, in part influenced by whether the image colours the interpretation of
   the prose.</p>

   <p>In this first variant, the image is shown without context, and no alternative text is
   provided:</p>

   <pre>&lt;p&gt;<strong>&lt;img src="alexsalmond.jpeg" alt=""&gt;</strong> Ahead of today's referendum,
the First Minister of Scotland, Alex Salmond, wrote an open letter to all
registered voters. In it, he admitted that all countries make mistakes.&lt;/p&gt;</pre>

   <p>If the picture is just a face, there might be no value in describing it. It's of no interest
   to the reader whether the individual has red hair or blond hair, whether the individual has white
   skin or black skin, whether the individual has one eye or two eyes.</p>

   <p>However, if the picture is more dynamic, for instance showing the politician as angry, or
   particularly happy, or devastated, some alternative text would be useful in setting the tone of
   the article, a tone that might otherwise be missed:</p>

   <pre>&lt;p&gt;<strong>&lt;img src="alexsalmond.jpeg" alt="Alex Salmond is sad."&gt;</strong>
Ahead of today's referendum, the First Minister of Scotland, Alex Salmond,
wrote an open letter to all registered voters. In it, he admitted that all
countries make mistakes.&lt;/p&gt;</pre>

   <pre>&lt;p&gt;<strong>&lt;img src="alexsalmond.jpeg" alt="Alex Salmond is ecstatic!"&gt;</strong>
Ahead of today's referendum, the First Minister of Scotland, Alex Salmond,
wrote an open letter to all registered voters. In it, he admitted that all
countries make mistakes.&lt;/p&gt;</pre>

   <p>Whether the individual was "sad" or "ecstatic" makes a difference to how the rest of the
   paragraph is to be interpreted: is he likely saying that he is resigned to the populace making a
   bad choice in the upcoming referendum, or is he saying that the election was a mistake but the
   likely turnout will make it irrelevant? The interpretation varies based on the image.</p>

  </div>

  <div class=example>

   <p>If the image has a caption, then including alternative text avoids leaving the non-visual user
   confused as to what the caption refers to.</p>

   <pre>&lt;p&gt;Ahead of today's referendum, the First Minister of Scotland, Alex Salmond,
wrote an open letter to all registered voters. In it, he admitted that all
countries make mistakes.&lt;/p&gt;
<strong>&lt;figure&gt;
 &lt;img src="alexsalmond.jpeg"
      alt="A high forehead, cheerful disposition, and dark hair round out Alex Salmond's face."&gt;
 &lt;figcaption&gt; Alex Salmond, SNP. Photo © 2014 PolitiPhoto. &lt;/figcaption&gt;
&lt;/figure&gt;</strong></pre>

  </div>



  <h6 id="a-purely-decorative-image-that-doesn't-add-any-information">4.8.4.1.8 情報を追加しない、純粋に装飾的な画像</h6>

  <p>画像は装飾であるが、ないのであれば、特に、ページ固有―たとえばサイト全体のデザインスキームの一部を形成する画像―画像は、文書のマークアップでは、サイトのCSSで指定する必要がありません。</p>

  <p>しかし、周囲のテキストで議論されないが、依然として一部の関連性を持つ装飾的な画像は<code id="a-purely-decorative-image-that-doesn't-add-any-information:the-img-element"><a href=#the-img-element>img</a></code>要素を使用して、ページに含めることが可能である。
そのような画像は装飾的であるが、依然としてコンテンツの一部に由来する。この場合、<code id="a-purely-decorative-image-that-doesn't-add-any-information:attr-img-alt"><a href=#attr-img-alt>alt</a></code>属性が存在しなければならないが、その値は空文字列でなければならない。</p>

  <div class=example>

   <p>Examples where the image is purely decorative despite being relevant would include things like
   a photo of the Black Rock City landscape in a blog post about an event at Burning Man, or an
   image of a painting inspired by a poem, on a page reciting that poem. The following snippet shows
   an example of the latter case (only the first verse is included in this snippet):</p>

   <pre>&lt;h1&gt;The Lady of Shalott&lt;/h1&gt;
<strong>&lt;p&gt;&lt;img src="shalott.jpeg" alt=""&gt;&lt;/p&gt;</strong>
&lt;p&gt;On either side the river lie&lt;br&gt;
Long fields of barley and of rye,&lt;br&gt;
That clothe the wold and meet the sky;&lt;br&gt;
And through the field the road run by&lt;br&gt;
To many-tower'd Camelot;&lt;br&gt;
And up and down the people go,&lt;br&gt;
Gazing where the lilies blow&lt;br&gt;
Round an island there below,&lt;br&gt;
The island of Shalott.&lt;/p&gt;</pre>

  </div>


  <h6 id=a-group-of-images-that-form-a-single-larger-picture-with-no-links>4.8.4.1.9 リンクのない単一の大きな画像を形成する画像のグループ</h6>

  <p>画像が小さな画像ファイルに分割されている場合、再度完全な画像を形成するために共に表示され、画像の1つは、全体としての絵に適するだろう関連規則に従って設定された<code id=a-group-of-images-that-form-a-single-larger-picture-with-no-links:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性を持たなければならず、残りのすべての画像は、空の<code id=a-group-of-images-that-form-a-single-larger-picture-with-no-links:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>属性を持たなければならない。</p>

  <div class=example>

   <p>次の例において、<span>XYZ社</span>の会社のロゴを表す絵が2枚に分割されており、1枚目は文字"XYZ"を含み、2枚目は単語"Corp"をもつ。代替テキスト（ "XYZ Corp"）は、最初の画像ですべてである。</p>

   <pre>&lt;h1&gt;<strong>&lt;img src="logo1.png" alt="XYZ Corp"&gt;&lt;img src="logo2.png" alt=""&gt;</strong>&lt;/h1&gt;</pre>

  </div>

  <div class=example>

   <p>次の例において、評価は、3つの塗りつぶされた星と、2つの中抜きの星として示される。代替テキストは"★★★☆☆"かもしれないが、代わりに著者は、より親切な形式"3 out of 5"の評価を与えるようにした。これは最初の画像の代替テキストであり、残りは空白の代替テキストを持つ。</p>

   <pre>&lt;p&gt;Rating: &lt;meter max=5 value=3&gt;<strong>&lt;img src="1" alt="3 out of 5"
  &gt;&lt;img src="1" alt=""&gt;&lt;img src="1" alt=""&gt;&lt;img src="0" alt=""
  &gt;&lt;img src="0" alt=""&gt;</strong>&lt;/meter&gt;&lt;/p&gt;</pre>

  </div>



  <h6 id=a-group-of-images-that-form-a-single-larger-picture-with-links>4.8.4.1.10 リンクのある単一の大きな画像を形成する画像のグループ</h6>

  <p>一般に<a href=#image-map id=a-group-of-images-that-form-a-single-larger-picture-with-links:image-map>イメージマップ</a>は、リンク用の画像をスライスする代わりに使用されるべきである。</p>

  <p>画像が確かにスライスされ、スライスされた画像のコンポーネントのいずれかがリンクの唯一のコンテンツである場合、リンクあたりの1つの画像は、リンクの目的を表す<code id=a-group-of-images-that-form-a-single-larger-picture-with-links:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性で代替テキストを持たなければならない。</p>

  <div class=example>

   <p>次の例において、ユーザーが冒険中の左側または右側を選ぶことができるように、異なる画像で左付属と右付属のそれぞれと、飛行スパゲッティモンスターエンブレムを表す絵である。</p>

   <pre>&lt;h1&gt;The Church&lt;/h1&gt;
&lt;p&gt;You come across a flying spaghetti monster. Which side of His
Noodliness do you wish to reach out for?&lt;/p&gt;
<strong>&lt;p&gt;&lt;a href="?go=left" &gt;&lt;img src="fsm-left.png"  alt="Left side. "&gt;&lt;/a
  &gt;&lt;img src="fsm-middle.png" alt=""
  &gt;&lt;a href="?go=right"&gt;&lt;img src="fsm-right.png" alt="Right side."&gt;&lt;/a&gt;&lt;/p&gt;</strong></pre>

  </div>



  <h6 id=a-key-part-of-the-content>4.8.4.1.11 コンテンツのキーパート</h6>

  <p>場合よって、画像はコンテンツの重要な部分である。たとえば、フォトギャラリーの一部であるページで、そうであるかもしれない。画像はそれを含むページの全体の<em>ポイント</em>である。</p>

  <p>画像の出所に依存するコンテンツの重要な部分である画像の代替テキストを提供する方法。</p>

  <dl><dt>一般的な場合<dd>

    <p>提供される詳細な代替テキストで可能な場合、たとえば、画像が雑誌のレビューでの一連のスクリーンショットや、漫画の一部、またはその写真に関するブログエントリでの写真である場合、画像に対して適切に提供されるようなテキストが<code id=a-key-part-of-the-content:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性のコンテンツとして指定されなければならない。</p>

    <div class=example>

     <p>代替テキストを伴う、新しいOSについてのギャラリーでのスクリーンショット：</p>

     <pre>&lt;figure&gt;
 <strong>&lt;img src="KDE%20Light%20desktop.png"
      alt="The desktop is blue, with icons along the left hand side in
           two columns, reading System, Home, K-Mail, etc. A window is
           open showing that menus wrap to a second line if they
           cannot fit in the window. The window has a list of icons
           along the top, with an address bar below it, a list of
           icons for tabs along the left edge, a status bar on the
           bottom, and two panes in the middle. The desktop has a bar
           at the bottom of the screen with a few buttons, a pager, a
           list of open applications, and a clock."&gt;</strong>
 &lt;figcaption&gt;Screenshot of a KDE desktop.&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

    </div>

    <div class=example>

     <p>財務レポートのグラフ：</p>

     <pre><strong>&lt;img src="sales.gif"
     title="Sales graph"
     alt="From 1998 to 2005, sales increased by the following percentages
     with each year: 624%, 75%, 138%, 40%, 35%, 9%, 21%"&gt;</strong></pre>

     <p>"sales graph"は、売上グラフに対する代替テキストとして不十分であることに注意する。良い<em>キャプション</em>とされるテキストは、一般に置換テキストとしては適さない。</p>

    </div>

   <dt>完全な記述を無視する画像<dd>

    <p>ある場合において、画像の性質は、徹底した代替テキストを提供することが現実的ではないかもしれない。たとえば、画像は不鮮明であったり、複雑なフラクタルかもしれず、詳細な地形図であるかもしれない。</p>

    <p>この場合、<code id=a-key-part-of-the-content:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>属性は、適切な代替テキストが含まれなければならないが、それはやや短いかもしれない。</p>

    <div class=example>

     <p>単に画像を正しく扱うことのできるテキストが存在しないのである。たとえば、ロールシャッハ・インクブロットテストを記述するための有用な言及はほとんどない。しかし、短い説明であっても、まだ何もないよりましである：</p>

     <pre>&lt;figure&gt;
 <strong>&lt;img src="/commons/a/a7/Rorschach1.jpg" alt="A shape with left-right
 symmetry with indistinct edges, with a small gap in the center, two
 larger gaps offset slightly from the center, with two similar gaps
 under them. The outline is wider in the top half than the bottom
 half, with the sides extending upwards higher than the center, and
 the center extending below the sides."&gt;</strong>
 &lt;figcaption&gt;A black outline of the first of the ten cards
 in the Rorschach inkblot test.&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

     <p>以下は、代替テキストの非常に悪い用法であろうことに注意する：</p>

     <pre class=bad>&lt;!-- This example is wrong. Do not copy it. --&gt;
&lt;figure&gt;
 &lt;img src="/commons/a/a7/Rorschach1.jpg" alt="A black outline
 of the first of the ten cards in the Rorschach inkblot test."&gt;
 &lt;figcaption&gt;A black outline of the first of the ten cards
 in the Rorschach inkblot test.&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

     <p>このような代替テキストのキャプションを含むことは、実用的でない。なぜなら、一度でもキャプションを読んだり聞いたことがあった場合、2回以上助けず、画像を持たないユーザーに対してキャプションを効果的に重複するためである。</p>

    </div>

    <div class=example>

     <p>完全な説明を覆す画像の別の例は、定義により、詳細で無限であるフラクタルである。</p>

     <p>次の例は、マンデルブロ集合の画像の完全なビューの代替テキストを提供する1つの可能な方法を示す。</p>

     <pre><strong>&lt;img src="ms1.jpeg" alt="The Mandelbrot set appears as a cardioid with
its cusp on the real axis in the positive direction, with a smaller
bulb aligned along the same center line, touching it in the negative
direction, and with these two shapes being surrounded by smaller bulbs
of various sizes."&gt;</strong></pre>

    </div>

    <div class=example>

     <p>Similarly, a photograph of a person's face, for example in a biography, can be considered
     quite relevant and key to the content, but it can be hard to fully substitute text for  </p>

     <pre>&lt;section class="bio"&gt;
 &lt;h1&gt;A Biography of Isaac Asimov&lt;/h1&gt;
 &lt;p&gt;Born &lt;b&gt;Isaak Yudovich Ozimov&lt;/b&gt; in 1920, Isaac was a prolific author.&lt;/p&gt;
 &lt;p&gt;&lt;img src="headpics/asimov.jpeg" alt="Isaac Asimov had dark hair, a tall forehead, and wore glasses.
 Later in life, he wore long white sideburns."&gt;
 &lt;p&gt;Asimov was born in Russia, and moved to the US when he was three years old.&lt;/p&gt;
 &lt;p&gt;...
&lt;/section&gt;</pre>

     <p>In such cases it is unnecessary (and indeed discouraged) to include a reference to the
     presence of the image itself in the alternative text, since such text would be redundant with
     the browser itself reporting the presence of the image. For example, if the alternative text
     was "A photo of Isaac Asimov", then a conforming user agent might read that out as "(Image) A
     photo of Isaac Asimov" rather than the more useful "(Image) Isaac Asimov had dark hair, a tall
     forehead, and wore glasses...".</p>

    </div>

   <dt id=unknown-images>コンテンツが未知である画像<dd>

    <p>画像が任意の関連する代替テキストのない一部の自動化された方法で得られる（たとえばウェブカメラなど）、またはページが、ユーザーが適切なまたは有用な代替テキストを提供できない場所でのユーザーが提供する画像を使用するスクリプトによって生成されている（たとえば写真共有サイト）、または著者自身が、画像が何を表すのかを知らない（たとえばブログで画像を共有する視覚障害者の写真家）のいずれかなどの、一部の不幸な例において、使用可能な代替テキストがまったく存在しないかもしれない。</p>

    <p>そのような場合、<code id=a-key-part-of-the-content:attr-img-alt-3><a href=#attr-img-alt>alt</a></code>属性を省略してもよいが、以下の条件を同時に満たさなければならない：</p>

    <ul><li id=figcaption-as-alt-condition><p>The <code id=a-key-part-of-the-content:the-img-element><a href=#the-img-element>img</a></code> element is in a
     <code id=a-key-part-of-the-content:the-figure-element><a href=semantics.html#the-figure-element>figure</a></code> element that contains a <code id=a-key-part-of-the-content:the-figcaption-element><a href=semantics.html#the-figcaption-element>figcaption</a></code> element that contains
     content other than <a id=a-key-part-of-the-content:inter-element-whitespace href=dom.html#inter-element-whitespace>inter-element whitespace</a>, and, ignoring the
     <code id=a-key-part-of-the-content:the-figcaption-element-2><a href=semantics.html#the-figcaption-element>figcaption</a></code> element and its descendants, the <code id=a-key-part-of-the-content:the-figure-element-2><a href=semantics.html#the-figure-element>figure</a></code> element has no
     <a id=a-key-part-of-the-content:flow-content-2 href=dom.html#flow-content-2>flow content</a> descendants other than <a id=a-key-part-of-the-content:inter-element-whitespace-2 href=dom.html#inter-element-whitespace>inter-element whitespace</a> and the
     <code id=a-key-part-of-the-content:the-img-element-2><a href=#the-img-element>img</a></code> element.</li><li>

      <p><code id=a-key-part-of-the-content:attr-title><a href=dom.html#attr-title>title</a></code>属性が存在しかつ空でない値を持つ。</p>

      
      <p class=note><code id=a-key-part-of-the-content:attr-title-2><a href=dom.html#attr-title>title</a></code>属性に依存することは、多くのユーザーエージェントがこの仕様で要求されるようなアクセス可能な方法で属性を公開しないため、現在推奨されない（たとえば、ツールチップを出現させるマウスなどのポインティングデバイスが必要になり、これはモダンな携帯端末やタブレットをもつ人のような、キーボードのみのユーザーとタッチのみのユーザーを締め出す）。</p>

     </li></ul>

    <p class=note>そのような場合は最小限に保たれるべきである。実際の代替テキストを提供する能力を有する著者のわずかな可能性がある場合、<code id=a-key-part-of-the-content:attr-img-alt-4><a href=#attr-img-alt>alt</a></code>属性の省略を許容しないだろう。</p>

    <div class=example>

     <p>サイトがキャプション以外のメタデータを用いて画像を受信した場合、写真共有サイトの写真は、次のようにマークアップできる：</p>

     <pre>&lt;figure&gt;
 <strong>&lt;img src="1100670787_6a7c664aef.jpg"&gt;</strong>
 &lt;figcaption&gt;Bubbles traveled everywhere with us.&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

     <p>しかし、画像の重要部分の詳細な説明が、ユーザーから取得してページに含まれる場合、これはより良いだろう。</p>

    </div>

    <div class=example>

     <p>ユーザーが撮影した写真での視覚障害者ユーザーのブログを示す。最初に、ユーザーはショーを撮った写真の任意のアイデアを持たないかもしれない：</p>

     <pre>&lt;article&gt;
 &lt;h1&gt;I took a photo&lt;/h1&gt;
 &lt;p&gt;I went out today and took a photo!&lt;/p&gt;
 &lt;figure&gt;
  <strong>&lt;img src="photo2.jpeg"&gt;</strong>
  &lt;figcaption&gt;A photograph taken blindly from my front porch.&lt;/figcaption&gt;
 &lt;/figure&gt;
&lt;/article&gt;</pre>

     <p>しかし最終的に、ユーザーは友人による画像の説明を取得するかもしれず、その場合代替テキストを含めることができる：</p>

     <pre>&lt;article&gt;
 &lt;h1&gt;I took a photo&lt;/h1&gt;
 &lt;p&gt;I went out today and took a photo!&lt;/p&gt;
 &lt;figure&gt;
  <strong>&lt;img src="photo2.jpeg" alt="The photograph shows my squirrel
  feeder hanging from the edge of my roof. It is half full, but there
  are no squirrels around. In the background, out-of-focus trees fill the
  shot. The feeder is made of wood with a metal grate, and it contains
  peanuts. The edge of the roof is wooden too, and is painted white
  with light blue streaks."&gt;</strong>
  &lt;figcaption&gt;A photograph taken blindly from my front porch.&lt;/figcaption&gt;
 &lt;/figure&gt;
&lt;/article&gt;</pre>

    </div>

    <div class=example>

     <p>時として画像全体の要点は、テキストの説明が利用できず、ユーザーが説明を提供する。For instance, the point of a CAPTCHA image is to see if the user can literally read the graphic. Here is one way to mark up a CAPTCHA (note the <code id=a-key-part-of-the-content:attr-title-3><a href=dom.html#attr-title>title</a></code> attribute):</p>

     <pre>&lt;p&gt;&lt;label&gt;What does this image say?
<strong>&lt;img src="captcha.cgi?id=8934" title="CAPTCHA"&gt;</strong>
&lt;input type=text name=captcha&gt;&lt;/label&gt;
(If you cannot see the image, you can use an &lt;a
href="?audio"&gt;audio&lt;/a&gt; test instead.)&lt;/p&gt;</pre>

     <p>もう一つの例は、画像を表示し、正しい代替テキストをもつページを書く目的に対して正確に代替テキストを求めるソフトウェアである。そのようなページは次のように、画像のテーブルを持つことができる：</p>

     <pre>&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt; &lt;th&gt; Image &lt;th&gt; Description
 &lt;tbody&gt;
  &lt;tr&gt;
   &lt;td&gt; <strong>&lt;img src="2421.png" title="Image 640 by 100, filename 'banner.gif'"&gt;</strong>
   &lt;td&gt; &lt;input name="alt2421"&gt;
  &lt;tr&gt;
   &lt;td&gt; <strong>&lt;img src="2422.png" title="Image 200 by 480, filename 'ad3.gif'"&gt;</strong>
   &lt;td&gt; &lt;input name="alt2422"&gt;
&lt;/table&gt;</pre>

     <p>この例ですら、できる限り多くの有用な情報が依然として<code id=a-key-part-of-the-content:attr-title-4><a href=dom.html#attr-title>title</a></code>属性に含まれることに注意する。</p>

    </div>

    <p class=note>一部のユーザーは、まったく画像を使用できない（たとえば、非常に低速な接続である、テキストのみのブラウザを使用している、ハンズフリーの自動車声ウェブブラウザで読みあげてページを聞いている、または単に目が見えない）ので、<code id=a-key-part-of-the-content:attr-img-alt-5><a href=#attr-img-alt>alt</a></code>属性は省略することが許可されるよりむしろ、上記の例のようにまったく代替テキストが利用できず、何も利用できない場合に、置換テキストを備えるのである。執筆者の一部による努力の欠如は、<code id=a-key-part-of-the-content:attr-img-alt-6><a href=#attr-img-alt>alt</a></code>属性を省略するための許容可能な理由でない。</p>

   </dl>



  <h6 id=an-image-not-intended-for-the-user>4.8.4.1.12 ユーザーを意図しない画像</h6>

  <p>一般に、著者は画像を表示する以外の目的で<code id=an-image-not-intended-for-the-user:the-img-element><a href=#the-img-element>img</a></code>要素を使用することは避けるべきである。</p>

  <p><code id=an-image-not-intended-for-the-user:the-img-element-2><a href=#the-img-element>img</a></code>要素を画像を表示する以外の目的で使用する場合、たとえば、ページビューをカウントするサービスの一部として用いる場合、<code id=an-image-not-intended-for-the-user:attr-img-alt><a href=#attr-img-alt>alt</a></code>属性は空文字列でなければならない。</p>

  <p>このような場合、<code id=an-image-not-intended-for-the-user:attr-dim-width><a href=#attr-dim-width>width</a></code>と<code id=an-image-not-intended-for-the-user:attr-dim-height><a href=#attr-dim-height>height</a></code>属性は、両方ともゼロに設定すべきである。</p>


  <h6 id=an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images>4.8.4.1.13 An image in an e-mail or private document intended for a specific person who is known to be able to view images</h6>

  <p><i>This section does not apply to documents that are publicly accessible, or whose target
  audience is not necessarily personally known to the author, such as documents on a Web site,
  e-mails sent to public mailing lists, or software documentation.</i></p>

  <p>When an image is included in a private communication (such as an HTML e-mail) aimed at a
  specific person who is known to be able to view images, the <code id=an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images:attr-img-alt><a href=#attr-img-alt>alt</a></code>
  attribute may be omitted. However, even in such cases authors are strongly urged to include
  alternative text (as appropriate according to the kind of image involved, as described in the
  above entries), so that the e-mail is still usable should the user use a mail client that does not
  support images, or should the document be forwarded on to other users whose abilities might not
  include easily seeing images.</p>




  

  <h6 id=guidance-for-markup-generators>4.8.4.1.14 Guidance for markup generators</h6>

  <p>Markup generators (such as WYSIWYG authoring tools) should, wherever possible, obtain
  alternative text from their users. However, it is recognised that in many cases, this will not be
  possible.</p>

  <p>For images that are the sole contents of links, markup generators should examine the link
  target to determine the title of the target, or the URL of the target, and use information
  obtained in this manner as the alternative text.</p>

  <p>For images that have captions, markup generators should use the <code id=guidance-for-markup-generators:the-figure-element><a href=semantics.html#the-figure-element>figure</a></code> and
  <code id=guidance-for-markup-generators:the-figcaption-element><a href=semantics.html#the-figcaption-element>figcaption</a></code> elements, or the <code id=guidance-for-markup-generators:attr-title><a href=dom.html#attr-title>title</a></code> attribute, to
  provide the image's caption.</p>

  <p>As a last resort, implementors should either set the <code id=guidance-for-markup-generators:attr-img-alt><a href=#attr-img-alt>alt</a></code>
  attribute to the empty string, under the assumption that the image is a purely decorative image
  that doesn't add any information but is still specific to the surrounding content, or omit the
  <code id=guidance-for-markup-generators:attr-img-alt-2><a href=#attr-img-alt>alt</a></code> attribute altogether, under the assumption that the image is
  a key part of the content.</p>

  <p>Markup generators may specify a <dfn id=attr-img-generator-unable-to-provide-required-alt><code>generator-unable-to-provide-required-alt</code></dfn>
  attribute on <code id=guidance-for-markup-generators:the-img-element><a href=#the-img-element>img</a></code> elements for which they have been unable to obtain alternative text
  and for which they have therefore omitted the <code id=guidance-for-markup-generators:attr-img-alt-3><a href=#attr-img-alt>alt</a></code> attribute. The
  value of this attribute must be the empty string. Documents containing such attributes are not
  conforming, but conformance checkers will <a href=#guidance-for-conformance-checkers>silently
  ignore</a> this error.</p>

  <p class=note>This is intended to avoid markup generators from being pressured into replacing
  the error of omitting the <code id=guidance-for-markup-generators:attr-img-alt-4><a href=#attr-img-alt>alt</a></code> attribute with the even more
  egregious error of providing phony alternative text, because state-of-the-art automated
  conformance checkers cannot distinguish phony alternative text from correct alternative text.</p>

  <p>Markup generators should generally avoid using the image's own file name as the alternative
  text. Similarly, markup generators should avoid generating alternative text from any content that
  will be equally available to presentation user agents (e.g. Web browsers).</p>

  <p class=note>This is because once a page is generated, it will typically not be updated,
  whereas the browsers that later read the page can be updated by the user, therefore the browser is
  likely to have more up-to-date and finely-tuned heuristics than the markup generator did when
  generating the page.</p>

  

  

  <h6 id=guidance-for-conformance-checkers>4.8.4.1.15 Guidance for conformance checkers</h6>

  <p>A conformance checker must report the lack of an <code id=guidance-for-conformance-checkers:attr-img-alt><a href=#attr-img-alt>alt</a></code>
  attribute as an error unless one of the conditions listed below applies:</p>

  <ul><li><p>The <code id=guidance-for-conformance-checkers:the-img-element><a href=#the-img-element>img</a></code> element is in a <code id=guidance-for-conformance-checkers:the-figure-element><a href=semantics.html#the-figure-element>figure</a></code> element that satisfies <a href=#figcaption-as-alt-condition>the conditions described above</a>.</li><li><p>The <code id=guidance-for-conformance-checkers:the-img-element-2><a href=#the-img-element>img</a></code> element has a <code id=guidance-for-conformance-checkers:attr-title><a href=dom.html#attr-title>title</a></code> attribute with a
   value that is not the empty string (also as <a href=#unknown-images>described
   above</a>).</li><li><p>The conformance checker has been configured to assume that the document is an e-mail or
   document intended for a specific person who is known to be able to view images.</li><li><p>The <code id=guidance-for-conformance-checkers:the-img-element-3><a href=#the-img-element>img</a></code> element has a (non-conforming) <code id=guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt><a href=#attr-img-generator-unable-to-provide-required-alt>generator-unable-to-provide-required-alt</a></code>
   attribute whose value is the empty string. A conformance checker that is not reporting the lack
   of an <code id=guidance-for-conformance-checkers:attr-img-alt-2><a href=#attr-img-alt>alt</a></code> attribute as an error must also not report the
   presence of the empty <code id=guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt-2><a href=#attr-img-generator-unable-to-provide-required-alt>generator-unable-to-provide-required-alt</a></code>
   attribute as an error. (This case does not represent a case where the document is conforming,
   only that the generator could not determine appropriate alternative text — validators are
   not required to show an error in this case, because such an error might encourage markup
   generators to include bogus alternative text purely in an attempt to silence validators.
   Naturally, conformance checkers <em>may</em> report the lack of an <code id=guidance-for-conformance-checkers:attr-img-alt-3><a href=#attr-img-alt>alt</a></code> attribute as an error even in the presence of the <code id=guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt-3><a href=#attr-img-generator-unable-to-provide-required-alt>generator-unable-to-provide-required-alt</a></code>
   attribute; for example, there could be a user option to report <em>all</em> conformance errors
   even those that might be the more or less inevitable result of using a markup
   generator.)</li></ul>

  



  <h4 id=the-iframe-element>4.8.5 <dfn><code>iframe</code></dfn>要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28773" title='Nothing ever sets the "mute iframe load" flag to false'>28773</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-iframe-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-iframe-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-iframe-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-iframe-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd><a id=the-iframe-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd><a id=the-iframe-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-iframe-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-iframe-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-iframe-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=#iframe-content-model>文で与えられる要件</a>に適合しているテキスト。<dt><a href=dom.html#concept-element-tag-omission id=the-iframe-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-iframe-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-iframe-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-iframe-element:attr-iframe-src><a href=#attr-iframe-src>src</a></code> — リソースのアドレス<dd><code id=the-iframe-element:attr-iframe-srcdoc><a href=#attr-iframe-srcdoc>srcdoc</a></code> — <code id=the-iframe-element:the-iframe-element><a href=#the-iframe-element>iframe</a></code>内で描画する文書<dd><code id=the-iframe-element:attr-iframe-name><a href=#attr-iframe-name>name</a></code> — <a id=the-iframe-element:nested-browsing-context href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>名<dd><code id=the-iframe-element:attr-iframe-sandbox><a href=#attr-iframe-sandbox>sandbox</a></code> — ネストされたコンテンツのセキュリティルール<dd><code id=the-iframe-element:attr-iframe-allowfullscreen><a href=#attr-iframe-allowfullscreen>allowfullscreen</a></code> — <code id=the-iframe-element:the-iframe-element-2><a href=#the-iframe-element>iframe</a></code>のコンテンツに<code id=the-iframe-element:dom-element-requestfullscreen><a data-x-internal=dom-element-requestfullscreen href=https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen>requestFullscreen()</a></code>の使用を許可するかどうか<dd><code id=the-iframe-element:attr-dim-width><a href=#attr-dim-width>width</a></code> — 横の次元<dd><code id=the-iframe-element:attr-dim-height><a href=#attr-dim-height>height</a></code> — 縦の次元<dt><a href=dom.html#concept-element-dom id=the-iframe-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmliframeelement>HTMLIFrameElement</dfn> : <a id=the-iframe-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-iframe-src id=the-iframe-element:dom-iframe-src>src</a>;
  attribute DOMString <a href=#dom-iframe-srcdoc id=the-iframe-element:dom-iframe-srcdoc>srcdoc</a>;
  attribute DOMString <a href=#dom-iframe-name id=the-iframe-element:dom-iframe-name>name</a>;
  [SameObject, PutForwards=<a href=infrastructure.html#dom-domtokenlist-value id=the-iframe-element:dom-domtokenlist-value>value</a>] readonly attribute <a id=the-iframe-element:domtokenlist href=infrastructure.html#domtokenlist>DOMTokenList</a> <a href=#dom-iframe-sandbox id=the-iframe-element:dom-iframe-sandbox>sandbox</a>;
  attribute boolean <a href=#dom-iframe-allowfullscreen id=the-iframe-element:dom-iframe-allowfullscreen>allowFullscreen</a>;
  attribute DOMString <a href=#dom-dim-width id=the-iframe-element:dom-dim-width>width</a>;
  attribute DOMString <a href=#dom-dim-height id=the-iframe-element:dom-dim-height>height</a>;
  readonly attribute <a id=the-iframe-element:document href=dom.html#document>Document</a>? <a href=#dom-iframe-contentdocument id=the-iframe-element:dom-iframe-contentdocument>contentDocument</a>;
  readonly attribute <a id=the-iframe-element:windowproxy href=browsers.html#windowproxy>WindowProxy</a>? <a href=#dom-iframe-contentwindow id=the-iframe-element:dom-iframe-contentwindow>contentWindow</a>;
  <a id=the-iframe-element:document-2 href=dom.html#document>Document</a>? <a href=#dom-media-getsvgdocument id=the-iframe-element:dom-media-getsvgdocument>getSVGDocument</a>();
};</pre>
   </dl>

  

  <p><code id=the-iframe-element:the-iframe-element-3><a href=#the-iframe-element>iframe</a></code>要素は、<a id=the-iframe-element:nested-browsing-context-2 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>を<a id=the-iframe-element:represents href=dom.html#represents>表す</a>。</p>


  

  <p><dfn id=attr-iframe-src><code>src</code></dfn>属性は、<a id=the-iframe-element:nested-browsing-context-3 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>が含むのに適当なページのアドレスを与える。属性が存在する場合、<a id=the-iframe-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>でなければならない。<code id=the-iframe-element:names:-the-itemprop-attribute><a href=microdata.html#names:-the-itemprop-attribute>itemprop</a></code>が<code id=the-iframe-element:the-iframe-element-4><a href=#the-iframe-element>iframe</a></code>要素で指定される場合、<code id=the-iframe-element:attr-iframe-src-2><a href=#attr-iframe-src>src</a></code>も指定されなければならない。</p>

  <p><dfn id=attr-iframe-srcdoc><code>srcdoc</code></dfn>属性は、<a id=the-iframe-element:nested-browsing-context-4 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>が含むのに適当なページのコンテンツを提供する。属性の値は、<dfn id=an-iframe-srcdoc-document><code>iframe</code> <code>srcdoc</code>文書</dfn>のソースである。<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25233" title='Specify that "Optionally, a DOCTYPE” means that quirky doctypes must be ignored'>25233</a><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>20+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>9.9+</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>6.0-6.1+</span></span><span class="firefox yes"><span>Firefox</span> <span>25+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android yes"><span>Android Browser</span> <span>4.4+</span></span><span class="safari yes"><span>Safari</span> <span>6+</span></span><span class="opera yes"><span>Opera</span> <span>15+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=iframe-srcdoc">caniuse.com</a></div>

  <p>The <code id=the-iframe-element:attr-iframe-srcdoc-2><a href=#attr-iframe-srcdoc>srcdoc</a></code> attribute, if present, must have a value
  using <a id=the-iframe-element:syntax href=syntax.html#syntax>the HTML syntax</a> that consists of the following syntactic components, in the
  given order:</p>

  <ol><li>任意の数の<a href=syntax.html#syntax-comments id=the-iframe-element:syntax-comments>コメント</a>および<a href=infrastructure.html#space-character id=the-iframe-element:space-character>空白文字</a>。</li><li>任意で、<a href=syntax.html#syntax-doctype id=the-iframe-element:syntax-doctype>DOCTYPE</a>。

   </li><li>任意の数の<a href=syntax.html#syntax-comments id=the-iframe-element:syntax-comments-2>コメント</a>および<a href=infrastructure.html#space-character id=the-iframe-element:space-character-2>空白文字</a>。</li><li><code id=the-iframe-element:the-html-element><a href=semantics.html#the-html-element>html</a></code><a href=syntax.html#syntax-elements id=the-iframe-element:syntax-elements>要素</a>の形式で、ルート要素。</li><li>任意の数の<a href=syntax.html#syntax-comments id=the-iframe-element:syntax-comments-3>コメント</a>および<a href=infrastructure.html#space-character id=the-iframe-element:space-character-3>空白文字</a>。</li></ol>

  <p class=note>The above requirements apply in <a id=the-iframe-element:xml-documents href=infrastructure.html#xml-documents>XML documents</a> as well.

  

  <div class=example>

   <p>ここでブログは、ブログの記事のコメントで、スクリプトインジェクションから追加の保護レイヤーとともに、この機能をサポートするユーザーエージェントのユーザーに提供するため、以下に記載の<code id=the-iframe-element:attr-iframe-sandbox-2><a href=#attr-iframe-sandbox>sandbox</a></code>属性と一緒に<code id=the-iframe-element:attr-iframe-srcdoc-3><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性を使用する：</p>

   <pre>&lt;article&gt;
 &lt;h1&gt;I got my own magazine!&lt;/h1&gt;
 &lt;p&gt;After much effort, I've finally found a publisher, and so now I
 have my own magazine!Isn't that awesome?!The first issue will come
 out in September, and we have articles about getting food, and about
 getting in boxes, it's going to be great!&lt;/p&gt;
 &lt;footer&gt;
  &lt;p&gt;Written by &lt;a href="/users/cap"&gt;cap&lt;/a&gt;, 1 hour ago.
 &lt;/footer&gt;
 &lt;article&gt;
  &lt;footer&gt; Thirteen minutes ago, &lt;a href="/users/ch"&gt;ch&lt;/a&gt; wrote: &lt;/footer&gt;
  &lt;iframe sandbox srcdoc="&lt;p&gt;did you get a cover picture yet?"&gt;&lt;/iframe&gt;
 &lt;/article&gt;
 &lt;article&gt;
  &lt;footer&gt; Nine minutes ago, &lt;a href="/users/cap"&gt;cap&lt;/a&gt; wrote: &lt;/footer&gt;
  &lt;iframe sandbox srcdoc="&lt;p&gt;Yeah, you can see it &lt;a href=&amp;quot;/gallery?mode=cover&amp;amp;amp;page=1&amp;quot;&gt;in my gallery&lt;/a&gt;."&gt;&lt;/iframe&gt;
 &lt;/article&gt;
 &lt;article&gt;
  &lt;footer&gt; Five minutes ago, &lt;a href="/users/ch"&gt;ch&lt;/a&gt; wrote: &lt;/footer&gt;
  &lt;iframe sandbox srcdoc="&lt;p&gt;hey that's earl's table.
&lt;p&gt;you should get earl&amp;amp;amp;me on the next cover."&gt;&lt;/iframe&gt;
 &lt;/article&gt;</pre>

   <p>引用符をエスケープする必要がある方法に注意し（そうでなければ<code id=the-iframe-element:attr-iframe-srcdoc-4><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性が途中で終わるだろう）、サンドボックス化されたコンテンツに記載される生のアンパサンド（たとえば、URL内または文で）が<em>二重に</em>エスケープされる必要がある―最初に<code id=the-iframe-element:attr-iframe-srcdoc-5><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性を解析する際、一度アンパサンドが保持されるように、サンドボックスのコンテンツを解析する際、誤ってもう一度アンパサンドを解析されるの防ぐために。</p>

   <p>Furthermore, notice that since the <a href=syntax.html#syntax-doctype id=the-iframe-element:syntax-doctype-2>DOCTYPE</a> is optional in <a href=#an-iframe-srcdoc-document id=the-iframe-element:an-iframe-srcdoc-document><code>iframe</code> <code>srcdoc</code> documents</a>, and the <code id=the-iframe-element:the-html-element-2><a href=semantics.html#the-html-element>html</a></code>, <code id=the-iframe-element:the-head-element><a href=semantics.html#the-head-element>head</a></code>, and <code id=the-iframe-element:the-body-element><a href=semantics.html#the-body-element>body</a></code> elements have <a href=syntax.html#syntax-tag-omission>optional start and end tags</a>, and the <code id=the-iframe-element:the-title-element><a href=semantics.html#the-title-element>title</a></code> element is also optional in <a href=#an-iframe-srcdoc-document id=the-iframe-element:an-iframe-srcdoc-document-2><code>iframe</code> <code>srcdoc</code> documents</a>, the markup in a <code id=the-iframe-element:attr-iframe-srcdoc-6><a href=#attr-iframe-srcdoc>srcdoc</a></code> attribute can be relatively succint despite representing an entire document, since only the contents of the <code id=the-iframe-element:the-body-element-2><a href=semantics.html#the-body-element>body</a></code> element need appear literally in the syntax.
さらに、<a href=syntax.html#syntax-doctype id=the-iframe-element:syntax-doctype-2>DOCTYPE</a>は<a href=#an-iframe-srcdoc-document id=the-iframe-element:an-iframe-srcdoc-document><code>iframe</code> <code>srcdoc</code>文書</a>で任意であり、かつ<code id=the-iframe-element:the-html-element-2><a href=semantics.html#the-html-element>html</a></code>、<code id=the-iframe-element:the-head-element><a href=semantics.html#the-head-element>head</a></code>、および<code id=the-iframe-element:the-body-element><a href=semantics.html#the-body-element>body</a></code>要素は<a href=syntax.html#syntax-tag-omission>任意の開始タグ</a>を持ち、しかも<code id=the-iframe-element:the-title-element><a href=semantics.html#the-title-element>title</a></code>要素は<a href=#an-iframe-srcdoc-document id=the-iframe-element:an-iframe-srcdoc-document-2><code>iframe</code> <code>srcdoc</code>文書</a>でも任意であるため、<code id=the-iframe-element:the-body-element-2><a href=semantics.html#the-body-element>body</a></code>要素のコンテンツだけが構文でリテラルに出現する必要があるため、<code id=the-iframe-element:attr-iframe-srcdoc-6><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性でのマークアップは、文書全体を表すにもかかわらず比較的簡潔にできる。他の要素は依然として存在するが、暗に存在するのみである。</p>

  </div>

  <p class=note><a id=the-iframe-element:syntax-2 href=syntax.html#syntax>HTML構文</a>において、著者は属性の内容を包むためにU+0022 QUOTATION MARK文字（"）を使用することを単に覚えておく必要があり、それからすべてU+0022 QUOTATION MARK（"）およびU+0026 AMPERSAND（&amp;）文字をエスケープし、および<code id=the-iframe-element:attr-iframe-sandbox-3><a href=#attr-iframe-sandbox>sandbox</a></code>属性を指定し、コンテンツの安全な埋め込みを確実にする必要がある。</p>

  <p class=note><a id=the-iframe-element:the-xhtml-syntax href=xhtml.html#the-xhtml-syntax>XHTML構文</a>の制約のために、XMLで U+003C LESS-THAN SIGN（&lt;）文字も同様にエスケープする必要がある。<a href=https://www.w3.org/TR/xml/#AVNormalize>属性値正規化</a>を防ぐために、一部のXMLの空白文字―具体的にはU+0009 CHARACTER TABULATION（tab）、U+000A LINE FEED（LF）、U+000D CARRIAGE RETURN（CR）―もまたエスケープする必要がある。<a href=references.html#refsXML>[XML]</a></p>

  <p class=note><code id=the-iframe-element:attr-iframe-src-3><a href=#attr-iframe-src>src</a></code>属性と<code id=the-iframe-element:attr-iframe-srcdoc-7><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性が両方ともに指定される場合、<code id=the-iframe-element:attr-iframe-srcdoc-8><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性が優先される。これは、著者に<code id=the-iframe-element:attr-iframe-srcdoc-9><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性をサポートしないレガシーユーザーエージェントに対してフォールバック<a id=the-iframe-element:url href=infrastructure.html#url>URL</a>を提供できる。</p>


  

  <hr> 

  <p>When an <code id=the-iframe-element:the-iframe-element-5><a href=#the-iframe-element>iframe</a></code> element is <a href=infrastructure.html#insert-an-element-into-a-document id=the-iframe-element:insert-an-element-into-a-document>inserted
  into a document</a> that has a <a href=browsers.html#concept-document-bc id=the-iframe-element:concept-document-bc>browsing context</a>, the
  user agent must <a href=browsers.html#creating-a-new-browsing-context id=the-iframe-element:creating-a-new-browsing-context>create</a> a <a id=the-iframe-element:nested-browsing-context-5 href=browsers.html#nested-browsing-context>nested
  browsing context</a>, and then <a href=#process-the-iframe-attributes id=the-iframe-element:process-the-iframe-attributes>process the <code>iframe</code> attributes</a> for the
  "first time".</p>

  <p>When an <code id=the-iframe-element:the-iframe-element-6><a href=#the-iframe-element>iframe</a></code> element is <a href=infrastructure.html#remove-an-element-from-a-document id=the-iframe-element:remove-an-element-from-a-document>removed
  from a document</a>, the user agent must <a href=browsers.html#a-browsing-context-is-discarded id=the-iframe-element:a-browsing-context-is-discarded>discard</a> the <a id=the-iframe-element:nested-browsing-context-6 href=browsers.html#nested-browsing-context>nested browsing context</a>, if any.</p>

  <p class=note>This happens without any <code id=the-iframe-element:event-unload><a href=indices.html#event-unload>unload</a></code> events firing
  (the <a id=the-iframe-element:nested-browsing-context-7 href=browsers.html#nested-browsing-context>nested browsing context</a> and its <code id=the-iframe-element:document-3><a href=dom.html#document>Document</a></code> are <em><a href=browsers.html#a-browsing-context-is-discarded id=the-iframe-element:a-browsing-context-is-discarded-2>discarded</a></em>, not <em><a href=browsers.html#unload-a-document id=the-iframe-element:unload-a-document>unloaded</a></em>).</p>

  

  <p>Whenever an <code id=the-iframe-element:the-iframe-element-7><a href=#the-iframe-element>iframe</a></code> element with a <a id=the-iframe-element:nested-browsing-context-8 href=browsers.html#nested-browsing-context>nested browsing context</a> has its
  <code id=the-iframe-element:attr-iframe-srcdoc-10><a href=#attr-iframe-srcdoc>srcdoc</a></code> attribute set, changed, or removed, the user agent
  must <a href=#process-the-iframe-attributes id=the-iframe-element:process-the-iframe-attributes-2>process the <code>iframe</code> attributes</a>.</p>

  <p>Similarly, whenever an <code id=the-iframe-element:the-iframe-element-8><a href=#the-iframe-element>iframe</a></code> element with a <a id=the-iframe-element:nested-browsing-context-9 href=browsers.html#nested-browsing-context>nested browsing context</a>
  but with no <code id=the-iframe-element:attr-iframe-srcdoc-11><a href=#attr-iframe-srcdoc>srcdoc</a></code> attribute specified has its <code id=the-iframe-element:attr-iframe-src-4><a href=#attr-iframe-src>src</a></code> attribute set, changed, or removed, the user agent must
  <a href=#process-the-iframe-attributes id=the-iframe-element:process-the-iframe-attributes-3>process the <code>iframe</code> attributes</a>.</p> 

  <p>When the user agent is to <dfn id=process-the-iframe-attributes>process the <code>iframe</code> attributes</dfn>, it must run
  the first appropriate steps from the following list:</p>

  <dl class=switch><dt>If the <code id=the-iframe-element:attr-iframe-srcdoc-12><a href=#attr-iframe-srcdoc>srcdoc</a></code> attribute is specified<dd>

    <p><a id=the-iframe-element:navigate href=browsers.html#navigate>Navigate</a> the element's <a id=the-iframe-element:child-browsing-context href=browsers.html#child-browsing-context>child browsing context</a> to
    a new <a href=https://fetch.spec.whatwg.org/#concept-response id=the-iframe-element:concept-response data-x-internal=concept-response>response</a> whose <a href=https://fetch.spec.whatwg.org/#concept-response-url-list id=the-iframe-element:concept-response-url-list data-x-internal=concept-response-url-list>url list</a> consists of <code id=the-iframe-element:about:srcdoc><a href=infrastructure.html#about:srcdoc>about:srcdoc</a></code>, <a href=https://fetch.spec.whatwg.org/#concept-response-header-list id=the-iframe-element:concept-response-header-list data-x-internal=concept-response-header-list>header list</a> consists of
    `<code>Content-Type</code>`/`<code id=the-iframe-element:text/html><a href=iana.html#text/html>text/html</a></code>`, <a href=https://fetch.spec.whatwg.org/#concept-response-body id=the-iframe-element:concept-response-body data-x-internal=concept-response-body>body</a> is the value of the attribute, <a href=https://fetch.spec.whatwg.org/#concept-response-csp-list id=the-iframe-element:concept-response-csp-list data-x-internal=concept-response-csp-list>CSP list</a> is the <a href=dom.html#concept-document-csp-list id=the-iframe-element:concept-document-csp-list>CSP list</a> of the <code id=the-iframe-element:the-iframe-element-9><a href=#the-iframe-element>iframe</a></code> element's <a id=the-iframe-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
    document</a>, and <a href=https://fetch.spec.whatwg.org/#concept-response-https-state id=the-iframe-element:concept-response-https-state data-x-internal=concept-response-https-state>HTTPS state</a> is the <a href=dom.html#concept-document-https-state id=the-iframe-element:concept-document-https-state>HTTPS state</a> of the <code id=the-iframe-element:the-iframe-element-10><a href=#the-iframe-element>iframe</a></code> element's
    <a id=the-iframe-element:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.

    

    <p>The resulting <code id=the-iframe-element:document-4><a href=dom.html#document>Document</a></code> must be considered <a href=#an-iframe-srcdoc-document id=the-iframe-element:an-iframe-srcdoc-document-3>an <code>iframe</code> <code>srcdoc</code> document</a>.</p>

   <dt>Otherwise, if the element has no <code id=the-iframe-element:attr-iframe-src-5><a href=#attr-iframe-src>src</a></code> attribute
   specified, and the user agent is processing the <code id=the-iframe-element:the-iframe-element-11><a href=#the-iframe-element>iframe</a></code>'s attributes for the "first
   time"<dd>

    <p><a id=the-iframe-element:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to run the <a href=#iframe-load-event-steps id=the-iframe-element:iframe-load-event-steps>iframe load event steps</a>.</p>

    <p>The <a id=the-iframe-element:task-source href=webappapis.html#task-source>task source</a> for this <a href=webappapis.html#concept-task id=the-iframe-element:concept-task>task</a> is the
    <a id=the-iframe-element:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>.</p>

   <dt>そうでなければ<dd>

    <ol><li>

      <p>If the element has no <code id=the-iframe-element:attr-iframe-src-6><a href=#attr-iframe-src>src</a></code> attribute specified, or its
      value is the empty string, let <var>url</var> be the string "<code id=the-iframe-element:about:blank><a href=infrastructure.html#about:blank>about:blank</a></code>".</p>
      

      <p>Otherwise, <a href=infrastructure.html#parse-a-url id=the-iframe-element:parse-a-url>parse</a> the value of the <code id=the-iframe-element:attr-iframe-src-7><a href=#attr-iframe-src>src</a></code> attribute, relative to the <code id=the-iframe-element:the-iframe-element-12><a href=#the-iframe-element>iframe</a></code> element's
      <a id=the-iframe-element:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.</p>

      <p>If that is not successful, then let <var>url</var> be the <a id=the-iframe-element:url-2 href=infrastructure.html#url>URL</a>
      "<code id=the-iframe-element:about:blank-2><a href=infrastructure.html#about:blank>about:blank</a></code>". Otherwise, let <var>url</var> be the <a id=the-iframe-element:resulting-url-record href=infrastructure.html#resulting-url-record>resulting URL
      record</a>.</p>

     </li><li>

      <p>If there exists an <a id=the-iframe-element:ancestor-browsing-context href=browsers.html#ancestor-browsing-context>ancestor browsing context</a> whose <a id=the-iframe-element:active-document href=browsers.html#active-document>active
      document</a>'s <a href=https://dom.spec.whatwg.org/#concept-document-url id="the-iframe-element:the-document's-address" data-x-internal="the-document's-address">address</a>, ignoring fragment
      identifiers, is equal to <var>url</var>, then abort these steps.</p>
      
      
      

     </li><li>

      <p><a id=the-iframe-element:navigate-2 href=browsers.html#navigate>Navigate</a> the element's <a id=the-iframe-element:child-browsing-context-2 href=browsers.html#child-browsing-context>child browsing context</a>
      to <var>url</var>.</p>

     </li></ol>

   </dl>

  <p>Furthermore, if the <a id=the-iframe-element:active-document-2 href=browsers.html#active-document>active document</a> of the element's <a id=the-iframe-element:child-browsing-context-3 href=browsers.html#child-browsing-context>child browsing
  context</a> before such a <a href=browsers.html#navigate id=the-iframe-element:navigate-3>navigation</a> was not <a id=the-iframe-element:completely-loaded href=syntax.html#completely-loaded>completely
  loaded</a> at the time of the new <a href=browsers.html#navigate id=the-iframe-element:navigate-4>navigation</a>, then the <a href=browsers.html#navigate id=the-iframe-element:navigate-5>navigation</a> must be completed with <a id=the-iframe-element:replacement-enabled href=browsers.html#replacement-enabled>replacement enabled</a>.</p>

  <p>Similarly, if the <a id=the-iframe-element:child-browsing-context-4 href=browsers.html#child-browsing-context>child browsing context</a>'s <a id=the-iframe-element:session-history href=browsers.html#session-history>session history</a> contained
  only one <code id=the-iframe-element:document-5><a href=dom.html#document>Document</a></code> when the <a href=#process-the-iframe-attributes id=the-iframe-element:process-the-iframe-attributes-4>process the <code>iframe</code> attributes</a>
  algorithm was invoked, and that was the <code id=the-iframe-element:about:blank-3><a href=infrastructure.html#about:blank>about:blank</a></code> <code id=the-iframe-element:document-6><a href=dom.html#document>Document</a></code> created
  when the <a id=the-iframe-element:child-browsing-context-5 href=browsers.html#child-browsing-context>child browsing context</a> was created, then any <a href=browsers.html#navigate id=the-iframe-element:navigate-6>navigation</a> required of the user agent in that algorithm must be completed
  with <a id=the-iframe-element:replacement-enabled-2 href=browsers.html#replacement-enabled>replacement enabled</a>.</p> 

  <p>When a <code id=the-iframe-element:document-7><a href=dom.html#document>Document</a></code> in an <code id=the-iframe-element:the-iframe-element-13><a href=#the-iframe-element>iframe</a></code> is marked as <a id=the-iframe-element:completely-loaded-2 href=syntax.html#completely-loaded>completely
  loaded</a>, the user agent must run the <a href=#iframe-load-event-steps id=the-iframe-element:iframe-load-event-steps-2>iframe load event steps</a> <a id=the-iframe-element:in-parallel href=infrastructure.html#in-parallel>in parallel</a>.</p>

  <p class=note>A <code id=the-iframe-element:event-load><a href=indices.html#event-load>load</a></code> event is also fired at the
  <code id=the-iframe-element:the-iframe-element-14><a href=#the-iframe-element>iframe</a></code> element when it is created if no other data is loaded in it.</p>

  <p>Each <code id=the-iframe-element:document-8><a href=dom.html#document>Document</a></code> has an <dfn id=iframe-load-in-progress>iframe load in progress</dfn> flag and a <dfn id=mute-iframe-load>mute
  iframe load</dfn> flag. When a <code id=the-iframe-element:document-9><a href=dom.html#document>Document</a></code> is created, these flags must be unset for
  that <code id=the-iframe-element:document-10><a href=dom.html#document>Document</a></code>.</p>

  <p>The <dfn id=iframe-load-event-steps>iframe load event steps</dfn> are as follows:</p>

  <ol><li><p>Let <var>child document</var> be the <a id=the-iframe-element:active-document-3 href=browsers.html#active-document>active document</a> of the
   <code id=the-iframe-element:the-iframe-element-15><a href=#the-iframe-element>iframe</a></code> element's <a id=the-iframe-element:nested-browsing-context-10 href=browsers.html#nested-browsing-context>nested browsing context</a>.</li><li><p>If <var>child document</var> has its <a href=#mute-iframe-load id=the-iframe-element:mute-iframe-load>mute iframe load</a> flag set,
   abort these steps.</li><li><p>Set <var>child document</var>'s <a href=#iframe-load-in-progress id=the-iframe-element:iframe-load-in-progress>iframe load in progress</a>
   flag.</li><li><p><a id=the-iframe-element:fire-a-simple-event href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=the-iframe-element:event-load-2><a href=indices.html#event-load>load</a></code> at the
   <code id=the-iframe-element:the-iframe-element-16><a href=#the-iframe-element>iframe</a></code> element.</li><li><p>Unset <var>child document</var>'s <a href=#iframe-load-in-progress id=the-iframe-element:iframe-load-in-progress-2>iframe load in progress</a>
   flag.</li></ol>

  <p class=warning>This, in conjunction with scripting, can be used to probe the URL space of the
  local network's HTTP servers. User agents may implement <a href=browsers.html#origin-2 id=the-iframe-element:origin-2>cross-origin</a>
  access control policies that are stricter than those described above to mitigate this attack, but
  unfortunately such policies are typically not compatible with existing Web content.</p>

  <p>When the <code id=the-iframe-element:the-iframe-element-17><a href=#the-iframe-element>iframe</a></code>'s <a id=the-iframe-element:browsing-context href=browsers.html#browsing-context>browsing context</a>'s <a id=the-iframe-element:active-document-4 href=browsers.html#active-document>active document</a> is
  not <a id=the-iframe-element:ready-for-post-load-tasks href=syntax.html#ready-for-post-load-tasks>ready for post-load tasks</a>, and when anything in the <code id=the-iframe-element:the-iframe-element-18><a href=#the-iframe-element>iframe</a></code> is <a href=syntax.html#delay-the-load-event id=the-iframe-element:delay-the-load-event>delaying the load event</a> of the <code id=the-iframe-element:the-iframe-element-19><a href=#the-iframe-element>iframe</a></code>'s
  <a id=the-iframe-element:browsing-context-2 href=browsers.html#browsing-context>browsing context</a>'s <a id=the-iframe-element:active-document-5 href=browsers.html#active-document>active document</a>, and when the <code id=the-iframe-element:the-iframe-element-20><a href=#the-iframe-element>iframe</a></code>'s
  <a id=the-iframe-element:browsing-context-3 href=browsers.html#browsing-context>browsing context</a> is in the <a id=the-iframe-element:delaying-load-events-mode href=browsers.html#delaying-load-events-mode>delaying <code>load</code> events
  mode</a>, the <code id=the-iframe-element:the-iframe-element-21><a href=#the-iframe-element>iframe</a></code> must <a id=the-iframe-element:delay-the-load-event-2 href=syntax.html#delay-the-load-event>delay the load event</a> of its document.</p>

  <p class=note>If, during the handling of the <code id=the-iframe-element:event-load-3><a href=indices.html#event-load>load</a></code> event, the
  <a id=the-iframe-element:browsing-context-4 href=browsers.html#browsing-context>browsing context</a> in the <code id=the-iframe-element:the-iframe-element-22><a href=#the-iframe-element>iframe</a></code> is again <a href=browsers.html#navigate id=the-iframe-element:navigate-7>navigated</a>, that will further <a id=the-iframe-element:delay-the-load-event-3 href=syntax.html#delay-the-load-event>delay the load event</a>.</p>

  

  

  <p class=note>要素が作成される際、<code id=the-iframe-element:attr-iframe-srcdoc-13><a href=#attr-iframe-srcdoc>srcdoc</a></code>属性が設定されず、<code id=the-iframe-element:attr-iframe-src-8><a href=#attr-iframe-src>src</a></code>属性が設定されてない、または設定されるがその値が<a href=infrastructure.html#parse-a-url id=the-iframe-element:parse-a-url-2>解析</a>することができないのいずれかの場合、ブラウジングコンテキストは初期の<code id=the-iframe-element:about:blank-4><a href=infrastructure.html#about:blank>about:blank</a></code>ページのままになる。</p>

  <p class=note>ユーザーがこのページから<a href=browsers.html#navigate id=the-iframe-element:navigate-8>移動</a>する場合、<code id=the-iframe-element:the-iframe-element-23><a href=#the-iframe-element>iframe</a></code>の対応<code id=the-iframe-element:windowproxy-2><a href=browsers.html#windowproxy>WindowProxy</a></code>オブジェクトは、新規<code id=the-iframe-element:document-11><a href=dom.html#document>Document</a></code>オブジェクトに対する新規<code id=the-iframe-element:window><a href=browsers.html#window>Window</a></code>オブジェクトをプロキシサーバーに送るが、<code id=the-iframe-element:attr-iframe-src-9><a href=#attr-iframe-src>src</a></code>属性は変更されないだろう。</p>


  <hr> 

  <p><dfn id=attr-iframe-name><code>name</code></dfn>属性が存在する場合、<a id=the-iframe-element:valid-browsing-context-name href=browsers.html#valid-browsing-context-name>妥当なブラウジングコンテキスト名</a>でなければならない。指定された値は、<a id=the-iframe-element:nested-browsing-context-11 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>に名前を付けるために使用される。When the browsing context is created, if the attribute is present, the <a id=the-iframe-element:browsing-context-name href=browsers.html#browsing-context-name>browsing context name</a> must be set to the value of this attribute; otherwise, the <a id=the-iframe-element:browsing-context-name-2 href=browsers.html#browsing-context-name>browsing context name</a> must be set to the empty string.</p>

  

  <p>Whenever the <code id=the-iframe-element:attr-iframe-name-2><a href=#attr-iframe-name>name</a></code> attribute is set, the nested
  <a id=the-iframe-element:browsing-context-5 href=browsers.html#browsing-context>browsing context</a>'s <a href=browsers.html#browsing-context-name id=the-iframe-element:browsing-context-name-3>name</a> must be changed to
  the new value. If the attribute is removed, the <a id=the-iframe-element:browsing-context-name-4 href=browsers.html#browsing-context-name>browsing context name</a> must be set to
  the empty string.</p>

  


  <hr> 

  <p><dfn id=attr-iframe-sandbox><code>sandbox</code></dfn>属性が指定された場合、<code id=the-iframe-element:the-iframe-element-24><a href=#the-iframe-element>iframe</a></code>によってホストされるあらゆるコンテンツに一連の追加の制限が可能になる。その値は、<a id=the-iframe-element:ascii-case-insensitive href=infrastructure.html#ascii-case-insensitive>ASCII大文字・小文字不区別</a>である<a id=the-iframe-element:unordered-set-of-unique-space-separated-tokens href=infrastructure.html#unordered-set-of-unique-space-separated-tokens>順不同なユニークなスペース区切りのトークンのセット</a>でなければならない。許容される値は、<code id=the-iframe-element:attr-iframe-sandbox-allow-forms><a href=browsers.html#attr-iframe-sandbox-allow-forms>allow-forms</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-modals><a href=browsers.html#attr-iframe-sandbox-allow-modals>allow-modals</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-pointer-lock><a href=browsers.html#attr-iframe-sandbox-allow-pointer-lock>allow-pointer-lock</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-popups><a href=browsers.html#attr-iframe-sandbox-allow-popups>allow-popups</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-popups-to-escape-sandbox><a href=browsers.html#attr-iframe-sandbox-allow-popups-to-escape-sandbox>allow-popups-to-escape-sandbox</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-same-origin><a href=browsers.html#attr-iframe-sandbox-allow-same-origin>allow-same-origin</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-scripts><a href=browsers.html#attr-iframe-sandbox-allow-scripts>allow-scripts</a></code>、<code id=the-iframe-element:attr-iframe-sandbox-allow-top-navigation><a href=browsers.html#attr-iframe-sandbox-allow-top-navigation>allow-top-navigation</a></code>である。<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>9.9+</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>4.2-4.3+</span></span><span class="firefox yes"><span>Firefox</span> <span>28+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android yes"><span>Android Browser</span> <span>2.2+</span></span><span class="safari yes"><span>Safari</span> <span>5+</span></span><span class="opera yes"><span>Opera</span> <span>15+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="ie_mob yes"><span>IE Mobile</span> <span>10+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=iframe-sandbox">caniuse.com</a></div>

  <p>この属性が設定される場合、コンテンツは一意な<a id=the-iframe-element:origin-2-2 href=browsers.html#origin-2>生成元</a>からのものとして扱われ、フォームやスクリプトは無効となり、リンクは他の<a href=browsers.html#browsing-context id=the-iframe-element:browsing-context-6>ブラウジングコンテキスト</a>をターゲットすることを防ぎ、プラグインは保護される。The <code id=the-iframe-element:attr-iframe-sandbox-allow-same-origin-2><a href=browsers.html#attr-iframe-sandbox-allow-same-origin>allow-same-origin</a></code> keyword causes the content to be treated as being from its real origin instead of forcing it into a unique origin; the <code id=the-iframe-element:attr-iframe-sandbox-allow-top-navigation-2><a href=browsers.html#attr-iframe-sandbox-allow-top-navigation>allow-top-navigation</a></code> keyword allows the content to <a id=the-iframe-element:navigate-9 href=browsers.html#navigate>navigate</a> its <a id=the-iframe-element:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a>; and the <code id=the-iframe-element:attr-iframe-sandbox-allow-forms-2><a href=browsers.html#attr-iframe-sandbox-allow-forms>allow-forms</a></code>, <code id=the-iframe-element:attr-iframe-sandbox-allow-modals-2><a href=browsers.html#attr-iframe-sandbox-allow-modals>allow-modals</a></code>, <code id=the-iframe-element:attr-iframe-sandbox-allow-pointer-lock-2><a href=browsers.html#attr-iframe-sandbox-allow-pointer-lock>allow-pointer-lock</a></code>, <code id=the-iframe-element:attr-iframe-sandbox-allow-popups-2><a href=browsers.html#attr-iframe-sandbox-allow-popups>allow-popups</a></code>, <code id=the-iframe-element:attr-iframe-sandbox-allow-scripts-2><a href=browsers.html#attr-iframe-sandbox-allow-scripts>allow-scripts</a></code>, and <code id=the-iframe-element:attr-iframe-sandbox-allow-popups-to-escape-sandbox-2><a href=browsers.html#attr-iframe-sandbox-allow-popups-to-escape-sandbox>allow-popups-to-escape-sandbox</a></code> keywords re-enable forms, modal dialogs, the pointer lock API, popups, scripts, and the creation of unsandboxed <span>auxiliary browsing contexts</span> respectively. <a href=references.html#refsPOINTERLOCK>[POINTERLOCK]</a></p>

  <p class=warning>効果的に完全にサンドボックスを破壊する、<code id=the-iframe-element:the-iframe-element-25><a href=#the-iframe-element>iframe</a></code>を含むページが埋め込まれたページに簡単に<code id=the-iframe-element:attr-iframe-sandbox-4><a href=#attr-iframe-sandbox>sandbox</a></code>属性を削除して再読み込みできるので、埋め込まれたページが<a id=the-iframe-element:same-origin href=browsers.html#same-origin>同一生成元</a>を持つ際に、<code id=the-iframe-element:attr-iframe-sandbox-allow-scripts-3><a href=browsers.html#attr-iframe-sandbox-allow-scripts>allow-scripts</a></code>および<code id=the-iframe-element:attr-iframe-sandbox-allow-same-origin-3><a href=browsers.html#attr-iframe-sandbox-allow-same-origin>allow-same-origin</a></code>の両方のキーワードを共に設定する。</p>

  <p class=warning><code id=the-iframe-element:the-iframe-element-26><a href=#the-iframe-element>iframe</a></code>の<a id=the-iframe-element:nested-browsing-context-12 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>が<a href=browsers.html#navigate id=the-iframe-element:navigate-10>ナビゲートされる</a>際、これらのフラグは効果のみを取る。それらを削除する、または全体の<code id=the-iframe-element:attr-iframe-sandbox-5><a href=#attr-iframe-sandbox>sandbox</a></code>属性を削除することは、すでに読み込まれたページに影響を与えない。</p>

  <p class=warning>潜在的に敵対的なファイルは、<code id=the-iframe-element:the-iframe-element-27><a href=#the-iframe-element>iframe</a></code>要素を含むファイルと同じサーバーから提供されるべきではない。攻撃者が<code id=the-iframe-element:the-iframe-element-28><a href=#the-iframe-element>iframe</a></code>内よりむしろ、直接敵対コンテンツを単に訪問することをユーザーに納得させることができる場合、敵対コンテンツをサンドボックス化することは、最小限の助けとなる。敵対的なHTMLコンテンツが原因で発生する可能性のある損害を制限するために、それは独立した専用ドメインから提供されるべきである。たとえ<code id=the-iframe-element:attr-iframe-sandbox-6><a href=#attr-iframe-sandbox>sandbox</a></code>属性の保護なしで、ユーザーが直接そのページを訪れるようだます場合でも、別のドメインを使用することは、ファイル内のスクリプトがサイトを攻撃できないことを保証する。</p>

  

  

  <p>When an <code id=the-iframe-element:the-iframe-element-29><a href=#the-iframe-element>iframe</a></code> element with a <code id=the-iframe-element:attr-iframe-sandbox-7><a href=#attr-iframe-sandbox>sandbox</a></code>
  attribute has its <a id=the-iframe-element:nested-browsing-context-13 href=browsers.html#nested-browsing-context>nested browsing context</a> created (before the initial
  <code id=the-iframe-element:about:blank-5><a href=infrastructure.html#about:blank>about:blank</a></code> <code id=the-iframe-element:document-12><a href=dom.html#document>Document</a></code> is created), and when an <code id=the-iframe-element:the-iframe-element-30><a href=#the-iframe-element>iframe</a></code>
  element's <code id=the-iframe-element:attr-iframe-sandbox-8><a href=#attr-iframe-sandbox>sandbox</a></code> attribute is set or changed while it
  has a <a id=the-iframe-element:nested-browsing-context-14 href=browsers.html#nested-browsing-context>nested browsing context</a>, the user agent must <a href=browsers.html#parse-a-sandboxing-directive id=the-iframe-element:parse-a-sandboxing-directive>parse the sandboxing directive</a> using the attribute's value as the <var>input</var>, the <code id=the-iframe-element:the-iframe-element-31><a href=#the-iframe-element>iframe</a></code> element's <a id=the-iframe-element:nested-browsing-context-15 href=browsers.html#nested-browsing-context>nested browsing context</a>'s
  <a id=the-iframe-element:iframe-sandboxing-flag-set href=browsers.html#iframe-sandboxing-flag-set><code>iframe</code> sandboxing flag set</a> as the output, and, if the
  <code id=the-iframe-element:the-iframe-element-32><a href=#the-iframe-element>iframe</a></code> has an <code id=the-iframe-element:attr-iframe-allowfullscreen-2><a href=#attr-iframe-allowfullscreen>allowfullscreen</a></code>
  attribute, the <var>allow fullscreen flag</var>.</p>

  <p>When an <code id=the-iframe-element:the-iframe-element-33><a href=#the-iframe-element>iframe</a></code> element's <code id=the-iframe-element:attr-iframe-sandbox-9><a href=#attr-iframe-sandbox>sandbox</a></code>
  attribute is removed while it has a <a id=the-iframe-element:nested-browsing-context-16 href=browsers.html#nested-browsing-context>nested browsing context</a>, the user agent must
  empty the <code id=the-iframe-element:the-iframe-element-34><a href=#the-iframe-element>iframe</a></code> element's <a id=the-iframe-element:nested-browsing-context-17 href=browsers.html#nested-browsing-context>nested browsing context</a>'s
  <a id=the-iframe-element:iframe-sandboxing-flag-set-2 href=browsers.html#iframe-sandboxing-flag-set><code>iframe</code> sandboxing flag set</a> as the output.</p>

  

  <div class=example>

   <p>この例において、一部の完全に未知で、潜在的に敵対的な、ユーザーが提供するHTMLコンテンツは、ページに埋め込まれている。コンテンツが別のドメインから配信されているため、コンテンツはすべて通常のクロスサイト制限の影響を受ける。また、埋め込みページはスクリプティング、プラグイン、フォームを無効にし、コンテンツは、任意のフレームやそのもの（または任意のフレーム、またはウィンドウ自身が埋め込み）以外のウィンドウを移動できない。</p>

   <pre>&lt;p&gt;We're not scared of you! Here is your content, unedited:&lt;/p&gt;
&lt;iframe sandbox src="http://usercontent.example.net/getusercontent.cgi?id=12193"&gt;&lt;/iframe&gt;</pre>

   <p class=warning>攻撃者が直接そのページへユーザーにアクセスするように納得させる場合、ページがページ内で検出された攻撃に被害を受け易くなるであろうサイトの生成元のコンテキストで実行されないように別のドメインを使用することが重要である。</p>

  </div>

  <div class=example>

   <p>この例において、別のサイトからガジェットが埋め込まれている。ガジェットは、スクリプトやフォームが有効であり、生成元サンドボックスの制限は解除され、その発信元のサーバーと通信できる。しかし、プラグインおよびポップアップを無効にしたように、サンドボックスは依然として有用であり、したがってマルウェアやその他の脅威に晒されるユーザーのリスクを軽減する。</p>

   <pre>&lt;iframe sandbox="allow-same-origin allow-forms allow-scripts"
        src="http://maps.example.com/embedded.html"&gt;&lt;/iframe&gt;</pre>

  </div>

  <div class=example>

   <p>ファイルAに含まれる次の断片を仮定する：</p>

   <pre>&lt;iframe sandbox="allow-same-origin allow-forms" src=B&gt;&lt;/iframe&gt;</pre>

   <p>またファイルBに含まれるiframeを仮定する：</p>

   <pre>&lt;iframe sandbox="allow-scripts" src=C&gt;&lt;/iframe&gt;</pre>

   <p>さらに、ファイルCに含まれるリンクを仮定する：</p>

   <pre>&lt;a href=D&gt;Link&lt;/a&gt;</pre>

   <p>この例に対して、すべてのファイルが<code id=the-iframe-element:text/html-2><a href=iana.html#text/html>text/html</a></code>として供給されると仮定する。</p>

   <p>このシナリオでは、ページCはすべてのサンドボックスのフラグを設定される。Aで<code id=the-iframe-element:the-iframe-element-35><a href=#the-iframe-element>iframe</a></code>が無効であり、これがBにおいて<code id=the-iframe-element:the-iframe-element-36><a href=#the-iframe-element>iframe</a></code>で設定される<code id=the-iframe-element:attr-iframe-sandbox-allow-scripts-4><a href=browsers.html#attr-iframe-sandbox-allow-scripts>allow-scripts</a></code>キーワードセットを上書きするので、スクリプトは無効である。フォームのiframeで設定できるように、スクリプトキーワードを上書きするためのスクリプトは、無効になっている。（Bにおける）内側の<code id=the-iframe-element:the-iframe-element-37><a href=#the-iframe-element>iframe</a></code>は、<code id=the-iframe-element:attr-iframe-sandbox-allow-forms-3><a href=browsers.html#attr-iframe-sandbox-allow-forms>allow-forms</a></code>キーワードセットを設定されないため、フォームもまた無効である。</p>

   <p>Aにおけるスクリプトが、AとBですべての<code id=the-iframe-element:attr-iframe-sandbox-10><a href=#attr-iframe-sandbox>sandbox</a></code>属性を削除すると仮定する。これはすぐには何も変わらないだろう。ユーザーがCのリンクをクリックした場合、Bで<code id=the-iframe-element:the-iframe-element-38><a href=#the-iframe-element>iframe</a></code>にページDを読み込み、リンクはページBが読み込まれた際にAの<code id=the-iframe-element:the-iframe-element-40><a href=#the-iframe-element>iframe</a></code>内の<a id=the-iframe-element:nested-browsing-context-18 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>の状態だったため、あたかもBで<code id=the-iframe-element:the-iframe-element-39><a href=#the-iframe-element>iframe</a></code>が<code id=the-iframe-element:attr-iframe-sandbox-allow-same-origin-4><a href=browsers.html#attr-iframe-sandbox-allow-same-origin>allow-same-origin</a></code>と<code id=the-iframe-element:attr-iframe-sandbox-allow-forms-4><a href=browsers.html#attr-iframe-sandbox-allow-forms>allow-forms</a></code>キーワードが設定されていたかのように、ページDは振る舞うだろう。</p>

   <p>何が許可されて何が許可されないかについて判断することは非常に困難であるため、一般に、動的に除去したり、<code id=the-iframe-element:attr-iframe-sandbox-11><a href=#attr-iframe-sandbox>sandbox</a></code>属性を変更したりすることは賢明でない。</p>

  </div>


  <hr> 

  <p><dfn id=attr-iframe-allowfullscreen><code>allowfullscreen</code></dfn>属性は、<a id=the-iframe-element:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>である。指定される場合、属性は、<code id=the-iframe-element:the-iframe-element-41><a href=#the-iframe-element>iframe</a></code>要素の<a id=the-iframe-element:browsing-context-7 href=browsers.html#browsing-context>ブラウジングコンテキスト</a>での<code id=the-iframe-element:document-13><a href=dom.html#document>Document</a></code>オブジェクトが<code id=the-iframe-element:dom-element-requestfullscreen-2><a data-x-internal=dom-element-requestfullscreen href=https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen>requestFullscreen()</a></code>の使用を許可されることを表示する（他の理由でブロックされない場合、たとえば、この属性が設定されない別の祖先<code id=the-iframe-element:the-iframe-element-42><a href=#the-iframe-element>iframe</a></code>が存在する）。</p>

  <div class=example>

   <p>ここで、<code id=the-iframe-element:the-iframe-element-43><a href=#the-iframe-element>iframe</a></code>はビデオサイトからのプレイヤーを埋め込むために使用される。<code id=the-iframe-element:attr-iframe-allowfullscreen-3><a href=#attr-iframe-allowfullscreen>allowfullscreen</a></code>属性はそのビデオをフルスクリーン表示するようなプレイヤーを有効にするために必要とされる。</p>

   <pre>&lt;article&gt;
 &lt;header&gt;
  &lt;p&gt;&lt;img src="/usericons/1627591962735"&gt; &lt;b&gt;Fred Flintstone&lt;/b&gt;&lt;/p&gt;
  &lt;p&gt;&lt;a href="/posts/3095182851" rel=bookmark&gt;12:44&lt;/a&gt; — &lt;a href="#acl-3095182851"&gt;Private Post&lt;/a&gt;&lt;/p&gt;
 &lt;/header&gt;
 &lt;main&gt;
  &lt;p&gt;Check out my new ride!&lt;/p&gt;
  <strong>&lt;iframe src="https://video.example.com/embed?id=92469812" allowfullscreen&gt;&lt;/iframe&gt;</strong>
 &lt;/main&gt;
&lt;/article&gt;</pre>

  </div>


  <hr> 

  <p><code id=the-iframe-element:the-iframe-element-44><a href=#the-iframe-element>iframe</a></code>要素は、埋め込まれたコンテンツが特定のサイズをもつ（たとえば単位が明確に定義された次元をもつ）場合、<a href=#dimension-attributes id=the-iframe-element:dimension-attributes>次元属性</a>をサポートする。</p>

  <p>指定した初期コンテンツ内容が正常に使用されるかどうかに関わらず、常にネストした<a id=the-iframe-element:browsing-context-8 href=browsers.html#browsing-context>ブラウジングコンテキスト</a>を<a href=browsers.html#creating-a-new-browsing-context id=the-iframe-element:creating-a-new-browsing-context-2>作成する</a>ので、<code id=the-iframe-element:the-iframe-element-45><a href=#the-iframe-element>iframe</a></code>要素は<a id=the-iframe-element:fallback-content href=dom.html#fallback-content>フォールバックコンテンツ</a>にならない。</p>


  <hr> 

  <p><code id=the-iframe-element:the-iframe-element-46><a href=#the-iframe-element>iframe</a></code>要素の子孫は何も表さない。（<code id=the-iframe-element:the-iframe-element-47><a href=#the-iframe-element>iframe</a></code>要素をサポートしないレガシーユーザーエージェントにおいて、コンテンツはフォールバックコンテンツとして機能することができるマークアップとして解析される。）</p>

  <p id=iframe-content-model><a id=the-iframe-element:html-documents href=infrastructure.html#html-documents>HTML文書</a>で使用する場合、<code id=the-iframe-element:the-iframe-element-48><a href=#the-iframe-element>iframe</a></code>要素の許可されたコンテンツモデルはテキストである。ただし、<var id=the-iframe-element:concept-frag-parse-context><a href=syntax.html#concept-frag-parse-context>context</a></var>要素として<code id=the-iframe-element:the-iframe-element-49><a href=#the-iframe-element>iframe</a></code>要素および<var>input</var>としてテキストコンテンツをもつ<a id=the-iframe-element:html-fragment-parsing-algorithm href=syntax.html#html-fragment-parsing-algorithm>HTML断片解析アルゴリズム</a>を呼び出すことが、一切の<a href=syntax.html#parse-error id=the-iframe-element:parse-error>解析エラー</a>なく、リスト内の任意の場所にまたはリスト内の要素の子孫として<code id=the-iframe-element:the-script-element><a href=scripting.html#the-script-element>script</a></code>要素をもたず、かつ自身が適合するリスト（その子孫を含む）内のすべての要素をもつ、<a id=the-iframe-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>であるノードのリストをもたらさなければならないことを除く。</p>

  <p><code id=the-iframe-element:the-iframe-element-50><a href=#the-iframe-element>iframe</a></code>要素は、<a id=the-iframe-element:xml-documents-2 href=infrastructure.html#xml-documents>XML文書</a>で空でなければならない。</p>

  <p class=note><a id=the-iframe-element:html-parser href=syntax.html#html-parser>HTMLパーサ</a>は、テキストとして<code id=the-iframe-element:the-iframe-element-51><a href=#the-iframe-element>iframe</a></code>要素の内側のマークアップを扱う。</p>


  

  <hr> 

  <p>IDL属性<dfn id=dom-iframe-src><code>src</code></dfn>、<dfn id=dom-iframe-srcdoc><code>srcdoc</code></dfn>、<dfn id=dom-iframe-name><code>name</code></dfn>および<dfn id=dom-iframe-sandbox><code>sandbox</code></dfn>のそれぞれは、同じ名前の各コンテンツ属性を<a id=the-iframe-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p>The <a href=infrastructure.html#concept-supported-tokens id=the-iframe-element:concept-supported-tokens>supported tokens</a> for <code id=the-iframe-element:dom-iframe-sandbox-2><a href=#dom-iframe-sandbox>sandbox</a></code>'s <code id=the-iframe-element:domtokenlist-2><a href=infrastructure.html#domtokenlist>DOMTokenList</a></code> are the allowed
  values defined in the <code id=the-iframe-element:attr-iframe-sandbox-12><a href=#attr-iframe-sandbox>sandbox</a></code> attribute and supported by
  the user agent.</p>

  <p>The <dfn id=dom-iframe-allowfullscreen><code>allowFullscreen</code></dfn> IDL attribute
  must <a id=the-iframe-element:reflect-2 href=infrastructure.html#reflect>reflect</a> the <code id=the-iframe-element:attr-iframe-allowfullscreen-4><a href=#attr-iframe-allowfullscreen>allowfullscreen</a></code>
  content attribute.</p>

  <p>The <dfn id=dom-iframe-contentdocument><code>contentDocument</code></dfn> IDL attribute
  must return the <code id=the-iframe-element:document-14><a href=dom.html#document>Document</a></code> object of the <a id=the-iframe-element:active-document-6 href=browsers.html#active-document>active document</a> of the
  <code id=the-iframe-element:the-iframe-element-52><a href=#the-iframe-element>iframe</a></code> element's <a id=the-iframe-element:nested-browsing-context-19 href=browsers.html#nested-browsing-context>nested browsing context</a>, if any and if its
  <a id=the-iframe-element:effective-script-origin href=browsers.html#effective-script-origin>effective script origin</a> is the <a id=the-iframe-element:same-origin-2 href=browsers.html#same-origin>same origin</a> as the <a id=the-iframe-element:effective-script-origin-2 href=browsers.html#effective-script-origin>effective script
  origin</a> specified by the <a id=the-iframe-element:incumbent-settings-object href=webappapis.html#incumbent-settings-object>incumbent settings object</a>, or null otherwise.</p>

  <p>The <dfn id=dom-iframe-contentwindow><code>contentWindow</code></dfn> IDL attribute must
  return the <code id=the-iframe-element:windowproxy-3><a href=browsers.html#windowproxy>WindowProxy</a></code> object of the <code id=the-iframe-element:the-iframe-element-53><a href=#the-iframe-element>iframe</a></code> element's <a id=the-iframe-element:nested-browsing-context-20 href=browsers.html#nested-browsing-context>nested
  browsing context</a>, if any, or null otherwise.</p>

  

  <div class=example>

   <p>広告ブローカーから広告を含めるように<code id=the-iframe-element:the-iframe-element-54><a href=#the-iframe-element>iframe</a></code>を使ったページの例は次のとおり：</p>

   <pre>&lt;iframe src="http://ads.example.com/?customerid=923513721&amp;amp;format=banner"
        width="468" height="60"&gt;&lt;/iframe&gt;</pre>

  </div>




  <h4 id=the-embed-element>4.8.6 <dfn><code>embed</code></dfn>要素</h4>



  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-embed-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-embed-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-embed-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-embed-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd><a id=the-embed-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd><a id=the-embed-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-embed-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-embed-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-embed-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-embed-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-embed-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-embed-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-embed-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-embed-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-embed-element:attr-embed-src><a href=#attr-embed-src>src</a></code> — リソースのアドレス<dd><code id=the-embed-element:attr-embed-type><a href=#attr-embed-type>type</a></code> — 埋め込みリソースタイプ<dd><code id=the-embed-element:attr-dim-width><a href=#attr-dim-width>width</a></code> — 横の次元<dd><code id=the-embed-element:attr-dim-height><a href=#attr-dim-height>height</a></code> — 縦の次元<dd>名前空間を持たないその他の属性（文参照）。<dt><a href=dom.html#concept-element-dom id=the-embed-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlembedelement>HTMLEmbedElement</dfn> : <a id=the-embed-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-embed-src id=the-embed-element:dom-embed-src>src</a>;
  attribute DOMString <a href=#dom-embed-type id=the-embed-element:dom-embed-type>type</a>;
  attribute DOMString <a href=#dom-dim-width id=the-embed-element:dom-dim-width>width</a>;
  attribute DOMString <a href=#dom-dim-height id=the-embed-element:dom-dim-height>height</a>;
  <a id=the-embed-element:document href=dom.html#document>Document</a>? <a href=#dom-media-getsvgdocument id=the-embed-element:dom-media-getsvgdocument>getSVGDocument</a>();
  <a href=#dom-embed-caller id=the-embed-element:dom-embed-caller>legacycaller</a> any (any... arguments);
};</pre>
    
    <p>Depending on the type of content instantiated by the
    <code id=the-embed-element:the-embed-element><a href=#the-embed-element>embed</a></code> element, the node may also support other
    interfaces.</p>
    
   </dl>

  <p><code id=the-embed-element:the-embed-element-2><a href=#the-embed-element>embed</a></code>要素は外部の（典型的には非HTML）アプリケーションやインタラクティブコンテンツの統合点を提供する。</p>

  <p><dfn id=attr-embed-src><code>src</code></dfn>属性は、埋め込まれているリソースのアドレスを与える。属性が存在する場合、<a id=the-embed-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>を含まなければならない。</p>

  <p><code id=the-embed-element:names:-the-itemprop-attribute><a href=microdata.html#names:-the-itemprop-attribute>itemprop</a></code>が<code id=the-embed-element:the-embed-element-3><a href=#the-embed-element>embed</a></code>要素で指定される場合、<code id=the-embed-element:attr-embed-src-2><a href=#attr-embed-src>src</a></code>属性も指定されなければならない。</p>

  <p><dfn id=attr-embed-type><code>type</code></dfn>属性が存在する場合は、インスタンスを生成するプラグインが選択される<a id=the-embed-element:mime-type href=infrastructure.html#mime-type>MIMEタイプ</a>を提供する。値は<a id=the-embed-element:valid-mime-type href=infrastructure.html#valid-mime-type>妥当なMIMEタイプ</a>でなければならない。<code id=the-embed-element:attr-embed-type-2><a href=#attr-embed-type>type</a></code>属性と<code id=the-embed-element:attr-embed-src-3><a href=#attr-embed-src>src</a></code>属性の両方が存在する場合、<code id=the-embed-element:attr-embed-type-3><a href=#attr-embed-type>type</a></code>属性は、<code id=the-embed-element:attr-embed-src-4><a href=#attr-embed-src>src</a></code>属性で指定されたリソースの<a href=infrastructure.html#content-type id=the-embed-element:content-type>明示的なContent-Typeメタデータ</a>と同じ型を指定しなければならない。</p>

  

  <p>While any of the following conditions are occurring, any <a id=the-embed-element:plugin href=infrastructure.html#plugin>plugin</a> instantiated for
  the element must be removed, and the <code id=the-embed-element:the-embed-element-4><a href=#the-embed-element>embed</a></code> element <a id=the-embed-element:represents href=dom.html#represents>represents</a>
  nothing:</p>

  <ul class=brief><li><p>The element has neither a <code id=the-embed-element:attr-embed-src-5><a href=#attr-embed-src>src</a></code> attribute nor a <code id=the-embed-element:attr-embed-type-4><a href=#attr-embed-type>type</a></code> attribute.</li><li><p>The element has a <a href=#media-element id=the-embed-element:media-element>media element</a> ancestor.</li><li><p>The element has an ancestor <code id=the-embed-element:the-object-element><a href=#the-object-element>object</a></code> element that is <em>not</em> showing its
   <a id=the-embed-element:fallback-content href=dom.html#fallback-content>fallback content</a>.</li></ul>

  <p>An <code id=the-embed-element:the-embed-element-5><a href=#the-embed-element>embed</a></code> element is said to be <dfn id=concept-embed-active>potentially
  active</dfn> when the following conditions are all met simultaneously:</p>

  <ul class=brief><li>The element is <a href=infrastructure.html#in-a-document id=the-embed-element:in-a-document>in a <code>Document</code></a> or was <a href=infrastructure.html#in-a-document id=the-embed-element:in-a-document-2>in a <code>Document</code></a> the last time the <a id=the-embed-element:event-loop href=webappapis.html#event-loop>event loop</a>
   reached <a href=webappapis.html#step1>step 1</a>.</li><li>The element's <a id=the-embed-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is <a id=the-embed-element:fully-active href=browsers.html#fully-active>fully active</a>.</li><li>The element has either a <code id=the-embed-element:attr-embed-src-6><a href=#attr-embed-src>src</a></code> attribute set or a <code id=the-embed-element:attr-embed-type-5><a href=#attr-embed-type>type</a></code> attribute set (or both).</li><li>The element's <code id=the-embed-element:attr-embed-src-7><a href=#attr-embed-src>src</a></code> attribute is either absent or its value
   is not the empty string.</li><li>The element is not a descendant of a <a href=#media-element id=the-embed-element:media-element-2>media element</a>.</li><li>The element is not a descendant of an <code id=the-embed-element:the-object-element-2><a href=#the-object-element>object</a></code> element that is not showing its
   <a id=the-embed-element:fallback-content-2 href=dom.html#fallback-content>fallback content</a>.</li><li>The element is <a id=the-embed-element:being-rendered href=rendering.html#being-rendered>being rendered</a>, or was <a id=the-embed-element:being-rendered-2 href=rendering.html#being-rendered>being rendered</a> the last time
   the <a id=the-embed-element:event-loop-2 href=webappapis.html#event-loop>event loop</a> reached <a href=webappapis.html#step1>step 1</a>.</li></ul>

  <p>Whenever an <code id=the-embed-element:the-embed-element-6><a href=#the-embed-element>embed</a></code> element that was not <a href=#concept-embed-active id=the-embed-element:concept-embed-active>potentially active</a> becomes <a href=#concept-embed-active id=the-embed-element:concept-embed-active-2>potentially active</a>, and whenever a <a href=#concept-embed-active id=the-embed-element:concept-embed-active-3>potentially active</a> <code id=the-embed-element:the-embed-element-7><a href=#the-embed-element>embed</a></code> element that is
  remaining <a href=#concept-embed-active id=the-embed-element:concept-embed-active-4>potentially active</a> and has its <code id=the-embed-element:attr-embed-type-6><a href=#attr-embed-type>src</a></code> attribute set, changed, or removed or its <code id=the-embed-element:attr-embed-type-7><a href=#attr-embed-type>type</a></code> attribute set, changed, or removed, the user agent must
  <a id=the-embed-element:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> using the <dfn id=embed-task-source>embed task source</dfn> to run <a href=#the-embed-element-setup-steps id=the-embed-element:the-embed-element-setup-steps>the
  <code>embed</code> element setup steps</a>.</p>

  <p><dfn id=the-embed-element-setup-steps>The <code>embed</code> element setup steps</dfn> are as follows:</p>

  <ol><li><p>If another <a href=webappapis.html#concept-task id=the-embed-element:concept-task>task</a> has since been queued to run <a href=#the-embed-element-setup-steps id=the-embed-element:the-embed-element-setup-steps-2>the
   <code>embed</code> element setup steps</a> for this element, then abort these steps.</li><li>

    <dl class=switch><dt>If the element has a <code id=the-embed-element:attr-embed-src-8><a href=#attr-embed-src>src</a></code> attribute set<dd>

      <p>The user agent must <a href=infrastructure.html#parse-a-url id=the-embed-element:parse-a-url>parse</a> the value of the element's
      <code id=the-embed-element:attr-embed-src-9><a href=#attr-embed-src>src</a></code> attribute, relative to the element's <a id=the-embed-element:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
      document</a>. If that is successful, the user agent should run these steps:

      

      <ol><li><p>Let <var>request</var> be a new <a href=https://fetch.spec.whatwg.org/#concept-request id=the-embed-element:concept-request data-x-internal=concept-request>request</a> whose
       <a href=https://fetch.spec.whatwg.org/#concept-request-url id=the-embed-element:concept-request-url data-x-internal=concept-request-url>url</a> is the <a id=the-embed-element:resulting-url-record href=infrastructure.html#resulting-url-record>resulting URL record</a>,
       <a href=https://fetch.spec.whatwg.org/#concept-request-client id=the-embed-element:concept-request-client data-x-internal=concept-request-client>client</a> is the element's <a id=the-embed-element:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
       document</a>'s <code id=the-embed-element:window><a href=browsers.html#window>Window</a></code> object's <a id=the-embed-element:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>,
       <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=the-embed-element:concept-request-destination data-x-internal=concept-request-destination>destination</a> is "<code>unknown</code>", <a id=the-embed-element:omit-origin-header-flag href=https://fetch.spec.whatwg.org/#omit-origin-header-flag data-x-internal=omit-origin-header-flag>omit-<code>Origin</code>-header flag</a> is set if the
       element doesn't have a <a id=the-embed-element:browsing-context-scope-origin href=browsers.html#browsing-context-scope-origin>browsing context scope origin</a>, <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=the-embed-element:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> is "<code>include</code>", and whose <a id=the-embed-element:use-url-credentials-flag href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials flag</a> is set.</li><li><p><a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-embed-element:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>.</li></ol>

      <p>The <a href=webappapis.html#concept-task id=the-embed-element:concept-task-2>task</a> that is <a href=webappapis.html#queue-a-task id=the-embed-element:queue-a-task-2>queued</a> by the <a id=the-embed-element:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> once the
      resource has been fetched must run the following steps:</p>
      

      <ol><li><p>If another <a href=webappapis.html#concept-task id=the-embed-element:concept-task-3>task</a> has since been queued to run
       <a href=#the-embed-element-setup-steps id=the-embed-element:the-embed-element-setup-steps-3>the <code>embed</code> element setup steps</a> for this element, then abort these
       steps.</li><li>

        <p>Determine the <dfn id=concept-embed-type>type of the content</dfn> being embedded, as
        follows (stopping at the first substep that determines the type):</p>

        <ol><li><p>If the element has a <code id=the-embed-element:attr-embed-type-8><a href=#attr-embed-type>type</a></code> attribute, and that
attribute's value is a type that a <a id=the-embed-element:plugin-2 href=infrastructure.html#plugin>plugin</a> supports, then the value of the
         <code id=the-embed-element:attr-embed-type-9><a href=#attr-embed-type>type</a></code> attribute is the <a href=#concept-embed-type id=the-embed-element:concept-embed-type>content's type</a>.</li><li>

          

          <p>Otherwise, if applying the <a id=the-embed-element:url-parser href=infrastructure.html#url-parser>URL parser</a> algorithm to the <a id=the-embed-element:url href=infrastructure.html#url>URL</a> of
          the specified resource (after any redirects) results in a <a id=the-embed-element:url-record href=https://url.spec.whatwg.org/#concept-url data-x-internal=url-record>URL record</a> whose
          <a href=https://url.spec.whatwg.org/#concept-url-path id=the-embed-element:concept-url-path data-x-internal=concept-url-path>path</a> component matches a pattern that a
          <a id=the-embed-element:plugin-3 href=infrastructure.html#plugin>plugin</a> supports, then the <a href=#concept-embed-type id=the-embed-element:concept-embed-type-2>content's
          type</a> is the type that that plugin can handle.</p>

          <p class=example>For example, a plugin might say that it can handle resources with <a href=https://url.spec.whatwg.org/#concept-url-path id=the-embed-element:concept-url-path-2 data-x-internal=concept-url-path>path</a> components that end with the four character string
          "<code>.swf</code>".</p>

          
          

         </li><li><p>Otherwise, if the specified resource has <a href=infrastructure.html#content-type id=the-embed-element:content-type-2>explicit
         Content-Type metadata</a>, then that is the <a href=#concept-embed-type id=the-embed-element:concept-embed-type-3>content's
         type</a>.</li><li><p>Otherwise, the content has no <a href=#concept-embed-type id=the-embed-element:concept-embed-type-4>type</a> and there
         can be no appropriate <a id=the-embed-element:plugin-4 href=infrastructure.html#plugin>plugin</a> for it.</li></ol>

       </li><li>

        <p>If the previous step determined that the <a href=#concept-embed-type id=the-embed-element:concept-embed-type-5>content's
        type</a> is <code>image/svg+xml</code>, then run the following substeps:</p>

        <ol><li><p>If the <code id=the-embed-element:the-embed-element-8><a href=#the-embed-element>embed</a></code> element is not associated with a <a id=the-embed-element:nested-browsing-context href=browsers.html#nested-browsing-context>nested browsing
         context</a>, associate the element with a newly created <a id=the-embed-element:nested-browsing-context-2 href=browsers.html#nested-browsing-context>nested browsing
         context</a>, and, if the element has a <code id=the-embed-element:attr-embed-name><a href=obsolete.html#attr-embed-name>name</a></code>
attribute, set the <a id=the-embed-element:browsing-context-name href=browsers.html#browsing-context-name>browsing context name</a> of the element's <a id=the-embed-element:nested-browsing-context-3 href=browsers.html#nested-browsing-context>nested
         browsing context</a> to the value of this attribute.</p>
         

         </li><li><p><a id=the-embed-element:navigate href=browsers.html#navigate>Navigate</a> the <a id=the-embed-element:nested-browsing-context-4 href=browsers.html#nested-browsing-context>nested browsing context</a> to
         the fetched resource, with <a id=the-embed-element:replacement-enabled href=browsers.html#replacement-enabled>replacement enabled</a>, and with the
         <code id=the-embed-element:the-embed-element-9><a href=#the-embed-element>embed</a></code> element's <a id=the-embed-element:node-document-4 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <a href=browsers.html#concept-document-bc id=the-embed-element:concept-document-bc>browsing context</a> as the <a id=the-embed-element:source-browsing-context href=browsers.html#source-browsing-context>source browsing
         context</a>. (The <code id=the-embed-element:attr-embed-src-10><a href=#attr-embed-src>src</a></code> attribute of the
         <code id=the-embed-element:the-embed-element-10><a href=#the-embed-element>embed</a></code> element doesn't get updated if the browsing context gets further
         navigated to other locations.)</li><li><p>The <code id=the-embed-element:the-embed-element-11><a href=#the-embed-element>embed</a></code> element now <a id=the-embed-element:represents-2 href=dom.html#represents>represents</a> its associated
         <a id=the-embed-element:nested-browsing-context-5 href=browsers.html#nested-browsing-context>nested browsing context</a>.</li></ol>

       </li><li>

        <p>Otherwise, find and instantiate an appropriate <a id=the-embed-element:plugin-5 href=infrastructure.html#plugin>plugin</a> based on the <a href=#concept-embed-type id=the-embed-element:concept-embed-type-6>content's type</a>, and hand that <a id=the-embed-element:plugin-6 href=infrastructure.html#plugin>plugin</a> the
        content of the resource, replacing any previously instantiated plugin for the element. The
        <code id=the-embed-element:the-embed-element-12><a href=#the-embed-element>embed</a></code> element now represents this <a id=the-embed-element:plugin-7 href=infrastructure.html#plugin>plugin</a> instance.</p>

       </li><li><p>Once the resource or plugin has completely loaded, <a id=the-embed-element:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to
       <a id=the-embed-element:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-embed-element:event-load><a href=indices.html#event-load>load</a></code> at the
       element.</li></ol>

      <p>Whether the resource is fetched successfully or not (e.g. whether the response status was
      an <a id=the-embed-element:ok-status href=https://fetch.spec.whatwg.org/#ok-status data-x-internal=ok-status>ok status</a>) must be ignored when determining the <a href=#concept-embed-type id=the-embed-element:concept-embed-type-7>content's type</a> and when handing the resource to the
      plugin.</p>

      <p class=note>This allows servers to return data for plugins even with error responses (e.g.
      HTTP 500 Internal Server Error codes can still contain plugin data).</p>

      <p>Fetching the resource must <a id=the-embed-element:delay-the-load-event href=syntax.html#delay-the-load-event>delay the load event</a> of the element's <a id=the-embed-element:node-document-5 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.</p>
      
      
      

     <dt>If the element has no <code id=the-embed-element:attr-embed-src-11><a href=#attr-embed-src>src</a></code> attribute set<dd>

      <p>The user agent should find and instantiate an appropriate <a id=the-embed-element:plugin-8 href=infrastructure.html#plugin>plugin</a> based on the
      value of the <code id=the-embed-element:attr-embed-type-10><a href=#attr-embed-type>type</a></code> attribute. The <code id=the-embed-element:the-embed-element-13><a href=#the-embed-element>embed</a></code>
      element now represents this <a id=the-embed-element:plugin-9 href=infrastructure.html#plugin>plugin</a> instance.</p>

      <p>Once the plugin is completely loaded, <a id=the-embed-element:queue-a-task-4 href=webappapis.html#queue-a-task>queue a task</a> to <a id=the-embed-element:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple
      event</a> named <code id=the-embed-element:event-load-2><a href=indices.html#event-load>load</a></code> at the element.</p>

     </dl>

   </li></ol>

  <p>The <code id=the-embed-element:the-embed-element-14><a href=#the-embed-element>embed</a></code> element has no <a id=the-embed-element:fallback-content-3 href=dom.html#fallback-content>fallback content</a>. If the user agent can't
  find a suitable plugin when attempting to find and instantiate one for the algorithm above, then
  the user agent must use a default plugin. This default could be as simple as saying "Unsupported
  Format".</p>

  <p>Whenever an <code id=the-embed-element:the-embed-element-15><a href=#the-embed-element>embed</a></code> element that was <a href=#concept-embed-active id=the-embed-element:concept-embed-active-5>potentially
  active</a> stops being <a href=#concept-embed-active id=the-embed-element:concept-embed-active-6>potentially active</a>, any
  <a id=the-embed-element:plugin-10 href=infrastructure.html#plugin>plugin</a> that had been instantiated for that element must be unloaded.</p>

  <p id=sandboxPluginEmbed>When a <a id=the-embed-element:plugin-11 href=infrastructure.html#plugin>plugin</a> is to be instantiated but it cannot be <a href=infrastructure.html#concept-plugin-secure id=the-embed-element:concept-plugin-secure>secured</a> and the <a id=the-embed-element:sandboxed-plugins-browsing-context-flag href=browsers.html#sandboxed-plugins-browsing-context-flag>sandboxed plugins browsing context
  flag</a> is set on the <code id=the-embed-element:the-embed-element-16><a href=#the-embed-element>embed</a></code> element's <a id=the-embed-element:node-document-6 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <a id=the-embed-element:active-sandboxing-flag-set href=browsers.html#active-sandboxing-flag-set>active
  sandboxing flag set</a>, then the user agent must not instantiate the <a id=the-embed-element:plugin-12 href=infrastructure.html#plugin>plugin</a>, and
  must instead render the <code id=the-embed-element:the-embed-element-17><a href=#the-embed-element>embed</a></code> element in a manner that conveys that the
  <a id=the-embed-element:plugin-13 href=infrastructure.html#plugin>plugin</a> was disabled. The user agent may offer the user the option to override the
  sandbox and instantiate the <a id=the-embed-element:plugin-14 href=infrastructure.html#plugin>plugin</a> anyway; if the user invokes such an option, the
  user agent must act as if the conditions above did not apply for the purposes of this element.</p>

  <p class=warning>Plugins that cannot be <a href=infrastructure.html#concept-plugin-secure id=the-embed-element:concept-plugin-secure-2>secured</a> are
  disabled in sandboxed browsing contexts because they might not honor the restrictions imposed by
  the sandbox (e.g. they might allow scripting even when scripting in the sandbox is disabled). User
  agents should convey the danger of overriding the sandbox to the user if an option to do so is
  provided.</p>

  <p>When an <code id=the-embed-element:the-embed-element-18><a href=#the-embed-element>embed</a></code> element represents a <a id=the-embed-element:nested-browsing-context-6 href=browsers.html#nested-browsing-context>nested browsing context</a>: if the
  <code id=the-embed-element:the-embed-element-19><a href=#the-embed-element>embed</a></code> element's <a id=the-embed-element:nested-browsing-context-7 href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=the-embed-element:active-document href=browsers.html#active-document>active document</a>
  is not <a id=the-embed-element:ready-for-post-load-tasks href=syntax.html#ready-for-post-load-tasks>ready for post-load tasks</a>, and when anything is <a href=syntax.html#delay-the-load-event id=the-embed-element:delay-the-load-event-2>delaying the load event</a> of the <code id=the-embed-element:the-embed-element-20><a href=#the-embed-element>embed</a></code> element's <a id=the-embed-element:browsing-context href=browsers.html#browsing-context>browsing
  context</a>'s <a id=the-embed-element:active-document-2 href=browsers.html#active-document>active document</a>, and when the <code id=the-embed-element:the-embed-element-21><a href=#the-embed-element>embed</a></code> element's
  <a id=the-embed-element:browsing-context-2 href=browsers.html#browsing-context>browsing context</a> is in the <a id=the-embed-element:delaying-load-events-mode href=browsers.html#delaying-load-events-mode>delaying <code>load</code>
  events mode</a>, the <code id=the-embed-element:the-embed-element-22><a href=#the-embed-element>embed</a></code> must <a id=the-embed-element:delay-the-load-event-3 href=syntax.html#delay-the-load-event>delay the load event</a> of its
  document.</p>

  <p>The <a id=the-embed-element:task-source href=webappapis.html#task-source>task source</a> for the <a href=webappapis.html#concept-task id=the-embed-element:concept-task-4>tasks</a> mentioned in this
  section is the <a id=the-embed-element:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>.</p>

  

  <p><code id=the-embed-element:attr-embed-name-2><a href=obsolete.html#attr-embed-name>name</a></code>、<code id=the-embed-element:attr-embed-align><a href=obsolete.html#attr-embed-align>align</a></code>、<code id=the-embed-element:attr-embed-hspace><a href=obsolete.html#attr-embed-hspace>hspace</a></code>、および<code id=the-embed-element:attr-embed-vspace><a href=obsolete.html#attr-embed-vspace>vspace</a></code>以外の名前空間なしの属性は、その名前が<a id=the-embed-element:xml-compatible href=infrastructure.html#xml-compatible>XML互換性</a>があり、<a id=the-embed-element:uppercase-ascii-letters href=infrastructure.html#uppercase-ascii-letters>ASCII大文字</a>を一切含まない限り、<code id=the-embed-element:the-embed-element-23><a href=#the-embed-element>embed</a></code>要素で指定されてもよい。これらの属性は、<a id=the-embed-element:plugin-15 href=infrastructure.html#plugin>プラグイン</a>にパラメータとして渡される。</p>

  <p class=note>大文字の制限がそのような文書に影響しないので、<a id=the-embed-element:html-documents href=infrastructure.html#html-documents>HTML文書</a>内のすべての属性は自動的に小文字を取得する。</p>

  <p class=note>4つの例外は、<a id=the-embed-element:plugin-16 href=infrastructure.html#plugin>プラグイン</a>に送信するパラメータを超えた副作用を持つ従来の属性を除外するのに適当である。</p>

  

  <p>The user agent should pass the names and values of all the attributes of the <code id=the-embed-element:the-embed-element-24><a href=#the-embed-element>embed</a></code>
  element that have no namespace to the <a id=the-embed-element:plugin-17 href=infrastructure.html#plugin>plugin</a> used, when one is instantiated.</p>

  <p>The <code id=the-embed-element:htmlembedelement><a href=#htmlembedelement>HTMLEmbedElement</a></code> object representing the element must expose the scriptable
  interface of the <a id=the-embed-element:plugin-18 href=infrastructure.html#plugin>plugin</a> instantiated for the <code id=the-embed-element:the-embed-element-25><a href=#the-embed-element>embed</a></code> element, if any. At a
  minimum, this interface must implement the <dfn id=dom-embed-caller>legacy caller
  operation</dfn>. (It is suggested that the default behaviour of this legacy caller operation, e.g.
  the behaviour of the default plugin's legacy caller operation, be to throw a
  <code id=the-embed-element:notsupportederror><a href=infrastructure.html#notsupportederror>NotSupportedError</a></code> exception.)</p>

  

  <p><code id=the-embed-element:the-embed-element-26><a href=#the-embed-element>embed</a></code>要素は、<a href=#dimension-attributes id=the-embed-element:dimension-attributes>次元属性</a>をサポートする。</p>

  

  <p>IDL属性<dfn id=dom-embed-src><code>src</code></dfn>、および<dfn id=dom-embed-type><code>type</code></dfn>のそれぞれは、同じ名前の各コンテンツ属性を<a id=the-embed-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  

  <div class=example>

   <p>これはFlashのような、独自のプラグインを必要とするリソースを埋め込むための方法である：</p>

   <pre>&lt;embed src="catgame.swf"&gt;</pre>

   <p>ユーザーがプラグインを持たない場合（たとえばプラグインベンダーがユーザーのプラットフォームをサポートしない場合）、ユーザーはリソースを使用できない。</p>

   <p>"high"値をもつパラメータ"quality"をプラグインに渡すために、属性を指定することができる：</p>

   <pre>&lt;embed src="catgame.swf" quality="high"&gt;</pre>

   <p>代わりに<code id=the-embed-element:the-object-element-3><a href=#the-object-element>object</a></code>要素を使用する場合、次のものと等価になる：</p>

   <pre>&lt;object data="catgame.swf"&gt;
 &lt;param name="quality" value="high"&gt;
&lt;/object&gt;</pre>

  </div>




  <h4 id=the-object-element>4.8.7 <dfn><code>object</code></dfn>要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25553" title="Shouldn't &lt;object&gt; also allow intermixed script-supporting elements?">25553</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27480" title="&lt;object&gt; Consider not unloading/loading SVG when flipping rendering.">27480</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=24852" title="The algorithm should probably unload the plugin even if it doesn't end up at the fallback step. Should also destroy the nested browsing context if it had one.">24852</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-object-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-object-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-object-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-object-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd>要素が<code id=the-object-element:attr-hyperlink-usemap><a href=#attr-hyperlink-usemap>usemap</a></code>属性をもつ場合：<a id=the-object-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd><a href=forms.html#category-listed id=the-object-element:category-listed>リスト</a>、<a href=forms.html#category-submit id=the-object-element:category-submit>送信可能</a>、<a href=forms.html#category-form-attr id=the-object-element:category-form-attr>再関連付け可能</a> <a id=the-object-element:form-associated-element href=forms.html#form-associated-element>フォーム関連要素</a>。<dd><a id=the-object-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-object-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-object-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-object-element:concept-element-content-model>コンテンツモデル</a>：<dd>0個以上の<code id=the-object-element:the-param-element><a href=#the-param-element>param</a></code>要素、それから<a id=the-object-element:transparent href=dom.html#transparent>透過的</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-object-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-object-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-object-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-object-element:attr-object-data><a href=#attr-object-data>data</a></code> — リソースのアドレス<dd><code id=the-object-element:attr-object-type><a href=#attr-object-type>type</a></code> — 埋め込みリソースタイプ<dd><code id=the-object-element:attr-object-typemustmatch><a href=#attr-object-typemustmatch>typemustmatch</a></code> — <code id=the-object-element:attr-object-type-2><a href=#attr-object-type>type</a></code>属性および<a id=the-object-element:content-type href=infrastructure.html#content-type>Content-Type</a>値が使用されるリソースにマッチする必要があるかどうか<dd><code id=the-object-element:attr-object-name><a href=#attr-object-name>name</a></code> — <a id=the-object-element:nested-browsing-context href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>名<dd><code id=the-object-element:attr-hyperlink-usemap-2><a href=#attr-hyperlink-usemap>usemap</a></code> — 使用する<a href=#image-map id=the-object-element:image-map>イメージマップ</a>の名前<dd><code id=the-object-element:attr-fae-form><a href=forms.html#attr-fae-form>form</a></code> — <code id=the-object-element:the-form-element><a href=forms.html#the-form-element>form</a></code>要素とコントロールを関連付ける<dd><code id=the-object-element:attr-dim-width><a href=#attr-dim-width>width</a></code> — 横の次元<dd><code id=the-object-element:attr-dim-height><a href=#attr-dim-height>height</a></code> — 縦の次元<dt><a href=dom.html#concept-element-dom id=the-object-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlobjectelement>HTMLObjectElement</dfn> : <a id=the-object-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-object-data id=the-object-element:dom-object-data>data</a>;
  attribute DOMString <a href=#dom-object-type id=the-object-element:dom-object-type>type</a>;
  attribute boolean <a href=#dom-object-typemustmatch id=the-object-element:dom-object-typemustmatch>typeMustMatch</a>;
  attribute DOMString <a href=#dom-object-name id=the-object-element:dom-object-name>name</a>;
  attribute DOMString <a href=#dom-object-usemap id=the-object-element:dom-object-usemap>useMap</a>;
  readonly attribute <a id=the-object-element:htmlformelement href=forms.html#htmlformelement>HTMLFormElement</a>? <a href=forms.html#dom-fae-form id=the-object-element:dom-fae-form>form</a>;
  attribute DOMString <a href=#dom-dim-width id=the-object-element:dom-dim-width>width</a>;
  attribute DOMString <a href=#dom-dim-height id=the-object-element:dom-dim-height>height</a>;
  readonly attribute <a id=the-object-element:document href=dom.html#document>Document</a>? <a href=#dom-object-contentdocument id=the-object-element:dom-object-contentdocument>contentDocument</a>;
  readonly attribute <a id=the-object-element:windowproxy href=browsers.html#windowproxy>WindowProxy</a>? <a href=#dom-object-contentwindow id=the-object-element:dom-object-contentwindow>contentWindow</a>;
  <a id=the-object-element:document-2 href=dom.html#document>Document</a>? <a href=#dom-media-getsvgdocument id=the-object-element:dom-media-getsvgdocument>getSVGDocument</a>();

  readonly attribute boolean <a href=forms.html#dom-cva-willvalidate id=the-object-element:dom-cva-willvalidate>willValidate</a>;
  readonly attribute <a id=the-object-element:validitystate href=forms.html#validitystate>ValidityState</a> <a href=forms.html#dom-cva-validity id=the-object-element:dom-cva-validity>validity</a>;
  readonly attribute DOMString <a href=forms.html#dom-cva-validationmessage id=the-object-element:dom-cva-validationmessage>validationMessage</a>;
  boolean <a href=forms.html#dom-cva-checkvalidity id=the-object-element:dom-cva-checkvalidity>checkValidity</a>();
  boolean <a href=forms.html#dom-cva-reportvalidity id=the-object-element:dom-cva-reportvalidity>reportValidity</a>();
  void <a href=forms.html#dom-cva-setcustomvalidity id=the-object-element:dom-cva-setcustomvalidity>setCustomValidity</a>(DOMString error);

  <a href=#dom-object-caller id=the-object-element:dom-object-caller>legacycaller</a> any (any... arguments);
};</pre>
    
    <p>Depending on the type of content instantiated by the
    <code id=the-object-element:the-object-element><a href=#the-object-element>object</a></code> element, the node also supports other
    interfaces.</p>
    
   </dl>

  <p><code id=the-object-element:the-object-element-2><a href=#the-object-element>object</a></code>要素は、リソースの型に応じて、画像として、<a id=the-object-element:nested-browsing-context-2 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>として、または<a id=the-object-element:plugin href=infrastructure.html#plugin>プラグイン</a>によって処理される外部リソースとしてのいずれかで扱われる、外部リソースを表すことができる。</p>

  <p><dfn id=attr-object-data><code>data</code></dfn>属性は存在する場合、リソースのアドレスを指定する。存在する場合、属性は、<a id=the-object-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>でなければならない。</p>

  <p class=warning>信頼しない他の<a href=browsers.html#origin-2 id=the-object-element:origin-2>生成元</a>からリソースを参照する著者は、下記に定義される<code id=the-object-element:attr-object-typemustmatch-2><a href=#attr-object-typemustmatch>typemustmatch</a></code>属性を使用するよう促す。その属性がなければ、著者がFlashの"allowScriptAccess"パラメータなどの機能を使用した場合であっても、任意のスクリプトを実行するためにプラグイン機構を使用することは、リモートホスト上の攻撃に対して特定の場合に可能である。</p> 

  <p><dfn id=attr-object-type><code>type</code></dfn>属性が存在する場合、リソースのタイプを指定する。存在する場合、属性は<a id=the-object-element:valid-mime-type href=infrastructure.html#valid-mime-type>妥当なMIMEタイプ</a>でなければならない。</p>

  <p><code id=the-object-element:attr-object-data-2><a href=#attr-object-data>data</a></code>属性または<code id=the-object-element:attr-object-type-3><a href=#attr-object-type>type</a></code>属性のいずれか一方が少なくとも存在しなければならない。</p>

  <p><code id=the-object-element:the-object-element-3><a href=#the-object-element>object</a></code>要素で<code id=the-object-element:names:-the-itemprop-attribute><a href=microdata.html#names:-the-itemprop-attribute>itemprop</a></code>が指定される場合、<code id=the-object-element:attr-object-data-3><a href=#attr-object-data>data</a></code>属性も指定されなければならない。</p>

  <p><dfn id=attr-object-typemustmatch><code>typemustmatch</code></dfn>属性は、<code id=the-object-element:attr-object-type-4><a href=#attr-object-type>type</a></code>属性の値と、前述のリソースの<a id=the-object-element:content-type-2 href=infrastructure.html#content-type>Content-Type</a>が一致する場合、その存在が<code id=the-object-element:attr-object-data-4><a href=#attr-object-data>data</a></code>属性で指定されたリソースにのみ使用されることを示す<a id=the-object-element:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>である。</p>

  <p><code id=the-object-element:attr-object-data-5><a href=#attr-object-data>data</a></code>属性と<code id=the-object-element:attr-object-type-5><a href=#attr-object-type>type</a></code>属性の両方が存在する場合を除き、<code id=the-object-element:attr-object-typemustmatch-3><a href=#attr-object-typemustmatch>typemustmatch</a></code>属性を指定してはならない。</p>

  <p><dfn id=attr-object-name><code>name</code></dfn>属性が存在する場合、<a id=the-object-element:valid-browsing-context-name href=browsers.html#valid-browsing-context-name>妥当なブラウジングコンテキスト名</a>でなければならない。該当する場合、与えられた値は、<a id=the-object-element:nested-browsing-context-3 href=browsers.html#nested-browsing-context>ネストされたブラウジングコンテキスト</a>に名前を付けるために使用される。</p>

  

  <p>次の条件のいずれかのときはいつでも発生する：</p>

  <ul><li>the element is created,

   

   </li><li>要素が<a id=the-object-element:html-parser href=syntax.html#html-parser>HTMLパーサー</a>または<a id=the-object-element:xml-parser href=xhtml.html#xml-parser>XMLパーサー</a>の<a id=the-object-element:stack-of-open-elements href=syntax.html#stack-of-open-elements>開放要素のスタック</a>からポップされる。

   </li><li>要素が<a id=the-object-element:html-parser-2 href=syntax.html#html-parser>HTMLパーサー</a>または<a id=the-object-element:xml-parser-2 href=xhtml.html#xml-parser>XMLパーサー</a>の<a id=the-object-element:stack-of-open-elements-2 href=syntax.html#stack-of-open-elements>開放要素のスタック</a>上ではなく、<a href=infrastructure.html#insert-an-element-into-a-document id=the-object-element:insert-an-element-into-a-document>文書に挿入される</a>または<a href=infrastructure.html#remove-an-element-from-a-document id=the-object-element:remove-an-element-from-a-document>文書から削除される</a>かのいずれかである。

   </li><li>the element's <a id=the-object-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> changes whether it is <a id=the-object-element:fully-active href=browsers.html#fully-active>fully active</a>,

   

   </li><li>one of the element's ancestor <code id=the-object-element:the-object-element-4><a href=#the-object-element>object</a></code> elements changes to or from showing its
   <a id=the-object-element:fallback-content href=dom.html#fallback-content>fallback content</a>,

   

   </li><li>the element's <code id=the-object-element:attr-object-classid><a href=obsolete.html#attr-object-classid>classid</a></code> attribute is set, changed, or
   removed,

   

   </li><li>the element's <code id=the-object-element:attr-object-classid-2><a href=obsolete.html#attr-object-classid>classid</a></code> attribute is not present, and
   its <code id=the-object-element:attr-object-data-6><a href=#attr-object-data>data</a></code> attribute is set, changed, or removed,

   

   </li><li>neither the element's <code id=the-object-element:attr-object-classid-3><a href=obsolete.html#attr-object-classid>classid</a></code> attribute nor its
   <code id=the-object-element:attr-object-data-7><a href=#attr-object-data>data</a></code> attribute are present, and its <code id=the-object-element:attr-object-type-6><a href=#attr-object-type>type</a></code> attribute is set, changed, or removed,

   

   </li><li>the element changes from <a id=the-object-element:being-rendered href=rendering.html#being-rendered>being rendered</a> to not being rendered, or vice versa,

  

  </li></ul> 

  <p>...the user agent must <a id=the-object-element:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to run the following steps to (re)determine
  what the <code id=the-object-element:the-object-element-5><a href=#the-object-element>object</a></code> element represents. This <a href=webappapis.html#concept-task id=the-object-element:concept-task>task</a>
  being <a href=webappapis.html#queue-a-task id=the-object-element:queue-a-task-2>queued</a> or actively running must <a id=the-object-element:delay-the-load-event href=syntax.html#delay-the-load-event>delay the load
  event</a> of the element's <a id=the-object-element:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.  </p>

  <ol><li>

    <p>If the user has indicated a preference that this <code id=the-object-element:the-object-element-6><a href=#the-object-element>object</a></code> element's <a id=the-object-element:fallback-content-2 href=dom.html#fallback-content>fallback
    content</a> be shown instead of the element's usual behaviour, then jump to the step below
    labeled <i>fallback</i>.</p>

    <p class=note>For example, a user could ask for the element's <a id=the-object-element:fallback-content-3 href=dom.html#fallback-content>fallback content</a> to
    be shown because that content uses a format that the user finds more accessible.</p>

   </li><li>

    <p>If the element has an ancestor <a href=#media-element id=the-object-element:media-element>media element</a>, or has an ancestor
    <code id=the-object-element:the-object-element-7><a href=#the-object-element>object</a></code> element that is <em>not</em> showing its <a id=the-object-element:fallback-content-4 href=dom.html#fallback-content>fallback content</a>, or
    if the element is not <a href=infrastructure.html#in-a-document id=the-object-element:in-a-document>in a <code>Document</code></a> that has a
    <a href=browsers.html#concept-document-bc id=the-object-element:concept-document-bc>browsing context</a>, or if the element's <a id=the-object-element:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
    document</a> is not <a id=the-object-element:fully-active-2 href=browsers.html#fully-active>fully active</a>, or if the element is still in the <a id=the-object-element:stack-of-open-elements-3 href=syntax.html#stack-of-open-elements>stack
    of open elements</a> of an <a id=the-object-element:html-parser-3 href=syntax.html#html-parser>HTML parser</a> or <a id=the-object-element:xml-parser-3 href=xhtml.html#xml-parser>XML parser</a>, or if the
    element is not <a id=the-object-element:being-rendered-2 href=rendering.html#being-rendered>being rendered</a>, then jump to the step below labeled
    <i>fallback</i>.</p>

   </li><li>

    

    <p>If the <code id=the-object-element:attr-object-classid-4><a href=obsolete.html#attr-object-classid>classid</a></code> attribute is present, and has a
    value that isn't the empty string, then: if the user agent can find a <a id=the-object-element:plugin-2 href=infrastructure.html#plugin>plugin</a>
    suitable according to the value of the <code id=the-object-element:attr-object-classid-5><a href=obsolete.html#attr-object-classid>classid</a></code>
    attribute, and either <a href=#sandboxPluginObject>plugins aren't being sandboxed</a> or that
    <a id=the-object-element:plugin-3 href=infrastructure.html#plugin>plugin</a> can be <a href=infrastructure.html#concept-plugin-secure id=the-object-element:concept-plugin-secure>secured</a>, then that
    <a id=the-object-element:plugin-4 href=infrastructure.html#plugin>plugin</a> <a href=#object-plugin>should be used</a>, and the value of the <code id=the-object-element:attr-object-data-8><a href=#attr-object-data>data</a></code> attribute, if any, should be passed to the
    <a id=the-object-element:plugin-5 href=infrastructure.html#plugin>plugin</a>. If no suitable <a id=the-object-element:plugin-6 href=infrastructure.html#plugin>plugin</a> can be found, or if the
    <a id=the-object-element:plugin-7 href=infrastructure.html#plugin>plugin</a> reports an error, jump to the step below labeled <i>fallback</i>.</p>

    

   </li><li><p>If the <code id=the-object-element:attr-object-data-9><a href=#attr-object-data>data</a></code> attribute is present and its value is
   not the empty string, then:</p>

    <ol><li><p>If the <code id=the-object-element:attr-object-type-7><a href=#attr-object-type>type</a></code> attribute is present and its value is
     not a type that the user agent supports, and is not a type that the user agent can find a
     <a id=the-object-element:plugin-8 href=infrastructure.html#plugin>plugin</a> for, then the user agent may jump to the step below labeled <i>fallback</i>
     without fetching the content to examine its real type.</li><li><p><a href=infrastructure.html#parse-a-url id=the-object-element:parse-a-url>Parse</a> the <a id=the-object-element:url href=infrastructure.html#url>URL</a> specified by the <code id=the-object-element:attr-object-data-10><a href=#attr-object-data>data</a></code> attribute, relative to the element's <a id=the-object-element:node-document-4 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
     document</a>.</li><li><p>If that failed, <a id=the-object-element:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-object-element:event-error><a href=indices.html#event-error>error</a></code> at the element, then jump to the step below labeled
     <i>fallback</i>.</li><li><p>Let <var>request</var> be a new <a href=https://fetch.spec.whatwg.org/#concept-request id=the-object-element:concept-request data-x-internal=concept-request>request</a> whose
     <a href=https://fetch.spec.whatwg.org/#concept-request-url id=the-object-element:concept-request-url data-x-internal=concept-request-url>url</a> is the <a id=the-object-element:resulting-url-record href=infrastructure.html#resulting-url-record>resulting URL record</a>,
     <a href=https://fetch.spec.whatwg.org/#concept-request-client id=the-object-element:concept-request-client data-x-internal=concept-request-client>client</a> is the element's <a id=the-object-element:node-document-5 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
     document</a>'s <code id=the-object-element:window><a href=browsers.html#window>Window</a></code> object's <a id=the-object-element:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>,
     <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=the-object-element:concept-request-destination data-x-internal=concept-request-destination>destination</a> is "<code>unknown</code>", <a id=the-object-element:omit-origin-header-flag href=https://fetch.spec.whatwg.org/#omit-origin-header-flag data-x-internal=omit-origin-header-flag>omit-<code>Origin</code>-header flag</a> is set if the
     element doesn't have a <a id=the-object-element:browsing-context-scope-origin href=browsers.html#browsing-context-scope-origin>browsing context scope origin</a>, <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=the-object-element:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> is "<code>include</code>", and whose <a id=the-object-element:use-url-credentials-flag href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials flag</a> is set.</li><li>

      <p><a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-object-element:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>.</p>

      
      <p>Fetching the resource must <a id=the-object-element:delay-the-load-event-2 href=syntax.html#delay-the-load-event>delay the load event</a> of the element's <a id=the-object-element:node-document-6 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
      document</a> until the <a href=webappapis.html#concept-task id=the-object-element:concept-task-2>task</a> that is <a href=webappapis.html#queue-a-task id=the-object-element:queue-a-task-3>queued</a> by the <a id=the-object-element:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> once the resource has been
      fetched (defined next) has been run.</p>

      <p>For the purposes of the <a id=the-object-element:application-cache href=browsers.html#application-cache>application cache</a> networking model, this fetch
      operation is not for a <a id=the-object-element:child-browsing-context href=browsers.html#child-browsing-context>child browsing context</a> (though it might end up being used
      for one after all, as defined below).</p>

     </li><li><p>If the resource is not yet available (e.g. because the resource was not available in the
     cache, so that loading the resource required making a request over the network), then jump to
     the step below labeled <i>fallback</i>. The <a href=webappapis.html#concept-task id=the-object-element:concept-task-3>task</a> that is
     <a href=webappapis.html#queue-a-task id=the-object-element:queue-a-task-4>queued</a> by the <a id=the-object-element:networking-task-source-2 href=webappapis.html#networking-task-source>networking task source</a> once the
     resource is available must restart this algorithm from this step. Resources can load
     incrementally; user agents may opt to consider a resource "available" whenever enough data has
     been obtained to begin processing the resource.</li><li><p>If the load failed (e.g. there was an HTTP 404 error, there was a DNS error), <a id=the-object-element:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire
     a simple event</a> named <code id=the-object-element:event-error-2><a href=indices.html#event-error>error</a></code> at the element, then jump to
     the step below labeled <i>fallback</i>.</li><li id=object-type-detection>

      <p>Determine the <var>resource type</var>, as follows:</p>



      <ol><li>

        <p>Let the <var>resource type</var> be unknown.</p>

       </li><li>

        <p>If the <code id=the-object-element:the-object-element-8><a href=#the-object-element>object</a></code> element has a <code id=the-object-element:attr-object-type-8><a href=#attr-object-type>type</a></code>
        attribute and a <code id=the-object-element:attr-object-typemustmatch-4><a href=#attr-object-typemustmatch>typemustmatch</a></code> attribute, and
        the resource has <a href=infrastructure.html#content-type id=the-object-element:content-type-3>associated Content-Type metadata</a>, and the
        type specified in <a href=infrastructure.html#content-type id=the-object-element:content-type-4>the resource's Content-Type metadata</a> is
        an <a id=the-object-element:ascii-case-insensitive href=infrastructure.html#ascii-case-insensitive>ASCII case-insensitive</a> match for the value of the element's <code id=the-object-element:attr-object-type-9><a href=#attr-object-type>type</a></code> attribute, then let <var>resource type</var>
        be that type and jump to the step below labeled <i>handler</i>.</p>

        

       </li><li>

        <p>If the <code id=the-object-element:the-object-element-9><a href=#the-object-element>object</a></code> element has a <code id=the-object-element:attr-object-typemustmatch-5><a href=#attr-object-typemustmatch>typemustmatch</a></code> attribute, jump to the step below
        labeled <i>handler</i>.</p>

       </li><li>

        

        <p>If the user agent is configured to strictly obey Content-Type headers for this resource,
        and the resource has <a href=infrastructure.html#content-type id=the-object-element:content-type-5>associated Content-Type metadata</a>,
        then let the <var>resource type</var> be the type specified in <a href=infrastructure.html#content-type id=the-object-element:content-type-6>the resource's Content-Type metadata</a>, and jump to the step below
        labeled <i>handler</i>.</p>

        <p class=warning>This can introduce a vulnerability, wherein a site is trying to embed a
        resource that uses a particular plugin, but the remote site overrides that and instead
        furnishes the user agent with a resource that triggers a different plugin with different
        security characteristics.  </p>

       </li><li>

        <p>If there is a <code id=the-object-element:attr-object-type-10><a href=#attr-object-type>type</a></code> attribute present on the
        <code id=the-object-element:the-object-element-10><a href=#the-object-element>object</a></code> element, and that attribute's value is not a type that the user agent
        supports, but it <em>is</em> a type that a <a id=the-object-element:plugin-9 href=infrastructure.html#plugin>plugin</a> supports, then let the <var>resource type</var> be the type specified in that <code id=the-object-element:attr-object-type-11><a href=#attr-object-type>type</a></code> attribute, and jump to the step below labeled
        <i>handler</i>.</p>

       </li><li>

        <p>Run the appropriate set of steps from the following
        list:</p>

        <dl class=switch><dt>If the resource has <a href=infrastructure.html#content-type id=the-object-element:content-type-7>associated Content-Type
         metadata</a><dd>

          <ol><li>

            <p>Let <var>binary</var> be false.</p>

           </li><li>

            <p>If the type specified in <a href=infrastructure.html#content-type id=the-object-element:content-type-8>the resource's Content-Type
            metadata</a> is "<code id=the-object-element:text/plain><a data-x-internal=text/plain href=https://tools.ietf.org/html/rfc2046#section-4.1.3>text/plain</a></code>", and the result of applying the <a href=https://mimesniff.spec.whatwg.org/#rules-for-text-or-binary id=the-object-element:content-type-sniffing:-text-or-binary data-x-internal=content-type-sniffing:-text-or-binary>rules for distinguishing if a resource is
            text or binary</a> to the resource is that the resource is not
            <code id=the-object-element:text/plain-2><a data-x-internal=text/plain href=https://tools.ietf.org/html/rfc2046#section-4.1.3>text/plain</a></code>, then set <var>binary</var> to true.</p>

           </li><li>

            <p>If the type specified in <a href=infrastructure.html#content-type id=the-object-element:content-type-9>the resource's Content-Type
            metadata</a> is "<code id=the-object-element:application/octet-stream><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>", then set <var>binary</var> to true.</p>

           </li><li>

            <p>If <var>binary</var> is false, then let the <var>resource
            type</var> be the type specified in <a href=infrastructure.html#content-type id=the-object-element:content-type-10>the resource's
            Content-Type metadata</a>, and jump to the step below labeled <i>handler</i>.</p>

           </li><li>

            <p>If there is a <code id=the-object-element:attr-object-type-12><a href=#attr-object-type>type</a></code> attribute present on the
            <code id=the-object-element:the-object-element-11><a href=#the-object-element>object</a></code> element, and its value is not <code id=the-object-element:application/octet-stream-2><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>,
            then run the following steps:</p>

            <ol><li>

              <p>If the attribute's value is a type that a <a id=the-object-element:plugin-10 href=infrastructure.html#plugin>plugin</a> supports, or the
     attribute's value is a type that starts with "<code>image/</code>" that is
              not also an <a id=the-object-element:xml-mime-type href=infrastructure.html#xml-mime-type>XML MIME type</a>, then let the <var>resource type</var> be the
              type specified in that <code id=the-object-element:attr-object-type-13><a href=#attr-object-type>type</a></code> attribute.</p>

             </li><li>

              <p>Jump to the step below labeled <i>handler</i>.</p>

             </li></ol>

           </li></ol>

         <dt>Otherwise, if the resource does not have <a href=infrastructure.html#content-type id=the-object-element:content-type-11>associated
         Content-Type metadata</a><dd>

          <ol><li>

            <p>If there is a <code id=the-object-element:attr-object-type-14><a href=#attr-object-type>type</a></code> attribute present on the
            <code id=the-object-element:the-object-element-12><a href=#the-object-element>object</a></code> element, then let the <var>tentative type</var> be the type
            specified in that <code id=the-object-element:attr-object-type-15><a href=#attr-object-type>type</a></code> attribute.</p>

            <p>Otherwise, let <var>tentative type</var> be the <a href=https://mimesniff.spec.whatwg.org/#computed-mime-type id=the-object-element:content-type-sniffing-2 data-x-internal=content-type-sniffing-2>computed type of the resource</a>.</p>

           </li><li>

            <p>If <var>tentative type</var> is <em>not</em>
            <code id=the-object-element:application/octet-stream-3><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>, then let <var>resource type</var> be
            <var>tentative type</var> and jump to the step below labeled
            <i>handler</i>.</p>

           </li></ol>

         </dl>

       </li><li>

        

        <p>If applying the <a id=the-object-element:url-parser href=infrastructure.html#url-parser>URL parser</a> algorithm to the <a id=the-object-element:url-2 href=infrastructure.html#url>URL</a> of the
        specified resource (after any redirects) results in a <a id=the-object-element:url-record href=https://url.spec.whatwg.org/#concept-url data-x-internal=url-record>URL record</a> whose <a href=https://url.spec.whatwg.org/#concept-url-path id=the-object-element:concept-url-path data-x-internal=concept-url-path>path</a> component matches a pattern that a <a id=the-object-element:plugin-11 href=infrastructure.html#plugin>plugin</a>
        supports, then let <var>resource type</var> be the type that that plugin can
        handle.</p>

        <p class=example>For example, a plugin might say that it can handle resources with <a href=https://url.spec.whatwg.org/#concept-url-path id=the-object-element:concept-url-path-2 data-x-internal=concept-url-path>path</a> components that end with the four character string
        "<code>.swf</code>".</p>

        
        

       </li></ol>

      <p class=note>It is possible for this step to finish, or for one of the substeps above to
      jump straight to the next step, with <var>resource type</var> still being unknown. In
      both cases, the next step will trigger fallback.</p>

     </li><li><p><i>Handler</i>: Handle the content as given by the first of the following cases that
     matches:</p>

      <dl class=switch><dt>If the <var>resource type</var> is not a type that the user agent supports, but
       it <em>is</em> a type that a <a id=the-object-element:plugin-12 href=infrastructure.html#plugin>plugin</a> supports<dd>

        <p>If <a href=#sandboxPluginObject>plugins are being sandboxed</a> and the plugin that
        supports <var>resource type</var> cannot be <a href=infrastructure.html#concept-plugin-secure id=the-object-element:concept-plugin-secure-2>secured</a>, jump to the step below labeled <i>fallback</i>.</p>

        <p>Otherwise, the user agent should <a href=#object-plugin>use the plugin that supports
        <var>resource type</var></a> and pass the content of the resource to that
        <a id=the-object-element:plugin-13 href=infrastructure.html#plugin>plugin</a>. If the <a id=the-object-element:plugin-14 href=infrastructure.html#plugin>plugin</a> reports an error, then jump to the step
        below labeled <i>fallback</i>.</p>

       <dt>If the <var>resource type</var> is an <a id=the-object-element:xml-mime-type-2 href=infrastructure.html#xml-mime-type>XML MIME type</a>, or  if the <var>resource type</var>
       does not start with "<code>image/</code>"<dd>

        <p>The <code id=the-object-element:the-object-element-13><a href=#the-object-element>object</a></code> element must be associated with a newly created <a id=the-object-element:nested-browsing-context-4 href=browsers.html#nested-browsing-context>nested
        browsing context</a>, if it does not already have one.</p>

        <p>If the <a id=the-object-element:url-3 href=infrastructure.html#url>URL</a> of the given resource is not <code id=the-object-element:about:blank><a href=infrastructure.html#about:blank>about:blank</a></code>, the
        element's <a id=the-object-element:nested-browsing-context-5 href=browsers.html#nested-browsing-context>nested browsing context</a> must then be <a href=browsers.html#navigate id=the-object-element:navigate>navigated</a> to that resource, with
        <a id=the-object-element:replacement-enabled href=browsers.html#replacement-enabled>replacement enabled</a>, and with the <code id=the-object-element:the-object-element-14><a href=#the-object-element>object</a></code> element's <a id=the-object-element:node-document-7 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
        document</a>'s <a href=browsers.html#concept-document-bc id=the-object-element:concept-document-bc-2>browsing context</a> as the
        <a id=the-object-element:source-browsing-context href=browsers.html#source-browsing-context>source browsing context</a>. (The <code id=the-object-element:attr-object-data-11><a href=#attr-object-data>data</a></code>
        attribute of the <code id=the-object-element:the-object-element-15><a href=#the-object-element>object</a></code> element doesn't get updated if the browsing context
        gets further navigated to other locations.)</p>

        <p>If the <a id=the-object-element:url-4 href=infrastructure.html#url>URL</a> of the given resource <em>is</em> <code id=the-object-element:about:blank-2><a href=infrastructure.html#about:blank>about:blank</a></code>, then,
        instead, the user agent must <a id=the-object-element:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to <a id=the-object-element:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple event</a>
        named <code id=the-object-element:event-load><a href=indices.html#event-load>load</a></code> at the <code id=the-object-element:the-object-element-16><a href=#the-object-element>object</a></code> element. <span class=note>No <code id=the-object-element:event-load-2><a href=indices.html#event-load>load</a></code> event is fired at the
        <code id=the-object-element:about:blank-3><a href=infrastructure.html#about:blank>about:blank</a></code> document itself.</span></p>

        <p>The <code id=the-object-element:the-object-element-17><a href=#the-object-element>object</a></code> element <a id=the-object-element:represents href=dom.html#represents>represents</a> the <a id=the-object-element:nested-browsing-context-6 href=browsers.html#nested-browsing-context>nested browsing
        context</a>.</p>

        <p>If the <code id=the-object-element:attr-object-name-2><a href=#attr-object-name>name</a></code> attribute is present, the
        <a id=the-object-element:browsing-context-name href=browsers.html#browsing-context-name>browsing context name</a> must be set to the value of this attribute; otherwise,
        the <a id=the-object-element:browsing-context-name-2 href=browsers.html#browsing-context-name>browsing context name</a> must be set to the empty string.</p>

        <p class=note>In certain situations, e.g., if the resource was fetched from an
        <a id=the-object-element:application-cache-2 href=browsers.html#application-cache>application cache</a> but it is an HTML file with a <code id=the-object-element:attr-html-manifest><a href=semantics.html#attr-html-manifest>manifest</a></code> attribute that points to a different <a href=browsers.html#concept-appcache-manifest id=the-object-element:concept-appcache-manifest>application cache manifest</a>, the <a href=browsers.html#navigate id=the-object-element:navigate-2>navigation</a> of the <a id=the-object-element:browsing-context href=browsers.html#browsing-context>browsing context</a> will be restarted
        so as to load the resource afresh from the network or a different <a id=the-object-element:application-cache-3 href=browsers.html#application-cache>application
        cache</a>. Even if the resource is then found to have a different type, it is still used
        as part of a <a id=the-object-element:nested-browsing-context-7 href=browsers.html#nested-browsing-context>nested browsing context</a>: only the <a id=the-object-element:navigate-3 href=browsers.html#navigate>navigate</a> algorithm
        is restarted, not this <code id=the-object-element:the-object-element-18><a href=#the-object-element>object</a></code> algorithm.</p>

        

       <dt>If the <var>resource type</var> starts with "<code>image/</code>", and support
       for images has not been disabled<dd>

        <p>Apply the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically id=the-object-element:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image>image sniffing</a> rules to
        determine the type of the image.</p>

        <p>The <code id=the-object-element:the-object-element-19><a href=#the-object-element>object</a></code> element <a id=the-object-element:represents-2 href=dom.html#represents>represents</a> the specified image. The image is
        not a <a id=the-object-element:nested-browsing-context-8 href=browsers.html#nested-browsing-context>nested browsing context</a>.</p>

        <p>If the image cannot be rendered, e.g. because it is malformed or in an unsupported
        format, jump to the step below labeled <i>fallback</i>.</p>

       <dt>そうでなければ<dd>

        <p>The given <var>resource type</var> is not supported. Jump to the step below
        labeled <i>fallback</i>.</p>

        <p class=note>If the previous step ended with the <var>resource type</var> being
        unknown, this is the case that is triggered.</p>

       </dl>

     </li><li><p>The element's contents are not part of what the <code id=the-object-element:the-object-element-20><a href=#the-object-element>object</a></code> element
     represents.</p>

     </li><li>

      <p>Abort these steps. Once the resource is completely loaded, <a id=the-object-element:queue-a-task-6 href=webappapis.html#queue-a-task>queue a task</a> to
      <a id=the-object-element:fire-a-simple-event-4 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-object-element:event-load-3><a href=indices.html#event-load>load</a></code> at the
      element.</p>

     </li></ol>

   </li><li><p>If the <code id=the-object-element:attr-object-data-12><a href=#attr-object-data>data</a></code> attribute is absent but the <code id=the-object-element:attr-object-type-16><a href=#attr-object-type>type</a></code> attribute is present, and the user agent can find a
   <a id=the-object-element:plugin-15 href=infrastructure.html#plugin>plugin</a> suitable according to the value of the <code id=the-object-element:attr-object-type-17><a href=#attr-object-type>type</a></code> attribute, and either <a href=#sandboxPluginObject>plugins aren't being sandboxed</a> or the <a id=the-object-element:plugin-16 href=infrastructure.html#plugin>plugin</a> can be
   <a href=infrastructure.html#concept-plugin-secure id=the-object-element:concept-plugin-secure-3>secured</a>, then that <a id=the-object-element:plugin-17 href=infrastructure.html#plugin>plugin</a> <a href=#object-plugin>should be used</a>. If these conditions cannot be met, or if the
   <a id=the-object-element:plugin-18 href=infrastructure.html#plugin>plugin</a> reports an error, jump to the step below labeled <i>fallback</i>. Otherwise
   abort these steps; once the plugin is completely loaded, <a id=the-object-element:queue-a-task-7 href=webappapis.html#queue-a-task>queue a task</a> to <a id=the-object-element:fire-a-simple-event-5 href=webappapis.html#fire-a-simple-event>fire
   a simple event</a> named <code id=the-object-element:event-load-4><a href=indices.html#event-load>load</a></code> at the element.</li><li><p><i>Fallback</i>: The <code id=the-object-element:the-object-element-21><a href=#the-object-element>object</a></code> element <a id=the-object-element:represents-3 href=dom.html#represents>represents</a> the element's
   children, ignoring any leading <code id=the-object-element:the-param-element-2><a href=#the-param-element>param</a></code> element children. This is the element's
   <a id=the-object-element:fallback-content-5 href=dom.html#fallback-content>fallback content</a>. If the element has an instantiated <a id=the-object-element:plugin-19 href=infrastructure.html#plugin>plugin</a>, then
   unload it.</li></ol>

  <p id=object-plugin>When the algorithm above instantiates a <a id=the-object-element:plugin-20 href=infrastructure.html#plugin>plugin</a>, the user agent
  should pass to the <a id=the-object-element:plugin-21 href=infrastructure.html#plugin>plugin</a> used the names and values of all the attributes on the
  element, in the order they were added to the element, with the attributes added by the parser
  being ordered in source order, followed by a parameter named "PARAM" whose value is null, followed
  by all the names and values of <a href=#concept-param-parameter id=the-object-element:concept-param-parameter>parameters</a> given by
  <code id=the-object-element:the-param-element-3><a href=#the-param-element>param</a></code> elements that are children of the <code id=the-object-element:the-object-element-22><a href=#the-object-element>object</a></code> element, in <a id=the-object-element:tree-order href=infrastructure.html#tree-order>tree
  order</a>. If the <a id=the-object-element:plugin-22 href=infrastructure.html#plugin>plugin</a> supports a scriptable interface, the
  <code id=the-object-element:htmlobjectelement><a href=#htmlobjectelement>HTMLObjectElement</a></code> object representing the element should expose that interface. The
  <code id=the-object-element:the-object-element-23><a href=#the-object-element>object</a></code> element <a id=the-object-element:represents-4 href=dom.html#represents>represents</a> the <a id=the-object-element:plugin-23 href=infrastructure.html#plugin>plugin</a>. The
  <a id=the-object-element:plugin-24 href=infrastructure.html#plugin>plugin</a> is not a nested <a id=the-object-element:browsing-context-2 href=browsers.html#browsing-context>browsing context</a>.</p>

  <p id=sandboxPluginObject>Plugins are considered sandboxed for the purpose of an
  <code id=the-object-element:the-object-element-24><a href=#the-object-element>object</a></code> element if the <a id=the-object-element:sandboxed-plugins-browsing-context-flag href=browsers.html#sandboxed-plugins-browsing-context-flag>sandboxed plugins browsing context flag</a> is set on
  the <code id=the-object-element:the-object-element-25><a href=#the-object-element>object</a></code> element's <a id=the-object-element:node-document-8 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <a id=the-object-element:active-sandboxing-flag-set href=browsers.html#active-sandboxing-flag-set>active sandboxing flag
  set</a>.</p>

  <p>Due to the algorithm above, the contents of <code id=the-object-element:the-object-element-26><a href=#the-object-element>object</a></code> elements act as <a id=the-object-element:fallback-content-6 href=dom.html#fallback-content>fallback
  content</a>, used only when referenced resources can't be shown (e.g. because it returned a 404
  error). This allows multiple <code id=the-object-element:the-object-element-27><a href=#the-object-element>object</a></code> elements to be nested inside each other,
  targeting multiple user agents with different capabilities, with the user agent picking the first
  one it supports.</p>

  <p>When an <code id=the-object-element:the-object-element-28><a href=#the-object-element>object</a></code> element represents a <a id=the-object-element:nested-browsing-context-9 href=browsers.html#nested-browsing-context>nested browsing context</a>: if the
  <code id=the-object-element:the-object-element-29><a href=#the-object-element>object</a></code> element's <a id=the-object-element:nested-browsing-context-10 href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=the-object-element:active-document href=browsers.html#active-document>active document</a>
  is not <a id=the-object-element:ready-for-post-load-tasks href=syntax.html#ready-for-post-load-tasks>ready for post-load tasks</a>, and when anything is <a href=syntax.html#delay-the-load-event id=the-object-element:delay-the-load-event-3>delaying the load event</a> of the <code id=the-object-element:the-object-element-30><a href=#the-object-element>object</a></code> element's <a id=the-object-element:browsing-context-3 href=browsers.html#browsing-context>browsing
  context</a>'s <a id=the-object-element:active-document-2 href=browsers.html#active-document>active document</a>, and when the <code id=the-object-element:the-object-element-31><a href=#the-object-element>object</a></code> element's
  <a id=the-object-element:browsing-context-4 href=browsers.html#browsing-context>browsing context</a> is in the <a id=the-object-element:delaying-load-events-mode href=browsers.html#delaying-load-events-mode>delaying <code>load</code>
  events mode</a>, the <code id=the-object-element:the-object-element-32><a href=#the-object-element>object</a></code> must <a id=the-object-element:delay-the-load-event-4 href=syntax.html#delay-the-load-event>delay the load event</a> of its
  document.</p>

  <p>The <a id=the-object-element:task-source href=webappapis.html#task-source>task source</a> for the <a href=webappapis.html#concept-task id=the-object-element:concept-task-4>tasks</a> mentioned in this
  section is the <a id=the-object-element:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>.</p>

  <p>Whenever the <code id=the-object-element:attr-object-name-3><a href=#attr-object-name>name</a></code> attribute is set, if the
  <code id=the-object-element:the-object-element-33><a href=#the-object-element>object</a></code> element has a nested <a id=the-object-element:browsing-context-5 href=browsers.html#browsing-context>browsing context</a>, its <a href=browsers.html#browsing-context-name id=the-object-element:browsing-context-name-3>name</a> must be changed to the new value. If the attribute is removed, if the
  <code id=the-object-element:the-object-element-34><a href=#the-object-element>object</a></code> element has a <a id=the-object-element:browsing-context-6 href=browsers.html#browsing-context>browsing context</a>, the <a id=the-object-element:browsing-context-name-4 href=browsers.html#browsing-context-name>browsing context
  name</a> must be set to the empty string.</p>

  

  <p><code id=the-object-element:the-object-element-35><a href=#the-object-element>object</a></code>要素が画像を表すと同時に存在する場合、<code id=the-object-element:attr-hyperlink-usemap-3><a href=#attr-hyperlink-usemap>usemap</a></code>属性は、<a href=#image-map id=the-object-element:image-map-2>イメージマップ</a>に関連付けられるオブジェクトを持つことを示すことができる。The attribute must be ignored if the <code id=the-object-element:the-object-element-36><a href=#the-object-element>object</a></code> element doesn't represent an image.</p>

  <p><code id=the-object-element:attr-fae-form-2><a href=forms.html#attr-fae-form>form</a></code>属性は、明示的にその<a id=the-object-element:form-owner href=forms.html#form-owner>フォームの所有者</a>と<code id=the-object-element:the-object-element-37><a href=#the-object-element>object</a></code>要素を関連付けるために使用される。</p>

  

  <p><strong>Constraint validation</strong>: <code id=the-object-element:the-object-element-38><a href=#the-object-element>object</a></code> elements are always <a id=the-object-element:barred-from-constraint-validation href=forms.html#barred-from-constraint-validation>barred
  from constraint validation</a>.</p>

  

  <p><code id=the-object-element:the-object-element-39><a href=#the-object-element>object</a></code>要素は<a href=#dimension-attributes id=the-object-element:dimension-attributes>次元属性</a>をサポートする。</p>

  

  <p>IDL属性<dfn id=dom-object-data><code>data</code></dfn>、<dfn id=dom-object-type><code>type</code></dfn>および<dfn id=dom-object-name><code>name</code></dfn>のそれぞれは、同じ名前の各コンテンツ属性を<a id=the-object-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。<dfn id=dom-object-typemustmatch><code>typeMustMatch</code></dfn> IDL属性は、<code id=the-object-element:attr-object-typemustmatch-6><a href=#attr-object-typemustmatch>typemustmatch</a></code>コンテンツ属性を<a id=the-object-element:reflect-2 href=infrastructure.html#reflect>反映</a>しなければならない。<dfn id=dom-object-usemap><code>useMap</code></dfn> IDL属性は、<code id=the-object-element:attr-hyperlink-usemap-4><a href=#attr-hyperlink-usemap>usemap</a></code>コンテンツ属性を<a id=the-object-element:reflect-3 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p>The <dfn id=dom-object-contentdocument><code>contentDocument</code></dfn> IDL attribute
  must return the <code id=the-object-element:document-3><a href=dom.html#document>Document</a></code> object of the <a id=the-object-element:active-document-3 href=browsers.html#active-document>active document</a> of the
  <code id=the-object-element:the-object-element-40><a href=#the-object-element>object</a></code> element's <a id=the-object-element:nested-browsing-context-11 href=browsers.html#nested-browsing-context>nested browsing context</a>, if any and if its
  <a id=the-object-element:effective-script-origin href=browsers.html#effective-script-origin>effective script origin</a> is the <a id=the-object-element:same-origin href=browsers.html#same-origin>same origin</a> as the <a id=the-object-element:effective-script-origin-2 href=browsers.html#effective-script-origin>effective script
  origin</a> specified by the <a id=the-object-element:incumbent-settings-object href=webappapis.html#incumbent-settings-object>incumbent settings object</a>, or null otherwise.</p>

  <p>The <dfn id=dom-object-contentwindow><code>contentWindow</code></dfn> IDL attribute must
  return the <code id=the-object-element:windowproxy-2><a href=browsers.html#windowproxy>WindowProxy</a></code> object of the <code id=the-object-element:the-object-element-41><a href=#the-object-element>object</a></code> element's <a id=the-object-element:nested-browsing-context-12 href=browsers.html#nested-browsing-context>nested
  browsing context</a>, if it has one; otherwise, it must return null.</p>

  <p>The <code id=the-object-element:dom-cva-willvalidate-2><a href=forms.html#dom-cva-willvalidate>willValidate</a></code>, <code id=the-object-element:dom-cva-validity-2><a href=forms.html#dom-cva-validity>validity</a></code>, and <code id=the-object-element:dom-cva-validationmessage-2><a href=forms.html#dom-cva-validationmessage>validationMessage</a></code> attributes, and the <code id=the-object-element:dom-cva-checkvalidity-2><a href=forms.html#dom-cva-checkvalidity>checkValidity()</a></code>, <code id=the-object-element:dom-cva-reportvalidity-2><a href=forms.html#dom-cva-reportvalidity>reportValidity()</a></code>, and <code id=the-object-element:dom-cva-setcustomvalidity-2><a href=forms.html#dom-cva-setcustomvalidity>setCustomValidity()</a></code> methods, are part of the
  <a id=the-object-element:the-constraint-validation-api href=forms.html#the-constraint-validation-api>constraint validation API</a>. The <code id=the-object-element:dom-fae-form-2><a href=forms.html#dom-fae-form>form</a></code> IDL attribute
  is part of the element's forms API.</p>

  <p>All <code id=the-object-element:the-object-element-42><a href=#the-object-element>object</a></code> elements have a <dfn id=dom-object-caller>legacy caller
  operation</dfn>. If the <code id=the-object-element:the-object-element-43><a href=#the-object-element>object</a></code> element has an instantiated <a id=the-object-element:plugin-25 href=infrastructure.html#plugin>plugin</a> that
  supports a scriptable interface that defines a legacy caller operation, then that must be the
  behaviour of the object's legacy caller operation. Otherwise, the object's legacy caller operation
  must be to throw a <code id=the-object-element:notsupportederror><a href=infrastructure.html#notsupportederror>NotSupportedError</a></code> exception.</p>

  

  <div class=example>

   <p>次の例においてJavaアプレットは、<code id=the-object-element:the-object-element-44><a href=#the-object-element>object</a></code>要素を使用してページに埋め込まれている。（一般的に言って、アプリケーションが、サードパーティ製のプラグインを必要とすることなくすべてのウェブブラウザ上で動作するので、機能を提供するためにネイティヴのJavaScriptとHTMLを代わりに使用することで、このようなアプレットの使用を避けることがよりよい。特に組み込み機器は、多くのデバイスでJavaのようなサードパーティのテクノロジーをサポートしない。）</p>

   <pre>&lt;figure&gt;
 &lt;object type="application/x-java-applet"&gt;
  &lt;param name="code" value="MyJavaClass"&gt;
  &lt;p&gt;You do not have Java available, or it is disabled.&lt;/p&gt;
 &lt;/object&gt;
 &lt;figcaption&gt;My Java Clock&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

  </div>

  <div class=example>

   <p>この例において、HTMLページは<code id=the-object-element:the-object-element-45><a href=#the-object-element>object</a></code>要素を使用して埋め込まれている。</p>

   <pre>&lt;figure&gt;
 &lt;object data="clock.html"&gt;&lt;/object&gt;
 &lt;figcaption&gt;My HTML Clock&lt;/figcaption&gt;
&lt;/figure&gt;</pre>

  </div>

  <div class=example>

   <p>次の例は、プラグインが（この場合においてFlashプラグインは、ビデオファイルを表示するために）HTMLで使用できる様子を示す。フォールバックは、Flashが有効でないユーザーに提供される。この場合、<code id=the-object-element:the-video-element><a href=#the-video-element>video</a></code>要素の使用は、<code id=the-object-element:the-video-element-2><a href=#the-video-element>video</a></code>をサポートするユーザーエージェントを使用するものに対して動画を表示し、最終的にFlashも<code id=the-object-element:the-video-element-3><a href=#the-video-element>video</a></code>をサポートしないブラウザのどちらも持たない人に対するビデオへのリンクを提供する。</p>

   <pre>&lt;p&gt;Look at my video:
 &lt;object type="application/x-shockwave-flash"&gt;
  &lt;param name=movie value="http://video.example.com/library/watch.swf"&gt;
  &lt;param name=allowfullscreen value=true&gt;
  &lt;param name=flashvars value="http://video.example.com/vids/315981"&gt;
  &lt;video controls src="http://video.example.com/vids/315981"&gt;
   &lt;a href="http://video.example.com/vids/315981"&gt;View video&lt;/a&gt;.
  &lt;/video&gt;
 &lt;/object&gt;
&lt;/p&gt;</pre>

  </div>



  <h4 id=the-param-element>4.8.8 <dfn><code>param</code></dfn>要素</h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-param-element:concept-element-categories>カテゴリー</a>：<dd>なし。<dt><a href=dom.html#concept-element-contexts id=the-param-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd>任意の<a id=the-param-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>の前の、<code id=the-param-element:the-object-element><a href=#the-object-element>object</a></code>要素の子として。<dt><a href=dom.html#concept-element-content-model id=the-param-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-param-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-param-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-param-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-param-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-param-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-param-element:attr-param-name><a href=#attr-param-name>name</a></code> — パラメータ名<dd><code id=the-param-element:attr-param-value><a href=#attr-param-value>value</a></code> — パラメータ値<dt><a href=dom.html#concept-element-dom id=the-param-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlparamelement>HTMLParamElement</dfn> : <a id=the-param-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-param-name id=the-param-element:dom-param-name>name</a>;
  attribute DOMString <a href=#dom-param-value id=the-param-element:dom-param-value>value</a>;
};</pre>
   </dl>

  <p><code id=the-param-element:the-param-element><a href=#the-param-element>param</a></code>要素は、<code id=the-param-element:the-object-element-2><a href=#the-object-element>object</a></code>要素によって呼び出されるプラグインのパラメータを定義する。この要素は、自分自身で何かを<a href=dom.html#represents id=the-param-element:represents>表す</a>ものではない。</p>

  <p><dfn id=attr-param-name><code>name</code></dfn>属性は、パラメータの名前を与える。</p>

  <p><dfn id=attr-param-value><code>value</code></dfn>属性は、パラメータの値を与える。</p>

  <p>両方の属性が存在しなければならない。これらは、任意の値を持ってもよい。</p>

  

  <p>If both attributes are present, and if the parent element of the <code id=the-param-element:the-param-element-2><a href=#the-param-element>param</a></code> is an
  <code id=the-param-element:the-object-element-3><a href=#the-object-element>object</a></code> element, then the element defines a <dfn id=concept-param-parameter>parameter</dfn> with the given name-value pair.</p>

  <p>If either the name or value of a <a href=#concept-param-parameter id=the-param-element:concept-param-parameter>parameter</a> defined
  by a <code id=the-param-element:the-param-element-3><a href=#the-param-element>param</a></code> element that is the child of an <code id=the-param-element:the-object-element-4><a href=#the-object-element>object</a></code> element that
  <a id=the-param-element:represents-2 href=dom.html#represents>represents</a> an instantiated <a id=the-param-element:plugin href=infrastructure.html#plugin>plugin</a> changes, and if that
  <a id=the-param-element:plugin-2 href=infrastructure.html#plugin>plugin</a> is communicating with the user agent using an API that features the ability to
  update the <a id=the-param-element:plugin-3 href=infrastructure.html#plugin>plugin</a> when the name or value of a <a href=#concept-param-parameter id=the-param-element:concept-param-parameter-2>parameter</a> so changes, then the user agent must
  appropriately exercise that ability to notify the <a id=the-param-element:plugin-4 href=infrastructure.html#plugin>plugin</a> of the change.</p>

  <p>IDL属性<dfn id=dom-param-name><code>name</code></dfn>および<dfn id=dom-param-value><code>value</code></dfn>は、同じ名前の各コンテンツ属性を両方<a id=the-param-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  

  <div class=example>

   <p>この場合O3Dプラグインにおいて、<code id=the-param-element:the-param-element-4><a href=#the-param-element>param</a></code>要素が、プラグインにパラメータを渡すために使用する様子を次に示す。</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
   &lt;title&gt;O3D Utah Teapot&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
   &lt;p&gt;
    &lt;object type="application/vnd.o3d.auto"&gt;
     <strong>&lt;param name="o3d_features" value="FloatingPointTextures"&gt;</strong>
     &lt;img src="o3d-teapot.png"
          title="3D Utah Teapot illustration rendered using O3D."
          alt="When O3D renders the Utah Teapot, it appears as a squat
          teapot with a shiny metallic finish on which the
          surroundings are reflected, with a faint shadow caused by
          the lighting."&gt;
     &lt;p&gt;To see the teapot actually rendered by O3D on your
     computer, please download and install the &lt;a
     href="http://code.google.com/apis/o3d/docs/gettingstarted.html#install"&gt;O3D plugin&lt;/a&gt;.&lt;/p&gt;
    &lt;/object&gt;
    &lt;script src="o3d-teapot.js"&gt;&lt;/script&gt;
   &lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>



  <h4 id=the-video-element>4.8.9 <dfn id=video><code>video</code></dfn>要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=5755" title="&lt;video&gt;: Expose media resource metadata (e.g. movie name, release year)">5755</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25547" title="Shouldn't &lt;video&gt; allow intermixed script-supporting elements?">25547</a></div><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>9.9+</span></span><span class="ie yes"><span>IE</span> <span>9+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>3.2+</span></span><span class="firefox yes"><span>Firefox</span> <span>3.5+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android yes"><span>Android Browser</span> <span>2.3+</span></span><span class="safari yes"><span>Safari</span> <span>4+</span></span><span class="opera yes"><span>Opera</span> <span>10.5+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="ie_mob yes"><span>IE Mobile</span> <span>10+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=video">caniuse.com</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-video-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-video-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-video-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-video-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd>要素が<code id=the-video-element:attr-media-controls><a href=#attr-media-controls>controls</a></code>属性を持つ場合：<a id=the-video-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd><a id=the-video-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-video-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-video-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-video-element:concept-element-content-model>コンテンツモデル</a>：<dd>要素が<code id=the-video-element:attr-media-src><a href=#attr-media-src>src</a></code>属性を持つ場合：0個以上の<code id=the-video-element:the-track-element><a href=#the-track-element>track</a></code>要素で、次に<a id=the-video-element:transparent href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-video-element:media-element>media要素</a>子孫をもたない。<dd>要素が<code id=the-video-element:attr-media-src-2><a href=#attr-media-src>src</a></code>属性を持たない場合：0個以上の<code id=the-video-element:the-source-element><a href=#the-source-element>source</a></code>要素で、次に0個以上の<code id=the-video-element:the-track-element-2><a href=#the-track-element>track</a></code>で、次に<a id=the-video-element:transparent-2 href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-video-element:media-element-2>media要素</a>子孫をもたない。<dt><a href=dom.html#concept-element-tag-omission id=the-video-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-video-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-video-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-video-element:attr-media-src-3><a href=#attr-media-src>src</a></code> — リソースのアドレス<dd><code id=the-video-element:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> — 要素がcrossorigin要求を処理する方法<dd><code id=the-video-element:attr-video-poster><a href=#attr-video-poster>poster</a></code> — 先にビデオプレイバックを見せるポスターフレーム<dd><code id=the-video-element:attr-media-preload><a href=#attr-media-preload>preload</a></code> — <a href=#media-resource id=the-video-element:media-resource>メディアリソース</a>がどの程度バッファリングに必要になるかのヒント<dd><code id=the-video-element:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> — ページが読み込まれる際に<a href=#media-resource id=the-video-element:media-resource-2>メディアリソース</a>が自動的に開始可能というヒント<dd><code id=the-video-element:attr-media-mediagroup><a href=#attr-media-mediagroup>mediagroup</a></code> — 暗黙の<code id=the-video-element:mediacontroller><a href=#mediacontroller>MediaController</a></code>をもつ<a href=#media-element id=the-video-element:media-element-3>メディア要素</a>グループ<dd><code id=the-video-element:attr-media-loop><a href=#attr-media-loop>loop</a></code> — <a href=#media-resource id=the-video-element:media-resource-3>メディアリソース</a>をループするかどうか<dd><code id=the-video-element:attr-media-muted><a href=#attr-media-muted>muted</a></code> — デフォルトで<a href=#media-resource id=the-video-element:media-resource-4>メディアリソース</a>をミュートするかどうか<dd><code id=the-video-element:attr-media-controls-2><a href=#attr-media-controls>controls</a></code> — ユーザーエージェントのコントロールを表示する<dd><code id=the-video-element:attr-dim-width><a href=#attr-dim-width>width</a></code> — 横の次元<dd><code id=the-video-element:attr-dim-height><a href=#attr-dim-height>height</a></code> — 縦の次元<dt><a href=dom.html#concept-element-dom id=the-video-element:concept-element-dom>DOMインターフェース</a>：<dd>
    <pre class=idl>interface <dfn id=htmlvideoelement>HTMLVideoElement</dfn> : <a href=#htmlmediaelement id=the-video-element:htmlmediaelement>HTMLMediaElement</a> {
  attribute unsigned long <a href=#dom-dim-width id=the-video-element:dom-dim-width>width</a>;
  attribute unsigned long <a href=#dom-dim-height id=the-video-element:dom-dim-height>height</a>;
  readonly attribute unsigned long <a href=#dom-video-videowidth id=the-video-element:dom-video-videowidth>videoWidth</a>;
  readonly attribute unsigned long <a href=#dom-video-videoheight id=the-video-element:dom-video-videoheight>videoHeight</a>;
  attribute DOMString <a href=#dom-video-poster id=the-video-element:dom-video-poster>poster</a>;
};</pre>
   </dl>

  <p><code id=the-video-element:the-video-element><a href=#the-video-element>video</a></code>要素は字幕付きのビデオやムービー、オーディオファイルを再生するために使用される。</p>

  <p>コンテンツは、<code id=the-video-element:the-video-element-2><a href=#the-video-element>video</a></code>要素の内部に提供されてもよい。ユーザーエージェントはユーザーにこのコンテンツを表示すべきでない。レガシービデオプラグインが試す、またはビデオコンテンツにアクセスする方法について、これらのより古いブラウザのユーザーにテキストを表示できるよう、<code id=the-video-element:the-video-element-3><a href=#the-video-element>video</a></code>をサポートしない、より古いウェブブラウザを対象とする。</p>

  <p class=note>特に、このコンテンツはアクセシビリティの懸念に対処するためのものではない。弱視、目の見えない、難聴、耳が聞こえない、および他の身体または認知障害を持つ人々へのビデオコンテンツにアクセシブルにするための、さまざまな機能が利用可能である。字幕は、ビデオストリームの埋め込みまたは<code id=the-video-element:the-track-element-3><a href=#the-track-element>track</a></code>要素を使用する外部ファイルとしてのいずれかを提供できる。手話トラックは、ビデオストリームの埋め込みまたは<code id=the-video-element:attr-media-mediagroup-2><a href=#attr-media-mediagroup>mediagroup</a></code>属性または<code id=the-video-element:mediacontroller-2><a href=#mediacontroller>MediaController</a></code>オブジェクトを使用する、複数の<code id=the-video-element:the-video-element-4><a href=#the-video-element>video</a></code>要素を同期させることのいずれかで提供できる。オーディオの説明は、ビデオストリームに埋め込まれた個別のトラックとして、<code id=the-video-element:the-video-element-5><a href=#the-video-element>video</a></code>要素として同じコントローラに<a href=#slaved-media-elements id=the-video-element:slaved-media-elements>スレーブ</a><code id=the-video-element:the-audio-element><a href=#the-audio-element>audio</a></code>要素での個別のオーディオトラックとして、または<code id=the-video-element:the-track-element-4><a href=#the-track-element>track</a></code>要素を使用して参照され、かつユーザーエージェントによって音声に合成された<a id=the-video-element:webvtt-file href=infrastructure.html#webvtt-file>WebVTTファイル</a>を使用するテキスト形式でのいずれかとして提供できる。WebVTTはまた、章のタイトルを提供するために使用できる。むしろ一切のメディア要素を使用しないだろうユーザーの場合、複写物またはその他のテキストの選択肢は単に<code id=the-video-element:the-video-element-6><a href=#the-video-element>video</a></code>要素の近くに文でそれらにリンクすることによって提供されうる。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><code id=the-video-element:the-video-element-7><a href=#the-video-element>video</a></code>要素は<a href=#media-element id=the-video-element:media-element-4>media要素</a>であり、その<a href=#media-data id=the-video-element:media-data>メディアデータ</a>がおそらく関連する音声データをもつ、表面上は映像データである。</p>

  <p><code id=the-video-element:attr-media-src-4><a href=#attr-media-src>src</a></code>、<code id=the-video-element:attr-media-preload-2><a href=#attr-media-preload>preload</a></code>、<code id=the-video-element:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code>、<code id=the-video-element:attr-media-mediagroup-3><a href=#attr-media-mediagroup>mediagroup</a></code>、<code id=the-video-element:attr-media-loop-2><a href=#attr-media-loop>loop</a></code>、<code id=the-video-element:attr-media-muted-2><a href=#attr-media-muted>muted</a></code>、および<code id=the-video-element:attr-media-controls-3><a href=#attr-media-controls>controls</a></code>属性は、<a href=#media-element-attributes id=the-video-element:media-element-attributes>すべてのメディア要素に共通の属性</a>である。</p>

  <p><dfn id=attr-video-poster><code>poster</code></dfn>属性はビデオデータが利用可能でない間に、ユーザーエージェントが表示できる画像ファイルのアドレスを与える。属性が存在する場合、<a id=the-video-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>を含まなければならない。</p>

  

  <p>If the specified resource is to be used, then, when the element is created or when the <code id=the-video-element:attr-video-poster-2><a href=#attr-video-poster>poster</a></code> attribute is set, changed, or removed, the user agent must
  run the following steps to determine the element's <dfn id=poster-frame>poster frame</dfn> (regardless of the
  value of the element's <a href=#show-poster-flag id=the-video-element:show-poster-flag>show poster flag</a>):</p> 

  <ol><li><p>If there is an existing instance of this algorithm running for this <code id=the-video-element:the-video-element-8><a href=#the-video-element>video</a></code>
   element, abort that instance of this algorithm without changing the <a href=#poster-frame id=the-video-element:poster-frame>poster
   frame</a>.</li><li><p>If the <code id=the-video-element:attr-video-poster-3><a href=#attr-video-poster>poster</a></code> attribute's value is the empty string
   or if the attribute is absent, then there is no <a href=#poster-frame id=the-video-element:poster-frame-2>poster frame</a>; abort these
   steps.</li><li><p><a href=infrastructure.html#parse-a-url id=the-video-element:parse-a-url>Parse</a> the <code id=the-video-element:attr-video-poster-4><a href=#attr-video-poster>poster</a></code> attribute's value relative to the element's <a id=the-video-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
   document</a>. If this fails, then there is no <a href=#poster-frame id=the-video-element:poster-frame-3>poster frame</a>; abort these
   steps.</li><li><p>Let <var>request</var> be a new <a href=https://fetch.spec.whatwg.org/#concept-request id=the-video-element:concept-request data-x-internal=concept-request>request</a> whose
   <a href=https://fetch.spec.whatwg.org/#concept-request-url id=the-video-element:concept-request-url data-x-internal=concept-request-url>url</a> is the <a id=the-video-element:resulting-url-record href=infrastructure.html#resulting-url-record>resulting URL record</a>,
   <a href=https://fetch.spec.whatwg.org/#concept-request-client id=the-video-element:concept-request-client data-x-internal=concept-request-client>client</a> is the element's <a id=the-video-element:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s
   <code id=the-video-element:window><a href=browsers.html#window>Window</a></code> object's <a id=the-video-element:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>, <a href=https://fetch.spec.whatwg.org/#concept-request-type id=the-video-element:concept-request-type data-x-internal=concept-request-type>type</a> is "<code>image</code>", <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=the-video-element:concept-request-destination data-x-internal=concept-request-destination>destination</a> is "<code>subresource</code>",
   <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=the-video-element:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> is "<code>include</code>", and whose <a id=the-video-element:use-url-credentials-flag href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials flag</a> is set.

   

   </li><li><p><a href=https://fetch.spec.whatwg.org/#concept-fetch id=the-video-element:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>. This must
   <a id=the-video-element:delay-the-load-event href=syntax.html#delay-the-load-event>delay the load event</a> of the element's <a id=the-video-element:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.</li><li><p>If an image is thus obtained, the <a href=#poster-frame id=the-video-element:poster-frame-4>poster frame</a> is that image. Otherwise,
   there is no <a href=#poster-frame id=the-video-element:poster-frame-5>poster frame</a>.</li></ol>

  

  <p class=note><code id=the-video-element:attr-video-poster-5><a href=#attr-video-poster>poster</a></code>属性によって与えられた画像、<i id=the-video-element:poster-frame-6><a href=#poster-frame>poster frame</a></i>は、ユーザーに映像がどのようなものであるかのテーマを与える映像の代表フレーム（通常は最初の空白でないフレームの1つ）であることを意図する。</p>

  

  <hr>

  <p>A <code id=the-video-element:the-video-element-9><a href=#the-video-element>video</a></code> element represents what is given for the first matching condition in the
  list below:</p>

  <dl class=switch><dt>When no video data is available (the element's <code id=the-video-element:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> attribute is either <code id=the-video-element:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, or <code id=the-video-element:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> but no video data has yet been obtained at
   all, or the element's <code id=the-video-element:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute is any
   subsequent value but the <a href=#media-resource id=the-video-element:media-resource-5>media resource</a> does not have a video channel)<dd>The <code id=the-video-element:the-video-element-10><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents href=dom.html#represents>represents</a> its <a href=#poster-frame id=the-video-element:poster-frame-7>poster frame</a>, if any,
   or else transparent black with no <a id=the-video-element:intrinsic-dimensions href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a>.<dt>When the <code id=the-video-element:the-video-element-11><a href=#the-video-element>video</a></code> element is <a href=#dom-media-paused id=the-video-element:dom-media-paused>paused</a>, the <a href=#current-playback-position id=the-video-element:current-playback-position>current playback position</a> is the first frame of video,
   and the element's <a href=#show-poster-flag id=the-video-element:show-poster-flag-2>show poster flag</a> is set<dd>The <code id=the-video-element:the-video-element-12><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-2 href=dom.html#represents>represents</a> its <a href=#poster-frame id=the-video-element:poster-frame-8>poster frame</a>, if any,
   or else the first frame of the video.<dt>When the <code id=the-video-element:the-video-element-13><a href=#the-video-element>video</a></code> element is <a href=#dom-media-paused id=the-video-element:dom-media-paused-2>paused</a>, and the
   frame of video corresponding to the <a href=#current-playback-position id=the-video-element:current-playback-position-2>current playback
   position</a> is not available (e.g. because the video is seeking or buffering)<dt>When the <code id=the-video-element:the-video-element-14><a href=#the-video-element>video</a></code> element is neither <a href=#potentially-playing id=the-video-element:potentially-playing>potentially playing</a> nor <a href=#dom-media-paused id=the-video-element:dom-media-paused-3>paused</a> (e.g. when seeking or stalled)<dd>The <code id=the-video-element:the-video-element-15><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-3 href=dom.html#represents>represents</a> the last frame of the video to have
   been rendered.<dt>When the <code id=the-video-element:the-video-element-16><a href=#the-video-element>video</a></code> element is <a href=#dom-media-paused id=the-video-element:dom-media-paused-4>paused</a><dd>The <code id=the-video-element:the-video-element-17><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-4 href=dom.html#represents>represents</a> the frame of video corresponding to
   the <a href=#current-playback-position id=the-video-element:current-playback-position-3>current playback position</a>.<dt>Otherwise (the <code id=the-video-element:the-video-element-18><a href=#the-video-element>video</a></code> element has a video channel and is <a href=#potentially-playing id=the-video-element:potentially-playing-2>potentially
   playing</a>)<dd>The <code id=the-video-element:the-video-element-19><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-5 href=dom.html#represents>represents</a> the frame of video at the continuously
   increasing <a href=#current-playback-position id=the-video-element:current-playback-position-4>"current" position</a>. When the
   <a href=#current-playback-position id=the-video-element:current-playback-position-5>current playback position</a> changes such that the last frame rendered is no longer the
   frame corresponding to the <a href=#current-playback-position id=the-video-element:current-playback-position-6>current playback position</a> in the video, the new frame
   must be rendered.</dl>

  <p>Frames of video must be obtained from the video track that was <a href=#dom-videotrack-selected id=the-video-element:dom-videotrack-selected>selected</a> when the <a id=the-video-element:event-loop href=webappapis.html#event-loop>event loop</a> last reached
  <a href=webappapis.html#step1>step 1</a>.</p>

  <p class=note>Which frame in a video stream corresponds to a particular playback position is
  defined by the video stream's format.</p>

  <p>The <code id=the-video-element:the-video-element-20><a href=#the-video-element>video</a></code> element also <a id=the-video-element:represents-6 href=dom.html#represents>represents</a> any <a href=#text-track-cue id=the-video-element:text-track-cue>text track cues</a> whose <a href=#text-track-cue-active-flag id=the-video-element:text-track-cue-active-flag>text track cue active flag</a> is set and whose
  <a href=#text-track id=the-video-element:text-track>text track</a> is in the <a href=#text-track-showing id=the-video-element:text-track-showing>showing</a> mode, and any
  audio from the <a href=#media-resource id=the-video-element:media-resource-6>media resource</a>, at the <a href=#current-playback-position id=the-video-element:current-playback-position-7>current playback position</a>.</p>

  <p>Any audio associated with the <a href=#media-resource id=the-video-element:media-resource-7>media resource</a> must, if played, be played
  synchronised with the <a href=#current-playback-position id=the-video-element:current-playback-position-8>current playback position</a>, at the element's <a href=#effective-media-volume id=the-video-element:effective-media-volume>effective
  media volume</a>. The user agent must play the audio from audio tracks that were <a href=#dom-audiotrack-enabled id=the-video-element:dom-audiotrack-enabled>enabled</a> when the <a id=the-video-element:event-loop-2 href=webappapis.html#event-loop>event loop</a> last reached step
  1.</p>

  <p>In addition to the above, the user agent may provide messages to the user (such as "buffering",
  "no video loaded", "error", or more detailed information) by overlaying text or icons on the video
  or other areas of the element's playback area, or in another appropriate manner.</p>

  <p>User agents that cannot render the video may instead make the element <a href=dom.html#represents id=the-video-element:represents-7>represent</a> a link to an external video playback utility or to the video
  data itself.</p>

  <p>When a <code id=the-video-element:the-video-element-21><a href=#the-video-element>video</a></code> element's <a href=#media-resource id=the-video-element:media-resource-8>media resource</a> has a video channel, the
  element <a id=the-video-element:provides-a-paint-source href=infrastructure.html#provides-a-paint-source>provides a paint source</a> whose width is the <a href=#media-resource id=the-video-element:media-resource-9>media resource</a>'s
  <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width>intrinsic width</a>, whose height is the
  <a href=#media-resource id=the-video-element:media-resource-10>media resource</a>'s <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height>intrinsic
  height</a>, and whose appearance is the frame of video corresponding to the <a href=#current-playback-position id=the-video-element:current-playback-position-9>current playback position</a>, if that is available, or else
  (e.g. when the video is seeking or buffering) its previous appearance, if any, or else (e.g.
  because the video is still loading the first frame) blackness.</p>

  <hr>

  

  <dl class=domintro><dt><var>video</var> . <code id=the-video-element:dom-video-videowidth-2><a href=#dom-video-videowidth>videoWidth</a></code><dt><var>video</var> . <code id=the-video-element:dom-video-videoheight-2><a href=#dom-video-videoheight>videoHeight</a></code><dd>

    <p>これらの属性はビデオの内在次元を返し、次元が未知の場合に0を返す。</p>

   </dl>

  

  <p>The <dfn id=concept-video-intrinsic-width>intrinsic width</dfn> and <dfn id=concept-video-intrinsic-height>intrinsic height</dfn> of the <a href=#media-resource id=the-video-element:media-resource-11>media resource</a>
  are the dimensions of the resource in CSS pixels after taking into account the resource's
  dimensions, aspect ratio, clean aperture, resolution, and so forth, as defined for the format used
  by the resource. If an anamorphic format does not define how to apply the aspect ratio to the
  video data's dimensions to obtain the "correct" dimensions, then the user agent must apply the
  ratio by increasing one dimension and leaving the other unchanged.</p>

  <p>The <dfn id=dom-video-videowidth><code>videoWidth</code></dfn> IDL attribute must return
  the <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width-2>intrinsic width</a> of the video in CSS pixels.
  The <dfn id=dom-video-videoheight><code>videoHeight</code></dfn> IDL attribute must return
  the <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height-2>intrinsic height</a> of the video in CSS
  pixels. If the element's <code id=the-video-element:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute is <code id=the-video-element:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, then the attributes must return 0.</p>

  <p id=dimUpdate>Whenever the <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width-3>intrinsic width</a>
  or <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height-3>intrinsic height</a> of the video changes
  (including, for example, because the <a href=#dom-videotrack-selected id=the-video-element:dom-videotrack-selected-2>selected video
  track</a> was changed), if the element's <code id=the-video-element:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code>
  attribute is not <code id=the-video-element:dom-media-have_nothing-3><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, the user agent must
  <a id=the-video-element:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a id=the-video-element:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=the-video-element:event-media-resize><a href=#event-media-resize>resize</a></code> at the <a href=#media-element id=the-video-element:media-element-5>media element</a>.</p>

  

  <p><code id=the-video-element:the-video-element-22><a href=#the-video-element>video</a></code>要素は、<a href=#dimension-attributes id=the-video-element:dimension-attributes>次元属性</a>をサポートする。</p>

  

  <p>In the absence of style rules to the contrary, video content should be rendered inside the
  element's playback area such that the video content is shown centered in the playback area at the
  largest possible size that fits completely within it, with the video content's aspect ratio being
  preserved. Thus, if the aspect ratio of the playback area does not match the aspect ratio of the
  video, the video will be shown letterboxed or pillarboxed. Areas of the element's playback area
  that do not contain the video represent nothing.</p>

  <p class=note>In user agents that implement CSS, the above requirement can be implemented by
  using the <a href=rendering.html#video-object-fit>style rule suggested in the rendering section</a>.</p>

  <p>The <a id=the-video-element:intrinsic-width href=infrastructure.html#intrinsic-width>intrinsic width</a> of a <code id=the-video-element:the-video-element-23><a href=#the-video-element>video</a></code> element's playback area is the
  <a id=the-video-element:intrinsic-width-2 href=infrastructure.html#intrinsic-width>intrinsic width</a> of the <a href=#poster-frame id=the-video-element:poster-frame-9>poster frame</a>, if that is available and the
  element currently <a id=the-video-element:represents-8 href=dom.html#represents>represents</a> its poster frame; otherwise, it is the <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width-4>intrinsic width</a> of the video resource, if that is
  available; otherwise the <a id=the-video-element:intrinsic-width-3 href=infrastructure.html#intrinsic-width>intrinsic width</a> is missing.</p>

  <p>The <a id=the-video-element:intrinsic-height href=infrastructure.html#intrinsic-height>intrinsic height</a> of a <code id=the-video-element:the-video-element-24><a href=#the-video-element>video</a></code> element's playback area is the
  <a id=the-video-element:intrinsic-height-2 href=infrastructure.html#intrinsic-height>intrinsic height</a> of the <a href=#poster-frame id=the-video-element:poster-frame-10>poster frame</a>, if that is available and the
  element currently <a id=the-video-element:represents-9 href=dom.html#represents>represents</a> its poster frame; otherwise it is the <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height-4>intrinsic height</a> of the video resource, if that is
  available; otherwise the <a id=the-video-element:intrinsic-height-3 href=infrastructure.html#intrinsic-height>intrinsic height</a> is missing.</p>

  <p>The <a id=the-video-element:default-object-size href=infrastructure.html#default-object-size>default object size</a> is a width of 300 CSS pixels and a height of 150 CSS
  pixels. <a href=references.html#refsCSSIMAGES>[CSSIMAGES]</a></p>

  <hr>

  <p>User agents should provide controls to enable or disable the display of closed captions, audio
  description tracks, and other additional data associated with the video stream, though such
  features should, again, not interfere with the page's normal rendering.</p>

  <p>User agents may allow users to view the video content in manners more suitable to the user
  (e.g. fullscreen or in an independent resizable window). As for the other user interface
  features, controls to enable this should not interfere with the page's normal rendering unless the
  user agent is <a href=#expose-a-user-interface-to-the-user id=the-video-element:expose-a-user-interface-to-the-user>exposing a user interface</a>.
  In such an independent context, however, user agents may make full user interfaces visible, even
  if the <code id=the-video-element:attr-media-controls-4><a href=#attr-media-controls>controls</a></code> attribute is absent.</p>

  <p>User agents may allow video playback to affect system features that could interfere with the
  user's experience; for example, user agents could disable screensavers while video playback is in
  progress.</p>

  <hr>

  <p><dfn id=dom-video-poster><code>poster</code></dfn> IDL属性は、<code id=the-video-element:attr-video-poster-6><a href=#attr-video-poster>poster</a></code>コンテンツ属性を<a id=the-video-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  

  <div class=example>

   <p>この例は、ビデオを正常に再生するために障害が発生したことを検出する様子を示す：</p>

   <pre>&lt;script&gt;
 function failed(e) {
   // video playback failed - show a message saying why
   switch (e.target.error.code) {
     case e.target.error.MEDIA_ERR_ABORTED:
       alert('You aborted the video playback.');
       break;
     case e.target.error.MEDIA_ERR_NETWORK:
       alert('A network error caused the video download to fail part-way.');
       break;
     case e.target.error.MEDIA_ERR_DECODE:
       alert('The video playback was aborted due to a corruption problem or because the video used features your browser did not support.');
       break;
     case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
       alert('The video could not be loaded, either because the server or network failed or because the format is not supported.');
       break;
     default:
       alert('An unknown error occurred.');
       break;
   }
 }
&lt;/script&gt;
&lt;p&gt;&lt;video src="tgif.vid" autoplay controls onerror="failed(event)"&gt;&lt;/video&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="tgif.vid"&gt;Download the video file&lt;/a&gt;.&lt;/p&gt;</pre>

  </div>




  





  <h4 id=the-audio-element>4.8.10 <dfn id=audio><code>audio</code></dfn>要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=7253" title="&lt;video&gt;: Provide a way to let the browser know what's coming next, for gapless playback">7253</a><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>9.9+</span></span><span class="ie yes"><span>IE</span> <span>9+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>4.0-4.1+</span></span><span class="firefox yes"><span>Firefox</span> <span>3.5+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android yes"><span>Android Browser</span> <span>2.3+</span></span><span class="safari yes"><span>Safari</span> <span>4+</span></span><span class="opera yes"><span>Opera</span> <span>10.5+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="ie_mob yes"><span>IE Mobile</span> <span>10+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=audio">caniuse.com</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-audio-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-audio-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-audio-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-audio-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd>要素が<code id=the-audio-element:attr-media-controls><a href=#attr-media-controls>controls</a></code>属性を持つ場合：<a id=the-audio-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd>要素が<code id=the-audio-element:attr-media-controls-2><a href=#attr-media-controls>controls</a></code>属性を持つ場合：<a id=the-audio-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-audio-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-audio-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-audio-element:concept-element-content-model>コンテンツモデル</a>：<dd>要素が<code id=the-audio-element:attr-media-src><a href=#attr-media-src>src</a></code>属性を持つ場合：0個以上の<code id=the-audio-element:the-track-element><a href=#the-track-element>track</a></code>要素で、次に<a id=the-audio-element:transparent href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-audio-element:media-element>media要素</a>子孫をもたない。<dd>要素が<code id=the-audio-element:attr-media-src-2><a href=#attr-media-src>src</a></code>属性を持たない場合：0個以上の<code id=the-audio-element:the-source-element><a href=#the-source-element>source</a></code>要素で、次に0個以上の<code id=the-audio-element:the-track-element-2><a href=#the-track-element>track</a></code>で、次に<a id=the-audio-element:transparent-2 href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-audio-element:media-element-2>media要素</a>子孫をもたない。<dt><a href=dom.html#concept-element-tag-omission id=the-audio-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-audio-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-audio-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-audio-element:attr-media-src-3><a href=#attr-media-src>src</a></code> — リソースのアドレス<dd><code id=the-audio-element:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> — 要素がcrossorigin要求を処理する方法<dd><code id=the-audio-element:attr-media-preload><a href=#attr-media-preload>preload</a></code> — <a href=#media-resource id=the-audio-element:media-resource>メディアリソース</a>がどの程度バッファリングに必要になるかのヒント<dd><code id=the-audio-element:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> — ページが読み込まれる際に<a href=#media-resource id=the-audio-element:media-resource-2>メディアリソース</a>が自動的に開始可能というヒント<dd><code id=the-audio-element:attr-media-mediagroup><a href=#attr-media-mediagroup>mediagroup</a></code> — 暗黙の<code id=the-audio-element:mediacontroller><a href=#mediacontroller>MediaController</a></code>をもつ<a href=#media-element id=the-audio-element:media-element-3>メディア要素</a>グループ<dd><code id=the-audio-element:attr-media-loop><a href=#attr-media-loop>loop</a></code> — <a href=#media-resource id=the-audio-element:media-resource-3>メディアリソース</a>をループするかどうか<dd><code id=the-audio-element:attr-media-muted><a href=#attr-media-muted>muted</a></code> — デフォルトで<a href=#media-resource id=the-audio-element:media-resource-4>メディアリソース</a>をミュートするかどうか<dd><code id=the-audio-element:attr-media-controls-3><a href=#attr-media-controls>controls</a></code> — ユーザーエージェントのコントロールを表示する<dt><a href=dom.html#concept-element-dom id=the-audio-element:concept-element-dom>DOMインターフェース</a>：<dd>
    <pre class=idl>[NamedConstructor=<a href=#dom-audio id=the-audio-element:dom-audio>Audio</a>(optional DOMString src)]
interface <dfn id=htmlaudioelement>HTMLAudioElement</dfn> : <a href=#htmlmediaelement id=the-audio-element:htmlmediaelement>HTMLMediaElement</a> {};</pre>
   </dl>

  <p><code id=the-audio-element:the-audio-element><a href=#the-audio-element>audio</a></code>要素は、音やオーディオのストリームを<a id=the-audio-element:represents href=dom.html#represents>表す</a>。</p>

  

  <p>コンテンツは、<code id=the-audio-element:the-audio-element-2><a href=#the-audio-element>audio</a></code>要素の内部に提供されてもよい。ユーザーエージェントはユーザーにこのコンテンツを表示すべきでない。レガシー音声プラグインが試す、または音声コンテンツにアクセスする方法について、これらのより古いブラウザのユーザーにテキストを表示できるよう、<code id=the-audio-element:the-audio-element-3><a href=#the-audio-element>audio</a></code>をサポートしない、より古いウェブブラウザを対象とする。</p>

  <p class=note>特に、このコンテンツはアクセシビリティの懸念に対処するためのものではない。聴覚障害、または他の身体または認知障害を持つ人々へのオーディオコンテンツにアクセシブルにするための、さまざまな機能が利用可能である。字幕や手話の映像が使用可能な場合、<code id=the-audio-element:the-video-element><a href=#the-video-element>video</a></code>要素は、ユーザーが視覚的な選択肢を有効にすることができ、オーディオを再生する<code id=the-audio-element:the-audio-element-4><a href=#the-audio-element>audio</a></code>要素の代わりに使用できる。章タイトルは、<code id=the-audio-element:the-track-element-3><a href=#the-track-element>track</a></code>要素と<a id=the-audio-element:webvtt-file href=infrastructure.html#webvtt-file>WebVTTファイル</a>を使用して、ナビゲーションを補助するために提供できる。そして当然のことながら、複写物またはその他のテキストの選択肢は単に<code id=the-audio-element:the-audio-element-5><a href=#the-audio-element>audio</a></code>要素の近くに文でそれらにリンクすることによって提供されうる。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><code id=the-audio-element:the-audio-element-6><a href=#the-audio-element>audio</a></code>要素は、<a href=#media-data id=the-audio-element:media-data>メディアデータ</a>が表面上は音声データである<a href=#media-element id=the-audio-element:media-element-4>media要素</a>である。</p>

  <p><code id=the-audio-element:attr-media-src-4><a href=#attr-media-src>src</a></code>、<code id=the-audio-element:attr-media-preload-2><a href=#attr-media-preload>preload</a></code>、<code id=the-audio-element:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code>、<code id=the-audio-element:attr-media-mediagroup-2><a href=#attr-media-mediagroup>mediagroup</a></code>、<code id=the-audio-element:attr-media-loop-2><a href=#attr-media-loop>loop</a></code>、<code id=the-audio-element:attr-media-muted-2><a href=#attr-media-muted>muted</a></code>、および<code id=the-audio-element:attr-media-controls-4><a href=#attr-media-controls>controls</a></code>属性は、<a href=#media-element-attributes id=the-audio-element:media-element-attributes>すべてのメディア要素に共通の属性</a>である。</p>

  

  <p>When an <code id=the-audio-element:the-audio-element-7><a href=#the-audio-element>audio</a></code> element is <a href=#potentially-playing id=the-audio-element:potentially-playing>potentially playing</a>, it must have its audio
  data played synchronised with the <a href=#current-playback-position id=the-audio-element:current-playback-position>current playback position</a>, at the element's
  <a href=#effective-media-volume id=the-audio-element:effective-media-volume>effective media volume</a>. The user agent must play the audio from audio tracks that
  were enabled when the <a id=the-audio-element:event-loop href=webappapis.html#event-loop>event loop</a> last reached <a href=webappapis.html#step1>step 1</a>.</p>

  <p>When an <code id=the-audio-element:the-audio-element-8><a href=#the-audio-element>audio</a></code> element is not <a href=#potentially-playing id=the-audio-element:potentially-playing-2>potentially playing</a>, audio must not play
  for the element.</p>

  

  <dl class=domintro><dt><var>audio</var> = new <code id=the-audio-element:dom-audio-2><a href=#dom-audio>Audio</a></code>( [ <var>url</var> ] )<dd>

    <p>該当する場合、引数で渡された値に設定する<code id=the-audio-element:attr-media-src-5><a href=#attr-media-src>src</a></code>属性とともに、新しい<code id=the-audio-element:the-audio-element-9><a href=#the-audio-element>audio</a></code>要素を返す。</p>

   </dl>

  

  <p>A constructor is provided for creating <code id=the-audio-element:htmlaudioelement><a href=#htmlaudioelement>HTMLAudioElement</a></code> objects (in addition to
  the factory methods from DOM such as <code>createElement()</code>): <dfn id=dom-audio><code>Audio(<var>src</var>)</code></dfn>. When invoked as a
  constructor, it must return a new <code id=the-audio-element:htmlaudioelement-2><a href=#htmlaudioelement>HTMLAudioElement</a></code> object (a new <code id=the-audio-element:the-audio-element-10><a href=#the-audio-element>audio</a></code>
  element). The element must be created with its <code id=the-audio-element:attr-media-preload-3><a href=#attr-media-preload>preload</a></code>
  attribute set to the literal value "<code id=the-audio-element:attr-media-preload-auto><a href=#attr-media-preload-auto>auto</a></code>". If the
  <var>src</var> argument is present, the object created must be created with its <code id=the-audio-element:attr-media-src-6><a href=#attr-media-src>src</a></code> content attribute set to the provided value (this will <a href=#concept-media-load-algorithm-at-creation>cause the user agent to invoke</a> the object's
  <a href=#concept-media-load-algorithm id=the-audio-element:concept-media-load-algorithm>resource selection algorithm</a> before returning).
  The element's <a id=the-audio-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> must be the <a id=the-audio-element:active-document href=browsers.html#active-document>active document</a> of the <a id=the-audio-element:browsing-context href=browsers.html#browsing-context>browsing
  context</a> of the <code id=the-audio-element:window><a href=browsers.html#window>Window</a></code> object on which the interface object of the invoked
  constructor is found.</p>

  



  



  <h4 id=the-source-element>4.8.11 <dfn><code>source</code></dfn>要素</h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-source-element:concept-element-categories>カテゴリー</a>：<dd>なし。<dt><a href=dom.html#concept-element-contexts id=the-source-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd>任意の<a id=the-source-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>または<code id=the-source-element:the-track-element><a href=#the-track-element>track</a></code>要素の前で、<a href=#media-element id=the-source-element:media-element>メディア要素</a>の子として。<dt><a href=dom.html#concept-element-content-model id=the-source-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-source-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-source-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-source-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-source-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-source-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-source-element:attr-source-src><a href=#attr-source-src>src</a></code> — リソースのアドレス<dd><code id=the-source-element:attr-source-type><a href=#attr-source-type>type</a></code> — 埋め込みリソースタイプ<dt><a href=dom.html#concept-element-dom id=the-source-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlsourceelement>HTMLSourceElement</dfn> : <a id=the-source-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-source-src id=the-source-element:dom-source-src>src</a>;
  attribute DOMString <a href=#dom-source-type id=the-source-element:dom-source-type>type</a>;
};</pre>
   </dl>

  <p><code id=the-source-element:the-source-element><a href=#the-source-element>source</a></code>要素は、著者が<a href=#media-element id=the-source-element:media-element-2>メディア要素</a>に対する複数の代替<a href=#media-resource id=the-source-element:media-resource>メディアリソース</a>を指定できる。この要素は、自分自身で何かを<a href=dom.html#represents id=the-source-element:represents>表す</a>ものではない。</p>

  <p><dfn id=attr-source-src><code>src</code></dfn>属性は、<a href=#media-resource id=the-source-element:media-resource-2>メディアリソース</a>のアドレスを与える。値は、<a id=the-source-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>でなければならない。この属性は存在しなければならない。</p>

  <p class=note>要素が<code id=the-source-element:the-video-element><a href=#the-video-element>video</a></code>や<code id=the-source-element:the-audio-element><a href=#the-audio-element>audio</a></code>要素にすでに挿入されている場合、<code id=the-source-element:the-source-element-2><a href=#the-source-element>source</a></code>要素とその属性を動的に変更しても効果はない。再生している内容を変更するためには、使用可能なリソースの中から選択する<code id=the-source-element:dom-navigator-canplaytype><a href=#dom-navigator-canplaytype>canPlayType()</a></code>メソッドをおそらく利用して、直接<a href=#media-element id=the-source-element:media-element-3>メディア要素</a>の<code id=the-source-element:attr-media-src><a href=#attr-media-src>src</a></code>属性を単に使用する。一般に、文書が解析された後に手動で<code id=the-source-element:the-source-element-3><a href=#the-source-element>source</a></code>要素を操作することは、不必要に複雑なアプローチとなる。</p>

  <p><dfn id=attr-source-type><code>type</code></dfn>属性は、この属性をフェッチする前に、この<a href=#media-resource id=the-source-element:media-resource-4>メディアリソース</a>を再生できるかどうかをユーザーエージェントが判断するために、<a href=#media-resource id=the-source-element:media-resource-3>メディアリソース</a>の型を示す。指定された場合、その値は<a id=the-source-element:valid-mime-type href=infrastructure.html#valid-mime-type>妥当なMIMEタイプ</a>でなければならない。特定のMIMEタイプが定義する<code>コーデック</code>パラメータは、リソースがエンコードされる方法を正確に指定する必要があるかもしれない。<a href=references.html#refsRFC6381>[RFC6381]</a></p>

  <div class=example>

   <p>次のリストは、<code id=the-source-element:attr-source-type-2><a href=#attr-source-type>type</a></code>属性で<code>codecs=</code>MIMEパラメータを使用する方法の例を示す。</p>

   <dl><dt>H.264制約ベースラインプロファイルビデオ（メインおよび拡張ビデオ互換性のある）レベル3とMP4コンテナでのLow-Complexity AACオーディオ<dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'&gt;</pre><dt>H.264拡張プロファイルビデオ（ベースライン対応）レベル3とMP4コンテナでのLow-Complexity AACオーディオ<dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.58A01E, mp4a.40.2"'&gt;</pre><dt>H.264メインプロファイルビデオレベル3とMP4コンテナのLow-Complexity AACオーディオ<dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.4D401E, mp4a.40.2"'&gt;</pre><dt>H.264 'High'プロフィールビデオ（メイン、ベースライン、または拡張プロファイルと互換性がない）レベル3とMP4コンテナでのLow-Complexity AACオーディオ<dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="avc1.64001E, mp4a.40.2"'&gt;</pre><dt>MPEG-4ビジュアルのシンプルプロファイルレベル0ビデオとMP4コンテナのLow-Complexity AACオーディオ<dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="mp4v.20.8, mp4a.40.2"'&gt;</pre><dt>MPEG-4アドバンストシンプルプロファイルレベル0ビデオとMP4コンテナのLow-Complexity AACオーディオ<dd><pre>&lt;source src='video.mp4' type='video/mp4; codecs="mp4v.20.240, mp4a.40.2"'&gt;</pre><dt>MPEG-4映像シンプルプロファイルレベル0ビデオおよび3GPPコンテナ内AMRオーディオ<dd><pre>&lt;source src='video.3gp' type='video/3gpp; codecs="mp4v.20.8, samr"'&gt;</pre><dt>TheoraビデオとOggコンテナでのVorbisオーディオ<dd><pre>&lt;source src='video.ogv' type='video/ogg; codecs="theora, vorbis"'&gt;</pre><dt>TheoraビデオとOggコンテナ内のSpeexオーディオ<dd><pre>&lt;source src='video.ogv' type='video/ogg; codecs="theora, speex"'&gt;</pre><dt>OggコンテナでVorbisオーディオ単独<dd><pre>&lt;source src='audio.ogg' type='audio/ogg; codecs=vorbis'&gt;</pre><dt>Oggコンテナ内のSpeexオーディオ単独<dd><pre>&lt;source src='audio.spx' type='audio/ogg; codecs=speex'&gt;</pre><dt>Oggコンテナ内のFLACオーディオ単独<dd><pre>&lt;source src='audio.oga' type='audio/ogg; codecs=flac'&gt;</pre><dt>DiracビデオとOggコンテナでのVorbisオーディオ<dd><pre>&lt;source src='video.ogv' type='video/ogg; codecs="dirac, vorbis"'&gt;</pre></dl>

  </div>

  

  <p>If a <code id=the-source-element:the-source-element-4><a href=#the-source-element>source</a></code> <a href=infrastructure.html#nodes-are-inserted id=the-source-element:nodes-are-inserted>element is inserted</a> as a child of a <a href=#media-element id=the-source-element:media-element-4>media element</a> that
  has no <code id=the-source-element:attr-media-src-2><a href=#attr-media-src>src</a></code> attribute and whose <code id=the-source-element:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code> has the value <code id=the-source-element:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, the user agent must invoke the <a href=#media-element id=the-source-element:media-element-5>media
  element</a>'s <a href=#concept-media-load-algorithm id=the-source-element:concept-media-load-algorithm>resource selection
  algorithm</a>.</p>

  <p>IDL属性<dfn id=dom-source-src><code>src</code></dfn>、および<dfn id=dom-source-type><code>type</code></dfn>は、同じ名前の各コンテンツ属性を<a id=the-source-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  

  <div class=example>

   <p>ユーザーエージェントがすべて提供されたメディアリソースをレンダリングすることができるかどうか、著者が確信できない場合、著者は最後の<code id=the-source-element:the-source-element-5><a href=#the-source-element>source</a></code>要素のフォールバック動作に<code id=the-source-element:event-error><a href=indices.html#event-error>error</a></code>イベントをリッスンできる：</p>

   <pre>&lt;script&gt;
 function fallback(video) {
   // replace &lt;video&gt; with its contents
   while (video.hasChildNodes()) {
     if (video.firstChild instanceof HTMLSourceElement)
       video.removeChild(video.firstChild);
     else
       video.parentNode.insertBefore(video.firstChild, video);
   }
   video.parentNode.removeChild(video);
 }
&lt;/script&gt;
&lt;video controls autoplay&gt;
 &lt;source src='video.mp4' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'&gt;
 &lt;source src='video.ogv' type='video/ogg; codecs="theora, vorbis"'
         onerror="fallback(parentNode)"&gt;
 ...
&lt;/video&gt;</pre>

  </div>



  <h4 id=the-track-element>4.8.12 <dfn><code>track</code></dfn>要素</h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-track-element:concept-element-categories>カテゴリー</a>：<dd>なし。<dt><a href=dom.html#concept-element-contexts id=the-track-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd>任意の<a id=the-track-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>の前の、<a href=#media-element id=the-track-element:media-element>メディア要素</a>要素の子として。<dt><a href=dom.html#concept-element-content-model id=the-track-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-track-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-track-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-track-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-track-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-track-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-track-element:attr-track-kind><a href=#attr-track-kind>kind</a></code> — テキストトラックの種類<dd><code id=the-track-element:attr-track-src><a href=#attr-track-src>src</a></code> — リソースのアドレス<dd><code id=the-track-element:attr-track-srclang><a href=#attr-track-srclang>srclang</a></code> — テキストトラックの言語<dd><code id=the-track-element:attr-track-label><a href=#attr-track-label>label</a></code> — ユーザー可視ラベル<dd><code id=the-track-element:attr-track-default><a href=#attr-track-default>default</a></code> — 他の<a href=#text-track id=the-track-element:text-track>テキストトラック</a>がより適切でない場合にトラックを作動させる<dt><a href=dom.html#concept-element-dom id=the-track-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmltrackelement>HTMLTrackElement</dfn> : <a id=the-track-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-track-kind id=the-track-element:dom-track-kind>kind</a>;
  attribute DOMString <a href=#dom-track-src id=the-track-element:dom-track-src>src</a>;
  attribute DOMString <a href=#dom-track-srclang id=the-track-element:dom-track-srclang>srclang</a>;
  attribute DOMString <a href=#dom-track-label id=the-track-element:dom-track-label>label</a>;
  attribute boolean <a href=#dom-track-default id=the-track-element:dom-track-default>default</a>;

  const unsigned short <a href=#dom-track-none id=the-track-element:dom-track-none>NONE</a> = 0;
  const unsigned short <a href=#dom-track-loading id=the-track-element:dom-track-loading>LOADING</a> = 1;
  const unsigned short <a href=#dom-track-loaded id=the-track-element:dom-track-loaded>LOADED</a> = 2;
  const unsigned short <a href=#dom-track-error id=the-track-element:dom-track-error>ERROR</a> = 3;
  readonly attribute unsigned short <a href=#dom-track-readystate id=the-track-element:dom-track-readystate>readyState</a>;

  readonly attribute <a href=#texttrack id=the-track-element:texttrack>TextTrack</a> <a href=#dom-track-track id=the-track-element:dom-track-track>track</a>;
};</pre>
   </dl>

  <p><code id=the-track-element:the-track-element><a href=#the-track-element>track</a></code>要素は、著者が<a href=#media-element id=the-track-element:media-element-2>メディア要素</a>に対して明示的に外部調節された<a href=#text-track id=the-track-element:text-track-2>テキストトラック</a>を指定できる。この要素は、自分自身で何かを<a href=dom.html#represents id=the-track-element:represents>表す</a>ものではない。</p>

  <p><dfn id=attr-track-kind><code>kind</code></dfn>属性は、<a id=the-track-element:enumerated-attribute href=infrastructure.html#enumerated-attribute>列挙属性</a>である。以下の表は、この属性に対して定義されたキーワードを列挙する。各行の最初のセルに与えられるキーワードは、2番目のセルで与えられる状態に対応する。</p>

  <table><thead><tr><th>キーワード
     </th><th>状態
     </th><th>概要
   <tbody></th></tr><tr><td><dfn id=attr-track-kind-keyword-subtitles><code>subtitles</code></dfn>
     </td><td><dfn id=attr-track-kind-subtitles>Subtitles</dfn>
     </td><td>
      音声が利用可能な場合に適するが、理解できない（ユーザーが<a href=#media-resource id=the-track-element:media-resource>メディアリソース</a>のオーディオトラックの言語を理解していないためなど）対話の翻字または翻訳。ビデオにオーバーレイする。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-captions><code>captions</code></dfn>
     </td><td><dfn id=attr-track-kind-captions>Captions</dfn>
     </td><td>
      音声が利用できないか、はっきりと聞こえない場合適した（たとえば、無言である、周囲の騒音によってかき消される、またはユーザーが聴覚障害者であるので）、対話の翻字または翻訳、音響効果、関連する音楽の合図、およびその他の関連オーディオ情報。ビデオにオーバーレイし、難聴者に対して適切に表示される。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-descriptions><code>descriptions</code></dfn>
     </td><td><dfn id=attr-track-kind-descriptions>概要</dfn>
     </td><td>
      映像コンポーネントが不明瞭、利用できない、または使用可能でない（たとえばユーザーが運転中に画面なしでアプリケーションと情報をやりとりするため、またはユーザーが盲目であるため）際の音声合成に対して意図される、<a href=#media-resource id=the-track-element:media-resource-2>メディアリソース</a>のビデオコンポーネントのテキスト記述。オーディオとして合成される。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-chapters><code>chapters</code></dfn>
     </td><td><dfn id=attr-track-kind-chapters>Chapters</dfn>
     </td><td>
      <a href=#media-resource id=the-track-element:media-resource-3>メディアリソース</a>のナビゲートに使用されることを意図した、章のタイトル。ユーザーエージェントのインターフェース内のインタラクティブな（潜在的に入れ子な）リストとして表示される。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-metadata><code>metadata</code></dfn>
     </td><td><dfn id=attr-track-kind-metadata>Metadata</dfn>
     </td><td>
      トラックは、スクリプトから使用するためのものである。ユーザーエージェントによって表示されない。
  </td></tr></table>

  <p>属性は省略してもよい。<i id=the-track-element:missing-value-default><a href=infrastructure.html#missing-value-default>欠損値のデフォルト</a></i>は、<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles>subtitles</a>状態である。<i id=the-track-element:invalid-value-default><a href=infrastructure.html#invalid-value-default>無効値のデフォルト</a></i>は、<a href=#attr-track-kind-metadata id=the-track-element:attr-track-kind-metadata>metadata</a>状態である。</p>

  <p><dfn id=attr-track-src><code>src</code></dfn>属性はテキストトラックデータのアドレスを与える。値は、<a id=the-track-element:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>でなければならない。この属性は存在しなければならない。</p>

  

  <p>If the element has a <code id=the-track-element:attr-track-src-2><a href=#attr-track-src>src</a></code> attribute whose value is not the
  empty string and whose value, when the attribute was set, could be successfully <a href=infrastructure.html#parse-a-url id=the-track-element:parse-a-url>parsed</a> relative to the element's <a id=the-track-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>, then the
  element's <dfn id=track-url>track URL</dfn> is the <a id=the-track-element:resulting-url-string href=infrastructure.html#resulting-url-string>resulting URL string</a>. Otherwise, the element's
  <a href=#track-url id=the-track-element:track-url>track URL</a> is the empty string.</p>

  

  <p>要素の<a href=#track-url id=the-track-element:track-url-2>トラックURL</a>がWebVTTリソースを識別し、かつその要素の<code id=the-track-element:attr-track-kind-2><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-metadata id=the-track-element:attr-track-kind-metadata-2>メタデータ</a>状態でない場合、WebVTTファイルは<a id=the-track-element:webvtt-file-using-cue-text href=infrastructure.html#webvtt-file-using-cue-text>キューテキストを使用したWebVTTファイル</a>でなければならない。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p>さらに、要素の<a href=#track-url id=the-track-element:track-url-3>トラックURL</a>がWebVTTリソースを識別し、かつその要素の<code id=the-track-element:attr-track-kind-3><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-chapters id=the-track-element:attr-track-kind-chapters>chapters</a>状態である場合、WebVTTファイルは<a id=the-track-element:webvtt-file-using-chapter-title-text href=infrastructure.html#webvtt-file-using-chapter-title-text>キューテキストを使用したWebVTTファイル</a>と<a id=the-track-element:webvtt-file-using-only-nested-cues href=infrastructure.html#webvtt-file-using-only-nested-cues>ネストのみされたキューを使用したWebVTTファイル</a>の両方でなければならない。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><dfn id=attr-track-srclang><code>srclang</code></dfn>属性は、テキストトラックデータの言語を提供する。値は、妥当なBCP 47言語タグでなければならない。要素の<code id=the-track-element:attr-track-kind-4><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles-2>字幕</a>状態である場合、この属性は存在しなければならない。<a href=references.html#refsBCP47>[BCP47]</a></p>

  

  <p>If the element has a <code id=the-track-element:attr-track-srclang-2><a href=#attr-track-srclang>srclang</a></code> attribute whose value is
  not the empty string, then the element's <dfn id=track-language>track language</dfn> is the value of the attribute.
  Otherwise, the element has no <a href=#track-language id=the-track-element:track-language>track language</a>.</p>

  

  <p><dfn id=attr-track-label><code>label</code></dfn>属性は、トラックのユーザーが読めるタイトルを与える。それらのユーザーインターフェースで<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles-3>字幕</a>、<a href=#attr-track-kind-captions id=the-track-element:attr-track-kind-captions>キャプション</a>、および<a href=#attr-track-kind-descriptions id=the-track-element:attr-track-kind-descriptions>音声解説トラック</a>を一覧表示する際に、このタイトルはユーザーエージェントによって使用される。</p>

  <p><code id=the-track-element:attr-track-label-2><a href=#attr-track-label>label</a></code>属性の値は属性が存在する場合、空文字列であってはならない。また、同じ状態にある<code id=the-track-element:attr-track-kind-5><a href=#attr-track-kind>kind</a></code>属性の同じ<a href=#media-element id=the-track-element:media-element-3>メディア要素</a>に属する2つの<code id=the-track-element:the-track-element-2><a href=#the-track-element>track</a></code>要素の子があってはならず、その<code id=the-track-element:attr-track-srclang-3><a href=#attr-track-srclang>srclang</a></code>は属性が欠落しているか、同じ言語を表す値を持つ、およびその<code id=the-track-element:attr-track-label-3><a href=#attr-track-label>label</a></code>属性が再び両方欠落するか、または両方同じ値を持つかの両方である。</p>

  

  <p>If the element has a <code id=the-track-element:attr-track-label-4><a href=#attr-track-label>label</a></code> attribute whose value is not
  the empty string, then the element's <dfn id=track-label>track label</dfn> is the value of the attribute.
  Otherwise, the element's <a href=#track-label id=the-track-element:track-label>track label</a> is an empty string.</p>

  

  <p><dfn id=attr-track-default><code>default</code></dfn>属性は<a id=the-track-element:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>であり、指定された場合に、ユーザーの嗜好が別のトラックがより適切であることを示さない場合、トラックが有効にされることを示す。</p>

  <p>各<a href=#media-element id=the-track-element:media-element-4>メディア要素</a>は、<code id=the-track-element:attr-track-kind-6><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles-4>subtitles</a>または<a href=#attr-track-kind-captions id=the-track-element:attr-track-kind-captions-2>captions</a>状態かつ<code id=the-track-element:attr-track-default-2><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-3><a href=#the-track-element>track</a></code>要素の子を複数個持ってはならない。</p>

  <p>各<a href=#media-element id=the-track-element:media-element-5>メディア要素</a>は、<code id=the-track-element:attr-track-kind-7><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-descriptions id=the-track-element:attr-track-kind-descriptions-2>description</a>状態かつ<code id=the-track-element:attr-track-default-3><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-4><a href=#the-track-element>track</a></code>要素の子を複数個持ってはならない。</p>

  <p>各<a href=#media-element id=the-track-element:media-element-6>メディア要素</a>は、<code id=the-track-element:attr-track-kind-8><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-chapters id=the-track-element:attr-track-kind-chapters-2>chapters</a>状態かつ<code id=the-track-element:attr-track-default-4><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-5><a href=#the-track-element>track</a></code>要素の子を複数個持ってはならない。</p>

  <p class=note><code id=the-track-element:attr-track-kind-9><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-metadata id=the-track-element:attr-track-kind-metadata-3>metadata</a>状態かつ<code id=the-track-element:attr-track-default-5><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-6><a href=#the-track-element>track</a></code>の数に制限は存在しない。</p>

  <dl class=domintro><dt><var>track</var> . <code id=the-track-element:dom-track-readystate-2><a href=#dom-track-readystate>readyState</a></code><dd>
    <p>以下のリストから番号で表される<a href=#text-track-readiness-state id=the-track-element:text-track-readiness-state>テキストトラック準備状態</a>を返す：</p>
    <dl><dt><var>track</var> . <code id=the-track-element:dom-track-none-2><a href=#dom-track-none>NONE</a></code> (0)<dd>
      <p><a href=#text-track-not-loaded id=the-track-element:text-track-not-loaded>テキストトラックがロードされない</a>状態。</p>
     <dt><var>track</var> . <code id=the-track-element:dom-track-loading-2><a href=#dom-track-loading>LOADING</a></code> (1)<dd>
      <p><a href=#text-track-loading id=the-track-element:text-track-loading>テキストトラックがロードしている</a>状態。</p>
     <dt><var>track</var> . <code id=the-track-element:dom-track-loaded-2><a href=#dom-track-loaded>LOADED</a></code> (2)<dd>
      <p><a href=#text-track-loaded id=the-track-element:text-track-loaded>テキストトラックがロードされた</a>状態。</p>
     <dt><var>track</var> . <code id=the-track-element:dom-track-error-2><a href=#dom-track-error>ERROR</a></code> (3)<dd>
      <p><a href=#text-track-failed-to-load id=the-track-element:text-track-failed-to-load>テキストトラックがロードに失敗した</a>状態。</p>
     </dl>
   <dt><var>track</var> . <code id=the-track-element:dom-track-track-2><a href=#dom-track-track>track</a></code><dd>

    <p><code id=the-track-element:the-track-element-7><a href=#the-track-element>track</a></code>要素の<a href=#text-track id=the-track-element:text-track-3>テキストトラック</a>に対応する<code id=the-track-element:texttrack-2><a href=#texttrack>TextTrack</a></code>オブジェクトを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-track-readystate><code>readyState</code></dfn> attribute must return the
  numeric value corresponding to the <a href=#text-track-readiness-state id=the-track-element:text-track-readiness-state-2>text track readiness state</a> of the
  <code id=the-track-element:the-track-element-8><a href=#the-track-element>track</a></code> element's <a href=#text-track id=the-track-element:text-track-4>text track</a>, as defined by the following list:</p>

  <dl><dt><dfn id=dom-track-none><code>NONE</code></dfn> (numeric value 0)<dd><a href=#text-track-not-loaded id=the-track-element:text-track-not-loaded-2>テキストトラックがロードされない</a>状態。<dt><dfn id=dom-track-loading><code>LOADING</code></dfn> (numeric value 1)<dd><a href=#text-track-loading id=the-track-element:text-track-loading-2>テキストトラックがロードしている</a>状態。<dt><dfn id=dom-track-loaded><code>LOADED</code></dfn> (numeric value 2)<dd><a href=#text-track-loaded id=the-track-element:text-track-loaded-2>テキストトラックがロードされた</a>状態。<dt><dfn id=dom-track-error><code>ERROR</code></dfn> (numeric value 3)<dd><a href=#text-track-failed-to-load id=the-track-element:text-track-failed-to-load-2>テキストトラックがロードに失敗した</a>状態。</dl>

  <p>The <dfn id=dom-track-track><code>track</code></dfn> IDL attribute must, on getting,
  return the <code id=the-track-element:the-track-element-9><a href=#the-track-element>track</a></code> element's <a href=#text-track id=the-track-element:text-track-5>text track</a>'s corresponding
  <code id=the-track-element:texttrack-3><a href=#texttrack>TextTrack</a></code> object.</p>

  <p>The <dfn id=dom-track-src><code>src</code></dfn>, <dfn id=dom-track-srclang><code>srclang</code></dfn>, <dfn id=dom-track-label><code>label</code></dfn>, and <dfn id=dom-track-default><code>default</code></dfn> IDL attributes must <a id=the-track-element:reflect href=infrastructure.html#reflect>reflect</a> the
  respective content attributes of the same name. The <dfn id=dom-track-kind><code>kind</code></dfn> IDL attribute must <a id=the-track-element:reflect-2 href=infrastructure.html#reflect>reflect</a> the content
  attribute of the same name, <a id=the-track-element:limited-to-only-known-values href=infrastructure.html#limited-to-only-known-values>limited to only known values</a>.</p>

  

  <div class=example>

   <p>このビデオは、複数言語の字幕を持つ：</p>

   <pre>&lt;video src="brave.webm"&gt;
 &lt;track kind=subtitles src=brave.en.vtt srclang=en label="English"&gt;
 &lt;track kind=captions src=brave.en.hoh.vtt srclang=en label="English for the Hard of Hearing"&gt;
 &lt;track kind=subtitles src=brave.fr.vtt srclang=fr lang=fr label="Français"&gt;
 &lt;track kind=subtitles src=brave.de.vtt srclang=de lang=de label="Deutsch"&gt;
&lt;/video&gt;</pre>

   <p>（最後の2つの<code id=the-track-element:attr-lang><a href=dom.html#attr-lang>lang</a></code>属性は、字幕自体の言語ではなく、<code id=the-track-element:attr-track-label-5><a href=#attr-track-label>label</a></code>属性の言語を記述する。字幕の言語は<code id=the-track-element:attr-track-srclang-4><a href=#attr-track-srclang>srclang</a></code>属性によって与えられる。）</p>

  </div>


  <h4 id=media-elements>4.8.13 メディア要素</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28625" title="Provide a hook for media session integration (blocking paused-&gt;playing transition)">28625</a></div>

  <p><a href=#htmlmediaelement id=media-elements:htmlmediaelement>HTMLMediaElement</a> objects (<code id=media-elements:the-audio-element><a href=#the-audio-element>audio</a></code> and <code id=media-elements:the-video-element><a href=#the-video-element>video</a></code>, in this
  specification) are simply known as <dfn id=media-element>media elements</dfn>.</p>

  <pre class=idl>enum <dfn id=canplaytyperesult>CanPlayTypeResult</dfn> { "" /* <a href=#dom-canplaytyperesult-nil id=media-elements:dom-canplaytyperesult-nil>empty string</a> */, "<a href=#dom-canplaytyperesult-maybe id=media-elements:dom-canplaytyperesult-maybe>maybe</a>", "<a href=#dom-canplaytyperesult-probably id=media-elements:dom-canplaytyperesult-probably>probably</a>" };
typedef (<a id=media-elements:mediastream href=infrastructure.html#mediastream>MediaStream</a> or <a id=media-elements:mediasource href=infrastructure.html#mediasource>MediaSource</a> or <a id=media-elements:blob href=infrastructure.html#blob>Blob</a>) <dfn id=mediaprovider>MediaProvider</dfn>;
interface <dfn id=htmlmediaelement>HTMLMediaElement</dfn> : <a id=media-elements:htmlelement href=dom.html#htmlelement>HTMLElement</a> {

  // error state
  readonly attribute <a href=#mediaerror id=media-elements:mediaerror>MediaError</a>? <a href=#dom-media-error id=media-elements:dom-media-error>error</a>;

  // network state
  attribute DOMString <a href=#dom-media-src id=media-elements:dom-media-src>src</a>;
  attribute <a href=#mediaprovider id=media-elements:mediaprovider>MediaProvider</a>? <a href=#dom-media-srcobject id=media-elements:dom-media-srcobject>srcObject</a>;
  readonly attribute DOMString <a href=#dom-media-currentsrc id=media-elements:dom-media-currentsrc>currentSrc</a>;
  attribute DOMString? <a href=#dom-media-crossorigin id=media-elements:dom-media-crossorigin>crossOrigin</a>;
  const unsigned short <a href=#dom-media-network_empty id=media-elements:dom-media-network_empty>NETWORK_EMPTY</a> = 0;
  const unsigned short <a href=#dom-media-network_idle id=media-elements:dom-media-network_idle>NETWORK_IDLE</a> = 1;
  const unsigned short <a href=#dom-media-network_loading id=media-elements:dom-media-network_loading>NETWORK_LOADING</a> = 2;
  const unsigned short <a href=#dom-media-network_no_source id=media-elements:dom-media-network_no_source>NETWORK_NO_SOURCE</a> = 3;
  readonly attribute unsigned short <a href=#dom-media-networkstate id=media-elements:dom-media-networkstate>networkState</a>;
  attribute DOMString <a href=#dom-media-preload id=media-elements:dom-media-preload>preload</a>;
  readonly attribute <a href=#timeranges id=media-elements:timeranges>TimeRanges</a> <a href=#dom-media-buffered id=media-elements:dom-media-buffered>buffered</a>;
  void <a href=#dom-media-load id=media-elements:dom-media-load>load</a>();
  <a href=#canplaytyperesult id=media-elements:canplaytyperesult>CanPlayTypeResult</a> <a href=#dom-navigator-canplaytype id=media-elements:dom-navigator-canplaytype>canPlayType</a>(DOMString type);

  // ready state
  const unsigned short <a href=#dom-media-have_nothing id=media-elements:dom-media-have_nothing>HAVE_NOTHING</a> = 0;
  const unsigned short <a href=#dom-media-have_metadata id=media-elements:dom-media-have_metadata>HAVE_METADATA</a> = 1;
  const unsigned short <a href=#dom-media-have_current_data id=media-elements:dom-media-have_current_data>HAVE_CURRENT_DATA</a> = 2;
  const unsigned short <a href=#dom-media-have_future_data id=media-elements:dom-media-have_future_data>HAVE_FUTURE_DATA</a> = 3;
  const unsigned short <a href=#dom-media-have_enough_data id=media-elements:dom-media-have_enough_data>HAVE_ENOUGH_DATA</a> = 4;
  readonly attribute unsigned short <a href=#dom-media-readystate id=media-elements:dom-media-readystate>readyState</a>;
  readonly attribute boolean <a href=#dom-media-seeking id=media-elements:dom-media-seeking>seeking</a>;

  // playback state
  attribute double <a href=#dom-media-currenttime id=media-elements:dom-media-currenttime>currentTime</a>;
  void <a href=#dom-media-fastseek id=media-elements:dom-media-fastseek>fastSeek</a>(double time);
  readonly attribute unrestricted double <a href=#dom-media-duration id=media-elements:dom-media-duration>duration</a>;
  <a href=infrastructure.html#idl-object id=media-elements:idl-object>object</a> <a href=#dom-media-getstartdate id=media-elements:dom-media-getstartdate>getStartDate</a>();
  readonly attribute boolean <a href=#dom-media-paused id=media-elements:dom-media-paused>paused</a>;
  attribute double <a href=#dom-media-defaultplaybackrate id=media-elements:dom-media-defaultplaybackrate>defaultPlaybackRate</a>;
  attribute double <a href=#dom-media-playbackrate id=media-elements:dom-media-playbackrate>playbackRate</a>;
  readonly attribute <a href=#timeranges id=media-elements:timeranges-2>TimeRanges</a> <a href=#dom-media-played id=media-elements:dom-media-played>played</a>;
  readonly attribute <a href=#timeranges id=media-elements:timeranges-3>TimeRanges</a> <a href=#dom-media-seekable id=media-elements:dom-media-seekable>seekable</a>;
  readonly attribute boolean <a href=#dom-media-ended id=media-elements:dom-media-ended>ended</a>;
  attribute boolean <a href=#dom-media-autoplay id=media-elements:dom-media-autoplay>autoplay</a>;
  attribute boolean <a href=#dom-media-loop id=media-elements:dom-media-loop>loop</a>;
  Promise&lt;void&gt; <a href=#dom-media-play id=media-elements:dom-media-play>play</a>();
  void <a href=#dom-media-pause id=media-elements:dom-media-pause>pause</a>();

  // media controller
  attribute DOMString <a href=#dom-media-mediagroup id=media-elements:dom-media-mediagroup>mediaGroup</a>;
  attribute <a href=#mediacontroller id=media-elements:mediacontroller>MediaController</a>? <a href=#dom-media-controller id=media-elements:dom-media-controller>controller</a>;

  // controls
  attribute boolean <a href=#dom-media-controls id=media-elements:dom-media-controls>controls</a>;
  attribute double <a href=#dom-media-volume id=media-elements:dom-media-volume>volume</a>;
  attribute boolean <a href=#dom-media-muted id=media-elements:dom-media-muted>muted</a>;
  attribute boolean <a href=#dom-media-defaultmuted id=media-elements:dom-media-defaultmuted>defaultMuted</a>;

  // tracks
  [SameObject] readonly attribute <a href=#audiotracklist id=media-elements:audiotracklist>AudioTrackList</a> <a href=#dom-media-audiotracks id=media-elements:dom-media-audiotracks>audioTracks</a>;
  [SameObject] readonly attribute <a href=#videotracklist id=media-elements:videotracklist>VideoTrackList</a> <a href=#dom-media-videotracks id=media-elements:dom-media-videotracks>videoTracks</a>;
  [SameObject] readonly attribute <a href=#texttracklist id=media-elements:texttracklist>TextTrackList</a> <a href=#dom-media-texttracks id=media-elements:dom-media-texttracks>textTracks</a>;
  <a href=#texttrack id=media-elements:texttrack>TextTrack</a> <a href=#dom-media-addtexttrack id=media-elements:dom-media-addtexttrack>addTextTrack</a>(<a href=#texttrackkind id=media-elements:texttrackkind>TextTrackKind</a> kind, optional DOMString label = "", optional DOMString language = "");
};</pre>

  <p><dfn id=media-element-attributes>メディア要素の属性</dfn>、<code id=media-elements:attr-media-src><a href=#attr-media-src>src</a></code>、<code id=media-elements:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code>、<code id=media-elements:attr-media-preload><a href=#attr-media-preload>preload</a></code>、<code id=media-elements:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code>、<code id=media-elements:attr-media-mediagroup><a href=#attr-media-mediagroup>mediagroup</a></code>、<code id=media-elements:attr-media-loop><a href=#attr-media-loop>loop</a></code>、<code id=media-elements:attr-media-muted><a href=#attr-media-muted>muted</a></code>、および<code id=media-elements:attr-media-controls><a href=#attr-media-controls>controls</a></code>は、すべての<a href=#media-element id=media-elements:media-element>メディア要素</a>に適用する。これらは、この節で定義される。</p>

  

  

  <p><a href=#media-element id=media-elements:media-element-2>メディア要素</a>は、音声データ、または映像と音声のデータをユーザーに示すために使用される。この節は音声や映像に対する<a href=#media-element id=media-elements:media-element-3>メディア要素</a>にも同様に適用されるので、これは、この節において<dfn id=media-data>メディアデータ</dfn>と見なされる。用語<dfn id=media-resource>メディアリソース</dfn>は、たとえば完全なビデオファイル、または完全なオーディオファイルなど、メディアデータの完全な集合を参照するために使用される。

  </p>

  <p><a href=#media-resource id=media-elements:media-resource>メディアリソース</a>は、複数のオーディオおよびビデオトラックを持つことができる。<a href=#media-element id=media-elements:media-element-4>メディア要素</a>の目的に対して、<a href=#media-resource id=media-elements:media-resource-2>メディアリソース</a>の映像データは、<a id=media-elements:event-loop href=webappapis.html#event-loop>イベントループ</a>が<a href=webappapis.html#step1>ステップ1</a>に到達する際に要素の<code id=media-elements:dom-media-videotracks-2><a href=#dom-media-videotracks>videoTracks</a></code>属性で（もしあれば）与えられるように現在選択されるトラックのみであり、かつ<a href=#media-resource id=media-elements:media-resource-3>メディアリソース</a>の音声データは、<a id=media-elements:event-loop-2 href=webappapis.html#event-loop>イベントループ</a>が<a href=webappapis.html#step1>ステップ1</a>に到達する際に（もしあれば）要素の<code id=media-elements:dom-media-audiotracks-2><a href=#dom-media-audiotracks>audioTracks</a></code>属性によって与えられるすべての現在の有効なトラックは、混合の結果である。</p>

  <p class=note><code id=media-elements:the-audio-element-2><a href=#the-audio-element>audio</a></code>と<code id=media-elements:the-video-element-2><a href=#the-video-element>video</a></code>の両方の要素は、オーディオとビデオの両方に使用できる。2つの間の主な違いは、<code id=media-elements:the-video-element-3><a href=#the-video-element>video</a></code>要素が持つのに対して、<code id=media-elements:the-audio-element-3><a href=#the-audio-element>audio</a></code>要素は、視覚コンテンツ（ビデオやキャプションなど）に対する再生領域を持たないことだけである。</p>

  

  <p>Except where otherwise explicitly specified, the <a id=media-elements:task-source href=webappapis.html#task-source>task source</a> for all the tasks
  <a href=webappapis.html#queue-a-task id=media-elements:queue-a-task>queued</a> in this section and its subsections is the <dfn id=media-element-event-task-source>media
  element event task source</dfn> of the <a href=#media-element id=media-elements:media-element-5>media element</a> in question.</p>

  



  <h5 id=error-codes>4.8.13.1 エラーコード</h5>

  <dl class=domintro><dt><var>media</var> . <code id=error-codes:dom-media-error><a href=#dom-media-error>error</a></code><dd>

    <p>要素の現在のエラー状態を表す<code id=error-codes:mediaerror><a href=#mediaerror>MediaError</a></code>オブジェクトを返す。</p>

    <p>エラーが無い場合nullを返す。</p>

   </dl>

  

  <p>All <a href=#media-element id=error-codes:media-element>media elements</a> have an associated error status, which
  records the last error the element encountered since its <a href=#concept-media-load-algorithm id=error-codes:concept-media-load-algorithm>resource selection algorithm</a> was last invoked. The
  <dfn id=dom-media-error><code>error</code></dfn> attribute, on getting, must return the
  <code id=error-codes:mediaerror-2><a href=#mediaerror>MediaError</a></code> object created for this last error, or null if there has not been an
  error.</p>

  

  <pre class=idl>interface <dfn id=mediaerror>MediaError</dfn> {
  const unsigned short <a href=#dom-mediaerror-media_err_aborted id=error-codes:dom-mediaerror-media_err_aborted>MEDIA_ERR_ABORTED</a> = 1;
  const unsigned short <a href=#dom-mediaerror-media_err_network id=error-codes:dom-mediaerror-media_err_network>MEDIA_ERR_NETWORK</a> = 2;
  const unsigned short <a href=#dom-mediaerror-media_err_decode id=error-codes:dom-mediaerror-media_err_decode>MEDIA_ERR_DECODE</a> = 3;
  const unsigned short <a href=#dom-mediaerror-media_err_src_not_supported id=error-codes:dom-mediaerror-media_err_src_not_supported>MEDIA_ERR_SRC_NOT_SUPPORTED</a> = 4;
  readonly attribute unsigned short <a href=#dom-mediaerror-code id=error-codes:dom-mediaerror-code>code</a>;
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=error-codes:dom-media-error-2><a href=#dom-media-error>error</a></code> . <code id=error-codes:dom-mediaerror-code-2><a href=#dom-mediaerror-code>code</a></code><dd>

    <p>下記のリストから、現在のエラーのエラーコードを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-mediaerror-code><code>code</code></dfn> attribute of a
  <code id=error-codes:mediaerror-3><a href=#mediaerror>MediaError</a></code> object must return the code for the error, which must be one of the
  following:</p>

  

  <dl><dt><dfn id=dom-mediaerror-media_err_aborted><code>MEDIA_ERR_ABORTED</code></dfn>（数値1）<dd><a href=#media-resource id=error-codes:media-resource>メディアリソース</a>に対するフェッチプロセスが、ユーザーの要求でユーザーエージェントによって中止された。<dt><dfn id=dom-mediaerror-media_err_network><code>MEDIA_ERR_NETWORK</code></dfn>（数値2）<dd>リソースが使用可能であることが確立された後、一部の説明のネットワークエラーは、ユーザーエージェントに<a href=#media-resource id=error-codes:media-resource-2>メディアリソース</a>のフェッチを停止させた。<dt><dfn id=dom-mediaerror-media_err_decode><code>MEDIA_ERR_DECODE</code></dfn>（数値3）<dd>リソースが使用可能であることが確立された後に、<a href=#media-resource id=error-codes:media-resource-3>メディアリソース</a>をデコードする間に説明のエラーが発生した。<dt><dfn id=dom-mediaerror-media_err_src_not_supported><code>MEDIA_ERR_SRC_NOT_SUPPORTED</code></dfn>（数値4）<dd><code id=error-codes:attr-media-src><a href=#attr-media-src>src</a></code>属性または<a href=#assigned-media-provider-object id=error-codes:assigned-media-provider-object>assigned media provider object</a>で示される<a href=#media-resource id=error-codes:media-resource-4>メディアリソース</a>は適さなかった。</dl>



  <h5 id=location-of-the-media-resource>4.8.13.2 メディアリソースの場所</h5>

  <p><a href=#media-element id=location-of-the-media-resource:media-element>メディア要素</a>の<dfn id=attr-media-src><code>src</code></dfn>コンテンツ属性は、表示するメディアリソース（ビデオ、オーディオ）のアドレスを与える。属性が存在する場合、<a id=location-of-the-media-resource:valid-non-empty-url-potentially-surrounded-by-spaces href=infrastructure.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>を含まなければならない。</p>

  <p><code id=location-of-the-media-resource:names:-the-itemprop-attribute><a href=microdata.html#names:-the-itemprop-attribute>itemprop</a></code>が<a href=#media-element id=location-of-the-media-resource:media-element-2>メディア要素</a>要素で指定される場合、<code id=location-of-the-media-resource:attr-media-src><a href=#attr-media-src>src</a></code>属性も指定されなければならない。</p>

  <p><a href=#media-element id=location-of-the-media-resource:media-element-3>メディア要素</a>上の<dfn id=attr-media-crossorigin><code>crossorigin</code></dfn>コンテンツ属性は、<a id=location-of-the-media-resource:cors-settings-attribute href=infrastructure.html#cors-settings-attribute>CORS設定属性</a>である。</p>

  

  <p id=concept-media-load-algorithm-at-creation>If a <a href=#media-element id=location-of-the-media-resource:media-element-4>media element</a> is created with a
  <code id=location-of-the-media-resource:attr-media-src-2><a href=#attr-media-src>src</a></code> attribute, the user agent must <a id=location-of-the-media-resource:immediately href=infrastructure.html#immediately>immediately</a> invoke the
  <a href=#media-element id=location-of-the-media-resource:media-element-5>media element</a>'s <a href=#concept-media-load-algorithm id=location-of-the-media-resource:concept-media-load-algorithm>resource selection
  algorithm</a>.</p>

  <p>If a <code id=location-of-the-media-resource:attr-media-src-3><a href=#attr-media-src>src</a></code> attribute of a <a href=#media-element id=location-of-the-media-resource:media-element-6>media element</a> is set
  or changed, the user agent must invoke the <a href=#media-element id=location-of-the-media-resource:media-element-7>media element</a>'s <a href=#media-element-load-algorithm id=location-of-the-media-resource:media-element-load-algorithm>media element load
  algorithm</a>. (<em>Removing</em> the <code id=location-of-the-media-resource:attr-media-src-4><a href=#attr-media-src>src</a></code> attribute does
  not do this, even if there are <code id=location-of-the-media-resource:the-source-element><a href=#the-source-element>source</a></code> elements present.)</p>

  <p><a href=#media-element id=location-of-the-media-resource:media-element-8>メディア要素</a>の<dfn id=dom-media-src><code>src</code></dfn>IDL属性は、同じ名前のコンテンツ属性を<a id=location-of-the-media-resource:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p><dfn id=dom-media-crossorigin><code>crossOrigin</code></dfn> IDL属性は、<code id=location-of-the-media-resource:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code>コンテンツ属性を<a id=location-of-the-media-resource:reflect-2 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  

  <p>A <dfn id=media-provider-object>media provider object</dfn> is an object that can represent a <a href=#media-resource id=location-of-the-media-resource:media-resource>media resource</a>,
  separate from a <a id=location-of-the-media-resource:url href=infrastructure.html#url>URL</a>. <code id=location-of-the-media-resource:mediastream><a href=infrastructure.html#mediastream>MediaStream</a></code> objects, <code id=location-of-the-media-resource:mediasource><a href=infrastructure.html#mediasource>MediaSource</a></code>
  objects, <code id=location-of-the-media-resource:blob><a href=infrastructure.html#blob>Blob</a></code> objects, and <code id=location-of-the-media-resource:file><a href=infrastructure.html#file>File</a></code> objects are all <a href=#media-provider-object id=location-of-the-media-resource:media-provider-object>media provider objects</a>.</p>

  

  <p>Each <a href=#media-element id=location-of-the-media-resource:media-element-9>media element</a> can have an <dfn id=assigned-media-provider-object>assigned media provider object</dfn>, which is a
  <a href=#media-provider-object id=location-of-the-media-resource:media-provider-object-2>media provider object</a>. When a <a href=#media-element id=location-of-the-media-resource:media-element-10>media element</a> is created, it has no
  <a href=#assigned-media-provider-object id=location-of-the-media-resource:assigned-media-provider-object>assigned media provider object</a>.</p>

  

  <dl class=domintro><dt><var>media</var> . <code id=location-of-the-media-resource:dom-media-srcobject><a href=#dom-media-srcobject>srcObject</a></code> [ = <var>source</var> ]<dd>

    <p>Allows the <a href=#media-element id=location-of-the-media-resource:media-element-11>media element</a> to be assigned a <a href=#media-provider-object id=location-of-the-media-resource:media-provider-object-3>media provider object</a>.</p>

   <dt><var>media</var> . <code id=location-of-the-media-resource:dom-media-currentsrc><a href=#dom-media-currentsrc>currentSrc</a></code><dd>

    <p>Returns the address of the current <a href=#media-resource id=location-of-the-media-resource:media-resource-2>media resource</a>, if any.</p>

    <p>Returns the empty string when there is no <a href=#media-resource id=location-of-the-media-resource:media-resource-3>media resource</a>, or it doesn't have an address.</p>

   </dl>

  

  <p>The <dfn id=dom-media-currentsrc><code>currentSrc</code></dfn> IDL attribute must initially be set to
  the empty string. Its value is changed by the <a href=#concept-media-load-algorithm id=location-of-the-media-resource:concept-media-load-algorithm-2>resource
  selection algorithm</a> defined below.</p>

  <p>The <dfn id=dom-media-srcobject><code>srcObject</code></dfn> IDL attribute, on getting,
  must return the element's <a href=#assigned-media-provider-object id=location-of-the-media-resource:assigned-media-provider-object-2>assigned media provider object</a>, if any, or null otherwise.
  On setting, it must set the element's <a href=#assigned-media-provider-object id=location-of-the-media-resource:assigned-media-provider-object-3>assigned media provider object</a> to the new
  value, and then invoke the element's <a href=#media-element-load-algorithm id=location-of-the-media-resource:media-element-load-algorithm-2>media element load algorithm</a>.</p>

  

  <p class=note><a href=#media-resource id=location-of-the-media-resource:media-resource-4>メディアリソース</a>を指定する3つの方法、<code id=location-of-the-media-resource:dom-media-srcobject-2><a href=#dom-media-srcobject>srcObject</a></code> IDL属性、<code id=location-of-the-media-resource:attr-media-src-5><a href=#attr-media-src>src</a></code>属性、および<code id=location-of-the-media-resource:the-source-element-2><a href=#the-source-element>source</a></code>要素がある。The IDL attribute takes priority, followed by the content attribute, followed by the elements.</p>



  <h5 id=mime-types>4.8.13.3 MIMEタイプ</h5>

  <p><a href=#media-resource id=mime-types:media-resource>メディアリソース</a>は、<code>codec</code>パラメータをもつ一部の場合において、その<em>タイプ</em>、具体的には<a id=mime-types:mime-type href=infrastructure.html#mime-type>MIMEタイプ</a>の観点から説明できる。（<code>codec</code>パラメータが許可されるまたはMIMEタイプに依存しないかどうかに関わらない）<a href=references.html#refsRFC6381>[RFC6381]</a></p>

  <p>タイプは、通常多少不完全な記述である。たとえば"<code>video/mpeg</code>"は、コンテナタイプが何であるかを除いて何でも言わず、"<code>video/mp4; codecs="avc1.42E01E, mp4a.40.2"</code>"のような型も実際のビットレート（最大ビットレートのみ）のような情報が含まれない。したがって、タイプを指定されるユーザーエージェントは、（信頼のレベルを変化させた）そのタイプのメディアを再生できる<em>かもしれない</em>かどうか、または間違いなくそのタイプのメディアを再生<em>できない</em>かどうかをたびたび知ることができる。</p>

  <p><dfn id=a-type-that-the-user-agent-knows-it-cannot-render>ユーザーエージェントがレンダリングできないことを認識するタイプ</dfn>は、たとえばコンテナの種類を認識しない、または列挙されたコーデックをサポートしないため、ユーザーエージェントは間違いなくサポートしないことにリソースを記述するものである。</p>

  <p>パラメータのない""<code id=mime-types:application/octet-stream><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>" <a id=mime-types:mime-type-2 href=infrastructure.html#mime-type>MIMEタイプ</a>は、<a href=#a-type-that-the-user-agent-knows-it-cannot-render id=mime-types:a-type-that-the-user-agent-knows-it-cannot-render>ユーザーエージェントがレンダリングできないことを認識するタイプ</a>にならない。潜在的な<a href=#media-resource id=mime-types:media-resource-2>メディアリソース</a>にラベルを付けるために使用される際、ユーザーエージェントは、明示的な<a href=infrastructure.html#content-type id=mime-types:content-type>Content-Typeメタデータ</a>の欠如と同等としてそのタイプを扱わなければならない。</p>

  <p class=note>ここでパラメータなしの<a id=mime-types:mime-type-3 href=infrastructure.html#mime-type>MIMEタイプ</a> "<code id=mime-types:application/octet-stream-2><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>"は特殊な場合である。任意のパラメータが型に出現する場合、その型は他の<a id=mime-types:mime-type-4 href=infrastructure.html#mime-type>MIMEタイプ</a>と同じように扱われる。これは、未知の<a id=mime-types:mime-type-5 href=infrastructure.html#mime-type>MIMEタイプ</a>のパラメータは無視されるべきであるという規則からの逸脱である。</p> 

  <dl class=domintro><dt><var>media</var> . <code id=mime-types:dom-navigator-canplaytype><a href=#dom-navigator-canplaytype>canPlayType</a></code>(<var>type</var>)<dd>

    <p>ユーザーエージェントはそれが与えられた型のメディアリソースを再生できる"maybe"、または"probably"方法に基づいて空の文字列（否定応答）を返す。</p>

   </dl>

  

  <p>The <dfn id=dom-navigator-canplaytype><code>canPlayType(<var>type</var>)</code></dfn> method must return <dfn id=dom-canplaytyperesult-nil>the
  empty string</dfn> if <var>type</var> is <a href=#a-type-that-the-user-agent-knows-it-cannot-render id=mime-types:a-type-that-the-user-agent-knows-it-cannot-render-2>a type that the user agent knows it cannot
  render</a> or is the type "<code id=mime-types:application/octet-stream-3><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>"; it must return "<dfn id=dom-canplaytyperesult-probably><code>probably</code></dfn>" if the user agent is confident
  that the type represents a <a href=#media-resource id=mime-types:media-resource-3>media resource</a> that it can render if used in with this
  <code id=mime-types:the-audio-element><a href=#the-audio-element>audio</a></code> or <code id=mime-types:the-video-element><a href=#the-video-element>video</a></code> element; and it must return "<dfn id=dom-canplaytyperesult-maybe><code>maybe</code></dfn>" otherwise. Implementors are encouraged
  to return "<code id=mime-types:dom-canplaytyperesult-maybe><a href=#dom-canplaytyperesult-maybe>maybe</a></code>" unless the type can be
  confidently established as being supported or not. Generally, a user agent should never return
  "<code id=mime-types:dom-canplaytyperesult-probably><a href=#dom-canplaytyperesult-probably>probably</a></code>" for a type that allows the <code>codecs</code> parameter if that parameter is not present.</p>

  

  <div class=example>

   <p>このスクリプトは、ユーザーエージェントが動的に<code id=mime-types:the-video-element-2><a href=#the-video-element>video</a></code>要素またはプラグインを使用するかどうかを決定する（架空の）新たなフォーマットをサポートしているかどうかをテストする。</p>

   <pre>&lt;section id="video"&gt;
 &lt;p&gt;&lt;a href="playing-cats.nfv"&gt;Download video&lt;/a&gt;&lt;/p&gt;
&lt;/section&gt;
&lt;script&gt;
 var videoSection = document.getElementById('video');
 var videoElement = document.createElement('video');
 var support = videoElement.canPlayType('video/x-new-fictional-format;codecs="kittens,bunnies"');
 if (support != "probably" &amp;&amp; "New Fictional Video Plugin" in navigator.plugins) {
   // not confident of browser support
   // but we have a plugin
   // so use plugin instead
   videoElement = document.createElement("embed");
 } else if (support == "") {
   // no support from browser and no plugin
   // do nothing
   videoElement = null;
 }
 if (videoElement) {
   while (videoSection.hasChildNodes())
     videoSection.removeChild(videoSection.firstChild);
   videoElement.setAttribute("src", "playing-cats.nfv");
   videoSection.appendChild(videoElement);
 }
&lt;/script&gt;</pre>

  </div>

  <p class=note><code id=mime-types:the-source-element><a href=#the-source-element>source</a></code>要素の<code id=mime-types:attr-source-type><a href=#attr-source-type>type</a></code>属性は、ユーザーエージェントがレンダリングできないフォーマットを使用するリソースのダウンロードを回避できる。</p>


  <h5 id=network-states>4.8.13.4 ネットワーク状態</h5>

  <dl class=domintro><dt><var>media</var> . <code id=network-states:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code><dd>

    <p>下記のリストのコードから、要素に対するネットワーク活動の現在の状態を返す。</p>

   </dl>

  

  <p>As <a href=#media-element id=network-states:media-element>media elements</a> interact with the network, their current
  network activity is represented by the <dfn id=dom-media-networkstate><code>networkState</code></dfn> attribute. On getting, it must
  return the current network state of the element, which must be one of the following values:</p>

  

  <dl><dt><dfn id=dom-media-network_empty><code>NETWORK_EMPTY</code></dfn>（数値0）<dd>The element has not yet been initialised. すべての属性は、初期状態である。<dt><dfn id=dom-media-network_idle><code>NETWORK_IDLE</code></dfn>（数値1）<dd>The element's <a href=#concept-media-load-algorithm id=network-states:concept-media-load-algorithm>resource
   selection algorithm</a> is active and has selected a <a href=#media-resource id=network-states:media-resource>resource</a>, but it is not actually using the network at this time.<dt><dfn id=dom-media-network_loading><code>NETWORK_LOADING</code></dfn>（数値2）<dd>ユーザーエージェントは、積極的にデータをダウンロードしようとしている。<dt><dfn id=dom-media-network_no_source><code>NETWORK_NO_SOURCE</code></dfn>（数値3）<dd>The element's <a href=#concept-media-load-algorithm id=network-states:concept-media-load-algorithm-2>resource
   selection algorithm</a> is active, but it has not yet found a <a href=#media-resource id=network-states:media-resource-2>resource</a> to use.</dl>

  

  <p>The <a href=#concept-media-load-algorithm id=network-states:concept-media-load-algorithm-3>resource selection algorithm</a> defined
  below describes exactly when the <code id=network-states:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code>
  attribute changes value and what events fire to indicate changes in this state.</p>

  




  <h5 id=loading-the-media-resource>4.8.13.5 メディアリソースの読み込み</h5><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27989" title="Should audio and video tracks be exposed cross-origin?">27989</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22471" title='"buffered" attribute returns a new object each time'>22471</a></div>

  <dl class=domintro><dt><var>media</var> . <code id=loading-the-media-resource:dom-media-load><a href=#dom-media-load>load</a></code>()<dd>

    <p>要素をリセットさせ、最初から新しい<a href=#media-resource id=loading-the-media-resource:media-resource>メディアリソース</a>の選択と読み込みを開始させる。</p>

   </dl>

  

  <p>All <a href=#media-element id=loading-the-media-resource:media-element>media elements</a> have an <dfn id=autoplaying-flag>autoplaying flag</dfn>,
  which must begin in the true state, and a <dfn id=delaying-the-load-event-flag>delaying-the-load-event flag</dfn>, which must
  begin in the false state. While the <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag>delaying-the-load-event flag</a> is true, the element
  must <a id=loading-the-media-resource:delay-the-load-event href=syntax.html#delay-the-load-event>delay the load event</a> of its document.</p>

  <p>When the <dfn id=dom-media-load><code>load()</code></dfn> method on a <a href=#media-element id=loading-the-media-resource:media-element-2>media
  element</a> is invoked, the user agent must run the <a href=#media-element-load-algorithm id=loading-the-media-resource:media-element-load-algorithm>media element load
  algorithm</a>.</p>

  <p>The <dfn id=media-element-load-algorithm>media element load algorithm</dfn> consists of the following steps.</p>

  <ol><li><p>Abort any already-running instance of the <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm>resource selection algorithm</a> for this
   element.</li><li>

    <p>If there are any <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task>tasks</a> from the <a href=#media-element id=loading-the-media-resource:media-element-3>media
    element</a>'s <a href=#media-element-event-task-source id=loading-the-media-resource:media-element-event-task-source>media element event task source</a> in one of the <a href=webappapis.html#task-queue id=loading-the-media-resource:task-queue>task queues</a>, then remove those tasks.</p>



    <p><a href=#reject-pending-play-promises id=loading-the-media-resource:reject-pending-play-promises>Reject pending play promises</a> with <code id=loading-the-media-resource:aborterror><a href=infrastructure.html#aborterror>AbortError</a></code>.</p>

    <p class=note>Basically, pending events and callbacks are discarded and pending promises are
    rejected when the media element starts loading a new resource.</p>

   </li><li><p>If the <a href=#media-element id=loading-the-media-resource:media-element-4>media element</a>'s <code id=loading-the-media-resource:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code> is set to <code id=loading-the-media-resource:dom-media-network_loading><a href=#dom-media-network_loading>NETWORK_LOADING</a></code> or <code id=loading-the-media-resource:dom-media-network_idle><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>, <a id=loading-the-media-resource:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a
   simple event</a> named <code id=loading-the-media-resource:event-media-abort><a href=#event-media-abort>abort</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-5>media
   element</a>.</li><li>

    <p>If the <a href=#media-element id=loading-the-media-resource:media-element-6>media element</a>'s <code id=loading-the-media-resource:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code>
    is not set to <code id=loading-the-media-resource:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, then run these
    substeps:</p>

    <ol><li><p><a id=loading-the-media-resource:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-emptied><a href=#event-media-emptied>emptied</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-7>media element</a>.</li><li><p>If a fetching process is in progress for the <a href=#media-element id=loading-the-media-resource:media-element-8>media
     element</a>, the user agent should stop it.</li><li><p><a href="#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks">Forget the media element's media-resource-specific tracks</a>.</li><li><p>If <code id=loading-the-media-resource:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> is not set to <code id=loading-the-media-resource:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, then set it to that state.
     
     
     
     </li><li><p>If the <code id=loading-the-media-resource:dom-media-paused><a href=#dom-media-paused>paused</a></code> attribute is false, then set it to
     true.</li><li><p>If <code id=loading-the-media-resource:dom-media-seeking><a href=#dom-media-seeking>seeking</a></code> is true, set it to false.</li><li>

      <p>Set the <a href=#current-playback-position id=loading-the-media-resource:current-playback-position>current playback position</a> to 0.</p>

      <p>Set the <a href=#official-playback-position id=loading-the-media-resource:official-playback-position>official playback position</a> to 0.</p>

      <p>If this changed the <a href=#official-playback-position id=loading-the-media-resource:official-playback-position-2>official playback position</a>, then <a id=loading-the-media-resource:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a>
      to <a id=loading-the-media-resource:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-9>media element</a>.</p>

     </li><li><p>Set the <a href=#timeline-offset id=loading-the-media-resource:timeline-offset>timeline offset</a> to Not-a-Number (NaN).</li><li>

      <p>Update the <code id=loading-the-media-resource:dom-media-duration><a href=#dom-media-duration>duration</a></code> attribute to Not-a-Number
      (NaN).</p>

      <p class=note>The user agent <a href=#durationChange>will not</a> fire a <code id=loading-the-media-resource:event-media-durationchange><a href=#event-media-durationchange>durationchange</a></code> event for this particular change of
      the duration.</p>

     </li></ol>

   </li><li><p>Set the <code id=loading-the-media-resource:dom-media-playbackrate><a href=#dom-media-playbackrate>playbackRate</a></code> attribute to the value of
   the <code id=loading-the-media-resource:dom-media-defaultplaybackrate><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> attribute.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error><a href=#dom-media-error>error</a></code> attribute to null and the
   <a href=#autoplaying-flag id=loading-the-media-resource:autoplaying-flag>autoplaying flag</a> to true.</li><li><p>Invoke the <a href=#media-element id=loading-the-media-resource:media-element-10>media element</a>'s <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-2>resource selection algorithm</a>.</li><li>

    <p class=note>Playback of any previously playing <a href=#media-resource id=loading-the-media-resource:media-resource-2>media resource</a> for this element
    stops.</p>

   </li></ol>

  <p>The <dfn id=concept-media-load-algorithm>resource selection algorithm</dfn> for a
  <a href=#media-element id=loading-the-media-resource:media-element-11>media element</a> is as follows. This algorithm is always invoked as part of a <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-2>task</a>, but one
  of the first steps in the algorithm is to return and continue running the remaining steps
  <a id=loading-the-media-resource:in-parallel href=infrastructure.html#in-parallel>in parallel</a>. In addition, this algorithm interacts
  closely with the <a id=loading-the-media-resource:event-loop href=webappapis.html#event-loop>event loop</a> mechanism; in particular, it has <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section>synchronous sections</a> (which are triggered as part of the <a id=loading-the-media-resource:event-loop-2 href=webappapis.html#event-loop>event loop</a>
  algorithm). Steps in such sections are marked with ⌛.</p>

  <ol><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-3><a href=#dom-media-networkstate>networkState</a></code> attribute to
   the <code id=loading-the-media-resource:dom-media-network_no_source><a href=#dom-media-network_no_source>NETWORK_NO_SOURCE</a></code> value.</li><li><p>Set the element's <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag>show poster flag</a> to true.</li><li><p>Set the <a href=#media-element id=loading-the-media-resource:media-element-12>media element</a>'s <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-2>delaying-the-load-event flag</a> to true
   (this <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-2>delays the load event</a>).</li><li><p><a id=loading-the-media-resource:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>, allowing the <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-3>task</a> that invoked this algorithm to continue. The <a id=loading-the-media-resource:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous
   section</a> consists of all the remaining steps of this algorithm until the algorithm says the
   <a id=loading-the-media-resource:synchronous-section-3 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section-4>synchronous sections</a> are marked with ⌛.)</li><li>

    <p>⌛ If the <a href=#media-element id=loading-the-media-resource:media-element-13>media element</a>'s <a href=#blocked-on-parser id=loading-the-media-resource:blocked-on-parser>blocked-on-parser</a> flag is false,
    then <a href=#populate-the-list-of-pending-text-tracks id=loading-the-media-resource:populate-the-list-of-pending-text-tracks>populate the list of pending text tracks</a>.</p>

   </li><li>

    <p>⌛ If the <a href=#media-element id=loading-the-media-resource:media-element-14>media element</a> has an <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object>assigned media provider
    object</a>, then let <var>mode</var> be <i>object</i>.</p>

    <p>⌛ Otherwise, if the <a href=#media-element id=loading-the-media-resource:media-element-15>media element</a> has no <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-2>assigned media provider
    object</a> but has a <code id=loading-the-media-resource:attr-media-src><a href=#attr-media-src>src</a></code>
    attribute, then let <var>mode</var> be <i>attribute</i>.</p>

    <p>⌛ Otherwise, if the <a href=#media-element id=loading-the-media-resource:media-element-16>media element</a> does not have an <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-3>assigned media provider
    object</a> and does not have a <code id=loading-the-media-resource:attr-media-src-2><a href=#attr-media-src>src</a></code> attribute, but does have a <code id=loading-the-media-resource:the-source-element><a href=#the-source-element>source</a></code> element child, then
    let <var>mode</var> be <i>children</i> and let <var>candidate</var>
    be the first such <code id=loading-the-media-resource:the-source-element-2><a href=#the-source-element>source</a></code> element child in <a id=loading-the-media-resource:tree-order href=infrastructure.html#tree-order>tree order</a>.</p>

    <p>⌛ Otherwise the <a href=#media-element id=loading-the-media-resource:media-element-17>media element</a> has no <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-4>assigned media provider
    object</a> and has neither a <code id=loading-the-media-resource:attr-media-src-3><a href=#attr-media-src>src</a></code> attribute nor a <code id=loading-the-media-resource:the-source-element-3><a href=#the-source-element>source</a></code> element child: set the
    <code id=loading-the-media-resource:dom-media-networkstate-4><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, and abort these steps; the
    <a id=loading-the-media-resource:synchronous-section-5 href=webappapis.html#synchronous-section>synchronous section</a> ends.</p>

   </li><li><p>⌛ Set the <a href=#media-element id=loading-the-media-resource:media-element-18>media element</a>'s <code id=loading-the-media-resource:dom-media-networkstate-5><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-2><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</li><li><p>⌛ <a id=loading-the-media-resource:queue-a-task-4 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event-4 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-loadstart><a href=#event-media-loadstart>loadstart</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-19>media element</a>.</li><li>

    <p>Run the appropriate steps from the following list:</p>

    <dl class=switch><dt>If <var>mode</var> is <i>object</i><dd>

      <ol><li><p>⌛ Set the <code id=loading-the-media-resource:dom-media-currentsrc><a href=#dom-media-currentsrc>currentSrc</a></code> attribute to
       the empty string.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-6 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-2 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Run the <a href=#concept-media-load-resource id=loading-the-media-resource:concept-media-load-resource>resource fetch algorithm</a>
       with the <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-5>assigned media provider object</a>. If that algorithm returns without
       aborting <em>this</em> one, then the load failed.</li><li><p><i>Failed with media provider</i>: Reaching this step indicates that the media
       resource failed to load. <a id=loading-the-media-resource:queue-a-task-5 href=webappapis.html#queue-a-task>Queue a task</a> to run the <a href=#dedicated-media-source-failure-steps id=loading-the-media-resource:dedicated-media-source-failure-steps>dedicated media source
       failure steps</a>.</li><li><p>Wait for the <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-4>task</a> queued by the previous step to have
       executed.</li><li><p>Abort these steps. The element won't attempt to load another resource until this
       algorithm is triggered again.</li></ol>

     <dt>If <var>mode</var> is <i>attribute</i><dd>

      <ol><li><p>⌛ If the <code id=loading-the-media-resource:attr-media-src-4><a href=#attr-media-src>src</a></code>
       attribute's value is the empty string, then end the <a id=loading-the-media-resource:synchronous-section-7 href=webappapis.html#synchronous-section>synchronous section</a>, and jump
       down to the <i>failed with attribute</i> step below.</li><li><p>⌛ Let <var>urlString</var> be the <a id=loading-the-media-resource:resulting-url-string href=infrastructure.html#resulting-url-string>resulting URL string</a> that
       would have resulted from <a href=infrastructure.html#parse-a-url id=loading-the-media-resource:parse-a-url>parsing</a> the <a id=loading-the-media-resource:url href=infrastructure.html#url>URL</a>
       specified by the <code id=loading-the-media-resource:attr-media-src-5><a href=#attr-media-src>src</a></code> attribute's value relative to the
       <a href=#media-element id=loading-the-media-resource:media-element-20>media element</a>'s <a id=loading-the-media-resource:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> when the <code id=loading-the-media-resource:attr-media-src-6><a href=#attr-media-src>src</a></code> attribute was last changed.</p>
       

       </li><li><p>⌛ If <var>urlString</var> was obtained successfully, set the <code id=loading-the-media-resource:dom-media-currentsrc-2><a href=#dom-media-currentsrc>currentSrc</a></code> attribute to <var>urlString</var>.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-8 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-3 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>If <var>urlString</var> was obtained successfully, run the <a href=#concept-media-load-resource id=loading-the-media-resource:concept-media-load-resource-2>resource fetch algorithm</a> with
       <var>urlString</var>. If that algorithm returns without aborting <em>this</em> one, then the
       load failed.</li><li><p><i>Failed with attribute</i>: Reaching this step indicates that the media resource
       failed to load or that the given <a id=loading-the-media-resource:url-2 href=infrastructure.html#url>URL</a> could not be <a href=infrastructure.html#parse-a-url id=loading-the-media-resource:parse-a-url-2>parsed</a>. <a id=loading-the-media-resource:queue-a-task-6 href=webappapis.html#queue-a-task>Queue a task</a> to run the <a href=#dedicated-media-source-failure-steps id=loading-the-media-resource:dedicated-media-source-failure-steps-2>dedicated media source
       failure steps</a>.</li><li><p>Wait for the <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-5>task</a> queued by the previous step to have
       executed.</li><li><p>Abort these steps. The element won't attempt to load another resource until this
       algorithm is triggered again.</li></ol>

     <dt>Otherwise (<var>mode</var> is <i>children</i>)<dd>

      <ol><li>

        <p>⌛ Let <var>pointer</var> be a position defined by two adjacent nodes in the
        <a href=#media-element id=loading-the-media-resource:media-element-21>media element</a>'s child list, treating the start of the list (before the first
        child in the list, if any) and end of the list (after the last child in the list, if any) as
        nodes in their own right. One node is the node before <var>pointer</var>, and the
        other node is the node after <var>pointer</var>. Initially, let <var>pointer</var> be the position between the <var>candidate</var> node and the
        next node, if there are any, or the end of the list, if it is the last node.</p>

        <p>As <a id=loading-the-media-resource:nodes-are-inserted href=infrastructure.html#nodes-are-inserted>nodes are inserted</a> and <a href=infrastructure.html#nodes-are-removed id=loading-the-media-resource:nodes-are-removed>removed</a> into the <a href=#media-element id=loading-the-media-resource:media-element-22>media element</a>, <var>pointer</var> must be updated as follows:</p>

        <dl><dt>If a new <a href=infrastructure.html#nodes-are-inserted id=loading-the-media-resource:nodes-are-inserted-2>node is inserted</a> between the two nodes that define <var>pointer</var><dd>Let <var>pointer</var> be the point between the node before <var>pointer</var> and the new node. In other words, insertions at <var>pointer</var> go after <var>pointer</var>.<dt>If the node before <var>pointer</var> is removed<dd>Let <var>pointer</var> be the point between the node after <var>pointer</var> and the node before the node after <var>pointer</var>. In
         other words, <var>pointer</var> doesn't move relative to the remaining nodes.<dt>If the node after <var>pointer</var> is removed<dd>Let <var>pointer</var> be the point between the node before <var>pointer</var> and the node after the node before <var>pointer</var>. Just
         as with the previous case, <var>pointer</var> doesn't move relative to the remaining
         nodes.</dl>

        <p>Other changes don't affect <var>pointer</var>.</p>

       </li><li><p>⌛ <i>Process candidate</i>: If <var>candidate</var> does not have a
       <code id=loading-the-media-resource:attr-source-src><a href=#attr-source-src>src</a></code> attribute, or if its <code id=loading-the-media-resource:attr-source-src-2><a href=#attr-source-src>src</a></code> attribute's value is the empty string, then end the
       <a id=loading-the-media-resource:synchronous-section-9 href=webappapis.html#synchronous-section>synchronous section</a>, and jump down to the <i>failed with elements</i> step
       below.</li><li><p>⌛ Let <var>urlString</var> be the <a id=loading-the-media-resource:resulting-url-string-2 href=infrastructure.html#resulting-url-string>resulting URL string</a> that
       would have resulted from <a href=infrastructure.html#parse-a-url id=loading-the-media-resource:parse-a-url-3>parsing</a> the <a id=loading-the-media-resource:url-3 href=infrastructure.html#url>URL</a>
       specified by <var>candidate</var>'s <code id=loading-the-media-resource:attr-source-src-3><a href=#attr-source-src>src</a></code>
       attribute's value relative to the <var>candidate</var>'s <a id=loading-the-media-resource:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> when the
       <code id=loading-the-media-resource:attr-source-src-4><a href=#attr-source-src>src</a></code> attribute was last changed.</p> 

       </li><li><p>⌛ If <var>urlString</var> was not obtained successfully, then end the
       <a id=loading-the-media-resource:synchronous-section-10 href=webappapis.html#synchronous-section>synchronous section</a>, and jump down to the <i>failed with elements</i> step
       below.</li><li><p>⌛ If <var>candidate</var> has a <code id=loading-the-media-resource:attr-source-type><a href=#attr-source-type>type</a></code> attribute whose value, when parsed as a <a id=loading-the-media-resource:mime-type href=infrastructure.html#mime-type>MIME
       type</a> (including any codecs described by the <code>codecs</code> parameter, for
       types that define that parameter), represents <a href=#a-type-that-the-user-agent-knows-it-cannot-render id=loading-the-media-resource:a-type-that-the-user-agent-knows-it-cannot-render>a type that the user agent knows it cannot
       render</a>, then end the <a id=loading-the-media-resource:synchronous-section-11 href=webappapis.html#synchronous-section>synchronous section</a>, and jump down to the <i>failed with elements</i> step below.</li><li><p>⌛ Set the <code id=loading-the-media-resource:dom-media-currentsrc-3><a href=#dom-media-currentsrc>currentSrc</a></code> attribute to
       <var>urlString</var>.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-12 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-4 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Run the <a href=#concept-media-load-resource id=loading-the-media-resource:concept-media-load-resource-3>resource fetch algorithm</a>
       with <var>urlString</var>. If that algorithm returns without aborting <em>this</em> one,
       then the load failed.</li><li><p><i>Failed with elements</i>: <a id=loading-the-media-resource:queue-a-task-7 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event-5 href=webappapis.html#fire-a-simple-event>fire a simple
       event</a> named <code id=loading-the-media-resource:event-source-error><a href=#event-source-error>error</a></code> at the <var>candidate</var> element.</li><li><p><a id=loading-the-media-resource:await-a-stable-state-2 href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=loading-the-media-resource:synchronous-section-13 href=webappapis.html#synchronous-section>synchronous section</a>
       consists of all the remaining steps of this algorithm until the algorithm says the
       <a id=loading-the-media-resource:synchronous-section-14 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section-15>synchronous sections</a> are marked with ⌛.)</li><li><p>⌛ <a href="#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks-2">Forget the media element's media-resource-specific
       tracks</a>.</li><li><p>⌛ <i>Find next candidate</i>: Let <var>candidate</var> be
       null.</li><li><p>⌛ <i>Search loop</i>: If the node after <var>pointer</var> is
       the end of the list, then jump to the <i>waiting</i> step below.</li><li><p>⌛ If the node after <var>pointer</var> is a <code id=loading-the-media-resource:the-source-element-4><a href=#the-source-element>source</a></code> element,
       let <var>candidate</var> be that element.</li><li><p>⌛ Advance <var>pointer</var> so that the node before <var>pointer</var> is now the node that was after <var>pointer</var>, and the node
       after <var>pointer</var> is the node after the node that used to be after <var>pointer</var>, if any.</li><li><p>⌛ If <var>candidate</var> is null, jump back to the <i>search
       loop</i> step. Otherwise, jump back to the <i>process candidate</i> step.</li><li><p>⌛ <i>Waiting</i>: Set the element's <code id=loading-the-media-resource:dom-media-networkstate-6><a href=#dom-media-networkstate>networkState</a></code> attribute to the <code id=loading-the-media-resource:dom-media-network_no_source-2><a href=#dom-media-network_no_source>NETWORK_NO_SOURCE</a></code> value.</li><li><p>⌛ Set the element's <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag-2>show poster flag</a> to true.</li><li><p>⌛ <a id=loading-the-media-resource:queue-a-task-8 href=webappapis.html#queue-a-task>Queue a task</a> to set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-3>delaying-the-load-event
       flag</a> to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-3>delaying the load
       event</a>.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-16 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-5 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Wait until the node after <var>pointer</var> is a node other than the end of
       the list. (This step might wait forever.)</li><li><p><a id=loading-the-media-resource:await-a-stable-state-3 href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=loading-the-media-resource:synchronous-section-17 href=webappapis.html#synchronous-section>synchronous section</a>
       consists of all the remaining steps of this algorithm until the algorithm says the
       <a id=loading-the-media-resource:synchronous-section-18 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section-19>synchronous sections</a> are marked with ⌛.)</li><li><p>⌛ Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-4>delaying-the-load-event flag</a> back to true (this
       <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-4>delays the load event</a> again, in case it hasn't been
       fired yet).</p>

       </li><li><p>⌛ Set the <code id=loading-the-media-resource:dom-media-networkstate-7><a href=#dom-media-networkstate>networkState</a></code> back to <code id=loading-the-media-resource:dom-media-network_loading-3><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</li><li><p>⌛ Jump back to the <i>find next candidate</i> step above.</li></ol>

     </dl>

    <p>The <dfn id=dedicated-media-source-failure-steps>dedicated media source failure steps</dfn> are the following steps:</p>

    <ol><li><p>Set the <code id=loading-the-media-resource:dom-media-error-2><a href=#dom-media-error>error</a></code> attribute to a new
     <code id=loading-the-media-resource:mediaerror><a href=#mediaerror>MediaError</a></code> object whose <code id=loading-the-media-resource:dom-mediaerror-code><a href=#dom-mediaerror-code>code</a></code> attribute
     is set to <code id=loading-the-media-resource:dom-mediaerror-media_err_src_not_supported><a href=#dom-mediaerror-media_err_src_not_supported>MEDIA_ERR_SRC_NOT_SUPPORTED</a></code>.</li><li><p><a href="#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks-3">Forget the media element's media-resource-specific tracks</a>.</li><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-8><a href=#dom-media-networkstate>networkState</a></code> attribute to
     the <code id=loading-the-media-resource:dom-media-network_no_source-3><a href=#dom-media-network_no_source>NETWORK_NO_SOURCE</a></code> value.</li><li><p>Set the element's <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag-3>show poster flag</a> to true.</li><li><p><a id=loading-the-media-resource:fire-a-simple-event-6 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=loading-the-media-resource:event-media-error><a href=#event-media-error>error</a></code> at
     the <a href=#media-element id=loading-the-media-resource:media-element-23>media element</a>.</li><li><p><a href=#reject-pending-play-promises id=loading-the-media-resource:reject-pending-play-promises-2>Reject pending play promises</a> with <code id=loading-the-media-resource:notsupportederror><a href=infrastructure.html#notsupportederror>NotSupportedError</a></code>.</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-5>delaying-the-load-event flag</a> to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-5>delaying the load event</a>.</li></ol>

   </li></ol>

  <p>The <dfn id=concept-media-load-resource>resource fetch algorithm</dfn> for a <a href=#media-element id=loading-the-media-resource:media-element-24>media
  element</a> and a given <a id=loading-the-media-resource:absolute-url href=infrastructure.html#absolute-url>absolute URL</a> or <a href=#media-provider-object id=loading-the-media-resource:media-provider-object>media provider object</a> is as
  follows:</p>

  <ol><li><p>If the algorithm was invoked with a <a id=loading-the-media-resource:url-4 href=infrastructure.html#url>URL</a>, then let <var>mode</var> be
   <i>remote</i>, otherwise let <var>mode</var> be <i>local</i>.</li><li><p>If <var>mode</var> is <i>remote</i>, then let the <var>current media resource</var> be the
   resource given by the <a id=loading-the-media-resource:absolute-url-2 href=infrastructure.html#absolute-url>absolute URL</a> passed to this algorithm; otherwise, let the
   <var>current media resource</var> be the resource given by the <a href=#media-provider-object id=loading-the-media-resource:media-provider-object-2>media provider
   object</a>. Either way, the <var>current media resource</var> is now the element's <a href=#media-resource id=loading-the-media-resource:media-resource-3>media
   resource</a>.</li><li><p>Remove all <a href=#media-resource-specific-text-track id=loading-the-media-resource:media-resource-specific-text-track>media-resource-specific text
   tracks</a> from the <a href=#media-element id=loading-the-media-resource:media-element-25>media element</a>'s <a href=#list-of-pending-text-tracks id=loading-the-media-resource:list-of-pending-text-tracks>list of pending text tracks</a>, if
   any.</p>


   </li><li>

    <p>Run the appropriate steps from the following list:</p>

    <dl class=switch><dt>If <var>mode</var> is remote<dd>

      <ol><li>

        <p>Optionally, run the following substeps. This is the expected behaviour if the user agent
        intends to not attempt to fetch the resource until the user requests it explicitly (e.g. as
        a way to implement the <code id=loading-the-media-resource:attr-media-preload><a href=#attr-media-preload>preload</a></code> attribute's <code id=loading-the-media-resource:attr-media-preload-none><a href=#attr-media-preload-none>none</a></code> keyword).</p>

        <ol><li><p>Set the <code id=loading-the-media-resource:dom-media-networkstate-9><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_idle-2><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>.</li><li><p><a id=loading-the-media-resource:queue-a-task-9 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event-7 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-suspend><a href=#event-media-suspend>suspend</a></code> at the element.</li><li><p><a id=loading-the-media-resource:queue-a-task-10 href=webappapis.html#queue-a-task>Queue a task</a> to set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-6>delaying-the-load-event flag</a>
         to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-6>delaying the load
         event</a>.</li><li><p>Wait for the task to be run.</li><li><p>Wait for an implementation-defined event (e.g. the user requesting that the media
         element begin playback).</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-7>delaying-the-load-event flag</a> back to true (this <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-7>delays the load event</a> again, in case it hasn't been fired
         yet).</p>

         </li><li><p>Set the <code id=loading-the-media-resource:dom-media-networkstate-10><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-4><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</li></ol>

       </li><li>

        <p>Let <var>request</var> be the result of <a href=infrastructure.html#create-a-potential-cors-request id=loading-the-media-resource:create-a-potential-cors-request>creating a potential-CORS request</a> given
        <var>current media resource</var>'s <a id=loading-the-media-resource:absolute-url-3 href=infrastructure.html#absolute-url>absolute URL</a> and the <a href=#media-element id=loading-the-media-resource:media-element-26>media
        element</a>'s <code id=loading-the-media-resource:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> content attribute
        value.

        

        <p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=loading-the-media-resource:concept-request-client data-x-internal=concept-request-client>client</a> to the
        <a href=#media-element id=loading-the-media-resource:media-element-27>media element</a>'s <a id=loading-the-media-resource:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <code id=loading-the-media-resource:window><a href=browsers.html#window>Window</a></code> object's
        <a id=loading-the-media-resource:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a> and <a href=https://fetch.spec.whatwg.org/#concept-request-type id=loading-the-media-resource:concept-request-type data-x-internal=concept-request-type>type</a>
        to "<code>audio</code>" if the <a href=#media-element id=loading-the-media-resource:media-element-28>media element</a> is an <code id=loading-the-media-resource:the-audio-element><a href=#the-audio-element>audio</a></code>
        element and to "<code>video</code>" otherwise.

        

        <p><a href=https://fetch.spec.whatwg.org/#concept-fetch id=loading-the-media-resource:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>.

        

        <p>The <var>response</var>'s <a id=loading-the-media-resource:unsafe-response href=infrastructure.html#unsafe-response>unsafe response</a> obtained in this fashion, if any,
        contains the <a href=#media-data id=loading-the-media-resource:media-data>media data</a>. It can be <a id=loading-the-media-resource:cors-same-origin href=infrastructure.html#cors-same-origin>CORS-same-origin</a> or
        <a id=loading-the-media-resource:cors-cross-origin href=infrastructure.html#cors-cross-origin>CORS-cross-origin</a>; this affects whether subtitles referenced in the <a href=#media-data id=loading-the-media-resource:media-data-2>media
        data</a> are exposed in the API and, for <code id=loading-the-media-resource:the-video-element><a href=#the-video-element>video</a></code> elements, whether a
        <code id=loading-the-media-resource:the-canvas-element><a href=scripting.html#the-canvas-element>canvas</a></code> gets tainted when the video is drawn on it.</p>

        <p>The <dfn id=stall-timeout>stall timeout</dfn> is a user-agent defined length of time, which should be about
        three seconds. When a <a href=#media-element id=loading-the-media-resource:media-element-29>media element</a> that is actively attempting to obtain
        <a href=#media-data id=loading-the-media-resource:media-data-3>media data</a> has failed to receive any data for a duration equal to the <a href=#stall-timeout id=loading-the-media-resource:stall-timeout>stall
        timeout</a>, the user agent must <a id=loading-the-media-resource:queue-a-task-11 href=webappapis.html#queue-a-task>queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event-8 href=webappapis.html#fire-a-simple-event>fire a simple
        event</a> named <code id=loading-the-media-resource:event-media-stalled><a href=#event-media-stalled>stalled</a></code> at the element.</p>

        <p>User agents may allow users to selectively block or slow <a href=#media-data id=loading-the-media-resource:media-data-4>media data</a> downloads.
        When a <a href=#media-element id=loading-the-media-resource:media-element-30>media element</a>'s download has been blocked altogether, the user agent must
        act as if it was stalled (as opposed to acting as if the connection was closed). The rate of the
        download may also be throttled automatically by the user agent, e.g. to balance the download
        with other connections sharing the same bandwidth.</p>

        <p id=resourceSuspend>User agents may decide to not download more content at any time, e.g.
        after buffering five minutes of a one hour media resource, while waiting for the user to decide
        whether to play the resource or not, while waiting for user input in an interactive resource, or
        when the user navigates away from the page. When a <a href=#media-element id=loading-the-media-resource:media-element-31>media element</a>'s download has
        been suspended, the user agent must <a id=loading-the-media-resource:queue-a-task-12 href=webappapis.html#queue-a-task>queue a task</a>, to set the <code id=loading-the-media-resource:dom-media-networkstate-11><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_idle-3><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> and <a id=loading-the-media-resource:fire-a-simple-event-9 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named
        <code id=loading-the-media-resource:event-media-suspend-2><a href=#event-media-suspend>suspend</a></code> at the element. If and when downloading of the
        resource resumes, the user agent must <a id=loading-the-media-resource:queue-a-task-13 href=webappapis.html#queue-a-task>queue a task</a> to set the <code id=loading-the-media-resource:dom-media-networkstate-12><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-5><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>. Between the queuing of these tasks,
        the load is suspended (so <code id=loading-the-media-resource:event-media-progress><a href=#event-media-progress>progress</a></code> events don't fire,
        as described above).</p>

        <p class=note>The <code id=loading-the-media-resource:attr-media-preload-2><a href=#attr-media-preload>preload</a></code> attribute provides a hint
        regarding how much buffering the author thinks is advisable, even in the absence of the <code id=loading-the-media-resource:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> attribute.</p>

        <p>When a user agent decides to completely suspend a download, e.g., if it is waiting until
        the user starts playback before downloading any further content, the user agent must
        <a id=loading-the-media-resource:queue-a-task-14 href=webappapis.html#queue-a-task>queue a task</a> to set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-8>delaying-the-load-event flag</a> to
        false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-8>delaying the load event</a>.</p>

        <p>The user agent may use whatever means necessary to fetch the resource (within the constraints
        put forward by this and other specifications); for example, reconnecting to the server in the
        face of network errors, using HTTP range retrieval requests, or switching to a streaming
        protocol. The user agent must consider a resource erroneous only if it has given up trying to
        fetch it.</p>

        <p>To determine the format of the <a href=#media-resource id=loading-the-media-resource:media-resource-4>media resource</a>, the user agent must use the
        <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically id=loading-the-media-resource:content-type-sniffing:-video data-x-internal=content-type-sniffing:-video>rules for sniffing audio and video specifically</a>.</p>

        <p>While the load is not suspended (see below), every 350ms (±200ms) or for every byte
        received, whichever is <em>least</em> frequent, <a id=loading-the-media-resource:queue-a-task-15 href=webappapis.html#queue-a-task>queue a task</a> to <a id=loading-the-media-resource:fire-a-simple-event-10 href=webappapis.html#fire-a-simple-event>fire a simple
        event</a> named <code id=loading-the-media-resource:event-media-progress-2><a href=#event-media-progress>progress</a></code> at the element.</p>

        <p>The <a id=loading-the-media-resource:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-6>tasks</a> to
        process the data as it is being fetched must each <a id=loading-the-media-resource:immediately href=infrastructure.html#immediately>immediately</a> <a id=loading-the-media-resource:queue-a-task-16 href=webappapis.html#queue-a-task>queue a task</a> to
        run the first appropriate steps from the <a href=#media-data-processing-steps-list id=loading-the-media-resource:media-data-processing-steps-list>media data processing steps list</a>
        below. (A new task is used for this so that the work described below occurs relative to the
        <a href=#media-element-event-task-source id=loading-the-media-resource:media-element-event-task-source-2>media element event task source</a> rather than the <a id=loading-the-media-resource:networking-task-source-2 href=webappapis.html#networking-task-source>networking task
        source</a>.)</p>

        <p>When the <a id=loading-the-media-resource:networking-task-source-3 href=webappapis.html#networking-task-source>networking task source</a> has <a href=webappapis.html#queue-a-task id=loading-the-media-resource:queue-a-task-17>queued</a> the last <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-7>task</a> as part of fetching the
        <a href=#media-resource id=loading-the-media-resource:media-resource-5>media resource</a> (i.e. once the download has completed), if the fetching process
        completes without errors, including decoding the media data, and if all of the data is available
        to the user agent without network access, then, the user agent must move on to the <i>final step</i> below.
        This might never happen, e.g. when streaming an infinite resource such as Web radio, or if the
        resource is longer than the user agent's ability to cache data.</p>

        <p>While the user agent might still need network access to obtain parts of the <a href=#media-resource id=loading-the-media-resource:media-resource-6>media
        resource</a>, the user agent must remain on this step.</p>

        <p class=example>For example, if the user agent has discarded the first half of a video, the
        user agent will remain at this step even once the <a href=#ended-playback id=loading-the-media-resource:ended-playback>playback has
        ended</a>, because there is always the chance the user will seek back to the start. In fact,
        in this situation, once <a href=#ended-playback id=loading-the-media-resource:ended-playback-2>playback has ended</a>, the user agent
        will end up firing a <code id=loading-the-media-resource:event-media-suspend-3><a href=#event-media-suspend>suspend</a></code> event, as described
        earlier.</p>

       </li></ol>

     <dt>Otherwise (<var>mode</var> is <i>local</i>)<dd>

      <p>The resource described by the <var>current media resource</var>, if any, contains the
      <a href=#media-data id=loading-the-media-resource:media-data-5>media data</a>. It is <a id=loading-the-media-resource:cors-same-origin-2 href=infrastructure.html#cors-same-origin>CORS-same-origin</a>.  </p>

      <p>If the <var>current media resource</var> is a raw data stream (e.g. from a
      <code id=loading-the-media-resource:file><a href=infrastructure.html#file>File</a></code> object), then to determine the format of the <a href=#media-resource id=loading-the-media-resource:media-resource-7>media resource</a>,
      the user agent must use the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically id=loading-the-media-resource:content-type-sniffing:-video-2 data-x-internal=content-type-sniffing:-video>rules for sniffing audio and video specifically</a>.
      Otherwise, if the data stream is pre-decoded, then the format is the format given by the
      relevant specification.</p>

      <p>Whenever new data for the <var>current media resource</var> becomes available, <a id=loading-the-media-resource:queue-a-task-18 href=webappapis.html#queue-a-task>queue
      a task</a> to run the first appropriate steps from the <a href=#media-data-processing-steps-list id=loading-the-media-resource:media-data-processing-steps-list-2>media data processing steps
      list</a> below.</p>

      <p>When the <var>current media resource</var> is permanently exhausted (e.g. all the bytes of
      a <code id=loading-the-media-resource:blob><a href=infrastructure.html#blob>Blob</a></code> have been processed), if there were no decoding errors, then the user
      agent must move on to the <i>final step</i> below. This might never happen, e.g. if the
      <var>current media resource</var> is a <code id=loading-the-media-resource:mediastream><a href=infrastructure.html#mediastream>MediaStream</a></code>.</p>

     </dl>

    <p>The <dfn id=media-data-processing-steps-list>media data processing steps list</dfn> is as follows:</p>

    <dl class=switch><dt>If the <a href=#media-data id=loading-the-media-resource:media-data-6>media data</a> cannot be fetched at all, due to network errors, causing the
     user agent to give up trying to fetch the resource<dt>If the <a href=#media-data id=loading-the-media-resource:media-data-7>media data</a> can be fetched but is found by inspection to be in an
     unsupported format, or can otherwise not be rendered at all<dd>

      <p>DNS errors, HTTP 4xx and 5xx errors (and equivalents in other protocols), and other fatal
      network errors that occur before the user agent has established whether the <var>current media resource</var> is usable, as well as the file using an unsupported
      container format, or using unsupported codecs for all the data, must cause the user agent to
      execute the following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Abort this subalgorithm, returning to the <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-3>resource selection algorithm</a>.</p>

      </li></ol>

     <dt id=found-another-audio-track>If the <a href=#media-resource id=loading-the-media-resource:media-resource-8>media resource</a> is found to have an audio
     track<dd>

      <ol><li><p>Create an <code id=loading-the-media-resource:audiotrack><a href=#audiotrack>AudioTrack</a></code> object to represent the audio track.</li><li><p>Update the <a href=#media-element id=loading-the-media-resource:media-element-32>media element</a>'s <code id=loading-the-media-resource:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code> attribute's <code id=loading-the-media-resource:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>
       object with the new <code id=loading-the-media-resource:audiotrack-2><a href=#audiotrack>AudioTrack</a></code> object.</li><li><p>Let <var>enable</var> be <i>unknown</i>.</li><li>

        <p>If either the <a href=#media-resource id=loading-the-media-resource:media-resource-9>media resource</a> or the address of the <var>current
        media resource</var> indicate a particular set of audio tracks to enable, or if the user
        agent has information that would facilitate the selection of specific audio tracks to
        improve the user's experience, then: if this audio track is one of the ones to enable, then
        set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var>
        to <i>false</i>.</p>

        <p class=example>This could be triggered by <cite>Media Fragments URI</cite> fragment
        identifier syntax, but it could also be triggered e.g. by the user agent selecting a 5.1
        surround sound audio track over a stereo audio track. <a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>

       </li><li><p>If <var>enable</var> is still <i>unknown</i>, then, if the <a href=#media-element id=loading-the-media-resource:media-element-33>media
       element</a> does not yet have an <a href=#dom-audiotrack-enabled id=loading-the-media-resource:dom-audiotrack-enabled>enabled</a>
       audio track, then set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var> to <i>false</i>.</li><li><p>If <var>enable</var> is <i>true</i>, then enable this audio track,
       otherwise, do not enable this audio track.</li><li><p><a href=infrastructure.html#concept-event-fire id=loading-the-media-resource:concept-event-fire>Fire</a> a <a href=infrastructure.html#concept-events-trusted id=loading-the-media-resource:concept-events-trusted>trusted</a> event with the name <code id=loading-the-media-resource:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>, that does not bubble and is not cancelable,
       and that uses the <code id=loading-the-media-resource:trackevent><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=loading-the-media-resource:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code> attribute initialised to the new
       <code id=loading-the-media-resource:audiotrack-3><a href=#audiotrack>AudioTrack</a></code> object, at this <code id=loading-the-media-resource:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code> object.</li></ol>

     <dt id=found-another-video-track>If the <a href=#media-resource id=loading-the-media-resource:media-resource-10>media resource</a> is found to have a video
     track<dd>

      <ol><li><p>Create a <code id=loading-the-media-resource:videotrack><a href=#videotrack>VideoTrack</a></code> object to represent the video track.</li><li><p>Update the <a href=#media-element id=loading-the-media-resource:media-element-34>media element</a>'s <code id=loading-the-media-resource:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code> attribute's <code id=loading-the-media-resource:videotracklist><a href=#videotracklist>VideoTrackList</a></code>
       object with the new <code id=loading-the-media-resource:videotrack-2><a href=#videotrack>VideoTrack</a></code> object.</li><li><p>Let <var>enable</var> be <i>unknown</i>.</li><li>

        <p>If either the <a href=#media-resource id=loading-the-media-resource:media-resource-11>media resource</a> or the address of the <var>current
        media resource</var> indicate a particular set of video tracks to enable, or if the user
        agent has information that would facilitate the selection of specific video tracks to
        improve the user's experience, then: if this video track is the first such video track, then
        set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var>
        to <i>false</i>.</p>

        <p class=example>This could again be triggered by <cite>Media Fragments URI</cite>
        fragment identifier syntax.</p>

       </li><li><p>If <var>enable</var> is still <i>unknown</i>, then, if the <a href=#media-element id=loading-the-media-resource:media-element-35>media
       element</a> does not yet have a <a href=#dom-videotrack-selected id=loading-the-media-resource:dom-videotrack-selected>selected</a>
       video track, then set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var> to <i>false</i>.</li><li><p>If <var>enable</var> is <i>true</i>, then select this track and unselect any
       previously selected video tracks, otherwise, do not select this video track. If other tracks
       are unselected, then <a href=#toggle-video-track>a <code>change</code> event will be fired.</a></li><li><p><a href=infrastructure.html#concept-event-fire id=loading-the-media-resource:concept-event-fire-2>Fire</a> a <a href=infrastructure.html#concept-events-trusted id=loading-the-media-resource:concept-events-trusted-2>trusted</a> event with the name <code id=loading-the-media-resource:event-media-addtrack-2><a href=#event-media-addtrack>addtrack</a></code>, that does not bubble and is not cancelable,
       and that uses the <code id=loading-the-media-resource:trackevent-2><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=loading-the-media-resource:dom-trackevent-track-2><a href=#dom-trackevent-track>track</a></code> attribute initialised to the new
       <code id=loading-the-media-resource:videotrack-3><a href=#videotrack>VideoTrack</a></code> object, at this <code id=loading-the-media-resource:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code> object.</li></ol>

     <dt id=getting-media-metadata>Once enough of the <a href=#media-data id=loading-the-media-resource:media-data-8>media data</a> has been fetched to
     determine the duration of the <a href=#media-resource id=loading-the-media-resource:media-resource-12>media resource</a>, its dimensions, and other
     metadata<dd>

      <p>This indicates that the resource is usable. The user agent must follow these substeps:</p>

      <ol><li>

        <p><a href=#defineTimeline id=loading-the-media-resource:defineTimeline>Establish the media timeline</a> for the purposes of the <a href=#current-playback-position id=loading-the-media-resource:current-playback-position-2>current playback
        position</a> and the <a href=#earliest-possible-position id=loading-the-media-resource:earliest-possible-position>earliest possible position</a>, based on the <a href=#media-data id=loading-the-media-resource:media-data-9>media data</a>.</p>

       </li><li>

        <p>Update the <a href=#timeline-offset id=loading-the-media-resource:timeline-offset-2>timeline offset</a> to the date and time that corresponds to the zero
        time in the <a href=#media-timeline id=loading-the-media-resource:media-timeline>media timeline</a> established in the previous step, if any. If no
        explicit time and date is given by the <a href=#media-resource id=loading-the-media-resource:media-resource-13>media resource</a>, the <a href=#timeline-offset id=loading-the-media-resource:timeline-offset-3>timeline
        offset</a> must be set to Not-a-Number (NaN).</p>

       </li><li><p>Set the <a href=#current-playback-position id=loading-the-media-resource:current-playback-position-3>current playback position</a> and the <a href=#official-playback-position id=loading-the-media-resource:official-playback-position-3>official playback
       position</a> to the <a href=#earliest-possible-position id=loading-the-media-resource:earliest-possible-position-2>earliest possible position</a>.</li><li>

        <p>Update the <code id=loading-the-media-resource:dom-media-duration-2><a href=#dom-media-duration>duration</a></code> attribute with the time of
        the last frame of the resource, if known, on the <a href=#media-timeline id=loading-the-media-resource:media-timeline-2>media timeline</a> established
        above. If it is not known (e.g. a stream that is in principle infinite), update the <code id=loading-the-media-resource:dom-media-duration-3><a href=#dom-media-duration>duration</a></code> attribute to the value positive Infinity.</p>

        <p class=note>The user agent <a href=#durationChange>will</a> <a id=loading-the-media-resource:queue-a-task-19 href=webappapis.html#queue-a-task>queue a task</a>
        to <a id=loading-the-media-resource:fire-a-simple-event-11 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-durationchange-2><a href=#event-media-durationchange>durationchange</a></code> at the element at this point.</p>

       </li><li>

        <p>For <code id=loading-the-media-resource:the-video-element-2><a href=#the-video-element>video</a></code> elements, set the <code id=loading-the-media-resource:dom-video-videowidth><a href=#dom-video-videowidth>videoWidth</a></code> and <code id=loading-the-media-resource:dom-video-videoheight><a href=#dom-video-videoheight>videoHeight</a></code> attributes, and <a id=loading-the-media-resource:queue-a-task-20 href=webappapis.html#queue-a-task>queue a task</a>
        to <a id=loading-the-media-resource:fire-a-simple-event-12 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-resize><a href=#event-media-resize>resize</a></code> at
        the <a href=#media-element id=loading-the-media-resource:media-element-36>media element</a>.</p>

        <p class=note>Further <code id=loading-the-media-resource:event-media-resize-2><a href=#event-media-resize>resize</a></code> events will be fired
        if the dimensions subsequently change.</p>

       </li><li>

        <p>Set the <code id=loading-the-media-resource:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute to <code id=loading-the-media-resource:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>.</p>

        <p class=note>A <code id=loading-the-media-resource:event-media-loadedmetadata><a href=#event-media-loadedmetadata>loadedmetadata</a></code> DOM event
        <a href=#fire-loadedmetadata>will be fired</a> as part of setting the <code id=loading-the-media-resource:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute to a new value.</p>

        

       </li><li><p>Let <var>jumped</var> be false.</li><li><p>If the <a href=#media-element id=loading-the-media-resource:media-element-37>media element</a>'s <a href=#default-playback-start-position id=loading-the-media-resource:default-playback-start-position>default playback start position</a> is
       greater than zero, then <a href=#dom-media-seek id=loading-the-media-resource:dom-media-seek>seek</a> to that time, and let <var>jumped</var> be true.</li><li><p>Let the <a href=#media-element id=loading-the-media-resource:media-element-38>media element</a>'s <a href=#default-playback-start-position id=loading-the-media-resource:default-playback-start-position-2>default playback
       start position</a> be zero.</li><li><p>Let the <var>initial playback position</var> be zero.</li><li>

        <p>If either the <a href=#media-resource id=loading-the-media-resource:media-resource-14>media resource</a> or the address of the <var>current
        media resource</var> indicate a particular start time, then set the <var>initial playback
        position</var> to that time and, if <var>jumped</var> is still false, <a href=#dom-media-seek id=loading-the-media-resource:dom-media-seek-2>seek</a> to that time and let <var>jumped</var> be
        true.</p>

        <p class=example>For example, with media formats that support the <cite>Media Fragments
        URI</cite> fragment identifier syntax, the fragment identifier can be used to indicate a
        start position. <a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>

       </li><li><p>If there is no <a href=#dom-audiotrack-enabled id=loading-the-media-resource:dom-audiotrack-enabled-2>enabled</a> audio track, then
       enable an audio track. This <a href=#toggle-audio-track>will cause a <code>change</code> event to be fired</a>.</li><li><p>If there is no <a href=#dom-videotrack-selected id=loading-the-media-resource:dom-videotrack-selected-2>selected</a> video track,
       then select a video track. This <a href=#toggle-video-track>will cause a <code>change</code> event to be fired</a>.</li><li><p>If the <a href=#media-element id=loading-the-media-resource:media-element-39>media element</a> has a <a href=#current-media-controller id=loading-the-media-resource:current-media-controller>current media controller</a>, then:
       if <var>jumped</var> is true and the <var>initial playback position</var>,
       relative to the <a href=#current-media-controller id=loading-the-media-resource:current-media-controller-2>current media controller</a>'s timeline, is greater than the
       <a href=#current-media-controller id=loading-the-media-resource:current-media-controller-3>current media controller</a>'s <a href=#media-controller-position id=loading-the-media-resource:media-controller-position>media controller position</a>, then
       <a href=#seek-the-media-controller id=loading-the-media-resource:seek-the-media-controller>seek the media controller</a> to the <a href=#media-element id=loading-the-media-resource:media-element-40>media element</a>'s <var>initial
       playback position</var>, relative to the <a href=#current-media-controller id=loading-the-media-resource:current-media-controller-4>current media controller</a>'s timeline;
       otherwise, <a href=#dom-media-seek id=loading-the-media-resource:dom-media-seek-3>seek</a> the <a href=#media-element id=loading-the-media-resource:media-element-41>media element</a> to the
       <a href=#media-controller-position id=loading-the-media-resource:media-controller-position-2>media controller position</a>, relative to the <a href=#media-element id=loading-the-media-resource:media-element-42>media element</a>'s
       timeline.</li></ol>

      <p>Once the <code id=loading-the-media-resource:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code> attribute reaches <code id=loading-the-media-resource:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>, <a href=#fire-loadeddata>after
      the <code>loadeddata</code> event has been fired</a>, set the
      element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-9>delaying-the-load-event flag</a> to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-9>delaying the load event</a>.</p>

      <p class=note>A user agent that is attempting to reduce network usage while still fetching
      the metadata for each <a href=#media-resource id=loading-the-media-resource:media-resource-15>media resource</a> would also stop buffering at this point,
      following <a href=#resourceSuspend>the rules described previously</a>, which involve the
      <code id=loading-the-media-resource:dom-media-networkstate-13><a href=#dom-media-networkstate>networkState</a></code> attribute switching to the <code id=loading-the-media-resource:dom-media-network_idle-4><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value and a <code id=loading-the-media-resource:event-media-suspend-4><a href=#event-media-suspend>suspend</a></code> event firing.</p>

      <p class=note>The user agent is <em>required</em> to determine the duration of the
      <a href=#media-resource id=loading-the-media-resource:media-resource-16>media resource</a> and go through this step before playing.</p> 

     <dt>Once the entire <a href=#media-resource id=loading-the-media-resource:media-resource-17>media resource</a> has been fetched (but potentially before any of
     it has been decoded)<dd>

      <p><a id=loading-the-media-resource:fire-a-simple-event-13 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=loading-the-media-resource:event-media-progress-3><a href=#event-media-progress>progress</a></code>
      at the <a href=#media-element id=loading-the-media-resource:media-element-43>media element</a>.</p>

      <p>Set the <code id=loading-the-media-resource:dom-media-networkstate-14><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_idle-5><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> and <a id=loading-the-media-resource:fire-a-simple-event-14 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named
      <code id=loading-the-media-resource:event-media-suspend-5><a href=#event-media-suspend>suspend</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-44>media element</a>.</p>

      <p>If the user agent ever discards any <a href=#media-data id=loading-the-media-resource:media-data-10>media data</a> and then needs to resume the
      network activity to obtain it again, then it must <a id=loading-the-media-resource:queue-a-task-21 href=webappapis.html#queue-a-task>queue a task</a> to set the <code id=loading-the-media-resource:dom-media-networkstate-15><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-6><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</p>

      <p class=note>If the user agent can keep the <a href=#media-resource id=loading-the-media-resource:media-resource-18>media resource</a> loaded, then the
      algorithm will continue to its <i>final step</i> below, which aborts the algorithm.</p>

     <dt>If the connection is interrupted after some <a href=#media-data id=loading-the-media-resource:media-data-11>media data</a> has been received,
     causing the user agent to give up trying to fetch the resource<dd>

      <p>Fatal network errors that occur after the user agent has established whether the <var>current media resource</var> is usable (i.e. once the <a href=#media-element id=loading-the-media-resource:media-element-45>media element</a>'s
      <code id=loading-the-media-resource:dom-media-readystate-5><a href=#dom-media-readystate>readyState</a></code> attribute is no longer <code id=loading-the-media-resource:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>) must cause the user agent to execute the
      following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error-3><a href=#dom-media-error>error</a></code> attribute to a new
       <code id=loading-the-media-resource:mediaerror-2><a href=#mediaerror>MediaError</a></code> object whose <code id=loading-the-media-resource:dom-mediaerror-code-2><a href=#dom-mediaerror-code>code</a></code> attribute
       is set to <code id=loading-the-media-resource:dom-mediaerror-media_err_network><a href=#dom-mediaerror-media_err_network>MEDIA_ERR_NETWORK</a></code>.</li><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-16><a href=#dom-media-networkstate>networkState</a></code> attribute
       to the <code id=loading-the-media-resource:dom-media-network_idle-6><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value.</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-10>delaying-the-load-event flag</a> to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-10>delaying the load event</a>.</li><li><p><a id=loading-the-media-resource:fire-a-simple-event-15 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=loading-the-media-resource:event-media-error-2><a href=#event-media-error>error</a></code> at
       the <a href=#media-element id=loading-the-media-resource:media-element-46>media element</a>.</li><li><p>Abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-4>resource selection
       algorithm</a>.</li></ol>

     <dt id=fatal-decode-error>If the <a href=#media-data id=loading-the-media-resource:media-data-12>media data</a> is corrupted<dd>

      <p>Fatal errors in decoding the <a href=#media-data id=loading-the-media-resource:media-data-13>media data</a> that occur after the user agent has
      established whether the <var>current media resource</var> is usable (i.e. once the <a href=#media-element id=loading-the-media-resource:media-element-47>media element</a>'s
      <code id=loading-the-media-resource:dom-media-readystate-6><a href=#dom-media-readystate>readyState</a></code> attribute is no longer <code id=loading-the-media-resource:dom-media-have_nothing-3><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>) must cause the
      user agent to execute the following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error-4><a href=#dom-media-error>error</a></code> attribute to a new
       <code id=loading-the-media-resource:mediaerror-3><a href=#mediaerror>MediaError</a></code> object whose <code id=loading-the-media-resource:dom-mediaerror-code-3><a href=#dom-mediaerror-code>code</a></code> attribute
       is set to <code id=loading-the-media-resource:dom-mediaerror-media_err_decode><a href=#dom-mediaerror-media_err_decode>MEDIA_ERR_DECODE</a></code>.</li><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-17><a href=#dom-media-networkstate>networkState</a></code> attribute
       to the <code id=loading-the-media-resource:dom-media-network_idle-7><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value.</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-11>delaying-the-load-event flag</a> to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-11>delaying the load event</a>.</li><li><p><a id=loading-the-media-resource:fire-a-simple-event-16 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=loading-the-media-resource:event-media-error-3><a href=#event-media-error>error</a></code> at
       the <a href=#media-element id=loading-the-media-resource:media-element-48>media element</a>.</li><li><p>Abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-5>resource selection
       algorithm</a>.</li></ol>

     <dt>If the <a href=#media-data id=loading-the-media-resource:media-data-14>media data</a> fetching process is aborted by the user<dd>

      <p>The fetching process is aborted by the user, e.g. because the user
      pressed a "stop" button, the user agent must execute the following steps. These steps are not
      followed if the <code id=loading-the-media-resource:dom-media-load-2><a href=#dom-media-load>load()</a></code> method itself is invoked while
      these steps are running, as the steps above handle that particular kind of abort.</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error-5><a href=#dom-media-error>error</a></code> attribute to a new
       <code id=loading-the-media-resource:mediaerror-4><a href=#mediaerror>MediaError</a></code> object whose <code id=loading-the-media-resource:dom-mediaerror-code-4><a href=#dom-mediaerror-code>code</a></code> attribute
       is set to <code id=loading-the-media-resource:dom-mediaerror-media_err_aborted><a href=#dom-mediaerror-media_err_aborted>MEDIA_ERR_ABORTED</a></code>.</li><li><p><a id=loading-the-media-resource:fire-a-simple-event-17 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=loading-the-media-resource:event-media-abort-2><a href=#event-media-abort>abort</a></code> at
       the <a href=#media-element id=loading-the-media-resource:media-element-49>media element</a>.</li><li>

        <p>If the <a href=#media-element id=loading-the-media-resource:media-element-50>media element</a>'s <code id=loading-the-media-resource:dom-media-readystate-7><a href=#dom-media-readystate>readyState</a></code>
        attribute has a value equal to <code id=loading-the-media-resource:dom-media-have_nothing-4><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, set
        the element's <code id=loading-the-media-resource:dom-media-networkstate-18><a href=#dom-media-networkstate>networkState</a></code> attribute to the
        <code id=loading-the-media-resource:dom-media-network_empty-3><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code> value, set the element's
        <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag-4>show poster flag</a> to true, and <a id=loading-the-media-resource:fire-a-simple-event-18 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=loading-the-media-resource:event-media-emptied-2><a href=#event-media-emptied>emptied</a></code> at the element.</p>

        <p>Otherwise, set the element's <code id=loading-the-media-resource:dom-media-networkstate-19><a href=#dom-media-networkstate>networkState</a></code>
        attribute to the <code id=loading-the-media-resource:dom-media-network_idle-8><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value.</p>

       </li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-12>delaying-the-load-event flag</a> to false. This stops <a href=syntax.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-12>delaying the load event</a>.</li><li><p>Abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-6>resource selection
       algorithm</a>.</li></ol>

     <dt id=non-fatal-media-error>If the <a href=#media-data id=loading-the-media-resource:media-data-15>media data</a> can be fetched but has non-fatal
     errors or uses, in part, codecs that are unsupported, preventing the user agent from rendering
     the content completely correctly but not preventing playback altogether<dd>

      <p>The server returning data that is partially usable but cannot be optimally rendered must
      cause the user agent to render just the bits it can handle, and ignore the rest.</p>

      

     <dt id=found-a-media-resource-specific-timed-track>If the <a href=#media-resource id=loading-the-media-resource:media-resource-19>media resource</a> is
     found to declare a <a href=#media-resource-specific-text-track id=loading-the-media-resource:media-resource-specific-text-track-2>media-resource-specific text track</a> that the user agent
     supports<dd>

      <p>If the <a href=#media-data id=loading-the-media-resource:media-data-16>media data</a> is <a id=loading-the-media-resource:cors-same-origin-3 href=infrastructure.html#cors-same-origin>CORS-same-origin</a>, run the <a href=#steps-to-expose-a-media-resource-specific-text-track id=loading-the-media-resource:steps-to-expose-a-media-resource-specific-text-track>steps to
      expose a media-resource-specific text track</a> with the relevant data.</p>

      <p class=note>Cross-origin videos do not expose their subtitles, since that would allow
      attacks such as hostile sites reading subtitles from confidential videos on a user's
      intranet.</p>

     </dl>

   </li><li><p><i>Final step:</i> If the user agent ever reaches this step (which can only happen if the entire resource
   gets loaded and kept available): abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-7>resource selection algorithm</a>.</li></ol>

  <p>When a <a href=#media-element id=loading-the-media-resource:media-element-51>media element</a> is to <dfn id="forget-the-media-element's-media-resource-specific-tracks">forget the media element's media-resource-specific
  tracks</dfn>, the user agent must remove from the <a href=#media-element id=loading-the-media-resource:media-element-52>media element</a>'s <a href=#list-of-text-tracks id=loading-the-media-resource:list-of-text-tracks>list of text
  tracks</a> all the <a href=#media-resource-specific-text-track id=loading-the-media-resource:media-resource-specific-text-track-3>media-resource-specific
  text tracks</a>, then empty the <a href=#media-element id=loading-the-media-resource:media-element-53>media element</a>'s <code id=loading-the-media-resource:dom-media-audiotracks-2><a href=#dom-media-audiotracks>audioTracks</a></code> attribute's <code id=loading-the-media-resource:audiotracklist-3><a href=#audiotracklist>AudioTrackList</a></code> object,
  then empty the <a href=#media-element id=loading-the-media-resource:media-element-54>media element</a>'s <code id=loading-the-media-resource:dom-media-videotracks-2><a href=#dom-media-videotracks>videoTracks</a></code>
  attribute's <code id=loading-the-media-resource:videotracklist-3><a href=#videotracklist>VideoTrackList</a></code> object. No events (in particular, no <code id=loading-the-media-resource:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code> events) are fired as part of this; the <code id=loading-the-media-resource:event-media-error-4><a href=#event-media-error>error</a></code> and <code id=loading-the-media-resource:event-media-emptied-3><a href=#event-media-emptied>emptied</a></code>
  events, fired by the algorithms that invoke this one, can be used instead.</p>

  

  <hr>

  <p><dfn id=attr-media-preload><code>preload</code></dfn>属性は<a id=loading-the-media-resource:enumerated-attribute href=infrastructure.html#enumerated-attribute>列挙属性</a>である。次の表は、キーワードと属性の状態を示す。1列目のキーワードは、キーワードと同じ行で2列目のセル内の状態に対応づける。<a href=#media-resource id=loading-the-media-resource:media-resource-20>メディアリソース</a>がバッファまたは再生されている場合でも属性を変更できる。下記の表の説明では、この点に留意して解釈されるべきである。</p>

  <table><thead><tr><th> キーワード
     </th><th> 状態
     </th><th> 概要
   <tbody></th></tr><tr><td><dfn id=attr-media-preload-none><code>なし</code></dfn>
     </td><td><dfn id=attr-media-preload-none-state>なし</dfn>
     </td><td>著者がメディアリソースを必要とすることをユーザーに期待しない、またはサーバが不要なトラフィックを最小限にしたいのいずれかのユーザーエージェントへのヒント。バッファリングはとにかく開始する（たとえばユーザーが"play"に当たる）場合、この状態は、メディアリソースを実際にダウンロードする方法に関して積極的にヒントを提供しない。
    </td></tr><tr><td><dfn id=attr-media-preload-metadata><code>metadata</code></dfn>
     </td><td><dfn id=attr-media-preload-metadata-state>Metadata</dfn>
     </td><td>著者がメディアリソースを必要とするとユーザーに期待しないが、リソースのメタデータ（寸法、トラックリスト、期間など）フェッチし、そしておそらく最初の数フレームが合理的であるユーザーエージェントへのヒント。ユーザーエージェントが正確にメタデータ以上のものをフェッチしない場合、典型的には、一部のフレームも同様に得られ、おそらく<code id=loading-the-media-resource:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>または<code id=loading-the-media-resource:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>になるにもかかわらず、<a href=#media-element id=loading-the-media-resource:media-element-55>メディア要素</a>は<code id=loading-the-media-resource:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>に設定される<code id=loading-the-media-resource:dom-media-readystate-8><a href=#dom-media-readystate>readyState</a></code>属性に終わる。メディアリソースが再生する際、たとえばメディアデータが依然として一貫した再生を維持し最も遅い可能性のレートで得られるようにダウンロードを絞ることが示唆するような、帯域幅の不足を考慮すべきであるというユーザーエージェントへのヒント。
    </td></tr><tr><td><dfn id=attr-media-preload-auto><code>auto</code></dfn>
     </td><td><dfn id=attr-media-preload-auto-state>Automatic</dfn>
     </td><td>ユーザーエージェントが、楽観的に全体のリソースのダウンロードを含め、サーバーへのリスクなしに、最初のユーザーのニーズを置くことができるというユーザーエージェントへのヒント。
  </td></tr></table>

  <p>空文字列もまた妥当なキーワードであり、<a href=#attr-media-preload-auto-state id=loading-the-media-resource:attr-media-preload-auto-state>自動</a>状態に対応づける。<a href=#attr-media-preload-metadata-state id=loading-the-media-resource:attr-media-preload-metadata-state>メタデータ</a>状態はサーバーの負荷を軽減し、最適なユーザーエクスペリエンスを提供する妥協点として示唆されるけれども、属性の<i id=loading-the-media-resource:missing-value-default><a href=infrastructure.html#missing-value-default>欠損値のデフォルト</a></i>は、ユーザーエージェント定義である。</p>

  <p class=note>一度ユーザーが再生を始めると、著者は、動的に"<code id=loading-the-media-resource:attr-media-preload-none-2><a href=#attr-media-preload-none>none</a></code>"または"<code id=loading-the-media-resource:attr-media-preload-metadata><a href=#attr-media-preload-metadata>metadata</a></code>"から"<code id=loading-the-media-resource:attr-media-preload-auto><a href=#attr-media-preload-auto>auto</a></code>"に属性を切り替えるかもしれない。たとえば、多くのビデオをもつページ上で、要求されないが一度に動画<em>が</em>積極的にダウンロードされる限り、これは多くの動画がダウンロードされるべきではないことを示すために使用されるかもしれない。</p>

  

  <p>The <code id=loading-the-media-resource:attr-media-preload-3><a href=#attr-media-preload>preload</a></code> attribute is intended to provide a hint to
  the user agent about what the author thinks will lead to the best user experience. The attribute
  may be ignored altogether, for example based on explicit user preferences or based on the
  available connectivity.</p>

  <p><dfn id=dom-media-preload><code>preload</code></dfn>IDL属性は、<a id=loading-the-media-resource:limited-to-only-known-values href=infrastructure.html#limited-to-only-known-values>既知の値に制限され</a>、同じ名前のコンテンツ属性を<a id=loading-the-media-resource:reflect href=infrastructure.html#reflect>反映し</a>なければならない。</p>

  

  <p class=note>（メディアを再生する場合、<code id=loading-the-media-resource:attr-media-preload-5><a href=#attr-media-preload>preload</a></code>属性によって与えられるヒントにかかわらず、自然に最初のバッファを持つので）<code id=loading-the-media-resource:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code>属性は<code id=loading-the-media-resource:attr-media-preload-4><a href=#attr-media-preload>preload</a></code>属性を上書きできる。しかし、両方を含めることはエラーではない。</p>

  <hr>



  <dl class=domintro><dt><var>media</var> . <code id=loading-the-media-resource:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code><dd>

    <p>ユーザーエージェントがバッファリングした<a href=#media-resource id=loading-the-media-resource:media-resource-21>メディアリソース</a>の範囲を表す<code id=loading-the-media-resource:timeranges><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-media-buffered><code>buffered</code></dfn> attribute must return a new
  static <a href=#normalised-timeranges-object id=loading-the-media-resource:normalised-timeranges-object>normalised <code>TimeRanges</code> object</a> that represents the ranges of the
  <a href=#media-resource id=loading-the-media-resource:media-resource-22>media resource</a>, if any, that the user agent has buffered, at the time the attribute
  is evaluated. Users agents must accurately determine the ranges available, even for media streams
  where this can only be determined by tedious inspection.</p>

  <p class=note>Typically this will be a single range anchored at the zero point, but if, e.g. the
  user agent uses HTTP range requests in response to seeking, then there could be multiple
  ranges.</p>

  <p>User agents may discard previously buffered data.</p>

  <p class=note>Thus, a time position included within a range of the objects return by the <code id=loading-the-media-resource:dom-media-buffered-2><a href=#dom-media-buffered>buffered</a></code> attribute at one time can end up being not included in
  the range(s) of objects returned by the same attribute at later times.</p>

  



  <h5 id=offsets-into-the-media-resource>4.8.13.6 メディアリソースからのオフセット</h5>

  <dl class=domintro><dt><var>media</var> . <code id=offsets-into-the-media-resource:dom-media-duration><a href=#dom-media-duration>duration</a></code><dd>

    <p><a href=#media-resource id=offsets-into-the-media-resource:media-resource-2>メディアリソース</a>の始点が時間ゼロであると仮定して、秒単位で<a href=#media-resource id=offsets-into-the-media-resource:media-resource>メディアリソース</a>の長さを返す。</p>

    <p>期間が利用できない場合はNaNを返す。</p>

    <p>際限のないストリームに対してInfinityを返す。</p>

   <dt><var>media</var> . <code id=offsets-into-the-media-resource:dom-media-currenttime><a href=#dom-media-currenttime>currentTime</a></code> [ = <var>value</var> ]<dd>

    <p>秒単位で、<a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position>公式の再生位置</a>を返す。</p>

    <p>指定時間にシークするために、設定可能である。</p>

    <p>Will throw an <code id=offsets-into-the-media-resource:invalidstateerror><a href=infrastructure.html#invalidstateerror>InvalidStateError</a></code> exception if there is a <a href=#current-media-controller id=offsets-into-the-media-resource:current-media-controller>current media
    controller</a>.</p>

   </dl>

  

  <p>A <a href=#media-resource id=offsets-into-the-media-resource:media-resource-3>media resource</a> has a <dfn id=media-timeline>media timeline</dfn> that maps times (in seconds) to
  positions in the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-4>media resource</a>. The origin of a timeline is its earliest defined
  position. The duration of a timeline is its last defined position.</p>

  <p><dfn id=defineTimeline>Establishing the media
  timeline</dfn>: If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-5>media resource</a> somehow specifies an explicit timeline whose
  origin is not negative (i.e. gives each frame a specific time offset and gives the first frame a
  zero or positive offset), then the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline>media timeline</a> should be that timeline. (Whether
  the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-6>media resource</a> can specify a timeline or not depends on the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-7>media resource's</a> format.) If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-8>media resource</a> specifies an
  explicit start time <em>and date</em>, then that time and date should be considered the zero point
  in the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-2>media timeline</a>; the <a href=#timeline-offset id=offsets-into-the-media-resource:timeline-offset>timeline offset</a> will be the time and date,
  exposed using the <code id=offsets-into-the-media-resource:dom-media-getstartdate><a href=#dom-media-getstartdate>getStartDate()</a></code> method.</p>

  <p>If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-9>media resource</a> has a discontinuous timeline, the user agent must extend the
  timeline used at the start of the resource across the entire resource, so that the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-3>media
  timeline</a> of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-10>media resource</a> increases linearly starting from the
  <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position>earliest possible position</a> (as defined below), even if the underlying <a href=#media-data id=offsets-into-the-media-resource:media-data>media
  data</a> has out-of-order or even overlapping time codes.</p>

  <p class=example>For example, if two clips have been concatenated into one video file, but the
  video format exposes the original times for the two clips, the video data might expose a timeline
  that goes, say, 00:15..00:29 and then 00:05..00:38. However, the user agent would not expose those
  times; it would instead expose the times as 00:15..00:29 and 00:29..01:02, as a single video.</p>

  <p>In the rare case of a <a href=#media-resource id=offsets-into-the-media-resource:media-resource-11>media resource</a> that does not have an explicit timeline, the
  zero time on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-4>media timeline</a> should correspond to the first frame of the
  <a href=#media-resource id=offsets-into-the-media-resource:media-resource-12>media resource</a>. In the even rarer case of a <a href=#media-resource id=offsets-into-the-media-resource:media-resource-13>media resource</a> with no
  explicit timings of any kind, not even frame durations, the user agent must itself determine the
  time for each frame in a user-agent-defined manner.
  
  <a id=offsets-into-the-media-resource:fingerprinting-vector title="There is a potential fingerprinting vector here." href=introduction.html#fingerprinting-vector class=fingerprint><img alt="(This is a fingerprinting vector.)" src=https://html.spec.whatwg.org/multipage/images/fingerprint.png width=46 height=64></a>
  </p>

  <p class=note>An example of a file format with no explicit timeline but with explicit frame
  durations is the Animated GIF format. An example of a file format with no explicit timings at all
  is the JPEG-push format (<code id=offsets-into-the-media-resource:multipart/x-mixed-replace><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code> with JPEG frames, often
  used as the format for MJPEG streams).</p>

  <p>If, in the case of a resource with no timing information, the user agent will nonetheless be
  able to seek to an earlier point than the first frame originally provided by the server, then the
  zero time should correspond to the earliest seekable time of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-14>media resource</a>;
  otherwise, it should correspond to the first frame received from the server (the point in the
  <a href=#media-resource id=offsets-into-the-media-resource:media-resource-15>media resource</a> at which the user agent began receiving the stream).</p>

  <p class=note>At the time of writing, there is no known format that lacks explicit frame time
  offsets yet still supports seeking to a frame before the first frame sent by the server.</p>

  <div class=example>

   <p>Consider a stream from a TV broadcaster, which begins streaming on a sunny Friday afternoon in
   October, and always sends connecting user agents the media data on the same media timeline, with
   its zero time set to the start of this stream. Months later, user agents connecting to this
   stream will find that the first frame they receive has a time with millions of seconds. The <code id=offsets-into-the-media-resource:dom-media-getstartdate-2><a href=#dom-media-getstartdate>getStartDate()</a></code> method would always return the date that the
   broadcast started; this would allow controllers to display real times in their scrubber (e.g.
   "2:30pm") rather than a time relative to when the broadcast began ("8 months, 4 hours, 12
   minutes, and 23 seconds").</p>

   <p>Consider a stream that carries a video with several concatenated fragments, broadcast by a
   server that does not allow user agents to request specific times but instead just streams the
   video data in a predetermined order, with the first frame delivered always being identified as
   the frame with time zero. If a user agent connects to this stream and receives fragments defined
   as covering timestamps 2010-03-20 23:15:00 UTC to 2010-03-21 00:05:00 UTC and 2010-02-12 14:25:00
   UTC to 2010-02-12 14:35:00 UTC, it would expose this with a <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-5>media timeline</a> starting
   at 0s and extending to 3,600s (one hour). Assuming the streaming server disconnected at the end
   of the second clip, the <code id=offsets-into-the-media-resource:dom-media-duration-2><a href=#dom-media-duration>duration</a></code> attribute would then
   return 3,600. The <code id=offsets-into-the-media-resource:dom-media-getstartdate-3><a href=#dom-media-getstartdate>getStartDate()</a></code> method would return a
   <code id=offsets-into-the-media-resource:date><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> object with a time corresponding to 2010-03-20 23:15:00 UTC. However, if a
   different user agent connected five minutes later, <em>it</em> would (presumably) receive
   fragments covering timestamps 2010-03-20 23:20:00 UTC to 2010-03-21 00:05:00 UTC and 2010-02-12
   14:25:00 UTC to 2010-02-12 14:35:00 UTC, and would expose this with a <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-6>media timeline</a>
   starting at 0s and extending to 3,300s (fifty five minutes). In this case, the <code id=offsets-into-the-media-resource:dom-media-getstartdate-4><a href=#dom-media-getstartdate>getStartDate()</a></code> method would return a <code id=offsets-into-the-media-resource:date-2><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> object
   with a time corresponding to 2010-03-20 23:20:00 UTC.</p>

   <p>In both of these examples, the <code id=offsets-into-the-media-resource:dom-media-seekable><a href=#dom-media-seekable>seekable</a></code> attribute
   would give the ranges that the controller would want to actually display in its UI; typically, if
   the servers don't support seeking to arbitrary times, this would be the range of time from the
   moment the user agent connected to the stream up to the latest frame that the user agent has
   obtained; however, if the user agent starts discarding earlier information, the actual range
   might be shorter.</p>

  </div>

  <p>In any case, the user agent must ensure that the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-2>earliest possible position</a> (as
  defined below) using the established <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-7>media timeline</a>, is greater than or equal to
  zero.</p>

  <p>The <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-8>media timeline</a> also has an associated clock. Which clock is used is user-agent
  defined, and may be <a href=#media-resource id=offsets-into-the-media-resource:media-resource-16>media resource</a>-dependent, but it should approximate the user's
  wall clock.</p>

  <p class=note>All the <a href=#media-element id=offsets-into-the-media-resource:media-element>media elements</a> that share <a href=#current-media-controller id=offsets-into-the-media-resource:current-media-controller-2>current
  media controller</a> use the same clock for their <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-9>media timeline</a>.</p>

  <p><a href=#media-element id=offsets-into-the-media-resource:media-element-2>Media elements</a> have a <dfn id=current-playback-position>current playback position</dfn>,
  which must initially (i.e. in the absence of <a href=#media-data id=offsets-into-the-media-resource:media-data-2>media data</a>) be zero seconds. The
  <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position>current playback position</a> is a time on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-10>media timeline</a>.</p>

  <p><a href=#media-element id=offsets-into-the-media-resource:media-element-3>Media elements</a> also have an <dfn id=official-playback-position>official playback
  position</dfn>, which must initially be set to zero seconds. The <a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position-2>official playback
  position</a> is an approximation of the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-2>current playback position</a> that is kept
  stable while scripts are running.</p>

  <p><a href=#media-element id=offsets-into-the-media-resource:media-element-4>Media elements</a> also have a <dfn id=default-playback-start-position>default playback start
  position</dfn>, which must initially be set to zero seconds. This time is used to allow the
  element to be seeked even before the media is loaded.</p>

  <p>Each <a href=#media-element id=offsets-into-the-media-resource:media-element-5>media element</a> has a <dfn id=show-poster-flag>show poster flag</dfn>. When a <a href=#media-element id=offsets-into-the-media-resource:media-element-6>media
  element</a> is created, this flag must be set to true. This flag is used to control when the
  user agent is to show a poster frame for a <code id=offsets-into-the-media-resource:the-video-element><a href=#the-video-element>video</a></code> element instead of showing the video
  contents.</p>

  <p>The <dfn id=dom-media-currenttime><code>currentTime</code></dfn> attribute must, on
  getting, return the <a href=#media-element id=offsets-into-the-media-resource:media-element-7>media element</a>'s <a href=#default-playback-start-position id=offsets-into-the-media-resource:default-playback-start-position>default playback start position</a>,
  unless that is zero, in which case it must return the element's <a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position-3>official playback
  position</a>. The returned value must be expressed in seconds. On setting, if the <a href=#media-element id=offsets-into-the-media-resource:media-element-8>media
  element</a> has a <a href=#current-media-controller id=offsets-into-the-media-resource:current-media-controller-3>current media controller</a>, then the user agent must throw an
  <code id=offsets-into-the-media-resource:invalidstateerror-2><a href=infrastructure.html#invalidstateerror>InvalidStateError</a></code> exception; otherwise, if the <a href=#media-element id=offsets-into-the-media-resource:media-element-9>media element</a>'s <code id=offsets-into-the-media-resource:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> is <code id=offsets-into-the-media-resource:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, then it must set the <a href=#media-element id=offsets-into-the-media-resource:media-element-10>media
  element</a>'s <a href=#default-playback-start-position id=offsets-into-the-media-resource:default-playback-start-position-2>default playback start position</a> to the new value; otherwise, it must
  set the <a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position-4>official playback position</a> to the new value and then <a href=#dom-media-seek id=offsets-into-the-media-resource:dom-media-seek>seek</a> to the new value. The new value must be interpreted as being in
  seconds.</p>

  <p>If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-17>media resource</a> is a streaming resource, then the user agent might be unable
  to obtain certain parts of the resource after it has expired from its buffer. Similarly, some
  <a href=#media-resource id=offsets-into-the-media-resource:media-resource-18>media resources</a> might have a <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-11>media timeline</a> that
  doesn't start at zero. The <dfn id=earliest-possible-position>earliest possible position</dfn> is the earliest position in the
  stream or resource that the user agent can ever obtain again. It is also a time on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-12>media
  timeline</a>.</p>

  <p class=note>The <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-3>earliest possible position</a> is not explicitly exposed in the API;
  it corresponds to the start time of the first range in the <code id=offsets-into-the-media-resource:dom-media-seekable-2><a href=#dom-media-seekable>seekable</a></code> attribute's <code id=offsets-into-the-media-resource:timeranges><a href=#timeranges>TimeRanges</a></code> object, if any, or
  the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-3>current playback position</a> otherwise.</p>

  <p>When the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-4>earliest possible position</a> changes, then: if the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-4>current playback
  position</a> is before the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-5>earliest possible position</a>, the user agent must <a href=#dom-media-seek id=offsets-into-the-media-resource:dom-media-seek-2>seek</a> to the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-6>earliest possible position</a>; otherwise, if
  the user agent has not fired a <code id=offsets-into-the-media-resource:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> event at the
  element in the past 15 to 250ms and is not still running event handlers for such an event, then
  the user agent must <a id=offsets-into-the-media-resource:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a id=offsets-into-the-media-resource:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=offsets-into-the-media-resource:event-media-timeupdate-2><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</p>

  <p class=note>Because of the above requirement and the requirement in the <a href=#concept-media-load-resource id=offsets-into-the-media-resource:concept-media-load-resource>resource fetch algorithm</a> that kicks in <a href=#getting-media-metadata>when the metadata of the clip becomes known</a>, the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-5>current
  playback position</a> can never be less than the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-7>earliest possible position</a>.</p>

  
  

  <p>If at any time the user agent learns that an audio or video track has ended and all <a href=#media-data id=offsets-into-the-media-resource:media-data-3>media
  data</a> relating to that track corresponds to parts of the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-13>media timeline</a> that
  are <em>before</em> the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-8>earliest possible position</a>, the user agent may <a id=offsets-into-the-media-resource:queue-a-task-2 href=webappapis.html#queue-a-task>queue a
  task</a> to first remove the track from the <code id=offsets-into-the-media-resource:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code>
  attribute's <code id=offsets-into-the-media-resource:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code> object or the <code id=offsets-into-the-media-resource:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code> attribute's <code id=offsets-into-the-media-resource:videotracklist><a href=#videotracklist>VideoTrackList</a></code> object as
  appropriate and then <a href=infrastructure.html#concept-event-fire id=offsets-into-the-media-resource:concept-event-fire>fire</a> a <a href=infrastructure.html#concept-events-trusted id=offsets-into-the-media-resource:concept-events-trusted>trusted</a> event with the name <code id=offsets-into-the-media-resource:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code>, that does not bubble and is not cancelable, and that
  uses the <code id=offsets-into-the-media-resource:trackevent><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=offsets-into-the-media-resource:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code> attribute initialised to the <code id=offsets-into-the-media-resource:audiotrack><a href=#audiotrack>AudioTrack</a></code> or
  <code id=offsets-into-the-media-resource:videotrack><a href=#videotrack>VideoTrack</a></code> object representing the track, at the <a href=#media-element id=offsets-into-the-media-resource:media-element-11>media element</a>'s
  aforementioned <code id=offsets-into-the-media-resource:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code> or <code id=offsets-into-the-media-resource:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code> object.</p>

  <p>The <dfn id=dom-media-duration><code>duration</code></dfn> attribute must return the time
  of the end of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-19>media resource</a>, in seconds, on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-14>media timeline</a>. If
  no <a href=#media-data id=offsets-into-the-media-resource:media-data-4>media data</a> is available, then the attributes must return the Not-a-Number (NaN)
  value. If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-20>media resource</a> is not known to be bounded (e.g. streaming radio, or a
  live event with no announced end time), then the attribute must return the positive Infinity
  value.</p>

  <p>The user agent must determine the duration of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-21>media resource</a> before playing
  any part of the <a href=#media-data id=offsets-into-the-media-resource:media-data-5>media data</a> and before setting <code id=offsets-into-the-media-resource:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> to a value equal to or greater than <code id=offsets-into-the-media-resource:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>, even if doing so requires fetching multiple
  parts of the resource.</p>

  <p id=durationChange>When the length of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-22>media resource</a> changes to a known value
  (e.g. from being unknown to known, or from a previously established length to a new length) the
  user agent must <a id=offsets-into-the-media-resource:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to <a id=offsets-into-the-media-resource:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=offsets-into-the-media-resource:event-media-durationchange><a href=#event-media-durationchange>durationchange</a></code> at the <a href=#media-element id=offsets-into-the-media-resource:media-element-12>media element</a>. (The
  event is not fired when the duration is reset as part of loading a new media resource.) If the
  duration is changed such that the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-6>current playback position</a> ends up being greater
  than the time of the end of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-23>media resource</a>, then the user agent must also <a href=#dom-media-seek id=offsets-into-the-media-resource:dom-media-seek-3>seek</a> to the time of the end of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-24>media resource</a>.</p>

  <p class=example>If an "infinite" stream ends for some reason, then the duration would change
  from positive Infinity to the time of the last frame or sample in the stream, and the <code id=offsets-into-the-media-resource:event-media-durationchange-2><a href=#event-media-durationchange>durationchange</a></code> event would be fired. Similarly, if the
  user agent initially estimated the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-25>media resource</a>'s duration instead of determining
  it precisely, and later revises the estimate based on new information, then the duration would
  change and the <code id=offsets-into-the-media-resource:event-media-durationchange-3><a href=#event-media-durationchange>durationchange</a></code> event would be
  fired.</p>

  <p>Some video files also have an explicit date and time corresponding to the zero time in the
  <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-15>media timeline</a>, known as the <dfn id=timeline-offset>timeline offset</dfn>. Initially, the
  <a href=#timeline-offset id=offsets-into-the-media-resource:timeline-offset-2>timeline offset</a> must be set to Not-a-Number (NaN).</p>

  <p>The <dfn id=dom-media-getstartdate><code>getStartDate()</code></dfn> method must return <a href=infrastructure.html#create-a-date-object id=offsets-into-the-media-resource:create-a-date-object>a new <code>Date</code> object</a> representing the current
  <a href=#timeline-offset id=offsets-into-the-media-resource:timeline-offset-3>timeline offset</a>.</p>

  

  <hr>

  <p><dfn id=attr-media-loop><code>loop</code></dfn>属性は<a id=offsets-into-the-media-resource:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>であり、指定される場合、終端に達すると<a href=#media-resource id=offsets-into-the-media-resource:media-resource-26>メディアリソース</a>の先頭に戻ってシークする<a href=#media-element id=offsets-into-the-media-resource:media-element-13>メディア要素</a>であることを示す。</p>

  <p>要素が<a href=#current-media-controller id=offsets-into-the-media-resource:current-media-controller-4>現在のメディアコントローラ</a>を持つ一方で、<code id=offsets-into-the-media-resource:attr-media-loop><a href=#attr-media-loop>loop</a></code>属性は効果がない。</p>

  

  <p><dfn id=dom-media-loop><code>loop</code></dfn>IDL属性は、同じ名前のコンテンツ属性を<a id=offsets-into-the-media-resource:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  



  <h5 id=ready-states>4.8.13.7 準備状態</h5>

  <dl class=domintro><dt><var>media</var> . <code id=ready-states:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code><dd>

    <p>以下のリストのコードから、<a href=#current-playback-position id=ready-states:current-playback-position>現在の再生位置</a>をレンダリングに対する要素の現在の状態を表す値を返す。</p>

   </dl>

  

  <p><a href=#media-element id=ready-states:media-element>Media elements</a> have a <i>ready state</i>, which describes to
  what degree they are ready to be rendered at the <a href=#current-playback-position id=ready-states:current-playback-position-2>current playback position</a>. The
  possible values are as follows; the ready state of a media element at any particular time is the
  greatest value describing the state of the element:</p>

  

  <dl><dt><dfn id=dom-media-have_nothing><code>HAVE_NOTHING</code></dfn>（数値0）<dd><p><a href=#media-resource id=ready-states:media-resource>メディアリソース</a>に関する情報が入手できない。<a href=#current-playback-position id=ready-states:current-playback-position-3>現在の再生位置</a>のデータが入手できない。<code id=ready-states:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code>属性が<code id=ready-states:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>に設定される<a href=#media-element id=ready-states:media-element-2>メディア要素</a>は常に<code id=ready-states:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>状態にある。<dt><dfn id=dom-media-have_metadata><code>HAVE_METADATA</code></dfn>（数値1）<dd><p>リソースの継続時間が使用可能であるような、十分なリソースが得られている。<code id=ready-states:the-video-element><a href=#the-video-element>video</a></code>要素の場合、ビデオの寸法もまた利用可能である。<a href=#media-data id=ready-states:media-data>メディアデータ</a>は、すぐに<a href=#current-playback-position id=ready-states:current-playback-position-4>現在の再生位置</a>に対して利用できない。<dt><dfn id=dom-media-have_current_data><code>HAVE_CURRENT_DATA</code></dfn>（数値2）<dd><p>直接の<a href=#current-playback-position id=ready-states:current-playback-position-5>現在の再生位置</a>に対するデータは使用可能であるが、直ちに<code id=ready-states:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>状態に戻ることなく、まったく<a href=#direction-of-playback id=ready-states:direction-of-playback>再生方向</a>にない<a href=#current-playback-position id=ready-states:current-playback-position-6>現在の再生位置</a>を正常に進めることができるユーザーエージェントを利用可能とするのに十分なデータがないか、<a href=#direction-of-playback id=ready-states:direction-of-playback-2>再生方向</a>で入手するためのこれ以上データが存在しないかのいずれかである。たとえば、ビデオにおいて<a href=#current-playback-position id=ready-states:current-playback-position-7>現在の再生位置</a>が現在のフレームの端にある、および<a href=#ended-playback id=ready-states:ended-playback>再生が終了した</a>場合、これは次のフレームではなく、現在のフレームからデータを持つユーザーエージェントに対応する。<dt><dfn id=dom-media-have_future_data><code>HAVE_FUTURE_DATA</code></dfn>（数値3）<dd><p>直接の<a href=#current-playback-position id=ready-states:current-playback-position-8>現在の再生位置</a>に対するデータが利用可能であり、直ちに<code id=ready-states:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>の状態に戻ることなく、少なくとも<a href=#direction-of-playback id=ready-states:direction-of-playback-3>再生方向</a>での<a href=#current-playback-position id=ready-states:current-playback-position-9>現在の再生位置</a>を進めるためのユーザーエージェントに対する十分なデータが同様にあり、<a href=#the-text-tracks-are-ready id=ready-states:the-text-tracks-are-ready>テキストトラックは準備が整う</a>。たとえば、ビデオにおいて、<a href=#current-playback-position id=ready-states:current-playback-position-10>現在の再生位置</a>が2つのフレーム間の瞬間である際に、少なくとも現在のフレームと次のフレームに対するデータを持つユーザーエージェントにこれは対応するか、<a href=#current-playback-position id=ready-states:current-playback-position-11>現在の再生位置</a>がフレームの途中にある際、少なくとも再生を維持するための現在のフレームと音声データに対するビデオデータを持つユーザーエージェントに対応する。この場合において、<a href=#current-playback-position id=ready-states:current-playback-position-12>現在の再生位置</a>は進めることはできないので、<a href=#ended-playback id=ready-states:ended-playback-2>再生が終了した</a>場合にユーザーエージェントはこの状態にはならない。<dt><dfn id=dom-media-have_enough_data><code>HAVE_ENOUGH_DATA</code></dfn>（数値4）<dd>

   <p><code id=ready-states:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>状態について説明されるすべての条件が満たされ、加えて、以下のいずれかの条件が真である：</p>

    <ul><li>ユーザーエージェントが<a href=#current-playback-position id=ready-states:current-playback-position-13>現在の再生位置</a>で速度を取得されているデータを推定し、<a href=#effective-playback-rate id=ready-states:effective-playback-rate>効果的な再生速度</a>で前進する場合、<a href=#media-resource id=ready-states:media-resource-2>メディアリソース</a>の最後に到達する前に利用可能なデータに追いつかないだろう。</li><li>ここでより長く待つことは、さらなるデータが得られることにはならないので、ユーザーエージェントは状態を入力し、したがってそれ以上の再生を遅らせることによって、何も得られないであろう。（たとえば、バッファがいっぱいになるかもしれない。）</li></ul>

   </dl>

  <p class=note>実際には、<code id=ready-states:dom-media-have_metadata-3><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>と<code id=ready-states:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>との違いはごくわずかである。<code id=ready-states:the-canvas-element><a href=scripting.html#the-canvas-element>canvas</a></code>に<code id=ready-states:the-video-element-2><a href=#the-video-element>video</a></code>要素を描画する際のみ、本当に違いが関連している。ここで、何かが描画される（<code id=ready-states:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>以上）場合と何も描画されない（<code id=ready-states:dom-media-have_metadata-4><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>以下）場合を区別する。同様に、<code id=ready-states:dom-media-have_current_data-3><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>（現在のフレームのみ）と<code id=ready-states:dom-media-have_future_data-2><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>（少なくともこのフレームと次）の差は、無視できる（極端には、1フレームだけ）。ページが"フレームごとの"ナビゲーションにインターフェースを提供する際に、方向が本当に重要な単なる時間である。</p>

  

  <p>When the ready state of a <a href=#media-element id=ready-states:media-element-3>media element</a> whose <code id=ready-states:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code> is not <code id=ready-states:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code> changes, the user agent must follow the steps
  given below:</p>

  <ol><li>

    <p>Apply the first applicable set of substeps from the following list:</p>


    <dl class=switch><dt>If the previous ready state was <code id=ready-states:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>,
     and the new ready state is <code id=ready-states:dom-media-have_metadata-5><a href=#dom-media-have_metadata>HAVE_METADATA</a></code><dd id=fire-loadedmetadata>

      <p><a id=ready-states:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a id=ready-states:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=ready-states:event-media-loadedmetadata><a href=#event-media-loadedmetadata>loadedmetadata</a></code> at the element.</p>

      <p class=note>Before this task is run, as part of the <a id=ready-states:event-loop href=webappapis.html#event-loop>event loop</a> mechanism, the
      rendering will have been updated to resize the <code id=ready-states:the-video-element-3><a href=#the-video-element>video</a></code> element if appropriate.</p>

     <dt id=handling-first-frame-available>If the previous ready state was <code id=ready-states:dom-media-have_metadata-6><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> and the new ready state is <code id=ready-states:dom-media-have_current_data-4><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or greater<dd>

      <p id=fire-loadeddata>If this is the first time this occurs for this <a href=#media-element id=ready-states:media-element-4>media
      element</a> since the <code id=ready-states:dom-media-load><a href=#dom-media-load>load()</a></code> algorithm was last
      invoked, the user agent must <a id=ready-states:queue-a-task-2 href=webappapis.html#queue-a-task>queue a task</a> to <a id=ready-states:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple event</a>
      named <code id=ready-states:event-media-loadeddata><a href=#event-media-loadeddata>loadeddata</a></code> at the element.</p>

      <p>If the new ready state is <code id=ready-states:dom-media-have_future_data-3><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>
      or <code id=ready-states:dom-media-have_enough_data><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>, then the relevant steps
      below must then be run also.</p>

     <dt>If the previous ready state was <code id=ready-states:dom-media-have_future_data-4><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or more, and the new ready state is
     <code id=ready-states:dom-media-have_current_data-5><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or less<dd>

      <p id=fire-waiting-when-waiting>If the <a href=#media-element id=ready-states:media-element-5>media element</a> was <a href=#potentially-playing id=ready-states:potentially-playing>potentially
      playing</a> before its <code id=ready-states:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute
      changed to a value lower than <code id=ready-states:dom-media-have_future_data-5><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>, and the element has not
      <a href=#ended-playback id=ready-states:ended-playback-3>ended playback</a>, and playback has not <a href=#stopped-due-to-errors id=ready-states:stopped-due-to-errors>stopped due to errors</a>,
      <a href=#paused-for-user-interaction id=ready-states:paused-for-user-interaction>paused for user interaction</a>, or <a href=#paused-for-in-band-content id=ready-states:paused-for-in-band-content>paused for in-band content</a>, the user
      agent must <a id=ready-states:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to <a id=ready-states:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=ready-states:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the element, and <a id=ready-states:queue-a-task-4 href=webappapis.html#queue-a-task>queue a task</a>
      to <a id=ready-states:fire-a-simple-event-4 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=ready-states:event-media-waiting><a href=#event-media-waiting>waiting</a></code> at
      the element.</p>

     <dt>If the previous ready state was <code id=ready-states:dom-media-have_current_data-6><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or less, and the new ready state
     is <code id=ready-states:dom-media-have_future_data-6><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code><dd>

      <p>The user agent must <a id=ready-states:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to <a id=ready-states:fire-a-simple-event-5 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named
      <code id=ready-states:event-media-canplay><a href=#event-media-canplay>canplay</a></code> at the element.</p>

      <p>If the element's <code id=ready-states:dom-media-paused><a href=#dom-media-paused>paused</a></code> attribute is false, the user
      agent must <a id=ready-states:queue-a-task-6 href=webappapis.html#queue-a-task>queue a task</a> to <a href=#notify-about-playing id=ready-states:notify-about-playing>notify about playing</a> for the element.</p>

     <dt>If the new ready state is <code id=ready-states:dom-media-have_enough_data-2><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code><dd>

      <p>If the previous ready state was <code id=ready-states:dom-media-have_current_data-7><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or less, the user agent must
      <a id=ready-states:queue-a-task-7 href=webappapis.html#queue-a-task>queue a task</a> to <a id=ready-states:fire-a-simple-event-6 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=ready-states:event-media-canplay-2><a href=#event-media-canplay>canplay</a></code> at the element, and, if the element's <code id=ready-states:dom-media-paused-2><a href=#dom-media-paused>paused</a></code> attribute is false, <a id=ready-states:queue-a-task-8 href=webappapis.html#queue-a-task>queue a task</a> to
      <a href=#notify-about-playing id=ready-states:notify-about-playing-2>notify about playing</a> for the element.</p>

      <p>If the <a href=#autoplaying-flag id=ready-states:autoplaying-flag>autoplaying flag</a> is true, and the <code id=ready-states:dom-media-paused-3><a href=#dom-media-paused>paused</a></code> attribute is true, and the <a href=#media-element id=ready-states:media-element-6>media element</a>
      has an <code id=ready-states:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> attribute specified, and the
      <a href=#media-element id=ready-states:media-element-7>media element</a>'s <a id=ready-states:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <a id=ready-states:active-sandboxing-flag-set href=browsers.html#active-sandboxing-flag-set>active sandboxing flag set</a>
      does not have the <a id=ready-states:sandboxed-automatic-features-browsing-context-flag href=browsers.html#sandboxed-automatic-features-browsing-context-flag>sandboxed automatic features browsing context flag</a> set, then
      the user agent may also run the following substeps:</p>

      <ol><li>Set the <code id=ready-states:dom-media-paused-4><a href=#dom-media-paused>paused</a></code> attribute to false.</li><li>If the element's <a href=#show-poster-flag id=ready-states:show-poster-flag>show poster flag</a> is true, set it to false and run the
       <i id=ready-states:time-marches-on><a href=#time-marches-on>time marches on</a></i> steps.</li><li><a id=ready-states:queue-a-task-9 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=ready-states:fire-a-simple-event-7 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=ready-states:event-media-play><a href=#event-media-play>play</a></code> at the element.</li><li><a id=ready-states:queue-a-task-10 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=#notify-about-playing id=ready-states:notify-about-playing-3>notify about playing</a> for the element.</li><li>Set the <a href=#autoplaying-flag id=ready-states:autoplaying-flag-2>autoplaying flag</a> to false.</li></ol>

      <p class=note>User agents do not need to support autoplay, and it is suggested that user
      agents honor user preferences on the matter. Authors are urged to use the <code id=ready-states:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code> attribute rather than using script to force the
      video to play, so as to allow the user to override the behaviour if so desired.</p>

      <p>In any case, the user agent must finally <a id=ready-states:queue-a-task-11 href=webappapis.html#queue-a-task>queue a task</a> to <a id=ready-states:fire-a-simple-event-8 href=webappapis.html#fire-a-simple-event>fire a simple
      event</a> named <code id=ready-states:event-media-canplaythrough><a href=#event-media-canplaythrough>canplaythrough</a></code> at the element.</p>

     </dl>

   </li><li><p>If the <a href=#media-element id=ready-states:media-element-8>media element</a> has a <a href=#current-media-controller id=ready-states:current-media-controller>current media controller</a>, then
   <a href=#report-the-controller-state id=ready-states:report-the-controller-state>report the controller state</a> for the <a href=#media-element id=ready-states:media-element-9>media element</a>'s <a href=#current-media-controller id=ready-states:current-media-controller-2>current media
   controller</a>.</li></ol>

  

  <p class=note>メディア要素の準備状態は、これらの状態間を不連続にジャンプすることが可能である。たとえば、メディア要素の状態は、<code id=ready-states:dom-media-have_current_data-8><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>と<code id=ready-states:dom-media-have_future_data-7><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>状態を経由せずに<code id=ready-states:dom-media-have_metadata-7><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>から<code id=ready-states:dom-media-have_enough_data-3><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>に直接ジャンプできる。</p>

  

  <p>The <dfn id=dom-media-readystate><code>readyState</code></dfn> IDL attribute must, on
  getting, return the value described above that describes the current ready state of the
  <a href=#media-element id=ready-states:media-element-10>media element</a>.</p>

  

  <p><dfn id=attr-media-autoplay><code>autoplay</code></dfn>属性は<a id=ready-states:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>である。When present, the user agent (as described in the algorithm described herein) will automatically begin playback of the <a href=#media-resource id=ready-states:media-resource-3>media resource</a> as soon as it can do so without stopping.</p>

  <p class=note>著者は、望まれない場合、たとえばスクリーンリーダーを使用する場合、ユーザーが自動再生を上書きできるよう、自動再生を誘発するためのスクリプトを使用するよりも、<code id=ready-states:attr-media-autoplay-3><a href=#attr-media-autoplay>autoplay</a></code>属性を使用するように促される。著者はまた、一切自動再生の動作を使用することなく、代わりに明示的に再生を開始するためのユーザーに対してユーザーエージェントが待機しないよう考慮することが推奨される。</p>

  

  <p><dfn id=dom-media-autoplay><code>autoplay</code></dfn>IDL属性は、同じ名前のコンテンツ属性を<a id=ready-states:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  



  <h5 id=playing-the-media-resource>4.8.13.8 メディアリソースの再生</h5><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28032" title='Definition of "ended playback" prevents looping when loop attribute is added after playback has ended'>28032</a></div>

  <dl class=domintro><dt><var>media</var> . <code id=playing-the-media-resource:dom-media-paused><a href=#dom-media-paused>paused</a></code><dd>

    <p>再生が一時停止された場合はtrueを返し、そうでなければfalseを返す。</p>

   <dt><var>media</var> . <code id=playing-the-media-resource:dom-media-ended><a href=#dom-media-ended>ended</a></code><dd>

    <p>再生が<a href=#media-resource id=playing-the-media-resource:media-resource>メディアリソース</a>の終わりに達した場合trueを返す。</p>

   <dt><var>media</var> . <code id=playing-the-media-resource:dom-media-defaultplaybackrate><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> [ = <var>value</var> ]<dd>

    <p><a href=#media-resource id=playing-the-media-resource:media-resource-2>メディアリソース</a>を介してユーザーが早送りまたは巻き戻ししない場合に対し、再生のデフォルト率を返す。</p>

    <p>再生のデフォルト率を変更する設定が可能である。</p>

    <p>デフォルト率は再生に直接影響を与えないが、ユーザーが早送りモードに切り替えた場合、モードが通常の再生モードに戻った際に、再生速度が再生のデフォルト率に戻されることが期待される。</p>

    <p>要素が<a href=#current-media-controller id=playing-the-media-resource:current-media-controller>現在のメディアコントローラ</a>を持つ場合、<code id=playing-the-media-resource:dom-media-defaultplaybackrate-2><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code>属性は無視され、<a href=#current-media-controller id=playing-the-media-resource:current-media-controller-2>現在のメディアコントローラ</a>の<code id=playing-the-media-resource:dom-mediacontroller-defaultplaybackrate><a href=#dom-mediacontroller-defaultplaybackrate>defaultPlaybackRate</a></code>が代わりに使用される。</p>

   <dt><var>media</var> . <code id=playing-the-media-resource:dom-media-playbackrate><a href=#dom-media-playbackrate>playbackRate</a></code> [ = <var>value</var> ]<dd>

    <p>現在の再生率を返す。ここで1.0が通常の速度である。</p>

    <p>再生速度を変更する設定が可能である。</p>

    <p>要素が<a href=#current-media-controller id=playing-the-media-resource:current-media-controller-3>現在のメディアコントローラ</a>を持つ場合、<code id=playing-the-media-resource:dom-media-playbackrate-2><a href=#dom-media-playbackrate>playbackRate</a></code>属性は無視され、<a href=#current-media-controller id=playing-the-media-resource:current-media-controller-4>現在のメディアコントローラ</a>の<code id=playing-the-media-resource:dom-mediacontroller-playbackrate><a href=#dom-mediacontroller-playbackrate>playbackRate</a></code>が代わりに使用される。</p>

   <dt><var>media</var> . <code id=playing-the-media-resource:dom-media-played><a href=#dom-media-played>played</a></code><dd>

    <p>ユーザーエージェントが再生した<a href=#media-resource id=playing-the-media-resource:media-resource-3>メディアリソース</a>の範囲を表す<code id=playing-the-media-resource:timeranges><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=playing-the-media-resource:dom-media-play><a href=#dom-media-play>play</a></code>()<dd>

    <p>必要に応じて<a href=#media-resource id=playing-the-media-resource:media-resource-4>メディアリソース</a>を読み込んで再生を開始し、<code id=playing-the-media-resource:dom-media-paused-2><a href=#dom-media-paused>paused</a></code>属性をfalseに設定する。再生が終了した場合、最初からリソースを再スタートする。</p>

   <dt><var>media</var> . <code id=playing-the-media-resource:dom-media-pause><a href=#dom-media-pause>pause</a></code>()<dd>

    <p>必要に応じて、<a href=#media-resource id=playing-the-media-resource:media-resource-5>メディアリソース</a>を読み込み、<code id=playing-the-media-resource:dom-media-paused-3><a href=#dom-media-paused>paused</a></code>属性をtrueに設定する。</p>

   </dl>

  

  <p>The <dfn id=dom-media-paused><code>paused</code></dfn> attribute represents whether the
  <a href=#media-element id=playing-the-media-resource:media-element>media element</a> is paused or not. The attribute must initially be true.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-2>media element</a> is a <dfn id=blocked-media-element>blocked media element</dfn> if its <code id=playing-the-media-resource:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> attribute is in the <code id=playing-the-media-resource:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code> state, the <code id=playing-the-media-resource:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> state, or the <code id=playing-the-media-resource:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> state, or if the element has
  <a href=#paused-for-user-interaction id=playing-the-media-resource:paused-for-user-interaction>paused for user interaction</a> or <a href=#paused-for-in-band-content id=playing-the-media-resource:paused-for-in-band-content>paused for in-band content</a>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-3>media element</a> is said to be <dfn id=potentially-playing>potentially playing</dfn> when its <code id=playing-the-media-resource:dom-media-paused-4><a href=#dom-media-paused>paused</a></code> attribute is false, the element has not <a href=#ended-playback id=playing-the-media-resource:ended-playback>ended
  playback</a>, playback has not <a href=#stopped-due-to-errors id=playing-the-media-resource:stopped-due-to-errors>stopped due to errors</a>, the element either has no
  <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-5>current media controller</a> or has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-6>current media controller</a> but is not
  <a href=#blocked-on-its-media-controller id=playing-the-media-resource:blocked-on-its-media-controller>blocked on its media controller</a>, and the element is not a <a href=#blocked-media-element id=playing-the-media-resource:blocked-media-element>blocked media
  element</a>.</p>

  <p class=note>A <code id=playing-the-media-resource:event-media-waiting><a href=#event-media-waiting>waiting</a></code> DOM event <a href=#fire-waiting-when-waiting>can be fired</a> as a result of an element that is
  <a href=#potentially-playing id=playing-the-media-resource:potentially-playing>potentially playing</a> stopping playback due to its <code id=playing-the-media-resource:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute changing to a value lower than <code id=playing-the-media-resource:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-4>media element</a> is said to have <dfn id=ended-playback>ended playback</dfn> when:</p>

  <ul><li>The element's <code id=playing-the-media-resource:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute is <code id=playing-the-media-resource:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> or greater, and

   

   </li><li>

    <p>Either:

    

    <ul><li>The <a href=#current-playback-position id=playing-the-media-resource:current-playback-position>current playback position</a> is the end of the <a href=#media-resource id=playing-the-media-resource:media-resource-6>media resource</a>,
     and

     

     </li><li>The <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback>direction of playback</a> is forwards, and

     

     </li><li>Either the <a href=#media-element id=playing-the-media-resource:media-element-5>media element</a> does not have a <code id=playing-the-media-resource:attr-media-loop><a href=#attr-media-loop>loop</a></code> attribute specified, or the <a href=#media-element id=playing-the-media-resource:media-element-6>media element</a> has
     a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-7>current media controller</a>.

    

    </li></ul>

    <p>または：

    <ul><li>The <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-2>current playback position</a> is the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position>earliest possible position</a>,
     and

     

     </li><li>The <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-2>direction of playback</a> is backwards.

    

    </li></ul>

   </li></ul>

  <p>The <dfn id=dom-media-ended><code>ended</code></dfn> attribute must return true if, the
  last time the <a id=playing-the-media-resource:event-loop href=webappapis.html#event-loop>event loop</a> reached <a href=webappapis.html#step1>step 1</a>, the <a href=#media-element id=playing-the-media-resource:media-element-7>media element</a> had
  <a href=#ended-playback id=playing-the-media-resource:ended-playback-2>ended playback</a> and the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-3>direction of playback</a> was forwards, and false
  otherwise.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-8>media element</a> is said to have <dfn id=stopped-due-to-errors>stopped due to errors</dfn> when the
  element's <code id=playing-the-media-resource:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code> attribute is <code id=playing-the-media-resource:dom-media-have_metadata-3><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> or greater, and the user agent <a href=#non-fatal-media-error>encounters a non-fatal error</a> during the processing of the
  <a href=#media-data id=playing-the-media-resource:media-data>media data</a>, and due to that error, is not able to play the content at the
  <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-3>current playback position</a>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-9>media element</a> is said to have <dfn id=paused-for-user-interaction>paused for user interaction</dfn> when its
  <code id=playing-the-media-resource:dom-media-paused-5><a href=#dom-media-paused>paused</a></code> attribute is false, the <code id=playing-the-media-resource:dom-media-readystate-5><a href=#dom-media-readystate>readyState</a></code> attribute is either <code id=playing-the-media-resource:dom-media-have_future_data-2><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code> and the user agent has reached a point
  in the <a href=#media-resource id=playing-the-media-resource:media-resource-7>media resource</a> where the user has to make a selection for the resource to
  continue. If the <a href=#media-element id=playing-the-media-resource:media-element-10>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-8>current media controller</a> when this
  happens, then the user agent must <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state>report the controller state</a> for the <a href=#media-element id=playing-the-media-resource:media-element-11>media
  element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-9>current media controller</a>. If the <a href=#media-element id=playing-the-media-resource:media-element-12>media element</a> has a
  <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-10>current media controller</a> when the user makes a selection, allowing playback to
  resume, the user agent must similarly <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state-2>report the controller state</a> for the <a href=#media-element id=playing-the-media-resource:media-element-13>media
  element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-11>current media controller</a>.</p>

  <p>It is possible for a <a href=#media-element id=playing-the-media-resource:media-element-14>media element</a> to have both <a href=#ended-playback id=playing-the-media-resource:ended-playback-3>ended playback</a> and
  <a href=#paused-for-user-interaction id=playing-the-media-resource:paused-for-user-interaction-2>paused for user interaction</a> at the same time.</p>

  <p>When a <a href=#media-element id=playing-the-media-resource:media-element-15>media element</a> that is <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-2>potentially playing</a> stops playing
  because it has <a href=#paused-for-user-interaction id=playing-the-media-resource:paused-for-user-interaction-3>paused for user interaction</a>, the user agent must <a id=playing-the-media-resource:queue-a-task href=webappapis.html#queue-a-task>queue a
  task</a> to <a id=playing-the-media-resource:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-16>media element</a> is said to have <dfn id=paused-for-in-band-content>paused for in-band content</dfn> when its
  <code id=playing-the-media-resource:dom-media-paused-6><a href=#dom-media-paused>paused</a></code> attribute is false, the <code id=playing-the-media-resource:dom-media-readystate-6><a href=#dom-media-readystate>readyState</a></code> attribute is either <code id=playing-the-media-resource:dom-media-have_future_data-3><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data-2><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code> and the user agent has suspended
  playback of the <a href=#media-resource id=playing-the-media-resource:media-resource-8>media resource</a> in order to play content that is temporally anchored
  to the <a href=#media-resource id=playing-the-media-resource:media-resource-9>media resource</a> and has a non-zero length, or to play content that is
  temporally anchored to a segment of the <a href=#media-resource id=playing-the-media-resource:media-resource-10>media resource</a> but has a length longer than
  that segment. If the <a href=#media-element id=playing-the-media-resource:media-element-17>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-12>current media controller</a> when
  this happens, then the user agent must <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state-3>report the controller state</a> for the
  <a href=#media-element id=playing-the-media-resource:media-element-18>media element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-13>current media controller</a>. If the <a href=#media-element id=playing-the-media-resource:media-element-19>media
  element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-14>current media controller</a> when the user agent unsuspends
  playback, the user agent must similarly <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state-4>report the controller state</a> for the
  <a href=#media-element id=playing-the-media-resource:media-element-20>media element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-15>current media controller</a>.</p>

  <p class=example>One example of when a <a href=#media-element id=playing-the-media-resource:media-element-21>media element</a> would be <a href=#paused-for-in-band-content id=playing-the-media-resource:paused-for-in-band-content-2>paused for
  in-band content</a> is when the user agent is playing <a href=#attr-track-kind-descriptions id=playing-the-media-resource:attr-track-kind-descriptions>audio descriptions</a> from an external WebVTT file, and
  the synthesized speech generated for a cue is longer than the time between the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time>text track
  cue start time</a> and the <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time>text track cue end time</a>.</p>

  <hr>

  <p id=reaches-the-end>When the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-4>current playback position</a> reaches the end of the
  <a href=#media-resource id=playing-the-media-resource:media-resource-11>media resource</a> when the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-4>direction of playback</a> is forwards, then the user
  agent must follow these steps:</p>

  <ol><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-22>media element</a> has a <code id=playing-the-media-resource:attr-media-loop-2><a href=#attr-media-loop>loop</a></code>
   attribute specified and does not have a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-16>current media controller</a>, then <a href=#dom-media-seek id=playing-the-media-resource:dom-media-seek>seek</a> to the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position-2>earliest possible position</a> of the
   <a href=#media-resource id=playing-the-media-resource:media-resource-12>media resource</a> and abort these steps.</li><li><p>As defined above, the <code id=playing-the-media-resource:dom-media-ended-2><a href=#dom-media-ended>ended</a></code> IDL attribute starts
   returning true once the <a id=playing-the-media-resource:event-loop-2 href=webappapis.html#event-loop>event loop</a> returns to <a href=webappapis.html#step1>step 1</a>.</li><li><p><a id=playing-the-media-resource:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=playing-the-media-resource:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-timeupdate-2><a href=#event-media-timeupdate>timeupdate</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-23>media element</a>.</li><li><p><a id=playing-the-media-resource:queue-a-task-3 href=webappapis.html#queue-a-task>Queue a task</a> that, if the <a href=#media-element id=playing-the-media-resource:media-element-24>media element</a> does not have a
   <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-17>current media controller</a>, and the <a href=#media-element id=playing-the-media-resource:media-element-25>media element</a> has still <a href=#ended-playback id=playing-the-media-resource:ended-playback-4>ended
   playback</a>, and the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-5>direction of playback</a> is still forwards, and <a href=#dom-media-paused id=playing-the-media-resource:dom-media-paused-7>paused</a> is false, changes <a href=#dom-media-paused id=playing-the-media-resource:dom-media-paused-8>paused</a> to true and <a href=webappapis.html#fire-a-simple-event id=playing-the-media-resource:fire-a-simple-event-3>fires a
   simple event</a> named <code id=playing-the-media-resource:event-media-pause><a href=#event-media-pause>pause</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-26>media
   element</a>.</li><li><p><a id=playing-the-media-resource:queue-a-task-4 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=playing-the-media-resource:fire-a-simple-event-4 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-ended><a href=#event-media-ended>ended</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-27>media element</a>.</li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-28>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-18>current media controller</a>, then
   <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state-5>report the controller state</a> for the <a href=#media-element id=playing-the-media-resource:media-element-29>media element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-19>current media
   controller</a>.</li></ol>

  <p>When the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-5>current playback position</a> reaches the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position-3>earliest possible
  position</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-13>media resource</a> when the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-6>direction of playback</a> is
  backwards, then the user agent must only <a id=playing-the-media-resource:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to <a id=playing-the-media-resource:fire-a-simple-event-5 href=webappapis.html#fire-a-simple-event>fire a simple
  event</a> named <code id=playing-the-media-resource:event-media-timeupdate-3><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</p>

  <p class=note>The word "reaches" here does not imply that the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-6>current playback
  position</a> needs to have changed during normal playback; it could be via <a href=#dom-media-seek id=playing-the-media-resource:dom-media-seek-2>seeking</a>, for instance.</p>

  <hr>

  <p>The <dfn id=dom-media-defaultplaybackrate><code>defaultPlaybackRate</code></dfn> attribute
  gives the desired speed at which the <a href=#media-resource id=playing-the-media-resource:media-resource-14>media resource</a> is to play, as a multiple of its
  intrinsic speed. The attribute is mutable: on getting it must return the last value it was set to,
  or 1.0 if it hasn't yet been set; on setting the attribute must be set to the new value.</p>

  <p class=note>The <code id=playing-the-media-resource:dom-media-defaultplaybackrate-3><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> is used
  by the user agent when it <a href=#expose-a-user-interface-to-the-user id=playing-the-media-resource:expose-a-user-interface-to-the-user>exposes a user
  interface to the user</a>.</p>

  <p>The <dfn id=dom-media-playbackrate><code>playbackRate</code></dfn> attribute gives the
  <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate>effective playback rate</a> (assuming there is no <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-20>current media controller</a>
  overriding it), which is the speed at which the <a href=#media-resource id=playing-the-media-resource:media-resource-15>media resource</a> plays, as a multiple
  of its intrinsic speed. If it is not equal to the <code id=playing-the-media-resource:dom-media-defaultplaybackrate-4><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code>, then the implication is that the
  user is using a feature such as fast forward or slow motion playback. The attribute is mutable: on
  getting it must return the last value it was set to, or 1.0 if it hasn't yet been set; on setting
  the attribute must be set to the new value, and the playback will change speed (if the element is
  <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-3>potentially playing</a> and there is no <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-21>current media controller</a>).</p>

  <p id=rateUpdate>When the <code id=playing-the-media-resource:dom-media-defaultplaybackrate-5><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code>
  or <code id=playing-the-media-resource:dom-media-playbackrate-3><a href=#dom-media-playbackrate>playbackRate</a></code> attributes change value (either by
  being set by script or by being changed directly by the user agent, e.g. in response to user
  control) the user agent must <a id=playing-the-media-resource:queue-a-task-6 href=webappapis.html#queue-a-task>queue a task</a> to <a id=playing-the-media-resource:fire-a-simple-event-6 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named
  <code id=playing-the-media-resource:event-media-ratechange><a href=#event-media-ratechange>ratechange</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-30>media element</a>.</p>

  <p class=note>The <code id=playing-the-media-resource:dom-media-defaultplaybackrate-6><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> and
  <code id=playing-the-media-resource:dom-media-playbackrate-4><a href=#dom-media-playbackrate>playbackRate</a></code> attributes have no effect when the
  <a href=#media-element id=playing-the-media-resource:media-element-31>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-22>current media controller</a>; the namesake attributes on
  the <code id=playing-the-media-resource:mediacontroller><a href=#mediacontroller>MediaController</a></code> object are used instead in that situation.</p>

  <hr>

  <p>The <dfn id=dom-media-played><code>played</code></dfn> attribute must return a new static
  <a href=#normalised-timeranges-object id=playing-the-media-resource:normalised-timeranges-object>normalised <code>TimeRanges</code> object</a> that represents the ranges of points on the
  <a href=#media-timeline id=playing-the-media-resource:media-timeline>media timeline</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-16>media resource</a> reached through the usual monotonic
  increase of the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-7>current playback position</a> during normal playback, if any, at the time
  the attribute is evaluated.</p>

  <hr>

  <p>Each <a href=#media-element id=playing-the-media-resource:media-element-32>media element</a> has a <dfn id=list-of-pending-play-promises>list of pending play promises</dfn>, which must
  initially be empty.</p>

  <p>To <dfn id=resolve-pending-play-promises>resolve pending play promises</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-33>media element</a>, the user agent
  must run the following steps:</p>

  <ol><li><p>For each promise in the <a href=#media-element id=playing-the-media-resource:media-element-34>media element</a>'s <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises>list of pending play
   promises</a>, resolve it with undefined.</li><li><p>Clear the <a href=#media-element id=playing-the-media-resource:media-element-35>media element</a>'s <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises-2>list of pending play
   promises</a>.</li></ol>

  <p>To <dfn id=reject-pending-play-promises>reject pending play promises</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-36>media element</a> with an exception
  name <var>error</var>, the user agent must run the following steps:</p>

  <ol><li><p>For each promise in the <a href=#media-element id=playing-the-media-resource:media-element-37>media element</a>'s <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises-3>list of pending play
   promises</a>, reject it with an <var>error</var> exception.</li><li><p>Clear the <a href=#media-element id=playing-the-media-resource:media-element-38>media element</a>'s <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises-4>list of pending play
   promises</a>.</li></ol>

  <p>To <dfn id=notify-about-playing>notify about playing</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-39>media element</a>, the user agent must run
  the following steps:</p>

  <ol><li><p><a id=playing-the-media-resource:fire-a-simple-event-7 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=playing-the-media-resource:event-media-playing><a href=#event-media-playing>playing</a></code>
   at the element.</li><li><p><a href=#resolve-pending-play-promises id=playing-the-media-resource:resolve-pending-play-promises>Resolve pending play promises</a>.</li></ol>

  <p>When the <dfn id=dom-media-play><code>play()</code></dfn> method on a <a href=#media-element id=playing-the-media-resource:media-element-40>media
  element</a> is invoked, the user agent must run the following steps.</p>

  <ol><li>

    <p>Optionally, if the user agent or the system does not allow media playback in the current
    context, return a promise rejected with a <code id=playing-the-media-resource:notallowederror><a href=infrastructure.html#notallowederror>NotAllowedError</a></code> exception and abort these
    steps.</p>

    <p class=note>For example, a user agent could require user interaction in order to start
    playback. This specification does not require any particular behavior.</p>

   </li><li>

    <p>If the <a href=#media-element id=playing-the-media-resource:media-element-41>media element</a>'s <code id=playing-the-media-resource:dom-media-error><a href=#dom-media-error>error</a></code> attribute is
    not null and its <code id=playing-the-media-resource:dom-mediaerror-code><a href=#dom-mediaerror-code>code</a></code> attribute has the value <code id=playing-the-media-resource:dom-mediaerror-media_err_src_not_supported><a href=#dom-mediaerror-media_err_src_not_supported>MEDIA_ERR_SRC_NOT_SUPPORTED</a></code>, return a
    promise rejected with a <code id=playing-the-media-resource:notsupportederror><a href=infrastructure.html#notsupportederror>NotSupportedError</a></code> exception and abort these steps.</p>

    <p class=note>This means that the <a href=#dedicated-media-source-failure-steps id=playing-the-media-resource:dedicated-media-source-failure-steps>dedicated media source failure steps</a> have run.
    Playback is not possible until the <a href=#media-element-load-algorithm id=playing-the-media-resource:media-element-load-algorithm>media element load algorithm</a> clears the <code id=playing-the-media-resource:dom-media-error-2><a href=#dom-media-error>error</a></code> attribute.</p>

   </li><li><p>Let <var>promise</var> be a new promise and append <var>promise</var> to the <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises-5>list of
   pending play promises</a>.</li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-42>media element</a>'s <code id=playing-the-media-resource:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, invoke the <a href=#media-element id=playing-the-media-resource:media-element-43>media element</a>'s
   <a href=#concept-media-load-algorithm id=playing-the-media-resource:concept-media-load-algorithm>resource selection algorithm</a>.</li><li>

    <p>If the <a href=#ended-playback id=playing-the-media-resource:ended-playback-5>playback has ended</a> and the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-7>direction of
    playback</a> is forwards, and the <a href=#media-element id=playing-the-media-resource:media-element-44>media element</a> does not have a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-23>current
    media controller</a>, <a href=#dom-media-seek id=playing-the-media-resource:dom-media-seek-3>seek</a> to the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position-4>earliest possible
    position</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-17>media resource</a>.</p>

    <p class=note>This <a href=#seekUpdate>will cause</a> the user agent to <a id=playing-the-media-resource:queue-a-task-7 href=webappapis.html#queue-a-task>queue a
    task</a> to <a id=playing-the-media-resource:fire-a-simple-event-8 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-timeupdate-4><a href=#event-media-timeupdate>timeupdate</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-45>media element</a>.</p>
    

   </li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-46>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-24>current media controller</a>, then
   <a href=#bring-the-media-element-up-to-speed-with-its-new-media-controller id=playing-the-media-resource:bring-the-media-element-up-to-speed-with-its-new-media-controller>bring the media element up to speed with its new media controller</a>.</p>

   </li><li>

    <p>If the <a href=#media-element id=playing-the-media-resource:media-element-47>media element</a>'s <code id=playing-the-media-resource:dom-media-paused-9><a href=#dom-media-paused>paused</a></code> attribute is
    true, run the following substeps:</p>

    <ol><li><p>Change the value of <code id=playing-the-media-resource:dom-media-paused-10><a href=#dom-media-paused>paused</a></code> to false.</li><li><p>If the <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag>show poster flag</a> is true, set the element's <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag-2>show poster
     flag</a> to false and run the <i id=playing-the-media-resource:time-marches-on><a href=#time-marches-on>time marches on</a></i> steps.</li><li><p><a id=playing-the-media-resource:queue-a-task-8 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=playing-the-media-resource:fire-a-simple-event-9 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-play><a href=#event-media-play>play</a></code> at the element.</li><li>

      <p>If the <a href=#media-element id=playing-the-media-resource:media-element-48>media element</a>'s <code id=playing-the-media-resource:dom-media-readystate-7><a href=#dom-media-readystate>readyState</a></code>
      attribute has the value <code id=playing-the-media-resource:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, <code id=playing-the-media-resource:dom-media-have_metadata-4><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>, or <code id=playing-the-media-resource:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>, <a id=playing-the-media-resource:queue-a-task-9 href=webappapis.html#queue-a-task>queue a task</a> to
      <a id=playing-the-media-resource:fire-a-simple-event-10 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-waiting-2><a href=#event-media-waiting>waiting</a></code> at the
      element.</p>

      <p>Otherwise, the <a href=#media-element id=playing-the-media-resource:media-element-49>media element</a>'s <code id=playing-the-media-resource:dom-media-readystate-8><a href=#dom-media-readystate>readyState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-have_future_data-4><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data-3><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>: <a id=playing-the-media-resource:queue-a-task-10 href=webappapis.html#queue-a-task>queue a task</a> to
      <a href=#notify-about-playing id=playing-the-media-resource:notify-about-playing>notify about playing</a> for the element.</p>

     </li></ol>

   </li><li>

    <p>Otherwise, if the <a href=#media-element id=playing-the-media-resource:media-element-50>media element</a>'s <code id=playing-the-media-resource:dom-media-readystate-9><a href=#dom-media-readystate>readyState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-have_future_data-5><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data-4><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>, <a id=playing-the-media-resource:queue-a-task-11 href=webappapis.html#queue-a-task>queue a task</a> to
    <a href=#resolve-pending-play-promises id=playing-the-media-resource:resolve-pending-play-promises-2>resolve pending play promises</a>.</p>

    <p class=note>The media element is already playing. However, it's possible that
    <var>promise</var> will be <a href=#reject-pending-play-promises id=playing-the-media-resource:reject-pending-play-promises>rejected</a> before
    the queued task is run.</p>

   </li><li><p>Set the <a href=#media-element id=playing-the-media-resource:media-element-51>media element</a>'s <a href=#autoplaying-flag id=playing-the-media-resource:autoplaying-flag>autoplaying flag</a> to false.</li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-52>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-25>current media controller</a>, then
   <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state-6>report the controller state</a> for the <a href=#media-element id=playing-the-media-resource:media-element-53>media element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-26>current media
   controller</a>.</li><li><p>Return <var>promise</var>.</li></ol>

  <hr>

  <p>When the <dfn id=dom-media-pause><code>pause()</code></dfn> method is invoked, and when
  the user agent is required to pause the <a href=#media-element id=playing-the-media-resource:media-element-54>media element</a>, the user agent must run the
  following steps:</p>

  <ol><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-55>media element</a>'s <code id=playing-the-media-resource:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, invoke the <a href=#media-element id=playing-the-media-resource:media-element-56>media element</a>'s
   <a href=#concept-media-load-algorithm id=playing-the-media-resource:concept-media-load-algorithm-2>resource selection algorithm</a>.</li><li><p>Run the <a href=#internal-pause-steps id=playing-the-media-resource:internal-pause-steps>internal pause steps</a> for the <a href=#media-element id=playing-the-media-resource:media-element-57>media element</a>.</li></ol>

  <p>The <dfn id=internal-pause-steps>internal pause steps</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-58>media element</a> are as follows:</p>

  <ol><li><p>Set the <a href=#media-element id=playing-the-media-resource:media-element-59>media element</a>'s <a href=#autoplaying-flag id=playing-the-media-resource:autoplaying-flag-2>autoplaying flag</a> to false.</li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-60>media element</a>'s <code id=playing-the-media-resource:dom-media-paused-11><a href=#dom-media-paused>paused</a></code> attribute
   is false, run the following steps:</p>

    <ol><li><p>Change the value of <code id=playing-the-media-resource:dom-media-paused-12><a href=#dom-media-paused>paused</a></code> to true.</li><li>

      <p><a id=playing-the-media-resource:queue-a-task-12 href=webappapis.html#queue-a-task>Queue a task</a> to:</p>

      <ol><li><p><a id=playing-the-media-resource:fire-a-simple-event-11 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=playing-the-media-resource:event-media-timeupdate-5><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</li><li><p><a id=playing-the-media-resource:fire-a-simple-event-12 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> named <code id=playing-the-media-resource:event-media-pause-2><a href=#event-media-pause>pause</a></code>
       at the element.</li><li><p><a href=#reject-pending-play-promises id=playing-the-media-resource:reject-pending-play-promises-2>Reject pending play promises</a> with <code id=playing-the-media-resource:aborterror><a href=infrastructure.html#aborterror>AbortError</a></code>.</li></ol>

     </li><li><p>Set the <a href=#official-playback-position id=playing-the-media-resource:official-playback-position>official playback position</a> to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-8>current playback
     position</a>.</li></ol>

   </li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-61>media element</a> has a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-27>current media controller</a>, then
   <a href=#report-the-controller-state id=playing-the-media-resource:report-the-controller-state-7>report the controller state</a> for the <a href=#media-element id=playing-the-media-resource:media-element-62>media element</a>'s <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-28>current media
   controller</a>.</li></ol>

  <hr>

  <p>The <dfn id=effective-playback-rate>effective playback rate</dfn> is not necessarily the element's <code id=playing-the-media-resource:dom-media-playbackrate-5><a href=#dom-media-playbackrate>playbackRate</a></code>. When a <a href=#media-element id=playing-the-media-resource:media-element-63>media element</a> has a
  <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-29>current media controller</a>, its <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-2>effective playback rate</a> is the
  <code id=playing-the-media-resource:mediacontroller-2><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-playback-rate id=playing-the-media-resource:media-controller-playback-rate>media controller playback rate</a>. Otherwise, the
  <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-3>effective playback rate</a> is just the element's <code id=playing-the-media-resource:dom-media-playbackrate-6><a href=#dom-media-playbackrate>playbackRate</a></code>. Thus, the <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-30>current media
  controller</a> overrides the <a href=#media-element id=playing-the-media-resource:media-element-64>media element</a>.</p>

  <p>If the <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-4>effective playback rate</a> is positive or zero, then the <dfn id=direction-of-playback>direction of
  playback</dfn> is forwards. Otherwise, it is backwards.</p>

  <p id=media-playback>When a <a href=#media-element id=playing-the-media-resource:media-element-65>media element</a> is <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-4>potentially playing</a> and
  its <code id=playing-the-media-resource:document><a href=dom.html#document>Document</a></code> is a <a id=playing-the-media-resource:fully-active href=browsers.html#fully-active>fully active</a> <code id=playing-the-media-resource:document-2><a href=dom.html#document>Document</a></code>, its <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-9>current
  playback position</a> must increase monotonically at <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-5>effective playback rate</a> units
  of media time per unit time of the <a href=#media-timeline id=playing-the-media-resource:media-timeline-2>media timeline</a>'s clock. (This specification always
  refers to this as an <i>increase</i>, but that increase could actually be a <em>de</em>crease if
  the <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-6>effective playback rate</a> is negative.)<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28236" title='The "rules for updating the text track rendering" are not run when mode changes from hidden to showing'>28236</a></div>

  <p class=note>The <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-7>effective playback rate</a> can be 0.0, in which case the
  <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-10>current playback position</a> doesn't move, despite playback not being paused (<code id=playing-the-media-resource:dom-media-paused-13><a href=#dom-media-paused>paused</a></code> doesn't become true, and the <code id=playing-the-media-resource:event-media-pause-3><a href=#event-media-pause>pause</a></code> event doesn't fire).</p>

  <p class=note>This specification doesn't define how the user agent achieves the appropriate
  playback rate — depending on the protocol and media available, it is plausible that the user
  agent could negotiate with the server to have the server provide the media data at the appropriate
  rate, so that (except for the period between when the rate is changed and when the server updates
  the stream's playback rate) the client doesn't actually have to drop or interpolate any
  frames.</p>

  <p>Any time the user agent <a href=webappapis.html#await-a-stable-state id=playing-the-media-resource:await-a-stable-state>provides a stable state</a>,
  the <a href=#official-playback-position id=playing-the-media-resource:official-playback-position-2>official playback position</a> must be set to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-11>current playback
  position</a>.</p> 

  <p>While the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-8>direction of playback</a> is backwards, any corresponding audio must be
  <a href=#concept-media-muted id=playing-the-media-resource:concept-media-muted>muted</a>. While the <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-8>effective playback rate</a> is
  so low or so high that the user agent cannot play audio usefully, the corresponding audio must
  also be <a href=#concept-media-muted id=playing-the-media-resource:concept-media-muted-2>muted</a>. If the <a href=#effective-playback-rate id=playing-the-media-resource:effective-playback-rate-9>effective playback
  rate</a> is not 1.0, the user agent may apply pitch adjustments to the audio as necessary to
  render it faithfully.</p>

  <p><a href=#media-element id=playing-the-media-resource:media-element-66>Media elements</a> that are <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-5>potentially playing</a>
  while not <a id=playing-the-media-resource:in-a-document href=infrastructure.html#in-a-document>in a <code>Document</code></a> must not play any video, but should play any
  audio component. Media elements must not stop playing just because all references to them have
  been removed; only once a media element is in a state where no further audio could ever be played
  by that element may the element be garbage collected.</p>

  <p class=note>It is possible for an element to which no explicit references exist to play audio,
  even if such an element is not still actively playing: for instance, it could have a <a href=#current-media-controller id=playing-the-media-resource:current-media-controller-31>current
  media controller</a> that still has references and can still be unpaused, or it could be
  unpaused but stalled waiting for content to buffer, or it could be still buffering, but with a
  <code id=playing-the-media-resource:event-media-suspend><a href=#event-media-suspend>suspend</a></code> event listener that begins playback. Even a
  media element whose <a href=#media-resource id=playing-the-media-resource:media-resource-18>media resource</a> has no audio tracks could eventually play audio
  again if it had an event listener that changes the <a href=#media-resource id=playing-the-media-resource:media-resource-19>media resource</a>.</p>

  <hr>

  <p>Each <a href=#media-element id=playing-the-media-resource:media-element-67>media element</a> has a <dfn id=list-of-newly-introduced-cues>list of newly introduced cues</dfn>, which must be
  initially empty. Whenever a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue>text track cue</a> is added to the <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues>list of cues</a> of a <a href=#text-track id=playing-the-media-resource:text-track>text track</a> that is in the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks>list of text
  tracks</a> for a <a href=#media-element id=playing-the-media-resource:media-element-68>media element</a>, that <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-2>cue</a> must
  be added to the <a href=#media-element id=playing-the-media-resource:media-element-69>media element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues>list of newly introduced cues</a>. Whenever
  a <a href=#text-track id=playing-the-media-resource:text-track-2>text track</a> is added to the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-2>list of text tracks</a> for a <a href=#media-element id=playing-the-media-resource:media-element-70>media
  element</a>, all of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-3>cues</a> in that <a href=#text-track id=playing-the-media-resource:text-track-3>text
  track</a>'s <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues-2>list of cues</a> must be added to the
  <a href=#media-element id=playing-the-media-resource:media-element-71>media element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-2>list of newly introduced cues</a>. When a <a href=#media-element id=playing-the-media-resource:media-element-72>media
  element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-3>list of newly introduced cues</a> has new cues added while the
  <a href=#media-element id=playing-the-media-resource:media-element-73>media element</a>'s <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag-3>show poster flag</a> is not set, then the user agent must
  run the <i id=playing-the-media-resource:time-marches-on-2><a href=#time-marches-on>time marches on</a></i> steps.</p>

  <p>When a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-4>text track cue</a> is removed from the <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues-3>list of cues</a> of a <a href=#text-track id=playing-the-media-resource:text-track-4>text track</a> that is in the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-3>list of text
  tracks</a> for a <a href=#media-element id=playing-the-media-resource:media-element-74>media element</a>, and whenever a <a href=#text-track id=playing-the-media-resource:text-track-5>text track</a> is removed
  from the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-4>list of text tracks</a> of a <a href=#media-element id=playing-the-media-resource:media-element-75>media element</a>, if the <a href=#media-element id=playing-the-media-resource:media-element-76>media
  element</a>'s <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag-4>show poster flag</a> is not set, then the user agent must run the
  <i id=playing-the-media-resource:time-marches-on-3><a href=#time-marches-on>time marches on</a></i> steps.</p>

  <p>When the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-12>current playback position</a> of a <a href=#media-element id=playing-the-media-resource:media-element-77>media element</a> changes (e.g.
  due to playback or seeking), the user agent must run the <i id=playing-the-media-resource:time-marches-on-4><a href=#time-marches-on>time marches on</a></i> steps. If the
  <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-13>current playback position</a> changes while the steps are running, then the user agent
  must wait for the steps to complete, and then must immediately rerun the steps. (These steps are
  thus run as often as possible or needed — if one iteration takes a long time, this can cause
  certain <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-5>cues</a> to be skipped over as the user agent rushes ahead
  to "catch up".)</p>

  <p>The <dfn id=time-marches-on><i>time marches on</i></dfn> steps are as follows:</p>

  <ol><li><p>Let <var>current cues</var> be a list of <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-6>cues</a>, initialised to contain all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-7>cues</a> of all
   the <a href=#text-track-hidden id=playing-the-media-resource:text-track-hidden>hidden</a> or <a href=#text-track-showing id=playing-the-media-resource:text-track-showing>showing</a> <a href=#text-track id=playing-the-media-resource:text-track-6>text tracks</a> of the <a href=#media-element id=playing-the-media-resource:media-element-78>media
   element</a> (not the <a href=#text-track-disabled id=playing-the-media-resource:text-track-disabled>disabled</a> ones) whose <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-2>start times</a> are less than or equal to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-14>current
   playback position</a> and whose <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time-2>end times</a> are
   greater than the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-15>current playback position</a>.</li><li><p>Let <var>other cues</var> be a list of <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-8>cues</a>,
   initialised to contain all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-9>cues</a> of <a href=#text-track-hidden id=playing-the-media-resource:text-track-hidden-2>hidden</a> and <a href=#text-track-showing id=playing-the-media-resource:text-track-showing-2>showing</a> <a href=#text-track id=playing-the-media-resource:text-track-7>text tracks</a> of the <a href=#media-element id=playing-the-media-resource:media-element-79>media element</a> that are not present in <var>current cues</var>.</li><li><p>Let <var>last time</var> be the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-16>current playback position</a> at the
   time this algorithm was last run for this <a href=#media-element id=playing-the-media-resource:media-element-80>media element</a>, if this is not the first
   time it has run.</li><li><p>If the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-17>current playback position</a> has, since the last time this algorithm was
   run, only changed through its usual monotonic increase during normal playback, then let <var>missed cues</var> be the list of <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-10>cues</a> in <var>other cues</var> whose <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-3>start times</a> are
   greater than or equal to <var>last time</var> and whose <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time-3>end times</a> are less than or equal to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-18>current playback position</a>.
   Otherwise, let <var>missed cues</var> be an empty list.</li><li><p>Remove all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-11>cues</a> in <var>missed cues</var>
   that are also in the <a href=#media-element id=playing-the-media-resource:media-element-81>media element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-4>list of newly introduced cues</a>, and
   then empty the element's <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-5>list of newly introduced cues</a>.</li><li><p>If the time was reached through the usual monotonic increase of the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-19>current playback
   position</a> during normal playback, and if the user agent has not fired a <code id=playing-the-media-resource:event-media-timeupdate-6><a href=#event-media-timeupdate>timeupdate</a></code> event at the element in the past 15 to 250ms and
   is not still running event handlers for such an event, then the user agent must <a id=playing-the-media-resource:queue-a-task-13 href=webappapis.html#queue-a-task>queue a
   task</a> to <a id=playing-the-media-resource:fire-a-simple-event-13 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-timeupdate-7><a href=#event-media-timeupdate>timeupdate</a></code> at the element. (In the other cases, such as
   explicit seeks, relevant events get fired as part of the overall process of changing the
   <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-20>current playback position</a>.)</p>

   <p class=note>The event thus is not to be fired faster than about 66Hz or slower than 4Hz
   (assuming the event handlers don't take longer than 250ms to run). User agents are encouraged to
   vary the frequency of the event based on the system load and the average cost of processing the
   event each time, so that the UI updates are not any more frequent than the user agent can
   comfortably handle while decoding the video.</li><li><p>If all of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-12>cues</a> in <var>current cues</var>
   have their <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag>text track cue active flag</a> set, none of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-13>cues</a> in <var>other cues</var> have their <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-2>text track cue active
   flag</a> set, and <var>missed cues</var> is empty, then abort these steps.</li><li>

    <p>If the time was reached through the usual monotonic increase of the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-21>current playback
    position</a> during normal playback, and there are <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-14>cues</a>
    in <var>other cues</var> that have their <a href=#text-track-cue-pause-on-exit-flag id=playing-the-media-resource:text-track-cue-pause-on-exit-flag>text track cue pause-on-exit flag</a>
    set and that either have their <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-3>text track cue active flag</a> set or are also in <var>missed cues</var>, then <a id=playing-the-media-resource:immediately href=infrastructure.html#immediately>immediately</a> <a href=#dom-media-pause id=playing-the-media-resource:dom-media-pause-2>pause</a> the
    <a href=#media-element id=playing-the-media-resource:media-element-82>media element</a>.  </p>

    <p class=note>In the other cases, such as explicit seeks, playback is not paused by going past
    the end time of a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-15>cue</a>, even if that <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-16>cue</a> has its <a href=#text-track-cue-pause-on-exit-flag id=playing-the-media-resource:text-track-cue-pause-on-exit-flag-2>text track cue pause-on-exit flag</a> set.</p>

   </li><li>

    <p>Let <var>events</var> be a list of <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task>tasks</a>,
    initially empty. Each <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-2>task</a> in this list will be associated
    with a <a href=#text-track id=playing-the-media-resource:text-track-8>text track</a>, a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-17>text track cue</a>, and a time, which are used to
    sort the list before the <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-3>tasks</a> are queued.</p>

    <p>Let <var>affected tracks</var> be a list of <a href=#text-track id=playing-the-media-resource:text-track-9>text
    tracks</a>, initially empty.</p>

    <p>When the steps below say to <dfn id=prepare-an-event>prepare an event</dfn> named <var>event</var> for a
    <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-18>text track cue</a> <var>target</var> with a time <var>time</var>, the
    user agent must run these substeps:</p>

    <ol><li><p>Let <var>track</var> be the <a href=#text-track id=playing-the-media-resource:text-track-10>text track</a> with which the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-19>text
     track cue</a> <var>target</var> is associated.</li><li><p>Create a <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-4>task</a> to <a id=playing-the-media-resource:fire-a-simple-event-14 href=webappapis.html#fire-a-simple-event>fire a simple event</a>
     named <var>event</var> at <var>target</var>.</li><li><p>Add the newly created <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-5>task</a> to <var>events</var>, associated with the time <var>time</var>, the <a href=#text-track id=playing-the-media-resource:text-track-11>text
     track</a> <var>track</var>, and the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-20>text track cue</a> <var>target</var>.</li><li><p>Add <var>track</var> to <var>affected tracks</var>.</li></ol>

   </li><li><p>For each <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-21>text track cue</a> in <var>missed
   cues</var>, <a href=#prepare-an-event id=playing-the-media-resource:prepare-an-event>prepare an event</a> named <code id=playing-the-media-resource:event-media-enter><a href=#event-media-enter>enter</a></code> for the
   <code id=playing-the-media-resource:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code> object with the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-4>text track cue start time</a>.</li><li><p>For each <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-22>text track cue</a> in <var>other
   cues</var> that either has its <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-4>text track cue active flag</a> set or is in <var>missed cues</var>, <a href=#prepare-an-event id=playing-the-media-resource:prepare-an-event-2>prepare an event</a> named <code id=playing-the-media-resource:event-media-exit><a href=#event-media-exit>exit</a></code> for the <code id=playing-the-media-resource:texttrackcue-2><a href=#texttrackcue>TextTrackCue</a></code> object with the later of the
   <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time-4>text track cue end time</a> and the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-5>text track cue start time</a>.</li><li><p>For each <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-23>text track cue</a> in <var>current
   cues</var> that does not have its <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-5>text track cue active flag</a> set, <a href=#prepare-an-event id=playing-the-media-resource:prepare-an-event-3>prepare an
   event</a> named <code id=playing-the-media-resource:event-media-enter-2><a href=#event-media-enter>enter</a></code> for the <code id=playing-the-media-resource:texttrackcue-3><a href=#texttrackcue>TextTrackCue</a></code>
   object with the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-6>text track cue start time</a>.</li><li>

    <p>Sort the <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-6>tasks</a> in <var>events</var> in ascending
    time order (<a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-7>tasks</a> with earlier times first).</p>

    <p>Further sort <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-8>tasks</a> in <var>events</var> that have
    the same time by the relative <a href=#text-track-cue-order id=playing-the-media-resource:text-track-cue-order>text track cue order</a> of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-24>text track cues</a> associated with these <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-9>tasks</a>.</p>

    <p>Finally, sort <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-10>tasks</a> in <var>events</var> that have
    the same time and same <a href=#text-track-cue-order id=playing-the-media-resource:text-track-cue-order-2>text track cue order</a> by placing <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-11>tasks</a> that fire <code id=playing-the-media-resource:event-media-enter-3><a href=#event-media-enter>enter</a></code> events before
    those that fire <code id=playing-the-media-resource:event-media-exit-2><a href=#event-media-exit>exit</a></code> events.</p>

   </li><li><p><a href=webappapis.html#queue-a-task id=playing-the-media-resource:queue-a-task-14>Queue</a> each <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-12>task</a> in
   <var>events</var>, in list order.</li><li><p>Sort <var>affected tracks</var> in the same order as the <a href=#text-track id=playing-the-media-resource:text-track-12>text tracks</a> appear in the <a href=#media-element id=playing-the-media-resource:media-element-83>media element</a>'s <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-5>list of text
   tracks</a>, and remove duplicates.</p>

   </li><li><p>For each <a href=#text-track id=playing-the-media-resource:text-track-13>text track</a> in <var>affected tracks</var>, in the list
   order, <a id=playing-the-media-resource:queue-a-task-15 href=webappapis.html#queue-a-task>queue a task</a> to <a id=playing-the-media-resource:fire-a-simple-event-15 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=playing-the-media-resource:event-media-cuechange><a href=#event-media-cuechange>cuechange</a></code> at the <code id=playing-the-media-resource:texttrack><a href=#texttrack>TextTrack</a></code> object, and, if the
   <a href=#text-track id=playing-the-media-resource:text-track-14>text track</a> has a corresponding <code id=playing-the-media-resource:the-track-element><a href=#the-track-element>track</a></code> element, to then <a id=playing-the-media-resource:fire-a-simple-event-16 href=webappapis.html#fire-a-simple-event>fire a
   simple event</a> named <code id=playing-the-media-resource:event-media-cuechange-2><a href=#event-media-cuechange>cuechange</a></code> at the
   <code id=playing-the-media-resource:the-track-element-2><a href=#the-track-element>track</a></code> element as well.</li><li><p>Set the <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-6>text track cue active flag</a> of all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-25>cues</a> in the <var>current cues</var>, and unset the <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-7>text track cue
   active flag</a> of all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-26>cues</a> in the <var>other
   cues</var>.</li><li><p>Run the <a href=#rules-for-updating-the-text-track-rendering id=playing-the-media-resource:rules-for-updating-the-text-track-rendering>rules for updating the text track rendering</a> of each of the <a href=#text-track id=playing-the-media-resource:text-track-15>text tracks</a> in <var>affected tracks</var> that are <a href=#text-track-showing id=playing-the-media-resource:text-track-showing-3>showing</a>, providing the <a href=#text-track id=playing-the-media-resource:text-track-16>text track</a>'s <a href=#text-track-language id=playing-the-media-resource:text-track-language>text track
   language</a> as the fallback language if it is not the empty string. For example, for <a href=#text-track id=playing-the-media-resource:text-track-17>text tracks</a> based on WebVTT, the <a id=playing-the-media-resource:rules-for-updating-the-display-of-webvtt-text-tracks href=infrastructure.html#rules-for-updating-the-display-of-webvtt-text-tracks>rules for updating the display
   of WebVTT text tracks</a>. <a href=references.html#refsWEBVTT>[WEBVTT]</a></li></ol>

  <p>For the purposes of the algorithm above, a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-27>text track cue</a> is considered to be part
  of a <a href=#text-track id=playing-the-media-resource:text-track-18>text track</a> only if it is listed in the <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues-4>text track list of cues</a>, not
  merely if it is associated with the <a href=#text-track id=playing-the-media-resource:text-track-19>text track</a>.</p>

  <p class=note>If the <a href=#media-element id=playing-the-media-resource:media-element-84>media element</a>'s <a id=playing-the-media-resource:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> stops being a
  <a id=playing-the-media-resource:fully-active-2 href=browsers.html#fully-active>fully active</a> document, then the playback will <a href=#media-playback>stop</a>
  until the document is active again.</p>

  <p>When a <a href=#media-element id=playing-the-media-resource:media-element-85>media element</a> is <a href=infrastructure.html#remove-an-element-from-a-document id=playing-the-media-resource:remove-an-element-from-a-document>removed
  from a <code>Document</code></a>, the user agent must run the following steps:</p>

  <ol><li><p><a id=playing-the-media-resource:await-a-stable-state-2 href=webappapis.html#await-a-stable-state>Await a stable state</a>, allowing the <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-13>task</a> that removed the <a href=#media-element id=playing-the-media-resource:media-element-86>media element</a> from the
   <code id=playing-the-media-resource:document-3><a href=dom.html#document>Document</a></code> to continue. The <a id=playing-the-media-resource:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a> consists of all the
   remaining steps of this algorithm. (Steps in the <a id=playing-the-media-resource:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a> are marked with
   ⌛.)</li><li><p>⌛ If the <a href=#media-element id=playing-the-media-resource:media-element-87>media element</a> is <a id=playing-the-media-resource:in-a-document-2 href=infrastructure.html#in-a-document>in a <code>Document</code></a>,
   abort these steps.</li><li><p>⌛ Run the <a href=#internal-pause-steps id=playing-the-media-resource:internal-pause-steps-2>internal pause steps</a> for the <a href=#media-element id=playing-the-media-resource:media-element-88>media element</a>.</p>

  </li></ol>

  



  <h5 id=seeking>4.8.13.9 シーク</h5>

  <dl class=domintro><dt><var>media</var> . <code id=seeking:dom-media-seeking><a href=#dom-media-seeking>seeking</a></code><dd>

    <p>ユーザーエージェントが現在シークしている場合にtrueを返す。</p>

   <dt><var>media</var> . <code id=seeking:dom-media-seekable><a href=#dom-media-seekable>seekable</a></code><dd>

    <p>ユーザーエージェントがシーク可能である<a href=#media-resource id=seeking:media-resource>メディアリソース</a>の範囲を表す<code id=seeking:timeranges><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=seeking:dom-media-fastseek><a href=#dom-media-fastseek>fastSeek</a></code>( <var>time</var> )<dd>

    <p>高速化のため、できるだけ早く近くに与えられた<var>time</var>をシークする。（正確な時刻を求めるために、<code id=seeking:dom-media-currenttime><a href=#dom-media-currenttime>currentTime</a></code>属性を使用する。）</p>

    <p>メディアリソースがロードされない場合、これは何もしない。</p>

   </dl>

  

  <p>The <dfn id=dom-media-seeking><code>seeking</code></dfn> attribute must initially have the
  value false.</p>

  <p>The <dfn id=dom-media-fastseek><code>fastSeek()</code></dfn> method must <a href=#dom-media-seek id=seeking:dom-media-seek>seek</a> to the time given by the method's argument, with the
  <i>approximate-for-speed</i> flag set.</p>

  <p>When the user agent is required to <dfn id=dom-media-seek>seek</dfn> to a particular <var>new playback position</var> in the <a href=#media-resource id=seeking:media-resource-2>media resource</a>, optionally with the
  <i>approximate-for-speed</i> flag set, it means that the user agent must run the following steps.
  This algorithm interacts closely with the <a id=seeking:event-loop href=webappapis.html#event-loop>event loop</a> mechanism; in particular, it has
  a <a id=seeking:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a> (which is triggered as part of the <a id=seeking:event-loop-2 href=webappapis.html#event-loop>event loop</a>
  algorithm). Steps in that section are marked with ⌛.<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28929" title="Setting video.currentTime (seeking) should synchronously update the attribute's value">28929</a></div>

  <ol><li><p>Set the <a href=#media-element id=seeking:media-element>media element</a>'s <a href=#show-poster-flag id=seeking:show-poster-flag>show poster flag</a> to false.</li><li><p>If the <a href=#media-element id=seeking:media-element-2>media element</a>'s <code id=seeking:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code>
   is <code id=seeking:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, abort these steps.</li><li><p>If the element's <code id=seeking:dom-media-seeking-2><a href=#dom-media-seeking>seeking</a></code> IDL attribute is true,
   then another instance of this algorithm is already running. Abort that other instance of the
   algorithm without waiting for the step that it is running to complete.</li><li><p>Set the <code id=seeking:dom-media-seeking-3><a href=#dom-media-seeking>seeking</a></code> IDL attribute to true.</li><li><p>If the seek was in response to a DOM method call or setting of an IDL attribute, then
   continue the script. The remainder of these steps must be run <a id=seeking:in-parallel href=infrastructure.html#in-parallel>in parallel</a>. With the exception
   of the steps marked with ⌛, they could be aborted at any time by another instance of this
   algorithm being invoked.</li><li><p>If the <var>new playback position</var> is later than the end of the <a href=#media-resource id=seeking:media-resource-3>media
   resource</a>, then let it be the end of the <a href=#media-resource id=seeking:media-resource-4>media resource</a> instead.</li><li><p>If the <var>new playback position</var> is less than the <a href=#earliest-possible-position id=seeking:earliest-possible-position>earliest possible
   position</a>, let it be that position instead.</li><li><p>If the (possibly now changed) <var>new playback position</var> is not in one of
   the ranges given in the <code id=seeking:dom-media-seekable-2><a href=#dom-media-seekable>seekable</a></code> attribute, then let it
   be the position in one of the ranges given in the <code id=seeking:dom-media-seekable-3><a href=#dom-media-seekable>seekable</a></code> attribute that is the nearest to the <var>new
   playback position</var>. If two positions both satisfy that constraint (i.e. the <var>new playback position</var> is exactly in the middle between two ranges in the <code id=seeking:dom-media-seekable-4><a href=#dom-media-seekable>seekable</a></code> attribute) then use the position that is closest to
   the <a href=#current-playback-position id=seeking:current-playback-position>current playback position</a>. If there are no ranges given in the <code id=seeking:dom-media-seekable-5><a href=#dom-media-seekable>seekable</a></code> attribute then set the <code id=seeking:dom-media-seeking-4><a href=#dom-media-seeking>seeking</a></code> IDL attribute to false and abort these steps.</li><li>

    <p>If the <i>approximate-for-speed</i> flag is set, adjust the <var>new playback
    position</var> to a value that will allow for playback to resume promptly. If <var>new
    playback position</var> before this step is before <a href=#current-playback-position id=seeking:current-playback-position-2>current playback position</a>, then
    the adjusted <var>new playback position</var> must also be before the <a href=#current-playback-position id=seeking:current-playback-position-3>current
    playback position</a>. Similarly, if the <var>new playback position</var> before
    this step is after <a href=#current-playback-position id=seeking:current-playback-position-4>current playback position</a>, then the adjusted <var>new
    playback position</var> must also be after the <a href=#current-playback-position id=seeking:current-playback-position-5>current playback position</a>.</p>

    <p class=example>For example, the user agent could snap to a nearby key frame, so that it
    doesn't have to spend time decoding then discarding intermediate frames before resuming
    playback.</p>

    </li><li><p><a id=seeking:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a id=seeking:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=seeking:event-media-seeking><a href=#event-media-seeking>seeking</a></code> at the element.</li><li>

    <p>Set the <a href=#current-playback-position id=seeking:current-playback-position-6>current playback position</a> to the <var>new playback
    position</var>.</p>

    <p class=note>If the <a href=#media-element id=seeking:media-element-3>media element</a> was <a href=#potentially-playing id=seeking:potentially-playing>potentially playing</a>
    immediately before it started seeking, but seeking caused its <code id=seeking:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute to change to a value lower than <code id=seeking:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>, then a <code id=seeking:event-media-waiting><a href=#event-media-waiting>waiting</a></code> event <a href=#fire-waiting-when-waiting>will be
    fired</a> at the element.</p> 
    

    <p class=note>This step sets the <a href=#current-playback-position id=seeking:current-playback-position-7>current playback position</a>, and thus can
    immediately trigger other conditions, such as the rules regarding when playback "<a href=#reaches-the-end>reaches the end of the media resource</a>" (part of the logic that
    handles looping), even before the user agent is actually able to render the media data for that
    position (as determined in the next step).</p>

    <p class=note>The <code id=seeking:dom-media-currenttime-2><a href=#dom-media-currenttime>currentTime</a></code> attribute returns
    the <a href=#official-playback-position id=seeking:official-playback-position>official playback position</a>, not the <a href=#current-playback-position id=seeking:current-playback-position-8>current playback position</a>, and
    therefore gets updated before script execution, separate from this algorithm.</p>

   </li><li><p>Wait until the user agent has established whether or not the <a href=#media-data id=seeking:media-data>media data</a> for
   the <var>new playback position</var> is available, and, if it is, until it has decoded
   enough data to play back that position.</p>
   
   </li><li><p><a id=seeking:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=seeking:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a> consists of all
   the remaining steps of this algorithm. (Steps in the <a id=seeking:synchronous-section-3 href=webappapis.html#synchronous-section>synchronous section</a> are marked
   with ⌛.)</li><li><p>⌛ Set the <code id=seeking:dom-media-seeking-5><a href=#dom-media-seeking>seeking</a></code> IDL attribute to
   false.</li><li><p>⌛ Run the <a href=#time-marches-on id=seeking:time-marches-on>time marches on</a> steps.</li><li id=seekUpdate><p>⌛ <a id=seeking:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=seeking:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple event</a>
   named <code id=seeking:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</li><li><p>⌛ <a id=seeking:queue-a-task-3 href=webappapis.html#queue-a-task>Queue a task</a> to <a id=seeking:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=seeking:event-media-seeked><a href=#event-media-seeked>seeked</a></code> at the element.</li></ol>

  <hr>

  <p>The <dfn id=dom-media-seekable><code>seekable</code></dfn> attribute must return a new
  static <a href=#normalised-timeranges-object id=seeking:normalised-timeranges-object>normalised <code>TimeRanges</code> object</a> that represents the ranges of the
  <a href=#media-resource id=seeking:media-resource-5>media resource</a>, if any, that the user agent is able to seek to, at the time the
  attribute is evaluated.</p>

  <p class=note>If the user agent can seek to anywhere in the <a href=#media-resource id=seeking:media-resource-6>media resource</a>, e.g.
  because it is a simple movie file and the user agent and the server support HTTP Range requests,
  then the attribute would return an object with one range, whose start is the time of the first
  frame (the <a href=#earliest-possible-position id=seeking:earliest-possible-position-2>earliest possible position</a>, typically zero), and whose end is the same as
  the time of the first frame plus the <code id=seeking:dom-media-duration><a href=#dom-media-duration>duration</a></code> attribute's
  value (which would equal the time of the last frame, and might be positive Infinity).</p>

  <p class=note>The range might be continuously changing, e.g. if the user agent is buffering a
  sliding window on an infinite stream. This is the behaviour seen with DVRs viewing live TV, for
  instance.</p>

  <p>User agents should adopt a very liberal and optimistic view of what is seekable. User
  agents should also buffer recent content where possible to enable seeking to be fast.</p>

  <p class=example>For instance, consider a large video file served on an HTTP server without
  support for HTTP Range requests. A browser <em>could</em> implement this by only buffering the
  current frame and data obtained for subsequent frames, never allow seeking, except for seeking to
  the very start by restarting the playback. However, this would be a poor implementation. A high
  quality implementation would buffer the last few minutes of content (or more, if sufficient
  storage space is available), allowing the user to jump back and rewatch something surprising
  without any latency, and would in addition allow arbitrary seeking by reloading the file from the
  start if necessary, which would be slower but still more convenient than having to literally
  restart the video and watch it all the way through just to get to an earlier unbuffered spot.</p>

  <p><a href=#media-resource id=seeking:media-resource-7>Media resources</a> might be internally scripted or
  interactive. Thus, a <a href=#media-element id=seeking:media-element-4>media element</a> could play in a non-linear fashion. If this
  happens, the user agent must act as if the algorithm for <a href=#dom-media-seek id=seeking:dom-media-seek-2>seeking</a> was used whenever the <a href=#current-playback-position id=seeking:current-playback-position-9>current playback position</a>
  changes in a discontinuous fashion (so that the relevant events fire). If the <a href=#media-element id=seeking:media-element-5>media
  element</a> has a <a href=#current-media-controller id=seeking:current-media-controller>current media controller</a>, then the user agent must <a href=#seek-the-media-controller id=seeking:seek-the-media-controller>seek
  the media controller</a> appropriately instead.</p>

  


  <h5 id=media-resources-with-multiple-media-tracks>4.8.13.10 複数のメディアトラックを伴うメディアリソース</h5>

  <p><a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource>メディアリソース</a> は、複数の埋め込みオーディオおよびビデオトラックを持つことができる。たとえば、主ビデオトラックとオーディオトラックに加えて、<a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-2>メディアリソース</a>は、外国語吹き替えのやりとり、監督の解説、音声による説明、代替アングル、または手話のオーバーレイを持つかもしれない。</p>

  <dl class=domintro><dt><var>media</var> . <code id=media-resources-with-multiple-media-tracks:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code><dd>

    <p><a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-3>メディアリソース</a>で使用可能なオーディオトラックを表す<code id=media-resources-with-multiple-media-tracks:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=media-resources-with-multiple-media-tracks:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code><dd>

    <p><a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-4>メディアリソース</a>で使用可能なビデオトラックを表す<code id=media-resources-with-multiple-media-tracks:videotracklist><a href=#videotracklist>VideoTrackList</a></code>オブジェクトを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-media-audiotracks><code>audioTracks</code></dfn> attribute of a
  <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element>media element</a> must return a <a id=media-resources-with-multiple-media-tracks:live href=infrastructure.html#live>live</a> <code id=media-resources-with-multiple-media-tracks:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code> object
  representing the audio tracks available in the <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-2>media element</a>'s <a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-5>media
  resource</a>.</p>

  <p>The <dfn id=dom-media-videotracks><code>videoTracks</code></dfn> attribute of a
  <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-3>media element</a> must return a <a id=media-resources-with-multiple-media-tracks:live-2 href=infrastructure.html#live>live</a> <code id=media-resources-with-multiple-media-tracks:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code> object
  representing the video tracks available in the <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-4>media element</a>'s <a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-6>media
  resource</a>.</p>

  <p class=note>There are only ever one <code id=media-resources-with-multiple-media-tracks:audiotracklist-3><a href=#audiotracklist>AudioTrackList</a></code> object and one
  <code id=media-resources-with-multiple-media-tracks:videotracklist-3><a href=#videotracklist>VideoTrackList</a></code> object per <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-5>media element</a>, even if another <a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-7>media
  resource</a> is loaded into the element: the objects are reused. (The <code id=media-resources-with-multiple-media-tracks:audiotrack><a href=#audiotrack>AudioTrack</a></code>
  and <code id=media-resources-with-multiple-media-tracks:videotrack><a href=#videotrack>VideoTrack</a></code> objects are not, though.)</p>

  

  <div class=example>

   <p>この例において、スクリプトは、ビデオおよび動画が配置される要素の参照へのURLを取得する関数を定義する。その機能はビデオの読み込みを試み、そして、一度読み込まれると、利用可能な手話トラックがあるかどうかをチェックする。存在する場合、そのトラックも表示する。両方のトラックは与えられたコンテナにのみ配置される。スタイルが巧妙な方法でこの作業を行うために適用されることを前提にしている。</p>

   <pre>&lt;script&gt;
 function loadVideo(url, container) {
   var controller = new MediaController();
   var video = document.createElement('video');
   video.src = url;
   video.autoplay = true;
   video.controls = true;
   video.controller = controller;
   container.appendChild(video);
   video.onloadedmetadata = function (event) {
     for (var i = 0; i &lt; video.videoTracks.length; i += 1) {
       if (video.videoTracks[i].kind == 'sign') {
         var sign = document.createElement('video');
         sign.src = url + '#track=' + video.videoTracks[i].id; 
         sign.autoplay = true;
         sign.controller = controller;
         container.appendChild(sign);
         return;
       }
     }
   };
 }
&lt;/script&gt;</pre>

  </div>


  <h6 id=audiotracklist-and-videotracklist-objects>4.8.13.10.1 <code id=audiotracklist-and-videotracklist-objects:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>および<code id=audiotracklist-and-videotracklist-objects:videotracklist><a href=#videotracklist>VideoTrackList</a></code>オブジェクト</h6><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome no"><span>Chrome</span> <span>None</span></span><span class="and_chr no"><span>Chrome for Android</span> <span>None</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>7.0-7.1+</span></span><span class="firefox no"><span>Firefox</span> <span>None</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android no"><span>Android Browser</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>6.1+</span></span><span class="opera no"><span>Opera</span> <span>None</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="ie_mob yes"><span>IE Mobile</span> <span>10+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=audiotracks">caniuse.com</a></div>

  <p><code id=audiotracklist-and-videotracklist-objects:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code>および<code id=audiotracklist-and-videotracklist-objects:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code>インターフェースは、前節で定義された属性で使用される。</p>

  <pre class=idl>interface <dfn id=audiotracklist>AudioTrackList</dfn> : <a id=audiotracklist-and-videotracklist-objects:eventtarget href=infrastructure.html#eventtarget>EventTarget</a> {
  readonly attribute unsigned long <a href=#dom-audiotracklist-length id=audiotracklist-and-videotracklist-objects:dom-audiotracklist-length>length</a>;
  getter <a href=#audiotrack id=audiotracklist-and-videotracklist-objects:audiotrack>AudioTrack</a> (unsigned long index);
  <a href=#audiotrack id=audiotracklist-and-videotracklist-objects:audiotrack-2>AudioTrack</a>? <a href=#dom-audiotracklist-gettrackbyid id=audiotracklist-and-videotracklist-objects:dom-audiotracklist-gettrackbyid>getTrackById</a>(DOMString id);

  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onchange id=audiotracklist-and-videotracklist-objects:handler-tracklist-onchange>onchange</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-2 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onaddtrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onaddtrack>onaddtrack</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-3 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onremovetrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onremovetrack>onremovetrack</a>;
};

interface <dfn id=audiotrack>AudioTrack</dfn> {
  readonly attribute DOMString <a href=#dom-audiotrack-id id=audiotracklist-and-videotracklist-objects:dom-audiotrack-id>id</a>;
  readonly attribute DOMString <a href=#dom-audiotrack-kind id=audiotracklist-and-videotracklist-objects:dom-audiotrack-kind>kind</a>;
  readonly attribute DOMString <a href=#dom-audiotrack-label id=audiotracklist-and-videotracklist-objects:dom-audiotrack-label>label</a>;
  readonly attribute DOMString <a href=#dom-audiotrack-language id=audiotracklist-and-videotracklist-objects:dom-audiotrack-language>language</a>;
  attribute boolean <a href=#dom-audiotrack-enabled id=audiotracklist-and-videotracklist-objects:dom-audiotrack-enabled>enabled</a>;
};

interface <dfn id=videotracklist>VideoTrackList</dfn> : <a id=audiotracklist-and-videotracklist-objects:eventtarget-2 href=infrastructure.html#eventtarget>EventTarget</a> {
  readonly attribute unsigned long <a href=#dom-videotracklist-length id=audiotracklist-and-videotracklist-objects:dom-videotracklist-length>length</a>;
  getter <a href=#videotrack id=audiotracklist-and-videotracklist-objects:videotrack>VideoTrack</a> (unsigned long index);
  <a href=#videotrack id=audiotracklist-and-videotracklist-objects:videotrack-2>VideoTrack</a>? <a href=#dom-videotracklist-gettrackbyid id=audiotracklist-and-videotracklist-objects:dom-videotracklist-gettrackbyid>getTrackById</a>(DOMString id);
  readonly attribute long <a href=#dom-videotracklist-selectedindex id=audiotracklist-and-videotracklist-objects:dom-videotracklist-selectedindex>selectedIndex</a>;

  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-4 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onchange id=audiotracklist-and-videotracklist-objects:handler-tracklist-onchange-2>onchange</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-5 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onaddtrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onaddtrack-2>onaddtrack</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-6 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onremovetrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onremovetrack-2>onremovetrack</a>;
};

interface <dfn id=videotrack>VideoTrack</dfn> {
  readonly attribute DOMString <a href=#dom-videotrack-id id=audiotracklist-and-videotracklist-objects:dom-videotrack-id>id</a>;
  readonly attribute DOMString <a href=#dom-videotrack-kind id=audiotracklist-and-videotracklist-objects:dom-videotrack-kind>kind</a>;
  readonly attribute DOMString <a href=#dom-videotrack-label id=audiotracklist-and-videotracklist-objects:dom-videotrack-label>label</a>;
  readonly attribute DOMString <a href=#dom-videotrack-language id=audiotracklist-and-videotracklist-objects:dom-videotrack-language>language</a>;
  attribute boolean <a href=#dom-videotrack-selected id=audiotracklist-and-videotracklist-objects:dom-videotrack-selected>selected</a>;
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotracklist-length-2><a href=#dom-audiotracklist-length>length</a></code><dt><var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code> . <code id=audiotracklist-and-videotracklist-objects:dom-videotracklist-length-2><a href=#dom-videotracklist-length>length</a></code><dd>

    <p>リスト内のトラックの数を返す。</p>

   <dt><var>audioTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-audiotracks-2><a href=#dom-media-audiotracks>audioTracks</a></code>[<var>index</var>]<dt><var>videoTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks-2><a href=#dom-media-videotracks>videoTracks</a></code>[<var>index</var>]<dd>

    <p>指定<code id=audiotracklist-and-videotracklist-objects:audiotrack-3><a href=#audiotrack>AudioTrack</a></code>または<code id=audiotracklist-and-videotracklist-objects:videotrack-3><a href=#videotrack>VideoTrack</a></code>オブジェクトを返す。</p>

   <dt><var>audioTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-audiotracks-3><a href=#dom-media-audiotracks>audioTracks</a></code> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotracklist-gettrackbyid-2><a href=#dom-audiotracklist-gettrackbyid>getTrackById</a></code>( <var>id</var> )<dt><var>videoTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks-3><a href=#dom-media-videotracks>videoTracks</a></code> . <code id=audiotracklist-and-videotracklist-objects:dom-videotracklist-gettrackbyid-2><a href=#dom-videotracklist-gettrackbyid>getTrackById</a></code>( <var>id</var> )<dd>

    <p>与えられた識別子とともに<code id=audiotracklist-and-videotracklist-objects:audiotrack-4><a href=#audiotrack>AudioTrack</a></code>または<code id=audiotracklist-and-videotracklist-objects:videotrack-4><a href=#videotrack>VideoTrack</a></code>オブジェクトを返す、または一切トラックがその識別子を持たない場合nullを返す。</p>

   <dt><var>audioTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-id-2><a href=#dom-audiotrack-id>id</a></code><dt><var>videoTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-videotrack-id-2><a href=#dom-videotrack-id>id</a></code><dd>

    <p>指定されたトラックのIDを返す。フォーマットが<cite>Media Fragments URI</cite>構文をサポートし、<code>getTrackById()</code>メソッドとともに使用できる場合、これは、フラグメント識別子で使用できるIDである。<a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>

   <dt><var>audioTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-kind-2><a href=#dom-audiotrack-kind>kind</a></code><dt><var>videoTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-videotrack-kind-2><a href=#dom-videotrack-kind>kind</a></code><dd>

    <p>与えられたトラックに該当するカテゴリを返す。<a href=#dom-TrackList-getKind-categories>可能なトラックカテゴリ</a>は以下の通り。</p>

   <dt><var>audioTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-label-2><a href=#dom-audiotrack-label>label</a></code><dt><var>videoTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-videotrack-label-2><a href=#dom-videotrack-label>label</a></code><dd>

    <p>既知の場合、指定されたトラックのラベルを返し、そうでなければ空文字列を返す。</p>

   <dt><var>audioTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-language-2><a href=#dom-audiotrack-language>language</a></code><dt><var>videoTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-videotrack-language-2><a href=#dom-videotrack-language>language</a></code><dd>

    <p>既知の場合、指定されたトラックの言語を返し、そうでなければ空の文字列を返す。</p>

   <dt><var>audioTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-enabled-2><a href=#dom-audiotrack-enabled>enabled</a></code> [ = <var>value</var> ]<dd>

    <p>指定されたトラックがアクティブである場合、trueを返し、そうでなければfalseを返す。</p>

    <p>トラックが有効かどうかを変更する設定が可能である。複数のオーディオトラックが同時に有効である場合、それらが混在している。</p>

   <dt><var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks-4><a href=#dom-media-videotracks>videoTracks</a></code> . <code id=audiotracklist-and-videotracklist-objects:dom-videotracklist-selectedindex-2><a href=#dom-videotracklist-selectedindex>selectedIndex</a></code><dd>

    <p>もしあれば、現在選択されているトラックのインデックスを返し、そうでなければ-1を返す。</p>

   <dt><var>videoTrack</var> . <code id=audiotracklist-and-videotracklist-objects:dom-videotrack-selected-2><a href=#dom-videotrack-selected>selected</a></code> [ = <var>value</var> ]<dd>

    <p>指定されたトラックがアクティブである場合、trueを返し、そうでなければfalseを返す。</p>

    <p>トラックが選択されるかどうかを変更する設定が可能である。0個または1つのいずれかのビデオトラックが選択される。前の1つが選択されている間に新しいトラックを選択すると、1つ前の選択を解除する。</p>

   </dl>

  

  <p>An <code id=audiotracklist-and-videotracklist-objects:audiotracklist-3><a href=#audiotracklist>AudioTrackList</a></code> object represents a dynamic list of zero or more audio tracks,
  of which zero or more can be enabled at a time. Each audio track is represented by an
  <code id=audiotracklist-and-videotracklist-objects:audiotrack-5><a href=#audiotrack>AudioTrack</a></code> object.</p>

  <p>A <code id=audiotracklist-and-videotracklist-objects:videotracklist-3><a href=#videotracklist>VideoTrackList</a></code> object represents a dynamic list of zero or more video tracks, of
  which zero or one can be selected at a time. Each video track is represented by a
  <code id=audiotracklist-and-videotracklist-objects:videotrack-5><a href=#videotrack>VideoTrack</a></code> object.</p>

  <p>Tracks in <code id=audiotracklist-and-videotracklist-objects:audiotracklist-4><a href=#audiotracklist>AudioTrackList</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotracklist-4><a href=#videotracklist>VideoTrackList</a></code> objects must be
  consistently ordered. If the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource>media resource</a> is in a format that defines an order,
  then that order must be used; otherwise, the order must be the relative order in which the tracks
  are declared in the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-2>media resource</a>. The order used is called the <i>natural order</i>
  of the list.</p>

  <p class=note>Each track in one of these objects thus has an index; the first has the index
  0, and each subsequent track is numbered one higher than the previous one. If a <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-3>media
  resource</a> dynamically adds or removes audio or video tracks, then the indices of the tracks
  will change dynamically. If the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-4>media resource</a> changes entirely, then all the
  previous tracks will be removed and replaced with new tracks.</p>

  <p>The <dfn id=dom-audiotracklist-length><code>AudioTrackList.length</code></dfn> and <dfn id=dom-videotracklist-length><code>VideoTrackList.length</code></dfn> attributes must return
  the number of tracks represented by their objects at the time of getting.</p>

  <p>The <a id=audiotracklist-and-videotracklist-objects:supported-property-indices href=infrastructure.html#supported-property-indices>supported property indices</a> of <code id=audiotracklist-and-videotracklist-objects:audiotracklist-5><a href=#audiotracklist>AudioTrackList</a></code> and
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-5><a href=#videotracklist>VideoTrackList</a></code> objects at any instant are the numbers from zero to the number of
  tracks represented by the respective object minus one, if any tracks are represented. If an
  <code id=audiotracklist-and-videotracklist-objects:audiotracklist-6><a href=#audiotracklist>AudioTrackList</a></code> or <code id=audiotracklist-and-videotracklist-objects:videotracklist-6><a href=#videotracklist>VideoTrackList</a></code> object represents no tracks, it has no
  <a id=audiotracklist-and-videotracklist-objects:supported-property-indices-2 href=infrastructure.html#supported-property-indices>supported property indices</a>.</p>

  <p>To <a id=audiotracklist-and-videotracklist-objects:determine-the-value-of-an-indexed-property href=infrastructure.html#determine-the-value-of-an-indexed-property>determine the value of an indexed property</a> for a given index <var>index</var> in an <code id=audiotracklist-and-videotracklist-objects:audiotracklist-7><a href=#audiotracklist>AudioTrackList</a></code> or <code id=audiotracklist-and-videotracklist-objects:videotracklist-7><a href=#videotracklist>VideoTrackList</a></code> object <var>list</var>, the user agent must return the <code id=audiotracklist-and-videotracklist-objects:audiotrack-6><a href=#audiotrack>AudioTrack</a></code> or
  <code id=audiotracklist-and-videotracklist-objects:videotrack-6><a href=#videotrack>VideoTrack</a></code> object that represents the <var>index</var>th track in <var>list</var>.</p>

  <p>The <dfn id=dom-audiotracklist-gettrackbyid><code>AudioTrackList.getTrackById(<var>id</var>)</code></dfn> and <dfn id=dom-videotracklist-gettrackbyid><code>VideoTrackList.getTrackById(<var>id</var>)</code></dfn> methods must return the first <code id=audiotracklist-and-videotracklist-objects:audiotrack-7><a href=#audiotrack>AudioTrack</a></code> or
  <code id=audiotracklist-and-videotracklist-objects:videotrack-7><a href=#videotrack>VideoTrack</a></code> object (respectively) in the <code id=audiotracklist-and-videotracklist-objects:audiotracklist-8><a href=#audiotracklist>AudioTrackList</a></code> or
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-8><a href=#videotracklist>VideoTrackList</a></code> object (respectively) whose identifier is equal to the value of the
  <var>id</var> argument (in the natural order of the list, as defined above). When no
  tracks match the given argument, the methods must return null.</p>

  <p>The <code id=audiotracklist-and-videotracklist-objects:audiotrack-8><a href=#audiotrack>AudioTrack</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotrack-8><a href=#videotrack>VideoTrack</a></code> objects represent specific tracks of a
  <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-5>media resource</a>. Each track can have an identifier, category, label, and language.
  These aspects of a track are permanent for the lifetime of the track; even if a track is removed
  from a <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-6>media resource</a>'s <code id=audiotracklist-and-videotracklist-objects:audiotracklist-9><a href=#audiotracklist>AudioTrackList</a></code> or <code id=audiotracklist-and-videotracklist-objects:videotracklist-9><a href=#videotracklist>VideoTrackList</a></code>
  objects, those aspects do not change.</p>

  <p>In addition, <code id=audiotracklist-and-videotracklist-objects:audiotrack-9><a href=#audiotrack>AudioTrack</a></code> objects can each be enabled or disabled; this is the audio
  track's <i>enabled state</i>. When an <code id=audiotracklist-and-videotracklist-objects:audiotrack-10><a href=#audiotrack>AudioTrack</a></code> is created, its <i>enabled state</i>
  must be set to false (disabled). The <a href=#concept-media-load-resource id=audiotracklist-and-videotracklist-objects:concept-media-load-resource>resource fetch
  algorithm</a> can override this.</p>

  <p>Similarly, a single <code id=audiotracklist-and-videotracklist-objects:videotrack-9><a href=#videotrack>VideoTrack</a></code> object per <code id=audiotracklist-and-videotracklist-objects:videotracklist-10><a href=#videotracklist>VideoTrackList</a></code> object can
  be selected, this is the video track's <i>selection state</i>. When a <code id=audiotracklist-and-videotracklist-objects:videotrack-10><a href=#videotrack>VideoTrack</a></code> is
  created, its <i>selection state</i> must be set to false (not selected). The <a href=#concept-media-load-resource id=audiotracklist-and-videotracklist-objects:concept-media-load-resource-2>resource fetch algorithm</a> can override this.</p>

  <p>The <dfn id=dom-audiotrack-id><code>AudioTrack.id</code></dfn> and <dfn id=dom-videotrack-id><code>VideoTrack.id</code></dfn> attributes must return the identifier
  of the track, if it has one, or the empty string otherwise. If the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-7>media resource</a> is
  in a format that supports the <cite>Media Fragments URI</cite> fragment identifier syntax, the
  identifier returned for a particular track must be the same identifier that would enable the track
  if used as the name of a track in the track dimension of such a fragment identifier. <a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a> <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p class=example>For example, in Ogg files, this would be the Name header field of the track. <a href=references.html#refsOGGSKELETONHEADERS>[OGGSKELETONHEADERS]</a></p>

  <p>The <dfn id=dom-audiotrack-kind><code>AudioTrack.kind</code></dfn> and <dfn id=dom-videotrack-kind><code>VideoTrack.kind</code></dfn> attributes must return the category
  of the track, if it has one, or the empty string otherwise.</p>

  <p>The category of a track is the string given in the first column of the table below that is the
  most appropriate for the track based on the definitions in the table's second and third columns,
  as determined by the metadata included in the track in the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-8>media resource</a>. The cell
  in the third column of a row says what the category given in the cell in the first column of that
  row applies to; a category is only appropriate for an audio track if it applies to audio tracks,
  and a category is only appropriate for video tracks if it applies to video tracks. Categories must
  only be returned for <code id=audiotracklist-and-videotracklist-objects:audiotrack-11><a href=#audiotrack>AudioTrack</a></code> objects if they are appropriate for audio, and must
  only be returned for <code id=audiotracklist-and-videotracklist-objects:videotrack-11><a href=#videotrack>VideoTrack</a></code> objects if they are appropriate for video.</p>

  <p>For Ogg files, the Role header field of the track gives the relevant metadata. For DASH media
  resources, the <code>Role</code> element conveys the information. For WebM, only the
  <code>FlagDefault</code> element currently maps to a value. The <cite>Sourcing In-band
  Media Resource Tracks from Media Containers into HTML</cite> specification has further details.
  <a href=references.html#refsOGGSKELETONHEADERS>[OGGSKELETONHEADERS]</a> <a href=references.html#refsDASH>[DASH]</a> <a href=references.html#refsWEBMCG>[WEBMCG]</a> <a href=references.html#refsINBAND>[INBAND]</a></p>

  

  <table id=dom-TrackList-getKind-categories><caption><code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-kind-3><a href=#dom-audiotrack-kind>AudioTrack.kind()</a></code>および<code id=audiotracklist-and-videotracklist-objects:dom-videotrack-kind-3><a href=#dom-videotrack-kind>VideoTrack.kind()</a></code>に値を返す</caption><thead><tr><th>カテゴリー
     </th><th>定義
     </th><th>適用対象</th><th> 例
   <tbody></th></tr><tr><td>"<dfn id=value-track-kind-alternate><code>alternative</code></dfn>"
     
     </td><td>メイントラックへの可能な代替、たとえば、曲の別テイク（オーディオ）、または別アングル（ビデオ）。
     </td><td>Audioとvideo。
     </td><td>Ogg："audio/alternate"または"video/alternate"、DASH："main"なしの"alternate"および"commentary"ロール、またaudioに対して"dub"ロールなし（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-caption><code>captions</code></dfn>"
     
     </td><td>焼き付き字幕をもつ主ビデオトラックのバージョン。（レガシーコンテンツ用。新しいコンテンツはテキストトラックを使用する。）
     </td><td>Videoのみ。
     </td><td>DASH："caption"および"main"ロールを同時に（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-descriptions><code>descriptions</code></dfn>"
     
     </td><td>ビデオトラックの音声解説。
     </td><td>Audioのみ。
     </td><td>Ogg："audio/audiodesc"。

    </td></tr><tr><td>"<dfn id=value-track-kind-main><code>main</code></dfn>"
     
     </td><td>主オーディオまたはビデオトラック。
     </td><td>Audioとvideo。
     </td><td>Ogg："audio/main"または"video/main"、WebM："FlagDefault"要素が設定される、DASH："caption"、"subtitle"、および"dub"なしの"main"ロール（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-main-desc><code>main-desc</code></dfn>"
     
     </td><td>音声解説と混合された、主オーディオトラック。
     </td><td>Audioのみ。
     </td><td>MPEG-2 TSでのAC3 audio：bsmod=2とfull_svc=1。 

    </td></tr><tr><td>"<dfn id=value-track-kind-sign><code>sign</code></dfn>"
     
     </td><td>オーディオトラックの手話通訳。
     </td><td>Videoのみ。
     </td><td>Ogg："video/sign"。

    </td></tr><tr><td>"<dfn id=value-track-kind-subtitle><code>subtitles</code></dfn>"
     
     </td><td>焼き付き字幕をもつ主ビデオトラックのバージョン。（レガシーコンテンツ用。新しいコンテンツはテキストトラックを使用する。）
     </td><td>Videoのみ。
     </td><td>DASH："subtitle"および"main"ロールを同時（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-translation><code>translation</code></dfn>"
     
     </td><td>主オーディオトラックの翻訳バージョン。
     </td><td>Audioのみ。
     </td><td>Ogg："audio/dub"。DASH："dub"および"main"ロールを同時（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-commentary><code>commentary</code></dfn>"
     
     </td><td>主オーディオまたはビデオトラックのコメンタリ。たとえばディレクターのコメント。
     </td><td>Audioとvideo。
     </td><td>DASH："main"ロールなしの"commentary"ロール（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-none><code></code></dfn>"（空文字列）
     </td><td>明示的な種類がないか、トラックのメタデータで指定された種類は、ユーザーエージェントによって認識されない。
     </td><td>Audioとvideo。
     </td><td>

  </td></tr></table>

  

  <p>The <dfn id=dom-audiotrack-label><code>AudioTrack.label</code></dfn> and <dfn id=dom-videotrack-label><code>VideoTrack.label</code></dfn> attributes must return the label
  of the track, if it has one, or the empty string otherwise. <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p>The <dfn id=dom-audiotrack-language><code>AudioTrack.language</code></dfn> and <dfn id=dom-videotrack-language><code>VideoTrack.language</code></dfn> attributes must return the
  BCP 47 language tag of the language of the track, if it has one, or the empty string otherwise. If
  the user agent is not able to express that language as a BCP 47 language tag (for example because
  the language information in the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-9>media resource</a>'s format is a free-form string without
  a defined interpretation), then the method must return the empty string, as if the track had no
  language. <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p>The <dfn id=dom-audiotrack-enabled><code>AudioTrack.enabled</code></dfn> attribute, on
  getting, must return true if the track is currently enabled, and false otherwise. On setting, it
  must enable the track if the new value is true, and disable it otherwise. (If the track is no
  longer in an <code id=audiotracklist-and-videotracklist-objects:audiotracklist-10><a href=#audiotracklist>AudioTrackList</a></code> object, then the track being enabled or disabled has no
  effect beyond changing the value of the attribute on the <code id=audiotracklist-and-videotracklist-objects:audiotrack-12><a href=#audiotrack>AudioTrack</a></code> object.)</p>

  <p id=toggle-audio-track>Whenever an audio track in an <code id=audiotracklist-and-videotracklist-objects:audiotracklist-11><a href=#audiotracklist>AudioTrackList</a></code> that was
  disabled is enabled, and whenever one that was enabled is disabled, the user agent must
  <a id=audiotracklist-and-videotracklist-objects:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a id=audiotracklist-and-videotracklist-objects:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=audiotracklist-and-videotracklist-objects:event-media-change><a href=#event-media-change>change</a></code> at the <code id=audiotracklist-and-videotracklist-objects:audiotracklist-12><a href=#audiotracklist>AudioTrackList</a></code> object.</p>

  <p>An audio track that has no data for a particular position on the <a href=#media-timeline id=audiotracklist-and-videotracklist-objects:media-timeline>media timeline</a>,
  or that does not exist at that position, must be interpreted as being silent at that point on the
  timeline.</p>

  <p>The <dfn id=dom-videotracklist-selectedindex><code>VideoTrackList.selectedIndex</code></dfn> attribute
  must return the index of the currently selected track, if any. If the <code id=audiotracklist-and-videotracklist-objects:videotracklist-11><a href=#videotracklist>VideoTrackList</a></code>
  object does not currently represent any tracks, or if none of the tracks are selected, it must
  instead return −1.</p>

  <p>The <dfn id=dom-videotrack-selected><code>VideoTrack.selected</code></dfn> attribute, on
  getting, must return true if the track is currently selected, and false otherwise. On setting, it
  must select the track if the new value is true, and unselect it otherwise. If the track is in a
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-12><a href=#videotracklist>VideoTrackList</a></code>, then all the other <code id=audiotracklist-and-videotracklist-objects:videotrack-12><a href=#videotrack>VideoTrack</a></code> objects in that list must
  be unselected. (If the track is no longer in a <code id=audiotracklist-and-videotracklist-objects:videotracklist-13><a href=#videotracklist>VideoTrackList</a></code> object, then the track
  being selected or unselected has no effect beyond changing the value of the attribute on the
  <code id=audiotracklist-and-videotracklist-objects:videotrack-13><a href=#videotrack>VideoTrack</a></code> object.)</p>

  <p id=toggle-video-track>Whenever a track in a <code id=audiotracklist-and-videotracklist-objects:videotracklist-14><a href=#videotracklist>VideoTrackList</a></code> that was previously
  not selected is selected, and whenever the selected track in a <code id=audiotracklist-and-videotracklist-objects:videotracklist-15><a href=#videotracklist>VideoTrackList</a></code> is
  unselected without a new track being selected in its stead, the user agent must <a id=audiotracklist-and-videotracklist-objects:queue-a-task-2 href=webappapis.html#queue-a-task>queue a task</a> to <a id=audiotracklist-and-videotracklist-objects:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple
  event</a> named <code id=audiotracklist-and-videotracklist-objects:event-media-change-2><a href=#event-media-change>change</a></code> at the
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-16><a href=#videotracklist>VideoTrackList</a></code> object. This <a href=webappapis.html#concept-task id=audiotracklist-and-videotracklist-objects:concept-task>task</a> must be <a href=webappapis.html#queue-a-task id=audiotracklist-and-videotracklist-objects:queue-a-task-3>queued</a> before the <a href=webappapis.html#concept-task id=audiotracklist-and-videotracklist-objects:concept-task-2>task</a> that fires
  the <code id=audiotracklist-and-videotracklist-objects:event-media-resize><a href=#event-media-resize>resize</a></code> event, if any.</p>

  <p>A video track that has no data for a particular position on the <a href=#media-timeline id=audiotracklist-and-videotracklist-objects:media-timeline-2>media timeline</a>
  must be interpreted as being fully transparent black at that point on the timeline, with the same
  dimensions as the last frame before that position, or, if the position is before all the data for
  that track, the same dimensions as the first frame for that track. A track that does not exist at
  all at the current position must be treated as if it existed but had no data.</p>

  <p class=example>For instance, if a video has a track that is only introduced after one hour of
  playback, and the user selects that track then goes back to the start, then the user agent will
  act as if that track started at the start of the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-10>media resource</a> but was simply
  transparent until one hour in.</p>

  <hr>

  <p>The following are the <a id=audiotracklist-and-videotracklist-objects:event-handlers href=webappapis.html#event-handlers>event handlers</a> (and their corresponding <a href=webappapis.html#event-handler-event-type id=audiotracklist-and-videotracklist-objects:event-handler-event-type>event handler event types</a>) that must be supported, as <a id=audiotracklist-and-videotracklist-objects:event-handler-idl-attributes href=webappapis.html#event-handler-idl-attributes>event handler IDL attributes</a>,
  by all objects implementing the <code id=audiotracklist-and-videotracklist-objects:audiotracklist-13><a href=#audiotracklist>AudioTrackList</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotracklist-17><a href=#videotracklist>VideoTrackList</a></code>
  interfaces:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=audiotracklist-and-videotracklist-objects:event-handlers-2>イベントハンドラ</a> </th><th><a id=audiotracklist-and-videotracklist-objects:event-handler-event-type-2 href=webappapis.html#event-handler-event-type>イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-tracklist-onchange><code>onchange</code></dfn> </td><td> <code id=audiotracklist-and-videotracklist-objects:event-media-change-3><a href=#event-media-change>change</a></code>
    </td></tr><tr><td><dfn id=handler-tracklist-onaddtrack><code>onaddtrack</code></dfn> </td><td> <code id=audiotracklist-and-videotracklist-objects:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>
    </td></tr><tr><td><dfn id=handler-tracklist-onremovetrack><code>onremovetrack</code></dfn> </td><td> <code id=audiotracklist-and-videotracklist-objects:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code>
  </td></tr></table>

  

  


  <h6 id=selecting-specific-audio-and-video-tracks-declaratively>4.8.13.10.2 宣言的に特定のオーディオとビデオトラックを選択する</h6>

  <p><code id=selecting-specific-audio-and-video-tracks-declaratively:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code>および<code id=selecting-specific-audio-and-video-tracks-declaratively:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code>属性はスクリプトを再生すべきそのトラックを選択できるが、<a href=#media-resource id=selecting-specific-audio-and-video-tracks-declaratively:media-resource>メディアリソース</a>の<a id=selecting-specific-audio-and-video-tracks-declaratively:url href=infrastructure.html#url>URL</a>のフラグメント識別子で特定のトラックを指定することにより、宣言的に特定のトラックを選択することも可能である。フラグメント識別子の形式は、<a href=#media-resource id=selecting-specific-audio-and-video-tracks-declaratively:media-resource-2>メディアリソース</a>の<a id=selecting-specific-audio-and-video-tracks-declaratively:mime-type href=infrastructure.html#mime-type>MIMEタイプ</a>に依存する。<a href=references.html#refsRFC2046>[RFC2046]</a> <a href=references.html#refsURL>[URL]</a></p>

  <div class=example>

   <p>この例において、<cite>Media Fragments URI</cite>フラグメント識別子の構文をサポートする形式を使用するビデオが、ラベル"Alternative"として代替アングルがデフォルトのビデオトラックの代わりに有効にされるように埋め込まれている。<a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>

   <pre>&lt;video src="myvideo#track=Alternative"&gt;&lt;/video&gt;</pre>

  </div>


  <h5 id=synchronising-multiple-media-elements>4.8.13.11 複数のメディア要素を同期する</h5>

  <h6 id=introduction-4>4.8.13.11.1 導入</h6>

  <p>各<a href=#media-element id=introduction-4:media-element>メディア要素</a>は<code id=introduction-4:mediacontroller><a href=#mediacontroller>MediaController</a></code>を持つことができる。<code id=introduction-4:mediacontroller-2><a href=#mediacontroller>MediaController</a></code>は、たとえば手話通訳のトラックが同期を取ってビデオトラックに重ねることができるような、複数の<a href=#media-element id=introduction-4:media-element-2>メディア要素</a>の再生を調整するオブジェクトである。</p>

  <p>デフォルトで、<a href=#media-element id=introduction-4:media-element-3>メディア要素</a>は<code id=introduction-4:mediacontroller-3><a href=#mediacontroller>MediaController</a></code>を持たない。暗黙の<code id=introduction-4:mediacontroller-4><a href=#mediacontroller>MediaController</a></code>は<code id=introduction-4:attr-media-mediagroup><a href=#attr-media-mediagroup>mediagroup</a></code>コンテンツ属性を使用して割り当てることができる。明示的な<code id=introduction-4:mediacontroller-5><a href=#mediacontroller>MediaController</a></code>は、直接<code id=introduction-4:dom-media-controller><a href=#dom-media-controller>controller</a></code>IDL属性を使用して割り当てることができる。</p>

  <p><code id=introduction-4:mediacontroller-6><a href=#mediacontroller>MediaController</a></code>を伴う<a href=#media-element id=introduction-4:media-element-4>メディア要素</a>は、そのコントローラに<i>従属する</i>と言われる。<code id=introduction-4:mediacontroller-7><a href=#mediacontroller>MediaController</a></code>は、再生速度とそれに従属する<a href=#media-element id=introduction-4:media-element-5>メディア要素</a>のそれぞれの再生音量を変更し、その従属する<a href=#media-element id=introduction-4:media-element-6>メディア要素</a>のいずれかが予期せず失速した場合、他方が同時に停止することを保証する。</p>

  <p><a href=#media-element id=introduction-4:media-element-7>メディア要素</a>が<code id=introduction-4:mediacontroller-8><a href=#mediacontroller>MediaController</a></code>に従属される場合、その再生速度は同じ<code id=introduction-4:mediacontroller-9><a href=#mediacontroller>MediaController</a></code>の他のトラックのものに固定され、任意のループが無効になる。</p>




  <h6 id=media-controllers>4.8.13.11.2 メディアコントローラ</h6>

  <p class=critical>This feature has been implemented only in one user agent since it was <a href=https://github.com/whatwg/html/commit/66c5b32240c202c74f475872e7ea2cd163777b4a>introduced
  in 2011</a>. If a second implementation is not in progress by April 2016, it will be removed from
  this specification. Please see <a href=https://github.com/whatwg/html/issues/192>issue #192</a>
  for more details.</p>

  <pre class=idl>enum <dfn id=mediacontrollerplaybackstate>MediaControllerPlaybackState</dfn> { "<a href=#dom-mediacontroller-waiting id=media-controllers:dom-mediacontroller-waiting>waiting</a>", "<a href=#dom-mediacontroller-playing id=media-controllers:dom-mediacontroller-playing>playing</a>", "<a href=#dom-mediacontroller-ended id=media-controllers:dom-mediacontroller-ended>ended</a>" };
[<a href=#dom-mediacontroller id=media-controllers:dom-mediacontroller>Constructor</a>]
interface <dfn id=mediacontroller>MediaController</dfn> : <a id=media-controllers:eventtarget href=infrastructure.html#eventtarget>EventTarget</a> {
  readonly attribute unsigned short <a href=#dom-mediacontroller-readystate id=media-controllers:dom-mediacontroller-readystate>readyState</a>; // uses <a href=#htmlmediaelement id=media-controllers:htmlmediaelement>HTMLMediaElement</a>.<a href=#dom-media-readystate id=media-controllers:dom-media-readystate>readyState</a>'s values

  readonly attribute <a href=#timeranges id=media-controllers:timeranges>TimeRanges</a> <a href=#dom-mediacontroller-buffered id=media-controllers:dom-mediacontroller-buffered>buffered</a>;
  readonly attribute <a href=#timeranges id=media-controllers:timeranges-2>TimeRanges</a> <a href=#dom-mediacontroller-seekable id=media-controllers:dom-mediacontroller-seekable>seekable</a>;
  readonly attribute unrestricted double <a href=#dom-mediacontroller-duration id=media-controllers:dom-mediacontroller-duration>duration</a>;
  attribute double <a href=#dom-mediacontroller-currenttime id=media-controllers:dom-mediacontroller-currenttime>currentTime</a>;

  readonly attribute boolean <a href=#dom-mediacontroller-paused id=media-controllers:dom-mediacontroller-paused>paused</a>;
  readonly attribute <a href=#mediacontrollerplaybackstate id=media-controllers:mediacontrollerplaybackstate>MediaControllerPlaybackState</a> <a href=#dom-mediacontroller-playbackstate id=media-controllers:dom-mediacontroller-playbackstate>playbackState</a>;
  readonly attribute <a href=#timeranges id=media-controllers:timeranges-3>TimeRanges</a> <a href=#dom-mediacontroller-played id=media-controllers:dom-mediacontroller-played>played</a>;
  void <a href=#dom-mediacontroller-pause id=media-controllers:dom-mediacontroller-pause>pause</a>();
  void <a href=#dom-mediacontroller-unpause id=media-controllers:dom-mediacontroller-unpause>unpause</a>();
  void <a href=#dom-mediacontroller-play id=media-controllers:dom-mediacontroller-play>play</a>(); // calls play() on all media elements as well

  attribute double <a href=#dom-mediacontroller-defaultplaybackrate id=media-controllers:dom-mediacontroller-defaultplaybackrate>defaultPlaybackRate</a>;
  attribute double <a href=#dom-mediacontroller-playbackrate id=media-controllers:dom-mediacontroller-playbackrate>playbackRate</a>;

  attribute double <a href=#dom-mediacontroller-volume id=media-controllers:dom-mediacontroller-volume>volume</a>;
  attribute boolean <a href=#dom-mediacontroller-muted id=media-controllers:dom-mediacontroller-muted>muted</a>;

  attribute <a id=media-controllers:eventhandler href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onemptied id=media-controllers:handler-mediacontroller-onemptied>onemptied</a>;
  attribute <a id=media-controllers:eventhandler-2 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onloadedmetadata id=media-controllers:handler-mediacontroller-onloadedmetadata>onloadedmetadata</a>;
  attribute <a id=media-controllers:eventhandler-3 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onloadeddata id=media-controllers:handler-mediacontroller-onloadeddata>onloadeddata</a>;
  attribute <a id=media-controllers:eventhandler-4 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-oncanplay id=media-controllers:handler-mediacontroller-oncanplay>oncanplay</a>;
  attribute <a id=media-controllers:eventhandler-5 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-oncanplaythrough id=media-controllers:handler-mediacontroller-oncanplaythrough>oncanplaythrough</a>;
  attribute <a id=media-controllers:eventhandler-6 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onplaying id=media-controllers:handler-mediacontroller-onplaying>onplaying</a>;
  attribute <a id=media-controllers:eventhandler-7 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onended id=media-controllers:handler-mediacontroller-onended>onended</a>;
  attribute <a id=media-controllers:eventhandler-8 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onwaiting id=media-controllers:handler-mediacontroller-onwaiting>onwaiting</a>;

  attribute <a id=media-controllers:eventhandler-9 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-ondurationchange id=media-controllers:handler-mediacontroller-ondurationchange>ondurationchange</a>;
  attribute <a id=media-controllers:eventhandler-10 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-ontimeupdate id=media-controllers:handler-mediacontroller-ontimeupdate>ontimeupdate</a>;
  attribute <a id=media-controllers:eventhandler-11 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onplay id=media-controllers:handler-mediacontroller-onplay>onplay</a>;
  attribute <a id=media-controllers:eventhandler-12 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onpause id=media-controllers:handler-mediacontroller-onpause>onpause</a>;
  attribute <a id=media-controllers:eventhandler-13 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onratechange id=media-controllers:handler-mediacontroller-onratechange>onratechange</a>;
  attribute <a id=media-controllers:eventhandler-14 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-mediacontroller-onvolumechange id=media-controllers:handler-mediacontroller-onvolumechange>onvolumechange</a>;
};</pre>

  <dl class=domintro><dt><var>controller</var> = new <code id=media-controllers:dom-mediacontroller-2><a href=#dom-mediacontroller>MediaController</a></code>()<dd>

    <p>新しい<code id=media-controllers:mediacontroller><a href=#mediacontroller>MediaController</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=media-controllers:dom-media-controller><a href=#dom-media-controller>controller</a></code> [ = <var>controller</var> ]<dd>

    <p>Returns the current <code id=media-controllers:mediacontroller-2><a href=#mediacontroller>MediaController</a></code> for the <a href=#media-element id=media-controllers:media-element>media element</a>, if any,
    or null otherwise.</p>

    <p>明示的な<code id=media-controllers:mediacontroller-3><a href=#mediacontroller>MediaController</a></code>を設定することが可能である。もしあれば、設定して<code id=media-controllers:attr-media-mediagroup><a href=#attr-media-mediagroup>mediagroup</a></code>属性を削除する。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-readystate-2><a href=#dom-mediacontroller-readystate>readyState</a></code><dd>

    <p><code id=media-controllers:mediacontroller-4><a href=#mediacontroller>MediaController</a></code>は、それが<a href=#report-the-controller-state id=media-controllers:report-the-controller-state>コントローラの状態を報告する</a>結果としてイベントを発生させた最後の時間であった状態を返す。この属性の値は、<a href=#media-element id=media-controllers:media-element-2>メディア要素</a>の<code id=media-controllers:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code>属性の場合と同じである。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-buffered-2><a href=#dom-mediacontroller-buffered>buffered</a></code><dd>

    <p>ユーザーエージェントが、すべての従属<a href=#media-element id=media-controllers:media-element-3>メディア要素</a>に関連するすべてのメディアのデータを持つ時間範囲の共通部分を表す<code id=media-controllers:timeranges-4><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-seekable-2><a href=#dom-mediacontroller-seekable>seekable</a></code><dd>

    <p>ユーザーエージェントが、すべての従属<a href=#media-element id=media-controllers:media-element-4>メディア要素</a>をシークできる時間範囲の共通部分を表す<code id=media-controllers:timeranges-5><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-duration-2><a href=#dom-mediacontroller-duration>duration</a></code><dd>

    <p>（問題のデータが実際にバッファリングされた、または直接シーク可能ではないが、無限のストリームに対する将来の時間を含むかどうかを考慮しない）最も早い再生時点と最も遅い再生時点の差を返す。メディアが存在しない場合は0を返す。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-currenttime-2><a href=#dom-mediacontroller-currenttime>currentTime</a></code> [ = <var>value</var> ]<dd>

    <p>秒単位で、0時間と現在時間の<code id=media-controllers:dom-mediacontroller-duration-3><a href=#dom-mediacontroller-duration>duration</a></code>の間の位置として、<a href=#current-playback-position id=media-controllers:current-playback-position>現在の再生位置</a>を返す。</p>

    <p>指定時間にシークするために、設定可能である。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-paused-2><a href=#dom-mediacontroller-paused>paused</a></code><dd>

    <p>再生が一時停止された場合はtrueを返し、そうでなければfalseを返す。この属性がtrueの場合、このコントローラに従属するすべての<a href=#media-element id=media-controllers:media-element-5>メディア要素</a>が停止される。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-playbackstate-2><a href=#dom-mediacontroller-playbackstate>playbackState</a></code><dd>

    <p><code id=media-controllers:mediacontroller-5><a href=#mediacontroller>MediaController</a></code>は、それが<a href=#report-the-controller-state id=media-controllers:report-the-controller-state-2>コントローラの状態を報告する</a>結果としてイベントを発生させた最後の時間であった状態を返す。この属性の値は、メディアが積極的に再生されることを示す"<code id=media-controllers:dom-mediacontroller-playing-2><a href=#dom-mediacontroller-playing>playing</a></code>"、すべての<a href=#slaved-media-elements id=media-controllers:slaved-media-elements>従属メディア要素</a>の最後に到達しているために再生されていないことを示す"<code id=media-controllers:dom-mediacontroller-ended-2><a href=#dom-mediacontroller-ended>ended</a></code>"、またはその他の理由（たとえば<code id=media-controllers:mediacontroller-6><a href=#mediacontroller>MediaController</a></code>が一時停止されている）のために再生されていないことを示す"<code id=media-controllers:dom-mediacontroller-waiting-2><a href=#dom-mediacontroller-waiting>waiting</a></code>"のいずれかである。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-pause-2><a href=#dom-mediacontroller-pause>pause</a></code>()<dd>

    <p>trueに<code id=media-controllers:dom-mediacontroller-paused-3><a href=#dom-mediacontroller-paused>paused</a></code>属性を設定する。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-unpause-2><a href=#dom-mediacontroller-unpause>unpause</a></code>()<dd>

    <p>falseに<code id=media-controllers:dom-mediacontroller-paused-4><a href=#dom-mediacontroller-paused>paused</a></code>属性を設定する。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-play-2><a href=#dom-mediacontroller-play>play</a></code>()<dd>

    <p>falseに<code id=media-controllers:dom-mediacontroller-paused-5><a href=#dom-mediacontroller-paused>paused</a></code>属性を設定し、各<a href=#slaved-media-elements id=media-controllers:slaved-media-elements-2>従属メディア要素</a>の<code id=media-controllers:dom-media-play><a href=#dom-media-play>play()</a></code>メソッドを呼び出す。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-played-2><a href=#dom-mediacontroller-played>played</a></code><dd>

    <p>再生されているすべての従属<a href=#media-element id=media-controllers:media-element-6>メディア要素</a>で時間範囲の和集合を表す<code id=media-controllers:timeranges-6><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-defaultplaybackrate-2><a href=#dom-mediacontroller-defaultplaybackrate>defaultPlaybackRate</a></code> [ = <var>value</var> ]<dd>

    <p>再生のデフォルト率を返す。</p>

    <p>再生のデフォルト率を変更する設定が可能である。</p>

    <p>デフォルト率は再生に直接影響を与えないが、ユーザーが早送りモードに切り替えた場合、モードが通常の再生モードに戻った際に、再生速度（<code id=media-controllers:dom-mediacontroller-playbackrate-2><a href=#dom-mediacontroller-playbackrate>playbackRate</a></code>）がデフォルト率に戻されることが期待される。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-playbackrate-3><a href=#dom-mediacontroller-playbackrate>playbackRate</a></code> [ = <var>value</var> ]<dd>

    <p>再生の現在速度を返す。</p>

    <p>再生速度を変更する設定が可能である。</p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-volume-2><a href=#dom-mediacontroller-volume>volume</a></code> [ = <var>value</var> ]<dd>

    <p>0.0から1.0までの範囲の数字として、現在の再生音量の乗数を返す。ここで0.0は最小音量で1.0は最大音量である。</p>

    <p>音量の乗数を変更する設定が可能である。</p>

    <p>新しい値が範囲0.0から1.0に含まれない場合、<code id=media-controllers:indexsizeerror><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code>を投げる。 </p>

   <dt><var>controller</var> . <code id=media-controllers:dom-mediacontroller-muted-2><a href=#dom-mediacontroller-muted>muted</a></code> [ = <var>value</var> ]<dd>

    <p>（コントローラ上、またはこのコントローラに従属する任意の<a href=#media-element id=media-controllers:media-element-7>メディア要素</a>のいずれかで他の属性に関係なく）すべてのオーディオがミュートである場合、trueを返し、そうでなければfalseを返す。</p>

    <p>オーディオがミュートであるかどうかを変更する設定が可能である。</p>

   </dl>

  

  <p>A <a href=#media-element id=media-controllers:media-element-8>media element</a> can have a <dfn id=current-media-controller>current media controller</dfn>, which is a
  <code id=media-controllers:mediacontroller-7><a href=#mediacontroller>MediaController</a></code> object. When a <a href=#media-element id=media-controllers:media-element-9>media element</a> is created without a <code id=media-controllers:attr-media-mediagroup-2><a href=#attr-media-mediagroup>mediagroup</a></code> attribute, it does not have a <a href=#current-media-controller id=media-controllers:current-media-controller>current media
  controller</a>. (If it is created <em>with</em> such an attribute, then that attribute
  initialises the <a href=#current-media-controller id=media-controllers:current-media-controller-2>current media controller</a>, as defined below.)</p>

  <p>The <dfn id=slaved-media-elements>slaved media elements</dfn> of a <code id=media-controllers:mediacontroller-8><a href=#mediacontroller>MediaController</a></code> are the <a href=#media-element id=media-controllers:media-element-10>media elements</a> whose <a href=#current-media-controller id=media-controllers:current-media-controller-3>current media controller</a> is that
  <code id=media-controllers:mediacontroller-9><a href=#mediacontroller>MediaController</a></code>. All the <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-3>slaved media elements</a> of a
  <code id=media-controllers:mediacontroller-10><a href=#mediacontroller>MediaController</a></code> must use the same clock for their definition of their <a href=#media-timeline id=media-controllers:media-timeline>media
  timeline</a>'s unit time. When the user agent is required to act on each <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-4>slaved media element</a> in turn, they must be processed in the order that they
  were last associated with the <code id=media-controllers:mediacontroller-11><a href=#mediacontroller>MediaController</a></code>.</p>

  <hr>

  <p>The <dfn id=dom-media-controller><code>controller</code></dfn> attribute on a <a href=#media-element id=media-controllers:media-element-11>media
  element</a>, on getting, must return the element's <a href=#current-media-controller id=media-controllers:current-media-controller-4>current media controller</a>, if
  any, or null otherwise. On setting, the user agent must run the following steps:</p>

  <ol><li><p>Let <var>m</var> be the <a href=#media-element id=media-controllers:media-element-12>media element</a> in question.</li><li><p>Let <var>old controller</var> be <var>m</var>'s <a href=#current-media-controller id=media-controllers:current-media-controller-5>current media
   controller</a>, if it currently has one, and null otherwise.</li><li><p>Let <var>new controller</var> be null.</li><li><p>Let <var>m</var> have no <a href=#current-media-controller id=media-controllers:current-media-controller-6>current media controller</a>, if it currently
   has one.</li><li><p>Remove the element's <code id=media-controllers:attr-media-mediagroup-3><a href=#attr-media-mediagroup>mediagroup</a></code> content
   attribute, if any.</li><li><p>If the new value is null, then jump to the <i>update controllers</i> step below.</li><li><p>Let <var>m</var>'s <a href=#current-media-controller id=media-controllers:current-media-controller-7>current media controller</a> be the new
   value.</li><li><p>Let <var>new controller</var> be <var>m</var>'s <a href=#current-media-controller id=media-controllers:current-media-controller-8>current media
   controller</a>.</li><li><p><a href=#bring-the-media-element-up-to-speed-with-its-new-media-controller id=media-controllers:bring-the-media-element-up-to-speed-with-its-new-media-controller>Bring the media element up to speed with its new media controller</a>.</li><li><p><i>Update controllers</i>: If <var>old controller</var> and <var>new
   controller</var> are the same (whether both null or both the same controller) then abort these
   steps.</li><li><p>If <var>old controller</var> is not null and still has one or more <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-5>slaved
   media elements</a>, then <a href=#report-the-controller-state id=media-controllers:report-the-controller-state-3>report the controller state</a> for <var>old
   controller</var>.</li><li><p>If <var>new controller</var> is not null, then <a href=#report-the-controller-state id=media-controllers:report-the-controller-state-4>report the controller
   state</a> for <var>new controller</var>.</li></ol>

  <hr>

  <p>The <dfn id=dom-mediacontroller><code>MediaController()</code></dfn> constructor, when
  invoked, must return a newly created <code id=media-controllers:mediacontroller-12><a href=#mediacontroller>MediaController</a></code> object.</p>

  <hr>

  <p>The <dfn id=dom-mediacontroller-readystate><code>readyState</code></dfn> attribute must
  return the value to which it was most recently set. When the <code id=media-controllers:mediacontroller-13><a href=#mediacontroller>MediaController</a></code> object
  is created, the attribute must be set to the value 0 (<code id=media-controllers:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>). The value is updated by the <a href=#report-the-controller-state id=media-controllers:report-the-controller-state-5>report the
  controller state</a> algorithm below.</p>

  <p>The <dfn id=dom-mediacontroller-seekable><code>seekable</code></dfn> attribute must return
  a new static <a href=#normalised-timeranges-object id=media-controllers:normalised-timeranges-object>normalised <code>TimeRanges</code> object</a> that represents the
  intersection of the ranges of the <a href=#media-resource id=media-controllers:media-resource>media resources</a> of the
  <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-6>slaved media elements</a> that the user agent is able to seek to, at the time the
  attribute is evaluated.</p>

  <p>The <dfn id=dom-mediacontroller-buffered><code>buffered</code></dfn> attribute must return
  a new static <a href=#normalised-timeranges-object id=media-controllers:normalised-timeranges-object-2>normalised <code>TimeRanges</code> object</a> that represents the
  intersection of the ranges of the <a href=#media-resource id=media-controllers:media-resource-2>media resources</a> of the
  <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-7>slaved media elements</a> that the user agent has buffered, at the time the attribute is
  evaluated. Users agents must accurately determine the ranges available, even for media streams
  where this can only be determined by tedious inspection.</p>

  <p>The <dfn id=dom-mediacontroller-duration><code>duration</code></dfn> attribute must return
  the <a href=#media-controller-duration id=media-controllers:media-controller-duration>media controller duration</a>.</p>

  <p>Every 15 to 250ms, or whenever the <code id=media-controllers:mediacontroller-14><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-duration id=media-controllers:media-controller-duration-2>media controller
  duration</a> changes, whichever happens least often, the user agent must <a id=media-controllers:queue-a-task href=webappapis.html#queue-a-task>queue a
  task</a> to <a id=media-controllers:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-durationchange><a href=#event-mediacontroller-durationchange>durationchange</a></code> at the
  <code id=media-controllers:mediacontroller-15><a href=#mediacontroller>MediaController</a></code>. If the <code id=media-controllers:mediacontroller-16><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-duration id=media-controllers:media-controller-duration-3>media controller
  duration</a> decreases such that the <a href=#media-controller-position id=media-controllers:media-controller-position>media controller position</a> is greater than the
  <a href=#media-controller-duration id=media-controllers:media-controller-duration-4>media controller duration</a>, the user agent must <a id=media-controllers:immediately href=infrastructure.html#immediately>immediately</a> <a href=#seek-the-media-controller id=media-controllers:seek-the-media-controller>seek the media
  controller</a> to <a href=#media-controller-duration id=media-controllers:media-controller-duration-5>media controller duration</a>.</p>

  <p>The <dfn id=dom-mediacontroller-currenttime><code>currentTime</code></dfn> attribute must
  return the <a href=#media-controller-position id=media-controllers:media-controller-position-2>media controller position</a> on getting, and on setting must <a href=#seek-the-media-controller id=media-controllers:seek-the-media-controller-2>seek the
  media controller</a> to the new value.</p>

  <p>Every 15 to 250ms, or whenever the <code id=media-controllers:mediacontroller-17><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-position id=media-controllers:media-controller-position-3>media controller
  position</a> changes, whichever happens least often, the user agent must <a id=media-controllers:queue-a-task-2 href=webappapis.html#queue-a-task>queue a
  task</a> to <a id=media-controllers:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-timeupdate><a href=#event-mediacontroller-timeupdate>timeupdate</a></code> at the
  <code id=media-controllers:mediacontroller-18><a href=#mediacontroller>MediaController</a></code>.</p>

  <hr>

  <p>When a <code id=media-controllers:mediacontroller-19><a href=#mediacontroller>MediaController</a></code> is created it is a <dfn id=playing-media-controller>playing media controller</dfn>. It
  can be changed into a <dfn id=paused-media-controller>paused media controller</dfn> and back either via the user agent's user
  interface (when the element is <a href=#expose-a-user-interface-to-the-user id=media-controllers:expose-a-user-interface-to-the-user>exposing a user
  interface to the user</a>) or by script using the APIs defined in this section (see below).</p>

  <p>The <dfn id=dom-mediacontroller-paused><code>paused</code></dfn> attribute must return
  true if the <code id=media-controllers:mediacontroller-20><a href=#mediacontroller>MediaController</a></code> object is a <a href=#paused-media-controller id=media-controllers:paused-media-controller>paused media controller</a>, and
  false otherwise.</p>

  <p>When the <dfn id=dom-mediacontroller-pause><code>pause()</code></dfn> method is invoked,
  if the <code id=media-controllers:mediacontroller-21><a href=#mediacontroller>MediaController</a></code> is a <a href=#playing-media-controller id=media-controllers:playing-media-controller>playing media controller</a> then the user agent
  must change the <code id=media-controllers:mediacontroller-22><a href=#mediacontroller>MediaController</a></code> into a <a href=#paused-media-controller id=media-controllers:paused-media-controller-2>paused media controller</a>,
  <a id=media-controllers:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to <a id=media-controllers:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-pause><a href=#event-mediacontroller-pause>pause</a></code> at the <code id=media-controllers:mediacontroller-23><a href=#mediacontroller>MediaController</a></code>, and then
  <a href=#report-the-controller-state id=media-controllers:report-the-controller-state-6>report the controller state</a> of the <code id=media-controllers:mediacontroller-24><a href=#mediacontroller>MediaController</a></code>.</p>

  <p>When the <dfn id=dom-mediacontroller-unpause><code>unpause()</code></dfn> method is
  invoked, if the <code id=media-controllers:mediacontroller-25><a href=#mediacontroller>MediaController</a></code> is a <a href=#paused-media-controller id=media-controllers:paused-media-controller-3>paused media controller</a>, the user
  agent must change the <code id=media-controllers:mediacontroller-26><a href=#mediacontroller>MediaController</a></code> into a <a href=#playing-media-controller id=media-controllers:playing-media-controller-2>playing media controller</a>,
  <a id=media-controllers:queue-a-task-4 href=webappapis.html#queue-a-task>queue a task</a> to <a id=media-controllers:fire-a-simple-event-4 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-play><a href=#event-mediacontroller-play>play</a></code> at the <code id=media-controllers:mediacontroller-27><a href=#mediacontroller>MediaController</a></code>, and then
  <a href=#report-the-controller-state id=media-controllers:report-the-controller-state-7>report the controller state</a> of the <code id=media-controllers:mediacontroller-28><a href=#mediacontroller>MediaController</a></code>.</p>

  <p>When the <dfn id=dom-mediacontroller-play><code>play()</code></dfn> method is invoked, the
  user agent must invoke the <code id=media-controllers:dom-media-play-2><a href=#dom-media-play>play()</a></code> method of each <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-8>slaved media element</a> in turn, and then invoke the <code id=media-controllers:dom-mediacontroller-unpause-3><a href=#dom-mediacontroller-unpause>unpause</a></code> method of the <code id=media-controllers:mediacontroller-29><a href=#mediacontroller>MediaController</a></code>.</p>

  <p>The <dfn id=dom-mediacontroller-playbackstate><code>playbackState</code></dfn> attribute
  must return the value to which it was most recently set. When the <code id=media-controllers:mediacontroller-30><a href=#mediacontroller>MediaController</a></code>
  object is created, the attribute must be set to the value "<code id=media-controllers:dom-mediacontroller-waiting-3><a href=#dom-mediacontroller-waiting>waiting</a></code>". The value is updated by the <a href=#report-the-controller-state id=media-controllers:report-the-controller-state-8>report the
  controller state</a> algorithm below.</p>

  <p>The <dfn id=dom-mediacontroller-played><code>played</code></dfn> attribute must return a
  new static <a href=#normalised-timeranges-object id=media-controllers:normalised-timeranges-object-3>normalised <code>TimeRanges</code> object</a> that represents the union of the
  ranges of points on the <a href=#media-timeline id=media-controllers:media-timeline-2>media timelines</a> of the <a href=#media-resource id=media-controllers:media-resource-3>media resources</a> of the <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-9>slaved media elements</a> that the
  user agent has so far reached through the usual monotonic increase of their <a href=#current-playback-position id=media-controllers:current-playback-position-2>current playback positions</a> during normal playback, at the time the
  attribute is evaluated.</p>

  <hr>

  <p>A <code id=media-controllers:mediacontroller-31><a href=#mediacontroller>MediaController</a></code> has a <dfn id=media-controller-default-playback-rate>media controller default playback rate</dfn> and a
  <dfn id=media-controller-playback-rate>media controller playback rate</dfn>, which must both be set to 1.0 when the
  <code id=media-controllers:mediacontroller-32><a href=#mediacontroller>MediaController</a></code> object is created.</p>

  <p>The <dfn id=dom-mediacontroller-defaultplaybackrate><code>defaultPlaybackRate</code></dfn>
  attribute, on getting, must return the <code id=media-controllers:mediacontroller-33><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-default-playback-rate id=media-controllers:media-controller-default-playback-rate>media controller
  default playback rate</a>, and on setting, must set the <code id=media-controllers:mediacontroller-34><a href=#mediacontroller>MediaController</a></code>'s
  <a href=#media-controller-default-playback-rate id=media-controllers:media-controller-default-playback-rate-2>media controller default playback rate</a> to the new value, then <a id=media-controllers:queue-a-task-5 href=webappapis.html#queue-a-task>queue a
  task</a> to <a id=media-controllers:fire-a-simple-event-5 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-ratechange><a href=#event-mediacontroller-ratechange>ratechange</a></code> at the
  <code id=media-controllers:mediacontroller-35><a href=#mediacontroller>MediaController</a></code>.</p>

  <p>The <dfn id=dom-mediacontroller-playbackrate><code>playbackRate</code></dfn> attribute, on
  getting, must return the <code id=media-controllers:mediacontroller-36><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-playback-rate id=media-controllers:media-controller-playback-rate>media controller playback
  rate</a>, and on setting, must set the <code id=media-controllers:mediacontroller-37><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-playback-rate id=media-controllers:media-controller-playback-rate-2>media controller
  playback rate</a> to the new value, then <a id=media-controllers:queue-a-task-6 href=webappapis.html#queue-a-task>queue a task</a> to <a id=media-controllers:fire-a-simple-event-6 href=webappapis.html#fire-a-simple-event>fire a simple
  event</a> named <code id=media-controllers:event-mediacontroller-ratechange-2><a href=#event-mediacontroller-ratechange>ratechange</a></code> at the
  <code id=media-controllers:mediacontroller-38><a href=#mediacontroller>MediaController</a></code>.</p>

  <hr>

  <p>A <code id=media-controllers:mediacontroller-39><a href=#mediacontroller>MediaController</a></code> has a <dfn id=media-controller-volume-multiplier>media controller volume multiplier</dfn>, which must
  be set to 1.0 when the <code id=media-controllers:mediacontroller-40><a href=#mediacontroller>MediaController</a></code> object is created, and a <dfn id=media-controller-mute-override>media controller
  mute override</dfn>, much must initially be false.</p>

  <p>The <dfn id=dom-mediacontroller-volume><code>volume</code></dfn> attribute, on getting,
  must return the <code id=media-controllers:mediacontroller-41><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-volume-multiplier id=media-controllers:media-controller-volume-multiplier>media controller volume multiplier</a>,
  and on setting, if the new value is in the range 0.0 to 1.0 inclusive, must set the
  <code id=media-controllers:mediacontroller-42><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-volume-multiplier id=media-controllers:media-controller-volume-multiplier-2>media controller volume multiplier</a> to the new value
  and <a id=media-controllers:queue-a-task-7 href=webappapis.html#queue-a-task>queue a task</a> to <a id=media-controllers:fire-a-simple-event-7 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-volumechange><a href=#event-mediacontroller-volumechange>volumechange</a></code> at the
  <code id=media-controllers:mediacontroller-43><a href=#mediacontroller>MediaController</a></code>. If the new value is outside the range 0.0 to 1.0 inclusive, then, on
  setting, an <code id=media-controllers:indexsizeerror-2><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code> exception must be thrown instead.</p>

  <p>The <dfn id=dom-mediacontroller-muted><code>muted</code></dfn> attribute, on getting, must
  return the <code id=media-controllers:mediacontroller-44><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-mute-override id=media-controllers:media-controller-mute-override>media controller mute override</a>, and on
  setting, must set the <code id=media-controllers:mediacontroller-45><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-mute-override id=media-controllers:media-controller-mute-override-2>media controller mute override</a>
  to the new value and <a id=media-controllers:queue-a-task-8 href=webappapis.html#queue-a-task>queue a task</a> to <a id=media-controllers:fire-a-simple-event-8 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=media-controllers:event-mediacontroller-volumechange-2><a href=#event-mediacontroller-volumechange>volumechange</a></code> at the
  <code id=media-controllers:mediacontroller-46><a href=#mediacontroller>MediaController</a></code>.</p>

  <hr>

  <p>The <a href=#media-resource id=media-controllers:media-resource-4>media resources</a> of all the <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-10>slaved media
  elements</a> of a <code id=media-controllers:mediacontroller-47><a href=#mediacontroller>MediaController</a></code> have a defined temporal relationship which
  provides relative offsets between the zero time of each such <a href=#media-resource id=media-controllers:media-resource-5>media resource</a>: for
  <a href=#media-resource id=media-controllers:media-resource-6>media resources</a> with a <a href=#timeline-offset id=media-controllers:timeline-offset>timeline offset</a>, their
  relative offsets are the difference between their <a href=#timeline-offset id=media-controllers:timeline-offset-2>timeline offset</a>; the zero times of
  all the <a href=#media-resource id=media-controllers:media-resource-7>media resources</a> without a <a href=#timeline-offset id=media-controllers:timeline-offset-3>timeline offset</a>
  are not offset from each other (i.e. the origins of their timelines are cotemporal); and finally,
  the zero time of the <a href=#media-resource id=media-controllers:media-resource-8>media resource</a> with the earliest <a href=#timeline-offset id=media-controllers:timeline-offset-4>timeline offset</a>
  (if any) is not offset from the zero times of the <a href=#media-resource id=media-controllers:media-resource-9>media
  resources</a> without a <a href=#timeline-offset id=media-controllers:timeline-offset-5>timeline offset</a> (i.e. the origins of <a href=#media-resource id=media-controllers:media-resource-10>media resources</a> without a <a href=#timeline-offset id=media-controllers:timeline-offset-6>timeline offset</a> are further cotemporal
  with the earliest defined point on the timeline of the <a href=#media-resource id=media-controllers:media-resource-11>media resource</a> with the
  earliest <a href=#timeline-offset id=media-controllers:timeline-offset-7>timeline offset</a>).</p>

  <p>The <dfn id=media-resource-end-position>media resource end position</dfn> of a <a href=#media-resource id=media-controllers:media-resource-12>media resource</a> in a <a href=#media-element id=media-controllers:media-element-13>media
  element</a> is defined as follows: if the <a href=#media-resource id=media-controllers:media-resource-13>media resource</a> has a finite and known
  duration, the <a href=#media-resource-end-position id=media-controllers:media-resource-end-position>media resource end position</a> is the duration of the <a href=#media-resource id=media-controllers:media-resource-14>media
  resource</a>'s timeline (the last defined position on that timeline); otherwise, the
  <a href=#media-resource id=media-controllers:media-resource-15>media resource</a>'s duration is infinite or unknown, and the <a href=#media-resource-end-position id=media-controllers:media-resource-end-position-2>media resource end
  position</a> is the time of the last frame of <a href=#media-data id=media-controllers:media-data>media data</a> currently available for
  that <a href=#media-resource id=media-controllers:media-resource-16>media resource</a>.</p>

  <p>Each <code id=media-controllers:mediacontroller-48><a href=#mediacontroller>MediaController</a></code> also has its own defined timeline. On this timeline, all the
  <a href=#media-resource id=media-controllers:media-resource-17>media resources</a> of all the <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-11>slaved media elements</a>
  of the <code id=media-controllers:mediacontroller-49><a href=#mediacontroller>MediaController</a></code> are temporally aligned according to their defined offsets. The
  <dfn id=media-controller-duration>media controller duration</dfn> of that <code id=media-controllers:mediacontroller-50><a href=#mediacontroller>MediaController</a></code> is the time from the
  earliest <a href=#earliest-possible-position id=media-controllers:earliest-possible-position>earliest possible position</a>, relative to this <code id=media-controllers:mediacontroller-51><a href=#mediacontroller>MediaController</a></code>
  timeline, of any of the <a href=#media-resource id=media-controllers:media-resource-18>media resources</a> of the <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-12>slaved
  media elements</a> of the <code id=media-controllers:mediacontroller-52><a href=#mediacontroller>MediaController</a></code>, to the time of the latest <a href=#media-resource-end-position id=media-controllers:media-resource-end-position-3>media
  resource end position</a> of the <a href=#media-resource id=media-controllers:media-resource-19>media resources</a> of the
  <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-13>slaved media elements</a> of the <code id=media-controllers:mediacontroller-53><a href=#mediacontroller>MediaController</a></code>, again relative to this
  <code id=media-controllers:mediacontroller-54><a href=#mediacontroller>MediaController</a></code> timeline.</p>

  <p>Each <code id=media-controllers:mediacontroller-55><a href=#mediacontroller>MediaController</a></code> has a <dfn id=media-controller-position>media controller position</dfn>. This is the time
  on the <code id=media-controllers:mediacontroller-56><a href=#mediacontroller>MediaController</a></code>'s timeline at which the user agent is trying to play the
  <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-14>slaved media elements</a>. When a <code id=media-controllers:mediacontroller-57><a href=#mediacontroller>MediaController</a></code> is created, its
  <a href=#media-controller-position id=media-controllers:media-controller-position-4>media controller position</a> is initially zero.</p>

  <p>When the user agent is to <dfn id=bring-the-media-element-up-to-speed-with-its-new-media-controller>bring a media element up to speed with its new media controller</dfn>, it must <a href=#dom-media-seek id=media-controllers:dom-media-seek>seek</a> that <a href=#media-element id=media-controllers:media-element-14>media element</a> to the
  <code id=media-controllers:mediacontroller-58><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-position id=media-controllers:media-controller-position-5>media controller position</a> relative to the <a href=#media-element id=media-controllers:media-element-15>media
  element</a>'s timeline.</p>

  <p>When the user agent is to <dfn id=seek-the-media-controller>seek the media controller</dfn> to a particular <var>new playback position</var>, it must follow these steps:</p>

  <ol><li><p>If the <var>new playback position</var> is less than zero, then set it to
   zero.</li><li><p>If the <var>new playback position</var> is greater than the <a href=#media-controller-duration id=media-controllers:media-controller-duration-6>media
   controller duration</a>, then set it to the <a href=#media-controller-duration id=media-controllers:media-controller-duration-7>media controller duration</a>.</li><li><p>Set the <a href=#media-controller-position id=media-controllers:media-controller-position-6>media controller position</a> to the <var>new playback
   position</var>.</li><li><p><a href=#dom-media-seek id=media-controllers:dom-media-seek-2>Seek</a> each <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-15>slaved
   media element</a> to the <var>new playback position</var> relative to the <a href=#media-element id=media-controllers:media-element-16>media
   element</a> timeline.</li></ol>

  <p>A <code id=media-controllers:mediacontroller-59><a href=#mediacontroller>MediaController</a></code> is a <dfn id=blocked-media-controller>blocked media controller</dfn> if the
  <code id=media-controllers:mediacontroller-60><a href=#mediacontroller>MediaController</a></code> is a <a href=#paused-media-controller id=media-controllers:paused-media-controller-4>paused media controller</a>, or if any of its
  <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-16>slaved media elements</a> are <a href=#blocked-media-element id=media-controllers:blocked-media-element>blocked media
  elements</a>, or if any of its <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-17>slaved media elements</a> whose <a href=#autoplaying-flag id=media-controllers:autoplaying-flag>autoplaying
  flag</a> is true still have their <code id=media-controllers:dom-media-paused><a href=#dom-media-paused>paused</a></code> attribute set to
  true, or if all of its <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-18>slaved media elements</a> have their <code id=media-controllers:dom-media-paused-2><a href=#dom-media-paused>paused</a></code> attribute set to true.</p>

  <p>A <a href=#media-element id=media-controllers:media-element-17>media element</a> is <dfn id=blocked-on-its-media-controller>blocked on its media controller</dfn> if the
  <code id=media-controllers:mediacontroller-61><a href=#mediacontroller>MediaController</a></code> is a <a href=#blocked-media-controller id=media-controllers:blocked-media-controller>blocked media controller</a>, or if its <a href=#media-controller-position id=media-controllers:media-controller-position-7>media
  controller position</a> is either before the <a href=#media-resource id=media-controllers:media-resource-20>media resource</a>'s <a href=#earliest-possible-position id=media-controllers:earliest-possible-position-2>earliest
  possible position</a> relative to the <code id=media-controllers:mediacontroller-62><a href=#mediacontroller>MediaController</a></code>'s timeline or after the end
  of the <a href=#media-resource id=media-controllers:media-resource-21>media resource</a> relative to the <code id=media-controllers:mediacontroller-63><a href=#mediacontroller>MediaController</a></code>'s timeline.</p>

  <p id=controller-playback>When a <code id=media-controllers:mediacontroller-64><a href=#mediacontroller>MediaController</a></code> is not a <a href=#blocked-media-controller id=media-controllers:blocked-media-controller-2>blocked media
  controller</a> and it has at least one <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-19>slaved media
  element</a> whose <code id=media-controllers:document><a href=dom.html#document>Document</a></code> is a <a id=media-controllers:fully-active href=browsers.html#fully-active>fully active</a> <code id=media-controllers:document-2><a href=dom.html#document>Document</a></code>,
  the <code id=media-controllers:mediacontroller-65><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-position id=media-controllers:media-controller-position-8>media controller position</a> must increase
  monotonically at <a href=#media-controller-playback-rate id=media-controllers:media-controller-playback-rate-3>media controller playback rate</a> units of time on the
  <code id=media-controllers:mediacontroller-66><a href=#mediacontroller>MediaController</a></code>'s timeline per unit time of the clock used by its <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-20>slaved media
  elements</a>.</p>

  <p>When the zero point on the timeline of a <code id=media-controllers:mediacontroller-67><a href=#mediacontroller>MediaController</a></code> moves relative to the
  timelines of the <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-21>slaved media elements</a> by a time difference <var>ΔT</var>, the <code id=media-controllers:mediacontroller-68><a href=#mediacontroller>MediaController</a></code>'s <a href=#media-controller-position id=media-controllers:media-controller-position-9>media controller
  position</a> must be decremented by <var>ΔT</var>.</p>

  <p class=note>In some situations, e.g. when playing back a live stream without buffering
  anything, the <a href=#media-controller-position id=media-controllers:media-controller-position-10>media controller position</a> would increase monotonically as described
  above at the same rate as the <var>ΔT</var> described in the previous paragraph
  decreases it, with the end result that for all intents and purposes, the <a href=#media-controller-position id=media-controllers:media-controller-position-11>media controller
  position</a> would appear to remain constant (probably with the value 0).</p>

  <hr>

  <p>A <code id=media-controllers:mediacontroller-69><a href=#mediacontroller>MediaController</a></code> has a <dfn id=most-recently-reported-readiness-state>most recently reported readiness state</dfn>, which
  is a number from 0 to 4 derived from the numbers used for the <a href=#media-element id=media-controllers:media-element-18>media element</a> <code id=media-controllers:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute, and a <dfn id=most-recently-reported-playback-state>most recently reported
  playback state</dfn>, which is either <i>playing</i>, <i>waiting</i>, or <i>ended</i>.</p>

  <p>When a <code id=media-controllers:mediacontroller-70><a href=#mediacontroller>MediaController</a></code> is created, its <a href=#most-recently-reported-readiness-state id=media-controllers:most-recently-reported-readiness-state>most recently reported readiness
  state</a> must be set to 0, and its <a href=#most-recently-reported-playback-state id=media-controllers:most-recently-reported-playback-state>most recently reported playback state</a> must be
  set to <i>waiting</i>.</p>

  <p>When a user agent is required to <dfn id=report-the-controller-state>report the controller state</dfn> for a
  <code id=media-controllers:mediacontroller-71><a href=#mediacontroller>MediaController</a></code>, the user agent must run the following steps:</p>

  <ol><li>

    <p>If the <code id=media-controllers:mediacontroller-72><a href=#mediacontroller>MediaController</a></code> has no <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-22>slaved media elements</a>, let <var>new readiness state</var> be 0.</p>

    <p>Otherwise, let it have the lowest value of the <code id=media-controllers:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code> IDL attributes of all of its <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-23>slaved media
    elements</a>.</p>

   </li><li>

    <p>If the <code id=media-controllers:mediacontroller-73><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-readiness-state id=media-controllers:most-recently-reported-readiness-state-2>most recently reported readiness state</a> is
    less than the <var>new readiness state</var>, then run these substeps:</p>

    <ol><li><p>Let <var>next state</var> be the <code id=media-controllers:mediacontroller-74><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-readiness-state id=media-controllers:most-recently-reported-readiness-state-3>most
     recently reported readiness state</a>.</li><li><p><i>Loop</i>: Increment <var>next state</var> by one.</li><li>

      <p><a id=media-controllers:queue-a-task-9 href=webappapis.html#queue-a-task>Queue a task</a> to run the following steps:</p>

      <ol><li><p>Set the <code id=media-controllers:mediacontroller-75><a href=#mediacontroller>MediaController</a></code>'s <code id=media-controllers:dom-mediacontroller-readystate-3><a href=#dom-mediacontroller-readystate>readyState</a></code> attribute to the value <var>next state</var>.</li><li><p><a id=media-controllers:fire-a-simple-event-9 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> at the <code id=media-controllers:mediacontroller-76><a href=#mediacontroller>MediaController</a></code> object, whose
       name is the event name corresponding to the value of <var>next state</var> given in
       the table below.</li></ol>

     </li><li><p>If <var>next state</var> is less than <var>new readiness state</var>,
     then return to the step labeled <i>loop</i>.</li></ol>

    <p>Otherwise, if the <code id=media-controllers:mediacontroller-77><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-readiness-state id=media-controllers:most-recently-reported-readiness-state-4>most recently reported readiness
    state</a> is greater than <var>new readiness state</var> then <a id=media-controllers:queue-a-task-10 href=webappapis.html#queue-a-task>queue a
    task</a> to <a id=media-controllers:fire-a-simple-event-10 href=webappapis.html#fire-a-simple-event>fire a simple event</a> at the <code id=media-controllers:mediacontroller-78><a href=#mediacontroller>MediaController</a></code> object,
    whose name is the event name corresponding to the value of <var>new readiness
    state</var> given in the table below.</p>

    <table><thead><tr><th>Value of <var>new readiness state</var>
       </th><th>イベント名

     <tbody></th></tr><tr><td>  0
       
       </td><td> <code id=media-controllers:event-mediacontroller-emptied><a href=#event-mediacontroller-emptied>emptied</a></code>

      </td></tr><tr><td>  1
       
       </td><td> <code id=media-controllers:event-mediacontroller-loadedmetadata><a href=#event-mediacontroller-loadedmetadata>loadedmetadata</a></code>

      </td></tr><tr><td>  2
       
       </td><td> <code id=media-controllers:event-mediacontroller-loadeddata><a href=#event-mediacontroller-loadeddata>loadeddata</a></code>

      </td></tr><tr><td>  3
       
       </td><td> <code id=media-controllers:event-mediacontroller-canplay><a href=#event-mediacontroller-canplay>canplay</a></code>

      </td></tr><tr><td>  4
       
       </td><td> <code id=media-controllers:event-mediacontroller-canplaythrough><a href=#event-mediacontroller-canplaythrough>canplaythrough</a></code>

    </td></tr></table>

   </li><li><p>Let the <code id=media-controllers:mediacontroller-79><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-readiness-state id=media-controllers:most-recently-reported-readiness-state-5>most recently reported readiness state</a>
   be <var>new readiness state</var>.</li><li>

    <p>Initialise <var>new playback state</var> by setting it to the state given for the
    first matching condition from the following list:</p>

    <dl class=switch><dt>If the <code id=media-controllers:mediacontroller-80><a href=#mediacontroller>MediaController</a></code> has no <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-24>slaved media elements</a><dd>Let <var>new playback state</var> be <i>waiting</i>.<dt>If all of the <code id=media-controllers:mediacontroller-81><a href=#mediacontroller>MediaController</a></code>'s <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-25>slaved media elements</a> have
     <a href=#ended-playback id=media-controllers:ended-playback>ended playback</a> and the <a href=#media-controller-playback-rate id=media-controllers:media-controller-playback-rate-4>media controller playback rate</a> is positive or
     zero<dd>Let <var>new playback state</var> be <i>ended</i>.<dt>If the <code id=media-controllers:mediacontroller-82><a href=#mediacontroller>MediaController</a></code> is a <a href=#blocked-media-controller id=media-controllers:blocked-media-controller-3>blocked media controller</a><dd>Let <var>new playback state</var> be <i>waiting</i>.<dt>そうでなければ<dd>Let <var>new playback state</var> be <i>playing</i>.</dl>

   </li><li><p>If the <code id=media-controllers:mediacontroller-83><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-playback-state id=media-controllers:most-recently-reported-playback-state-2>most recently reported playback state</a>
   is not equal to <var>new playback state</var> and the <var>new playback
   state</var> is <i>ended</i>, then <a id=media-controllers:queue-a-task-11 href=webappapis.html#queue-a-task>queue a task</a> that, if the
   <code id=media-controllers:mediacontroller-84><a href=#mediacontroller>MediaController</a></code> object is a <a href=#playing-media-controller id=media-controllers:playing-media-controller-3>playing media controller</a>, and all of the
   <code id=media-controllers:mediacontroller-85><a href=#mediacontroller>MediaController</a></code>'s <a href=#slaved-media-elements id=media-controllers:slaved-media-elements-26>slaved media elements</a> have still <a href=#ended-playback id=media-controllers:ended-playback-2>ended
   playback</a>, and the <a href=#media-controller-playback-rate id=media-controllers:media-controller-playback-rate-5>media controller playback rate</a> is still positive or zero,
   changes the <code id=media-controllers:mediacontroller-86><a href=#mediacontroller>MediaController</a></code> object to a <a href=#paused-media-controller id=media-controllers:paused-media-controller-5>paused media controller</a> and
   then <a href=webappapis.html#fire-a-simple-event id=media-controllers:fire-a-simple-event-11>fires a simple event</a> named <code id=media-controllers:event-mediacontroller-pause-2><a href=#event-mediacontroller-pause>pause</a></code> at the <code id=media-controllers:mediacontroller-87><a href=#mediacontroller>MediaController</a></code>
   object.</li><li>

    <p>If the <code id=media-controllers:mediacontroller-88><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-playback-state id=media-controllers:most-recently-reported-playback-state-3>most recently reported playback state</a> is
    not equal to <var>new playback state</var> then <a id=media-controllers:queue-a-task-12 href=webappapis.html#queue-a-task>queue a task</a> to run the
    following steps:</p>

    <ol><li><p>Set the <code id=media-controllers:mediacontroller-89><a href=#mediacontroller>MediaController</a></code>'s <code id=media-controllers:dom-mediacontroller-playbackstate-3><a href=#dom-mediacontroller-playbackstate>playbackState</a></code> attribute to the value given in
     the second column of the row of the following table whose first column contains the <var>new playback state</var>.</li><li><p><a id=media-controllers:fire-a-simple-event-12 href=webappapis.html#fire-a-simple-event>Fire a simple event</a> at the <code id=media-controllers:mediacontroller-90><a href=#mediacontroller>MediaController</a></code> object, whose name
     is the value given in the third column of the row of the following table whose first column
     contains the <var>new playback state</var>.</li></ol>

    <table><thead><tr><th>New playback state
       
       </th><th>New value for <code id=media-controllers:dom-mediacontroller-playbackstate-4><a href=#dom-mediacontroller-playbackstate>playbackState</a></code>
       </th><th>イベント名
     <tbody></th></tr><tr><td><i>playing</i>
       </td><td>"<dfn id=dom-mediacontroller-playing><code>playing</code></dfn>"
       
       </td><td><code id=media-controllers:event-mediacontroller-playing><a href=#event-mediacontroller-playing>playing</a></code>
      </td></tr><tr><td><i>waiting</i>
       </td><td>"<dfn id=dom-mediacontroller-waiting><code>waiting</code></dfn>"
       
       </td><td><code id=media-controllers:event-mediacontroller-waiting><a href=#event-mediacontroller-waiting>waiting</a></code>
      </td></tr><tr><td><i>ended</i>
       </td><td>"<dfn id=dom-mediacontroller-ended><code>ended</code></dfn>"
       
       </td><td><code id=media-controllers:event-mediacontroller-ended><a href=#event-mediacontroller-ended>ended</a></code>
    </td></tr></table>

   </li><li><p>Let the <code id=media-controllers:mediacontroller-91><a href=#mediacontroller>MediaController</a></code>'s <a href=#most-recently-reported-playback-state id=media-controllers:most-recently-reported-playback-state-4>most recently reported playback state</a>
   be <var>new playback state</var>.</li></ol>

  <hr>

  <p>The following are the <a id=media-controllers:event-handlers href=webappapis.html#event-handlers>event handlers</a> (and their corresponding <a href=webappapis.html#event-handler-event-type id=media-controllers:event-handler-event-type>event handler event types</a>) that must be supported, as <a id=media-controllers:event-handler-idl-attributes href=webappapis.html#event-handler-idl-attributes>event handler IDL attributes</a>,
  by all objects implementing the <code id=media-controllers:mediacontroller-92><a href=#mediacontroller>MediaController</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=media-controllers:event-handlers-2>イベントハンドラ</a> </th><th><a id=media-controllers:event-handler-event-type-2 href=webappapis.html#event-handler-event-type>イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-mediacontroller-onemptied><code>onemptied</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-emptied-2><a href=#event-mediacontroller-emptied>emptied</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onloadedmetadata><code>onloadedmetadata</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-loadedmetadata-2><a href=#event-mediacontroller-loadedmetadata>loadedmetadata</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onloadeddata><code>onloadeddata</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-loadeddata-2><a href=#event-mediacontroller-loadeddata>loadeddata</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-oncanplay><code>oncanplay</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-canplay-2><a href=#event-mediacontroller-canplay>canplay</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-oncanplaythrough><code>oncanplaythrough</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-canplaythrough-2><a href=#event-mediacontroller-canplaythrough>canplaythrough</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onplaying><code>onplaying</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-playing-2><a href=#event-mediacontroller-playing>playing</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onended><code>onended</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-ended-2><a href=#event-mediacontroller-ended>ended</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onwaiting><code>onwaiting</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-waiting-2><a href=#event-mediacontroller-waiting>waiting</a></code>
   <tbody></td></tr><tr><td><dfn id=handler-mediacontroller-ondurationchange><code>ondurationchange</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-durationchange-2><a href=#event-mediacontroller-durationchange>durationchange</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-ontimeupdate><code>ontimeupdate</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-timeupdate-2><a href=#event-mediacontroller-timeupdate>timeupdate</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onplay><code>onplay</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-play-2><a href=#event-mediacontroller-play>play</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onpause><code>onpause</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-pause-3><a href=#event-mediacontroller-pause>pause</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onratechange><code>onratechange</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-ratechange-3><a href=#event-mediacontroller-ratechange>ratechange</a></code>
    </td></tr><tr><td><dfn id=handler-mediacontroller-onvolumechange><code>onvolumechange</code></dfn> </td><td> <code id=media-controllers:event-mediacontroller-volumechange-3><a href=#event-mediacontroller-volumechange>volumechange</a></code>
  </td></tr></table>

  <hr>

  <p>このセクションに記載される<a href=webappapis.html#concept-task id=media-controllers:concept-task>タスク</a>の<a id=media-controllers:task-source href=webappapis.html#task-source>タスクソース</a>は、<a id=media-controllers:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM操作タスクソース</a>である。</p>

  


  <h6 id=assigning-a-media-controller-declaratively>4.8.13.11.3 宣言的メディアコントローラを割り当てる</h6>

  <p><a href=#media-element id=assigning-a-media-controller-declaratively:media-element>メディア要素</a>の<dfn id=attr-media-mediagroup><code>mediagroup</code></dfn>コンテンツ属性は、暗黙的に<code id=assigning-a-media-controller-declaratively:mediacontroller><a href=#mediacontroller>MediaController</a></code>を作成することによって、複数の<a href=#media-element id=assigning-a-media-controller-declaratively:media-element-2>メディア要素</a>をリンクするために使用できる。値はテキストである。同じ値を持つ<a href=#media-element id=assigning-a-media-controller-declaratively:media-element-3>メディア要素</a>はユーザーエージェントによって自動的にリンクされる。</p>

  

  <p>When a <a href=#media-element id=assigning-a-media-controller-declaratively:media-element-4>media element</a> is created with a <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup><a href=#attr-media-mediagroup>mediagroup</a></code> attribute, and when a <a href=#media-element id=assigning-a-media-controller-declaratively:media-element-5>media element</a>'s
  <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-2><a href=#attr-media-mediagroup>mediagroup</a></code> attribute is set, changed, or removed, the
  user agent must run the following steps:</p>

  <ol><li><p>Let <var>m</var> be the <a href=#media-element id=assigning-a-media-controller-declaratively:media-element-6>media element</a> in question.</li><li><p>Let <var>old controller</var> be <var>m</var>'s <a href=#current-media-controller id=assigning-a-media-controller-declaratively:current-media-controller>current media
   controller</a>, if it currently has one, and null otherwise.</li><li><p>Let <var>new controller</var> be null.</li><li><p>Let <var>m</var> have no <a href=#current-media-controller id=assigning-a-media-controller-declaratively:current-media-controller-2>current media controller</a>, if it currently
   has one.</li><li><p>If <var>m</var>'s <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-3><a href=#attr-media-mediagroup>mediagroup</a></code> attribute
   is being removed, then jump to the <i>update controllers</i> step below.</li><li>

    <p>If there is another <a href=#media-element id=assigning-a-media-controller-declaratively:media-element-7>media element</a> whose <code id=assigning-a-media-controller-declaratively:document><a href=dom.html#document>Document</a></code> is the same as
    <var>m</var>'s <a id=assigning-a-media-controller-declaratively:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> (even if one or both of these elements are not
    actually <a href=infrastructure.html#in-a-document id=assigning-a-media-controller-declaratively:in-a-document><em>in</em> the <code>Document</code></a>), and which
    also has a <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-4><a href=#attr-media-mediagroup>mediagroup</a></code> attribute, and whose <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-5><a href=#attr-media-mediagroup>mediagroup</a></code> attribute has the same value as the new value of
    <var>m</var>'s <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-6><a href=#attr-media-mediagroup>mediagroup</a></code> attribute, then
    let <var>controller</var> be that <a href=#media-element id=assigning-a-media-controller-declaratively:media-element-8>media element</a>'s <a href=#current-media-controller id=assigning-a-media-controller-declaratively:current-media-controller-3>current media
    controller</a>.</p>

    <p>Otherwise, let <var>controller</var> be a newly created
    <code id=assigning-a-media-controller-declaratively:mediacontroller-2><a href=#mediacontroller>MediaController</a></code>.</p>

   </li><li><p>Let <var>m</var>'s <a href=#current-media-controller id=assigning-a-media-controller-declaratively:current-media-controller-4>current media controller</a> be <var>controller</var>.</li><li><p>Let <var>new controller</var> be <var>m</var>'s <a href=#current-media-controller id=assigning-a-media-controller-declaratively:current-media-controller-5>current media
   controller</a>.</li><li><p><a href=#bring-the-media-element-up-to-speed-with-its-new-media-controller id=assigning-a-media-controller-declaratively:bring-the-media-element-up-to-speed-with-its-new-media-controller>Bring the media element up to speed with its new media
   controller</a>.</li><li><p><i>Update controllers</i>: If <var>old
   controller</var> and <var>new controller</var> are the
   same (whether both null or both the same controller) then abort
   these steps.</li><li><p>If <var>old controller</var> is not null and still has one or more <a href=#slaved-media-elements id=assigning-a-media-controller-declaratively:slaved-media-elements>slaved
   media elements</a>, then <a href=#report-the-controller-state id=assigning-a-media-controller-declaratively:report-the-controller-state>report the controller state</a> for <var>old
   controller</var>.</li><li><p>If <var>new controller</var> is not null, then <a href=#report-the-controller-state id=assigning-a-media-controller-declaratively:report-the-controller-state-2>report the controller
   state</a> for <var>new controller</var>.</li></ol>

  <p>The <dfn id=dom-media-mediagroup><code>mediaGroup</code></dfn> IDL attribute on <a href=#media-element id=assigning-a-media-controller-declaratively:media-element-9>media elements</a> must <a id=assigning-a-media-controller-declaratively:reflect href=infrastructure.html#reflect>reflect</a> the <code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-7><a href=#attr-media-mediagroup>mediagroup</a></code> content attribute.</p>

  

  <div class=example>

   <p>同じ<a href=#media-resource id=assigning-a-media-controller-declaratively:media-resource>メディアリソース</a>を参照する複数の<a href=#media-element id=assigning-a-media-controller-declaratively:media-element-10>メディア要素</a>は、単一のネットワーク要求を共有する。これは、画面上の2つの異なる場所で同じ<a href=#media-resource id=assigning-a-media-controller-declaratively:media-resource-2>メディアリソース</a>から2つの（ビデオ）トラックを効率的に再生するために使用できる。<code id=assigning-a-media-controller-declaratively:attr-media-mediagroup-8><a href=#attr-media-mediagroup>mediagroup</a></code>属性と共に使用して、これらの要素はまた同期を維持できる。</p>

   <p>この例において、ムービーファイル由来の手話通訳トラックが、2つの<code id=assigning-a-media-controller-declaratively:the-video-element><a href=#the-video-element>video</a></code>要素、複数のCSS、および暗黙的な<code id=assigning-a-media-controller-declaratively:mediacontroller-3><a href=#mediacontroller>MediaController</a></code>を使用する、その同じビデオファイルの主ビデオトラック上にオーバーレイされる：</p>

   <pre>&lt;article&gt;
 &lt;style scoped&gt;
  div { margin: 1em auto; position: relative; width: 400px; height: 300px; }
  video { position; absolute; bottom: 0; right: 0; }
  video:first-child { width: 100%; height: 100%; }
  video:last-child { width: 30%; }
 &lt;/style&gt;
 &lt;div&gt;
  &lt;video src="movie.vid#track=Video&amp;amp;track=English" autoplay controls mediagroup=movie&gt;&lt;/video&gt;
  &lt;video src="movie.vid#track=sign" autoplay mediagroup=movie&gt;&lt;/video&gt;
 &lt;/div&gt;
&lt;/article&gt;</pre>

  </div>






  <h5 id=timed-text-tracks>4.8.13.12 時限テキストトラック</h5><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=18029" title="&lt;track&gt; Live captioning">18029</a></div>

  <h6 id=text-track-model>4.8.13.12.1 テキストトラックモデル</h6><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28973" title='&lt;track&gt; elements added with their text track already showing do not run the "time marches on" steps'>28973</a></div>

  <p><a href=#media-element id=text-track-model:media-element>メディア要素</a>は、<a href=#media-element id=text-track-model:media-element-2>メディア要素</a>の<dfn id=list-of-text-tracks>テキストトラックのリスト</dfn>として知られ、関連した<dfn id=text-track>テキストトラック</dfn>のグループを持つことができる。<a href=#text-track id=text-track-model:text-track>テキストトラック</a>は以下のようにソートされる：</p>

  <ol class=brief><li><a id=text-track-model:tree-order href=infrastructure.html#tree-order>ツリー順</a>で、<a href=#media-element id=text-track-model:media-element-3>メディア要素</a>の<code id=text-track-model:the-track-element><a href=#the-track-element>track</a></code>要素の子に対応する<a href=#text-track id=text-track-model:text-track-2>テキストトラック</a>。</li><li>古いものから順で、追加された順に、<code id=text-track-model:dom-media-addtexttrack><a href=#dom-media-addtexttrack>addTextTrack()</a></code>メソッドを使用して追加された任意の<a href=#text-track id=text-track-model:text-track-3>テキストトラック</a>。</li><li><a href=#media-resource id=text-track-model:media-resource-2>メディアリソース</a>の書式仕様によって定義された順序で、任意の<a href=#media-resource-specific-text-track id=text-track-model:media-resource-specific-text-track>メディアリソース固有のテキストトラック</a>（<a href=#media-resource id=text-track-model:media-resource>メディアリソース</a>が内のデータに対応する<a href=#text-track id=text-track-model:text-track-4>テキストトラック</a>）。</li></ol>

  <p><a href=#text-track id=text-track-model:text-track-5>テキストトラック</a>の構成要素は次のとおり：</p>

  <dl><dt><dfn id=text-track-kind>テキストトラックの種類</dfn>

   <dd>

    <p>これは、トラックがユーザーエージェントによって処理される方法を決定する。種類は文字列で表される。可能性のある文字列は次のとおり：</p>

    <ul class=brief><li><dfn id=dom-texttrack-kind-subtitles><code>subtitles</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-captions><code>captions</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-descriptions><code>descriptions</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-chapters><code>chapters</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-metadata><code>metadata</code></dfn>
    </li></ul>

    <p><code id=text-track-model:the-track-element-2><a href=#the-track-element>track</a></code>要素に対応する<a href=#text-track id=text-track-model:text-track-6>テキストトラック</a>の場合、<a href=#text-track-kind id=text-track-model:text-track-kind>トラックの種類</a>は動的に変更できる。</p>

   <dt><dfn id=text-track-label>ラベル</dfn>

   <dd>

    <p>これは、ユーザーに対するトラックを特定するために意図する判読可能な文字列である。</p>

    <p><code id=text-track-model:the-track-element-3><a href=#the-track-element>track</a></code>要素に対応する<a href=#text-track id=text-track-model:text-track-7>テキストトラック</a>の場合、<a href=#text-track-label id=text-track-model:text-track-label>トラックのラベル</a>は動的に変更できる。</p>

    <p><a href=#text-track-label id=text-track-model:text-track-label-2>テキストトラックのラベル</a>が空の文字列である場合、ユーザーエージェントは自動的にそのユーザーインターフェースで使用するためのテキストトラックの他のプロパティー（たとえばテキストトラックの種類とテキストトラックの言語など）から適切なラベルを生成すべきである。この自動生成されたラベルは、APIで公開されない。</p>

   <dt><dfn id=text-track-in-band-metadata-track-dispatch-type>帯域内のメタデータトラックディスパッチタイプ</dfn>

   <dd>

    <p>これは、文書内の別のスクリプトに派遣できるようにするためにトラックを有効にする帯域内メタデータトラックに対する<a href=#media-resource id=text-track-model:media-resource-3>メディアリソース</a>から抽出された文字列である。</p>

    <p class=example>たとえば、ウェブ上やウェブ固有のインタラクティブ機能でのストリーミングによる従来のTV局の放送は、広告対象、ゲームショーの間のトリビアゲームデータ、スポーツゲームの間の選手の状態、食糧計画中のレシピ情報などに対するメタデータをもつテキストトラックを含むかもしれない。各プログラムが開始および終了すると、新しいトラックが追加されたりストリームから削除されたり、各トラックが追加されると、ユーザーエージェントはこの属性値を使用する専用のスクリプトモジュールにトラックを結合できる。</p>

    <p>帯域内のメタデータテキストトラック以外では、<a href=#text-track-in-band-metadata-track-dispatch-type id=text-track-model:text-track-in-band-metadata-track-dispatch-type>帯域内のメタデータトラックディスパッチタイプ</a>は、空の文字列である。この値が異なるメディア形式に対してどのように設定されるかは、<a href=#steps-to-expose-a-media-resource-specific-text-track id=text-track-model:steps-to-expose-a-media-resource-specific-text-track>メディアリソース固有のテキストトラックを公開するための手順</a>に記載される。</p>

   <dt><dfn id=text-track-language>言語</dfn>

   <dd>

    <p>これは、テキストトラックのキューの言語を表す文字列（BCP 47言語タグ）である。<a href=references.html#refsBCP47>[BCP47]</a></p>

    <p><code id=text-track-model:the-track-element-4><a href=#the-track-element>track</a></code>要素に対応する<a href=#text-track id=text-track-model:text-track-8>テキストトラック</a>の場合、<a href=#text-track-language id=text-track-model:text-track-language>テキストトラックの言語</a>は、動的に変更できる。</p>

   <dt><dfn id=text-track-readiness-state>準備状態</dfn>

   <dd>

    <p>以下のうちの1つをとる：</p>

    <dl><dt><dfn id=text-track-not-loaded>ロードされてない</dfn>

     <dd>

      <p>テキストトラックのキューが得られていないことを示す。</p>

     <dt><dfn id=text-track-loading>ロード中</dfn>

     <dd>

      <p>テキストトラックがロードされており、これまでに検出された致命的なエラーがないことを示す。追加のキューは、依然としてパーサによってトラックに追加されるかもしれない。</p>

     <dt><dfn id=text-track-loaded>ロードされた</dfn>

     <dd>

      <p>テキストトラックが致命的なエラーなしでロードされたことを示す。</p>

     <dt><dfn id=text-track-failed-to-load>ロードに失敗した</dfn>

     <dd>

      <p>テキストトラックは有効であるが、ユーザーエージェントがトラックを取得しようとした際、これが何らかの方法（たとえば<a id=text-track-model:url href=infrastructure.html#url>URL</a>が<a href=infrastructure.html#parse-a-url id=text-track-model:parse-a-url>解析</a>できなかった、ネットワークエラー、未知のテキストトラック形式など）で失敗したことを示す。キューの一部または全部は、おそらく欠落しているか、含まれていないだろう。</p>

     </dl>

    <p>トラックが得られるように、<a href=#text-track id=text-track-model:text-track-9>テキストトラック</a>の<a href=#text-track-readiness-state id=text-track-model:text-track-readiness-state>準備状態</a>を動的に変更する。</p>

   <dt><dfn id=text-track-mode>モード</dfn>

   <dd>

    <p>以下のうちの1つをとる：</p>

    <dl><dt><dfn id=text-track-disabled>無効</dfn>

     <dd>

      <p>テキストトラックがアクティブでないことを示す。DOM内のトラックを公開する目的以外では、ユーザーエージェントはテキストトラックを無視している。どのキューもアクティブでなく、どのイベントも発火せず、ユーザーエージェントは、トラックのキューを得ることを試みることはない。</p>

     <dt><dfn id=text-track-hidden>非表示</dfn>

     <dd>

      <p>テキストトラックがアクティブであるが、ユーザーエージェントは、積極的にキューを表示していないことを示す。どの試みもまだトラックのキューを得るために行われていない場合、ユーザーエージェントは、一瞬そのような試みを実行する。ユーザーエージェントは、キューがアクティブであるリストを維持しており、イベントはそれに応じて発火されている。</p>

     <dt><dfn id=text-track-showing>表示</dfn>

     <dd>

      <p>テキストトラックがアクティブであることを示す。どの試みもまだトラックのキューを得るために行われていない場合、ユーザーエージェントは、一瞬そのような試みを実行する。ユーザーエージェントは、キューがアクティブであるリストを維持しており、イベントはそれに応じて発火されている。また、<a href=#text-track-kind id=text-track-model:text-track-kind-2>種類</a>が<code id=text-track-model:dom-texttrack-kind-subtitles><a href=#dom-texttrack-kind-subtitles>subtitles</a></code>や<code id=text-track-model:dom-texttrack-kind-captions><a href=#dom-texttrack-kind-captions>captions</a></code>であるテキストトラックで、キューは必要に応じてビデオにオーバーレイされている。<a href=#text-track-kind id=text-track-model:text-track-kind-3>種類</a>が<code id=text-track-model:dom-texttrack-kind-descriptions><a href=#dom-texttrack-kind-descriptions>descriptions</a></code>であるテキストトラックで、ユーザーエージェントは、非視覚的な方法でユーザーに使用可能なキューを作成している。そして、<a href=#text-track-kind id=text-track-model:text-track-kind-4>種類</a>が<code id=text-track-model:dom-texttrack-kind-chapters><a href=#dom-texttrack-kind-chapters>chapters</a></code>であるテキストトラックで、ユーザーエージェントは、ユーザーがキューを選択することによって<a href=#media-resource id=text-track-model:media-resource-4>メディアリソース</a>の任意のポイントに移動することができるメカニズムをユーザーに利用可能にしている。</p>

     </dl>

   <dt><dfn id=text-track-list-of-cues>0個以上のキューリスト</dfn>

   <dd>

    <p><dfn id=rules-for-updating-the-text-track-rendering>テキストトラックのレンダリングを更新するための規則</dfn>とともに、<a href=#text-track-cue id=text-track-model:text-track-cue>テキストトラックキュー</a>のリスト。たとえば、WebVTTの場合、<a id=text-track-model:rules-for-updating-the-display-of-webvtt-text-tracks href=infrastructure.html#rules-for-updating-the-display-of-webvtt-text-tracks>WebVTTテキストトラックの表示を更新するための規則</a>。<a href=references.html#refsWEBVTT>[WEBVTT]</a> </p>

    <p><a href=#text-track-list-of-cues id=text-track-model:text-track-list-of-cues>テキストトラックのキューのリスト</a>は、<a href=#text-track id=text-track-model:text-track-10>テキスト·トラック</a>が<a href=#text-track-not-loaded id=text-track-model:text-track-not-loaded>まだロードされていない</a>か、すでに<a href=#text-track-loading id=text-track-model:text-track-loading>ロード中</a>である、またはDOM操作に起因してのいずれかのために、動的に変更できる。</p>

   </dl>

  <p>各<a href=#text-track id=text-track-model:text-track-11>テキストトラック</a>は、対応する<code id=text-track-model:texttrack><a href=#texttrack>TextTrack</a></code>オブジェクトを持つ。</p>

  <hr>

  <p>各<a href=#media-element id=text-track-model:media-element-4>メディア要素</a>は、最初は空でなければならない<dfn id=list-of-pending-text-tracks>保留中のテキストトラックのリスト</dfn>、最初はfalseでなければならない<dfn id=blocked-on-parser>blocked-on-parser</dfn>フラグ、最初はfalseでなければならない<dfn id=did-perform-automatic-track-selection>did-perform-automatic-track-selection</dfn>フラグを持つ。</p>

  <p>ユーザーエージェントが<a href=#media-element id=text-track-model:media-element-5>メディア要素</a>に属する<dfn id=populate-the-list-of-pending-text-tracks>保留中のテキストトラックのリストを追加する</dfn>必要がある場合、ユーザーエージェントは、<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks>保留中のテキストトラックのリスト</a>に要素の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks>テキストトラックのリスト</a>で各<a href=#text-track id=text-track-model:text-track-12>テキストトラック</a>を追加しなければならない。要素のテキストトラックのリストで<a href=#text-track-mode id=text-track-model:text-track-mode>テキストトラックモード</a>は<a href=#text-track-disabled id=text-track-model:text-track-disabled>無効</a>であり、かつそのリストの<a href=#text-track-readiness-state id=text-track-model:text-track-readiness-state-2>テキストトラックの準備状態</a>は<a href=#text-track-loading id=text-track-model:text-track-loading-2>ロード中</a>である。</p>

  <p><code id=text-track-model:the-track-element-5><a href=#the-track-element>track</a></code>要素の親ノードが変更ときはいつでも、ユーザーエージェントは、要素が属する全<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks-2>保留中のテキストトラックのリスト</a>から該当する<a href=#text-track id=text-track-model:text-track-13>テキストトラック</a>を削除しなければならない。</p>

  <p><a href=#text-track id=text-track-model:text-track-14>テキストトラック</a>の<a href=#text-track-readiness-state id=text-track-model:text-track-readiness-state-3>テキストトラックの準備状態</a>が<a href=#text-track-loaded id=text-track-model:text-track-loaded>ロードされる</a>か、<a href=#text-track-failed-to-load id=text-track-model:text-track-failed-to-load>ロードに失敗する</a>のいずれかに変更されるときはいつでも、ユーザーエージェントは、テキストトラックが属する全<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks-3>保留中のテキストトラックのリスト</a>から削除しなければならない。</p>

  <p><a href=#media-element id=text-track-model:media-element-6>メディア要素</a>が<a id=text-track-model:html-parser href=syntax.html#html-parser>HTMLパーサ</a>や<a id=text-track-model:xml-parser href=xhtml.html#xml-parser>XMLパーサ</a>によって作成された場合、ユーザーエージェントは、要素の<a href=#blocked-on-parser id=text-track-model:blocked-on-parser>blocked-on-parser</a>フラグをtrueに設定しなければならない。<a href=#media-element id=text-track-model:media-element-7>メディア要素</a>が<a id=text-track-model:html-parser-2 href=syntax.html#html-parser>HTMLパーサ</a>や<a id=text-track-model:xml-parser-2 href=xhtml.html#xml-parser>XMLパーサ</a>の<a id=text-track-model:stack-of-open-elements href=syntax.html#stack-of-open-elements>オープン要素のスタック</a>からポップされる場合、ユーザーエージェントは、<a href=#honor-user-preferences-for-automatic-text-track-selection id=text-track-model:honor-user-preferences-for-automatic-text-track-selection>自動テキストトラックの選択に対してユーザーの好みを尊重</a>しなければならず、<a href=#populate-the-list-of-pending-text-tracks id=text-track-model:populate-the-list-of-pending-text-tracks>保留中のテキストトラックのリストを追加し</a>、要素の<a href=#blocked-on-parser id=text-track-model:blocked-on-parser-2>blocked-on-parser</a>フラグをfalseに設定する。</p>

  <p>要素の<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks-4>保留中のテキストトラックのリスト</a>が空であり、要素の<a href=#blocked-on-parser id=text-track-model:blocked-on-parser-3>blocked-on-parser</a>フラグがfalseの両方である場合、<a href=#media-element id=text-track-model:media-element-8>メディア要素</a>の<a href=#text-track id=text-track-model:text-track-15>テキストトラック</a>は<dfn id=the-text-tracks-are-ready>準備</dfn>ができている。</p>

  <p>各<a href=#media-element id=text-track-model:media-element-9>メディア要素</a>は、最初に未設定でなければならない<dfn id=pending-text-track-change-notification-flag>保留中のテキストトラック変更通知フラグ</dfn>を持つ。</p>

  <p><a href=#media-element id=text-track-model:media-element-10>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks-2>テキストトラックのリスト</a>に属する<a href=#text-track id=text-track-model:text-track-16>テキストトラック</a>が、その<a href=#text-track-mode id=text-track-model:text-track-mode-2>テキストトラックモード</a>変更値を持つたびに、ユーザーエージェントは、<a href=#media-element id=text-track-model:media-element-11>メディア要素</a>のために次の手順を実行しなければならない：</p>

  <ol><li><p><a href=#media-element id=text-track-model:media-element-12>メディア要素</a>の<a href=#pending-text-track-change-notification-flag id=text-track-model:pending-text-track-change-notification-flag>保留中のテキストトラックの変更通知フラグ</a>が設定される場合、この手順を中止する。</li><li><p><a href=#media-element id=text-track-model:media-element-13>メディア要素</a>の<a href=#pending-text-track-change-notification-flag id=text-track-model:pending-text-track-change-notification-flag-2>保留中のテキストトラック変更通知フラグ</a>を設定する。</li><li>

    <p>次の手順を実行する<a id=text-track-model:queue-a-task href=webappapis.html#queue-a-task>キュータスク</a>：</p>

    <ol><li><p><a href=#media-element id=text-track-model:media-element-14>メディア要素</a>の<a href=#pending-text-track-change-notification-flag id=text-track-model:pending-text-track-change-notification-flag-3>保留中のテキストトラック変更通知フラグ</a>を設定解除する。</li><li><p><a href=#media-element id=text-track-model:media-element-15>メディア要素</a>の<code id=text-track-model:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code>属性の<code id=text-track-model:texttracklist><a href=#texttracklist>TextTrackList</a></code>オブジェクトで<code id=text-track-model:event-media-change><a href=#event-media-change>change</a></code>に名付けられる<a id=text-track-model:fire-a-simple-event href=webappapis.html#fire-a-simple-event>単純イベントを発火する</a>。</li></ol>

   </li><li><p><a href=#media-element id=text-track-model:media-element-16>メディア要素</a>の<a href=#show-poster-flag id=text-track-model:show-poster-flag>ショーポスターフラグ</a>が設定されていない場合、手順の<i id=text-track-model:time-marches-on><a href=#time-marches-on>時間行進</a></i>を実行する。</li></ol>

  <p>このセクションに記載される<a href=webappapis.html#concept-task id=text-track-model:concept-task>タスク</a>の<a id=text-track-model:task-source href=webappapis.html#task-source>タスクソース</a>は、<a id=text-track-model:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM操作タスクソース</a>である。</p>

  <hr>

  <p><dfn id=text-track-cue>テキストトラックキュー</dfn>は、特定の時刻に表示され別の時刻に消滅するテキストに字幕やキャプションに対するインスタンスに対応する、<a href=#text-track id=text-track-model:text-track-17>テキストトラック</a>で時刻依存のデータの単位である。</p>

  <p>各<a href=#text-track-cue id=text-track-model:text-track-cue-2>テキストトラックキュー</a>の構成は次のとおり：</p>

  <dl><dt><dfn id=text-track-cue-identifier>識別子</dfn>
   <dd>
    <p>任意の文字列。</p>
   <dt><dfn id=text-track-cue-start-time>開始時刻</dfn>
   <dd>
    <p>時刻は、秒、秒の小数で、キューが適用される<a href=#media-data id=text-track-model:media-data>メディアデータ</a>の範囲の開始を表現する。</p>
   <dt><dfn id=text-track-cue-end-time>終了時刻</dfn>
   <dd>
    <p>時刻は、秒、秒の小数で、キューが適用される<a href=#media-data id=text-track-model:media-data-2>メディアデータ</a>の範囲の終了を表現する。</p>
   <dt><dfn id=text-track-cue-pause-on-exit-flag>pause-on-exitフラグ</dfn>
   <dd>
    <p>キューが適用される範囲の最後に達した際の、<a href=#media-resource id=text-track-model:media-resource-5>メディアリソース</a>の再生が一時停止するかどうかを示す真偽値。</p>
   <dt>追加の形式固有のデータ<dd>
    <p>フォーマットのために必要なものとしての、キューの実際のデータを含む、追加フィールド。たとえば、WebVTTは、<a id=text-track-model:text-track-cue-writing-direction href=infrastructure.html#text-track-cue-writing-direction>テキストトラックキュー書き込み方向</a>などを持つ。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>
   <dt><dfn id=text-track-rules-for-extracting-the-chapter-title>Rules for extracting the chapter title</dfn>
   <dd>
    <p>An algorithm which, when applied to the cue, returns a string that can be used in user
    interfaces that use the cue as a chapter title.</p>
   </dl>

  <p class=note><a href=#text-track-cue-start-time id=text-track-model:text-track-cue-start-time>テキストトラックキューの開始時刻</a>および<a href=#text-track-cue-end-time id=text-track-model:text-track-cue-end-time>テキストトラックキューの終了時刻</a>は負であってもよい。（時刻ゼロがアクティブにすることはできない前の全体のキュー、しかし、<a href=#current-playback-position id=text-track-model:current-playback-position>現在の再生位置</a>は負になることはない。）</p>

  <p>各<a href=#text-track-cue id=text-track-model:text-track-cue-3>テキストトラックキュー</a>は、対応する<code id=text-track-model:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code>オブジェクト（より具体的には、たとえばWebVTTのキューが<code id=text-track-model:vttcue><a href=infrastructure.html#vttcue>VTTCue</a></code>インターフェースを使用するような、<code id=text-track-model:texttrackcue-2><a href=#texttrackcue>TextTrackCue</a></code>を継承したオブジェクト）を持つ。<a href=#text-track-cue id=text-track-model:text-track-cue-4>テキストトラックキュー</a>のメモリ内表現は、動的にこの<code id=text-track-model:texttrackcue-3><a href=#texttrackcue>TextTrackCue</a></code> APIを通して変更できる。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><a href=#text-track-cue id=text-track-model:text-track-cue-5>テキストトラックキュー</a>は、<a href=#text-track-cue id=text-track-model:text-track-cue-6>テキストトラックキュー</a>の特定の種類に対して仕様で定義されている、<a href=#rules-for-updating-the-text-track-rendering id=text-track-model:rules-for-updating-the-text-track-rendering>テキストトラックレンダリングを更新するための規則</a>に関連付けられる。これらの規則は、キューを表すオブジェクトが<code id=text-track-model:dom-texttrack-addcue><a href=#dom-texttrack-addcue>addCue()</a></code>メソッドを使用して<code id=text-track-model:texttrack-2><a href=#texttrack>TextTrack</a></code>オブジェクトに追加される際に特に使用される。</p>

  <p>加えて、各<a href=#text-track-cue id=text-track-model:text-track-cue-7>テキストトラックキュー</a>は、動的な2つの情報を持つ：</p>

  <dl><dt><dfn id=text-track-cue-active-flag>アクティブフラグ</dfn>
   <dd>

    <p>このフラグは、最初に設定を解除されなければならない。キューがアクティブまたは非アクティブになった際、フラグは、イベントが適切に発火されるように、および右のキューがレンダリングされることを確認するために使用される。</p>

    <p><a href=#text-track-cue id=text-track-model:text-track-cue-8>テキストトラックキュー</a>がその<a href=#text-track id=text-track-model:text-track-18>テキストトラック</a>の<a href=#text-track-list-of-cues id=text-track-model:text-track-list-of-cues-2>キューのテキストトラックリスト</a>から削除されるたびに、<a href=#text-track id=text-track-model:text-track-19>テキストトラック</a>自体はその<a href=#media-element id=text-track-model:media-element-17>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks-3>テキストトラックのリスト</a>から削除される、または<a href=#text-track-disabled id=text-track-model:text-track-disabled-2>無効</a>に変更されるその<a href=#text-track-mode id=text-track-model:text-track-mode-3>テキストトラックモード</a>を持つたびに、かつ<a href=#media-element id=text-track-model:media-element-18>メディア要素</a>の<code id=text-track-model:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code>が<code id=text-track-model:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>に戻されるたびに、ユーザーエージェントは同期的にこのフラグを設定解除しなければならない。フラグが、関連付帯条件より前に<a href=#text-track-showing id=text-track-model:text-track-showing>表示</a>されていた<a href=#text-track id=text-track-model:text-track-20>テキストトラック</a>内の1つ以上のキューに対してこの方法で解除される場合、影響を受けるすべてのキューに対してフラグを解除した後、ユーザーエージェントは、これらの<a href=#text-track id=text-track-model:text-track-21>テキストトラック</a>に属する<a href=#rules-for-updating-the-text-track-rendering id=text-track-model:rules-for-updating-the-text-track-rendering-2>テキストトラックのレンダリングを更新するための規則</a>を適用しなければならない。たとえば、WebVTTに基づく<a href=#text-track id=text-track-model:text-track-22>テキストトラック</a>用、<a id=text-track-model:rules-for-updating-the-display-of-webvtt-text-tracks-2 href=infrastructure.html#rules-for-updating-the-display-of-webvtt-text-tracks>WebVTTテキストトラックの表示を更新するための規則</a>など。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p> <dt><dfn id=text-track-cue-display-state>表示状態</dfn>
   <dd>

    <p>これは、一貫性のある位置にキューを保つために、レンダリングモデルの一部として使用される。これは最初は空でなければならない。<a href=#text-track-cue-active-flag id=text-track-model:text-track-cue-active-flag>テキストトラックキューのアクティブフラグ</a>が設定解除されるたびに、ユーザーエージェントは<a href=#text-track-cue-display-state id=text-track-model:text-track-cue-display-state>テキストトラックキューの表示状態</a>を空にしなければならない。</p>

   </dl>

  <p><a href=#media-element id=text-track-model:media-element-19>メディア要素</a>の<a href=#text-track id=text-track-model:text-track-23>テキストトラック</a>の<a href=#text-track-cue id=text-track-model:text-track-cue-9>テキストトラックキュー</a>は、<dfn id=text-track-cue-order>テキストトラックキュー順</dfn>に互いに相対的に順序付けされ、以下のように決定される：<a href=#media-element id=text-track-model:media-element-20>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks-4>テキストトラックのリスト</a>に出現するそれらの<a href=#text-track id=text-track-model:text-track-25>テキストトラック</a>として同じ順序でソートされるグループをもつ、それらの<a href=#text-track id=text-track-model:text-track-24>テキストトラック</a>で最初のグループの<a href=#text-track-cue id=text-track-model:text-track-cue-10>キュー</a>：次に、各グループ内で、<a href=#text-track-cue id=text-track-model:text-track-cue-11>キュー</a>は、最も早いものの順に、その<a href=#text-track-cue-start-time id=text-track-model:text-track-cue-start-time-2>開始時刻</a>でソートされなければならない。それから、同じ<a href=#text-track-cue-start-time id=text-track-model:text-track-cue-start-time-3>開始時刻</a>を持つ任意の<a href=#text-track-cue id=text-track-model:text-track-cue-12>キュー</a>は、最も遅いものの順に、その<a href=#text-track-cue-end-time id=text-track-model:text-track-cue-end-time-2>終了時刻</a>でソートされなければならず、最後に、同一の<a href=#text-track-cue-end-time id=text-track-model:text-track-cue-end-time-3>終了時刻</a>を持つ任意の<a href=#text-track-cue id=text-track-model:text-track-cue-13>キュー</a>は、最も古いものの順に、それらがそれぞれの<a href=#text-track-list-of-cues id=text-track-model:text-track-list-of-cues-3>キューのテキストトラックリスト</a>に最後に追加した順にソートされなければならない。（たとえば、WebVTTファイル由来のキューに対して、最初にファイルに記載されていた順でなど。）<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>


  <h6 id=sourcing-in-band-text-tracks>4.8.13.12.2 帯域内テキストトラックの情報源</h6>

  <p><dfn id=media-resource-specific-text-track>メディアリソース固有のテキストトラック</dfn>は<a href=#media-resource id=sourcing-in-band-text-tracks:media-resource>メディアリソース</a>で見つけられるデータに対応する<a href=#text-track id=sourcing-in-band-text-tracks:text-track>テキストトラック</a>である。</p>


  

  <p>Rules for processing and rendering such data are defined by the relevant specifications, e.g.
  the specification of the video format if the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-2>media resource</a> is a video. Details for
  some legacy formats can be found in the <cite>Sourcing In-band Media Resource Tracks from Media
  Containers into HTML</cite> specification. <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p>When a <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-3>media resource</a> contains data that the user agent recognises and supports as
  being equivalent to a <a href=#text-track id=sourcing-in-band-text-tracks:text-track-2>text track</a>, the user agent <a href=#found-a-media-resource-specific-timed-track>runs</a> the <dfn id=steps-to-expose-a-media-resource-specific-text-track>steps to expose a
  media-resource-specific text track</dfn> with the relevant data, as follows.</p>

  

  <ol><li><p>Associate the relevant data with a new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-3>text track</a> and its corresponding new
   <code id=sourcing-in-band-text-tracks:texttrack><a href=#texttrack>TextTrack</a></code> object. The <a href=#text-track id=sourcing-in-band-text-tracks:text-track-4>text track</a> is a <a href=#media-resource-specific-text-track id=sourcing-in-band-text-tracks:media-resource-specific-text-track>media-resource-specific
   text track</a>.</li><li><p>Set the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-5>text track</a>'s <a href=#text-track-kind id=sourcing-in-band-text-tracks:text-track-kind>kind</a>, <a href=#text-track-label id=sourcing-in-band-text-tracks:text-track-label>label</a>, and <a href=#text-track-language id=sourcing-in-band-text-tracks:text-track-language>language</a>
   based on the semantics of the relevant data, as defined by the relevant specification. If there
   is no label in that data, then the <a href=#text-track-label id=sourcing-in-band-text-tracks:text-track-label-2>label</a> must be set to the
   empty string.</li><li><p>Associate the <a href=#text-track-list-of-cues id=sourcing-in-band-text-tracks:text-track-list-of-cues>text track list of cues</a> with the <a href=#rules-for-updating-the-text-track-rendering id=sourcing-in-band-text-tracks:rules-for-updating-the-text-track-rendering>rules for updating the
   text track rendering</a> appropriate for the format in question.</p>

   </li><li>

    <p>If the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-6>text track</a>'s <a href=#text-track-kind id=sourcing-in-band-text-tracks:text-track-kind-2>kind</a> is <code id=sourcing-in-band-text-tracks:dom-texttrack-kind-metadata><a href=#dom-texttrack-kind-metadata>metadata</a></code>, then set the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type>text track in-band
    metadata track dispatch type</a> as follows, based on the type of the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-4>media
    resource</a>:</p>

    <dl class=switch><dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-5>media resource</a> is an Ogg file<dd>The <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-2>text track in-band metadata track dispatch type</a> must be set to the value
     of the Name header field. <a href=references.html#refsOGGSKELETONHEADERS>[OGGSKELETONHEADERS]</a><dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-6>media resource</a> is a WebM file<dd>The <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-3>text track in-band metadata track dispatch type</a> must be set to the value
     of the <code>CodecID</code> element. <a href=references.html#refsWEBMCG>[WEBMCG]</a><dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-7>media resource</a> is an MPEG-2 file<dd>Let <var>stream type</var> be the value of the "stream_type" field describing the
     text track's type in the file's program map section, interpreted as an 8-bit unsigned integer.
     Let <var>length</var> be the value of the "ES_info_length" field for the track in the
     same part of the program map section, interpreted as an integer as defined by the MPEG-2
     specification. Let <var>descriptor bytes</var> be the <var>length</var> bytes
     following the "ES_info_length" field. The <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-4>text track in-band metadata track dispatch
     type</a> must be set to the concatenation of the <var>stream type</var> byte and
     the zero or more <var>descriptor bytes</var> bytes, expressed in hexadecimal using
     <a id=sourcing-in-band-text-tracks:uppercase-ascii-hex-digits href=infrastructure.html#uppercase-ascii-hex-digits>uppercase ASCII hex digits</a>. <a href=references.html#refsMPEG2>[MPEG2]</a>

     <dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-8>media resource</a> is an MPEG-4 file<dd>Let the
     first <code>stsd</code> box of the
     first <code>stbl</code> box of the
     first <code>minf</code> box of the
     first <code>mdia</code> box of the
     <a href=#text-track id=sourcing-in-band-text-tracks:text-track-7>text track</a>'s <code>trak</code> box in the
     first <code>moov</code> box
     of the file be the <i>stsd box</i>, if any.

     If the file has no <i>stsd box</i>, or if the <i>stsd box</i> has neither a <code>mett</code> box nor a <code>metx</code> box, then the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-5>text track
     in-band metadata track dispatch type</a> must be set to the empty string.

     Otherwise, if the <i>stsd box</i> has a <code>mett</code> box then the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-6>text
     track in-band metadata track dispatch type</a> must be set to the concatenation of the
     string "<code>mett</code>", a U+0020 SPACE character, and the value of the first <code>mime_format</code> field of the first <code>mett</code> box of the <i>stsd
     box</i>, or the empty string if that field is absent in that box.

     Otherwise, if the <i>stsd box</i> has no <code>mett</code> box but has a <code>metx</code> box then the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-7>text track in-band metadata track dispatch type</a>
     must be set to the concatenation of the string "<code>metx</code>", a U+0020 SPACE
     character, and the value of the first <code>namespace</code> field of the first <code>metx</code> box of the <i>stsd box</i>, or the empty string if that field is absent in
     that box.

     <a href=references.html#refsMPEG4>[MPEG4]</a>

     </dl>

   </li><li><p>Populate the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-8>text track</a>'s <a href=#text-track-list-of-cues id=sourcing-in-band-text-tracks:text-track-list-of-cues-2>list of
   cues</a> with the cues parsed so far, following the <a href=#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues id=sourcing-in-band-text-tracks:guidelines-for-exposing-cues-in-various-formats-as-text-track-cues>guidelines for exposing
   cues</a>, and begin updating it dynamically as necessary.</li><li><p>Set the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-9>text track</a>'s <a href=#text-track-readiness-state id=sourcing-in-band-text-tracks:text-track-readiness-state>readiness
   state</a> to <a href=#text-track-loaded id=sourcing-in-band-text-tracks:text-track-loaded>loaded</a>.</li><li><p>Set the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-10>text track</a>'s <a href=#text-track-mode id=sourcing-in-band-text-tracks:text-track-mode>mode</a> to the
   mode consistent with the user's preferences and the requirements of the relevant specification
   for the data.</p>

    <p class=note>For instance, if there are no other active subtitles, and this is a forced
    subtitle track (a subtitle track giving subtitles in the audio track's primary language, but
    only for audio that is actually in another language), then those subtitles might be activated
    here.</p>

   </li><li><p>Add the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-11>text track</a> to the <a href=#media-element id=sourcing-in-band-text-tracks:media-element>media element</a>'s <a href=#list-of-text-tracks id=sourcing-in-band-text-tracks:list-of-text-tracks>list of text
   tracks</a>.</li><li><p><a href=infrastructure.html#concept-event-fire id=sourcing-in-band-text-tracks:concept-event-fire>Fire</a> a <a href=infrastructure.html#concept-events-trusted id=sourcing-in-band-text-tracks:concept-events-trusted>trusted</a> event with the name <code id=sourcing-in-band-text-tracks:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>, that does not bubble and is not cancelable, and that uses
   the <code id=sourcing-in-band-text-tracks:trackevent><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=sourcing-in-band-text-tracks:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code>
   attribute initialised to the <a href=#text-track id=sourcing-in-band-text-tracks:text-track-12>text track</a>'s <code id=sourcing-in-band-text-tracks:texttrack-2><a href=#texttrack>TextTrack</a></code> object, at the
   <a href=#media-element id=sourcing-in-band-text-tracks:media-element-2>media element</a>'s <code id=sourcing-in-band-text-tracks:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code> attribute's
   <code id=sourcing-in-band-text-tracks:texttracklist><a href=#texttracklist>TextTrackList</a></code> object.</li></ol>

  

  

  



  

  <h6 id=sourcing-out-of-band-text-tracks>4.8.13.12.3 Sourcing out-of-band text tracks</h6>

  <p>When a <code id=sourcing-out-of-band-text-tracks:the-track-element><a href=#the-track-element>track</a></code> element is created, it must be associated with a new <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track>text
  track</a> (with its value set as defined below) and its corresponding new
  <code id=sourcing-out-of-band-text-tracks:texttrack><a href=#texttrack>TextTrack</a></code> object.</p>

  <p>The <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind>text track kind</a> is determined from the state of the element's <code id=sourcing-out-of-band-text-tracks:attr-track-kind><a href=#attr-track-kind>kind</a></code> attribute according to the following table; for a state given
  in a cell of the first column, the <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-2>kind</a> is the string given
  in the second column:</p>

  <table><thead><tr><th>状態
     </th><th>String
   
   <tbody></th></tr><tr><td><a href=#attr-track-kind-subtitles id=sourcing-out-of-band-text-tracks:attr-track-kind-subtitles>Subtitles</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-subtitles><a href=#dom-texttrack-kind-subtitles>subtitles</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-captions id=sourcing-out-of-band-text-tracks:attr-track-kind-captions>Captions</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-captions><a href=#dom-texttrack-kind-captions>captions</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-descriptions id=sourcing-out-of-band-text-tracks:attr-track-kind-descriptions>概要</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-descriptions><a href=#dom-texttrack-kind-descriptions>descriptions</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-chapters id=sourcing-out-of-band-text-tracks:attr-track-kind-chapters>Chapters</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-chapters><a href=#dom-texttrack-kind-chapters>chapters</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-metadata id=sourcing-out-of-band-text-tracks:attr-track-kind-metadata>Metadata</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata><a href=#dom-texttrack-kind-metadata>metadata</a></code>
  </td></tr></table>

  <p>The <a href=#text-track-label id=sourcing-out-of-band-text-tracks:text-track-label>text track label</a> is the element's <a href=#track-label id=sourcing-out-of-band-text-tracks:track-label>track label</a>.</p>

  <p>The <a href=#text-track-language id=sourcing-out-of-band-text-tracks:text-track-language>text track language</a> is the element's <a href=#track-language id=sourcing-out-of-band-text-tracks:track-language>track language</a>, if any, or
  the empty string otherwise.</p>

  <p>As the <code id=sourcing-out-of-band-text-tracks:attr-track-kind-2><a href=#attr-track-kind>kind</a></code>, <code id=sourcing-out-of-band-text-tracks:attr-track-label><a href=#attr-track-label>label</a></code>,
  and <code id=sourcing-out-of-band-text-tracks:attr-track-srclang><a href=#attr-track-srclang>srclang</a></code> attributes are set, changed, or removed, the
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-2>text track</a> must update accordingly, as per the definitions above.</p>

  <p class=note>Changes to the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url>track URL</a> are handled in the algorithm below.</p>

  <p>The <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state>text track readiness state</a> is initially <a href=#text-track-not-loaded id=sourcing-out-of-band-text-tracks:text-track-not-loaded>not loaded</a>, and the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode>text track mode</a> is initially <a href=#text-track-disabled id=sourcing-out-of-band-text-tracks:text-track-disabled>disabled</a>.</p>

  <p>The <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues>text track list of cues</a> is initially empty. It is dynamically modified when
  the referenced file is parsed. Associated with the list are the <a href=#rules-for-updating-the-text-track-rendering id=sourcing-out-of-band-text-tracks:rules-for-updating-the-text-track-rendering>rules for updating the text
  track rendering</a> appropriate for the format in question; for WebVTT, this is the <a id=sourcing-out-of-band-text-tracks:rules-for-updating-the-display-of-webvtt-text-tracks href=infrastructure.html#rules-for-updating-the-display-of-webvtt-text-tracks>rules
  for updating the display of WebVTT text tracks</a>. <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p>When a <code id=sourcing-out-of-band-text-tracks:the-track-element-2><a href=#the-track-element>track</a></code> element's parent element changes and the new parent is a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element>media
  element</a>, then the user agent must add the <code id=sourcing-out-of-band-text-tracks:the-track-element-3><a href=#the-track-element>track</a></code> element's corresponding
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-3>text track</a> to the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-2>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks>list of text tracks</a>, and
  then <a id=sourcing-out-of-band-text-tracks:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=infrastructure.html#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire>fire</a> a <a href=infrastructure.html#concept-events-trusted id=sourcing-out-of-band-text-tracks:concept-events-trusted>trusted</a> event with the name <code id=sourcing-out-of-band-text-tracks:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>, that does not bubble and is not cancelable, and that uses
  the <code id=sourcing-out-of-band-text-tracks:trackevent><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=sourcing-out-of-band-text-tracks:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code>
  attribute initialised to the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-4>text track</a>'s <code id=sourcing-out-of-band-text-tracks:texttrack-2><a href=#texttrack>TextTrack</a></code> object, at the
  <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-3>media element</a>'s <code id=sourcing-out-of-band-text-tracks:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code> attribute's
  <code id=sourcing-out-of-band-text-tracks:texttracklist><a href=#texttracklist>TextTrackList</a></code> object.</p>

  <p>When a <code id=sourcing-out-of-band-text-tracks:the-track-element-4><a href=#the-track-element>track</a></code> element's parent element changes and the old parent was a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-4>media
  element</a>, then the user agent must remove the <code id=sourcing-out-of-band-text-tracks:the-track-element-5><a href=#the-track-element>track</a></code> element's corresponding
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-5>text track</a> from the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-5>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-2>list of text tracks</a>,
  and then <a id=sourcing-out-of-band-text-tracks:queue-a-task-2 href=webappapis.html#queue-a-task>queue a task</a> to <a href=infrastructure.html#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire-2>fire</a> a <a href=infrastructure.html#concept-events-trusted id=sourcing-out-of-band-text-tracks:concept-events-trusted-2>trusted</a> event with the name <code id=sourcing-out-of-band-text-tracks:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code>, that does not bubble and is not cancelable, and that
  uses the <code id=sourcing-out-of-band-text-tracks:trackevent-2><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=sourcing-out-of-band-text-tracks:dom-trackevent-track-2><a href=#dom-trackevent-track>track</a></code> attribute initialised to the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-6>text track</a>'s
  <code id=sourcing-out-of-band-text-tracks:texttrack-3><a href=#texttrack>TextTrack</a></code> object, at the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-6>media element</a>'s <code id=sourcing-out-of-band-text-tracks:dom-media-texttracks-2><a href=#dom-media-texttracks>textTracks</a></code> attribute's <code id=sourcing-out-of-band-text-tracks:texttracklist-2><a href=#texttracklist>TextTrackList</a></code> object.</p>
  

  <hr>

  <p>When a <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-7>text track</a> corresponding to a <code id=sourcing-out-of-band-text-tracks:the-track-element-6><a href=#the-track-element>track</a></code> element is added to a
  <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-7>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-3>list of text tracks</a>, the user agent must <a id=sourcing-out-of-band-text-tracks:queue-a-task-3 href=webappapis.html#queue-a-task>queue a
  task</a> to run the following steps for the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-8>media element</a>:</p>

  <ol><li><p>If the element's <a href=#blocked-on-parser id=sourcing-out-of-band-text-tracks:blocked-on-parser>blocked-on-parser</a> flag is true, abort these steps.</li><li><p>If the element's <a href=#did-perform-automatic-track-selection id=sourcing-out-of-band-text-tracks:did-perform-automatic-track-selection>did-perform-automatic-track-selection</a> flag is true, abort
   these steps.</li><li><p><a href=#honor-user-preferences-for-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:honor-user-preferences-for-automatic-text-track-selection>Honor user preferences for automatic text track selection</a> for this
   element.</li></ol>

  <p>When the user agent is required to <dfn id=honor-user-preferences-for-automatic-text-track-selection>honor user preferences for automatic text track
  selection</dfn> for a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-9>media element</a>, the user agent must run the following steps:</p>

  <ol><li><p><a href=#perform-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection>Perform automatic text track selection</a> for <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-subtitles-2><a href=#dom-texttrack-kind-subtitles>subtitles</a></code> and <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-captions-2><a href=#dom-texttrack-kind-captions>captions</a></code>.</li><li><p><a href=#perform-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection-2>Perform automatic text track selection</a> for <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-descriptions-2><a href=#dom-texttrack-kind-descriptions>descriptions</a></code>.</li><li><p><a href=#perform-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection-3>Perform automatic text track selection</a> for <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-chapters-2><a href=#dom-texttrack-kind-chapters>chapters</a></code>.</li><li><p>If there are any <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-8>text tracks</a> in the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-10>media
   element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-4>list of text tracks</a> whose <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-3>text track kind</a> is <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata-2><a href=#dom-texttrack-kind-metadata>metadata</a></code> that correspond to <code id=sourcing-out-of-band-text-tracks:the-track-element-7><a href=#the-track-element>track</a></code>
   elements with a <code id=sourcing-out-of-band-text-tracks:attr-track-default><a href=#attr-track-default>default</a></code> attribute set whose <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-2>text
   track mode</a> is set to <a href=#text-track-disabled id=sourcing-out-of-band-text-tracks:text-track-disabled-2>disabled</a>, then set the
   <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-3>text track mode</a> of all such tracks to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden>hidden</a></li><li><p>Set the element's <a href=#did-perform-automatic-track-selection id=sourcing-out-of-band-text-tracks:did-perform-automatic-track-selection-2>did-perform-automatic-track-selection</a> flag to
   true.</li></ol>

  <p>When the steps above say to <dfn id=perform-automatic-text-track-selection>perform automatic text track selection</dfn> for one or more
  <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-4>text track kinds</a>, it means to run the following steps:</p>

  <ol><li><p>Let <var>candidates</var> be a list consisting of the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-9>text tracks</a> in the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-11>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-5>list of text tracks</a>
   whose <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-5>text track kind</a> is one of the kinds that were passed to the algorithm, if any,
   in the order given in the <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-6>list of text tracks</a>.</li><li><p>If <var>candidates</var> is empty, then abort these steps.</li><li><p>If any of the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-10>text tracks</a> in <var>candidates</var> have a <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-4>text track mode</a> set to <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing>showing</a>, abort these steps.</li><li>

    <p>If the user has expressed an interest in having a track from <var>candidates</var>
    enabled based on its <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-6>text track kind</a>, <a href=#text-track-language id=sourcing-out-of-band-text-tracks:text-track-language-2>text track language</a>, and
    <a href=#text-track-label id=sourcing-out-of-band-text-tracks:text-track-label-2>text track label</a>, then set its <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-5>text track mode</a> to <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-2>showing</a>.</p> 

    <p class=note>For example, the user could have set a browser preference to the effect of "I
    want French captions whenever possible", or "If there is a subtitle track with 'Commentary' in
    the title, enable it", or "If there are audio description tracks available, enable one, ideally
    in Swiss German, but failing that in Standard Swiss German or Standard German".</p>

    <p>Otherwise, if there are any <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-11>text tracks</a> in <var>candidates</var> that correspond to <code id=sourcing-out-of-band-text-tracks:the-track-element-8><a href=#the-track-element>track</a></code> elements with a <code id=sourcing-out-of-band-text-tracks:attr-track-default-2><a href=#attr-track-default>default</a></code> attribute set whose <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-6>text track mode</a> is
    set to <a href=#text-track-disabled id=sourcing-out-of-band-text-tracks:text-track-disabled-3>disabled</a>, then set the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-7>text track
    mode</a> of the first such track to <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-3>showing</a>.</p>

   </li></ol>

  <p>When a <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-12>text track</a> corresponding to a <code id=sourcing-out-of-band-text-tracks:the-track-element-9><a href=#the-track-element>track</a></code> element experiences any of
  the following circumstances, the user agent must <a href=#start-the-track-processing-model id=sourcing-out-of-band-text-tracks:start-the-track-processing-model>start the <code>track</code> processing
  model</a> for that <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-13>text track</a> and its <code id=sourcing-out-of-band-text-tracks:the-track-element-10><a href=#the-track-element>track</a></code> element:

  

  <ul><li>The <code id=sourcing-out-of-band-text-tracks:the-track-element-11><a href=#the-track-element>track</a></code> element is created.</li><li>The <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-14>text track</a> has its <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-8>text track mode</a> changed.</li><li>The <code id=sourcing-out-of-band-text-tracks:the-track-element-12><a href=#the-track-element>track</a></code> element's parent element changes and the new parent is a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-12>media
   element</a>.</li></ul>

  <p>When a user agent is to <dfn id=start-the-track-processing-model>start the <code>track</code> processing model</dfn> for a
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-15>text track</a> and its <code id=sourcing-out-of-band-text-tracks:the-track-element-13><a href=#the-track-element>track</a></code> element, it must run the following algorithm.
  This algorithm interacts closely with the <a id=sourcing-out-of-band-text-tracks:event-loop href=webappapis.html#event-loop>event loop</a> mechanism; in particular, it has
  a <a id=sourcing-out-of-band-text-tracks:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a> (which is triggered as part of the <a id=sourcing-out-of-band-text-tracks:event-loop-2 href=webappapis.html#event-loop>event loop</a>
  algorithm). The steps in that section are marked with ⌛.</p>

  <ol><li><p>If another occurrence of this algorithm is already running for this <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-16>text
   track</a> and its <code id=sourcing-out-of-band-text-tracks:the-track-element-14><a href=#the-track-element>track</a></code> element, abort these steps, letting that other algorithm
   take care of this element.</li><li><p>If the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-17>text track</a>'s <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-9>text track mode</a> is not set to one of <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-2>hidden</a> or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-4>showing</a>, abort
   these steps.</li><li><p>If the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-18>text track</a>'s <code id=sourcing-out-of-band-text-tracks:the-track-element-15><a href=#the-track-element>track</a></code> element does not have a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-13>media
   element</a> as a parent, abort these steps.</li><li><p>Run the remainder of these steps <a id=sourcing-out-of-band-text-tracks:in-parallel href=infrastructure.html#in-parallel>in parallel</a>, allowing whatever caused these steps to
   run to continue.</li><li><p><i>Top</i>: <a id=sourcing-out-of-band-text-tracks:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=sourcing-out-of-band-text-tracks:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a>
   consists of the following steps. (The steps in the <a id=sourcing-out-of-band-text-tracks:synchronous-section-3 href=webappapis.html#synchronous-section>synchronous section</a> are marked
   with ⌛.)</li><li><p>⌛ Set the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-2>text track readiness state</a> to <a href=#text-track-loading id=sourcing-out-of-band-text-tracks:text-track-loading>loading</a>.</li><li><p>⌛ Let <var>URL</var> be the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-2>track URL</a> of the
   <code id=sourcing-out-of-band-text-tracks:the-track-element-16><a href=#the-track-element>track</a></code> element.</li><li><p>⌛ If the <code id=sourcing-out-of-band-text-tracks:the-track-element-17><a href=#the-track-element>track</a></code> element's parent is a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-14>media element</a> then
   let <var>corsAttributeState</var> be the state of the parent <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-15>media element</a>'s <code id=sourcing-out-of-band-text-tracks:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> content attribute. Otherwise, let
   <var>corsAttributeState</var> be <a href=infrastructure.html#attr-crossorigin-none id=sourcing-out-of-band-text-tracks:attr-crossorigin-none>No CORS</a>.</li><li><p>End the <a id=sourcing-out-of-band-text-tracks:synchronous-section-4 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
   <a id=sourcing-out-of-band-text-tracks:in-parallel-2 href=infrastructure.html#in-parallel>in parallel</a>.</li><li>

    <p>If <var>URL</var> is not the empty string, run these substeps:

    

    <ol><li><p>Let <var>request</var> be the result of <a href=infrastructure.html#create-a-potential-cors-request id=sourcing-out-of-band-text-tracks:create-a-potential-cors-request>creating a potential-CORS request</a> given
     <var>URL</var>, <var>corsAttributeState</var>, and with the <i>same-origin fallback flag</i>
     set.</li><li><p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=sourcing-out-of-band-text-tracks:concept-request-client data-x-internal=concept-request-client>client</a> to the
     <code id=sourcing-out-of-band-text-tracks:the-track-element-18><a href=#the-track-element>track</a></code> element's <a id=sourcing-out-of-band-text-tracks:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>'s <code id=sourcing-out-of-band-text-tracks:window><a href=browsers.html#window>Window</a></code> object's
     <a id=sourcing-out-of-band-text-tracks:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a> and <a href=https://fetch.spec.whatwg.org/#concept-request-type id=sourcing-out-of-band-text-tracks:concept-request-type data-x-internal=concept-request-type>type</a> to
     "<code>track</code>".</li><li><p><a href=https://fetch.spec.whatwg.org/#concept-fetch id=sourcing-out-of-band-text-tracks:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>.</li></ol>

    <p>The <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task>tasks</a> <a href=webappapis.html#queue-a-task id=sourcing-out-of-band-text-tracks:queue-a-task-4>queued</a> by the
    fetching algorithm on the <a id=sourcing-out-of-band-text-tracks:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> to process the data as it is being
    fetched must determine the  type of
    the resource. If the  type of the resource is not a supported text
    track format, the load will fail, as described below. Otherwise, the resource's data must be
    passed to the appropriate parser (e.g., the <a id=sourcing-out-of-band-text-tracks:webvtt-parser href=infrastructure.html#webvtt-parser>WebVTT parser</a>) as it is received, with the <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-2>text
    track list of cues</a> being used for that parser's output. <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

    <p class=note>The appropriate parser will incrementally update the <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-3>text track list of
    cues</a> during these <a id=sourcing-out-of-band-text-tracks:networking-task-source-2 href=webappapis.html#networking-task-source>networking task
    source</a> <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-2>tasks</a>, as each such task is
    run with whatever data has been received from the network).</p>

    <p class=critical>This specification does not currently say whether or how to check the MIME
    types of text tracks, or whether or how to perform file type sniffing using the actual file
    data. Implementors differ in their intentions on this matter and it is therefore unclear what
    the right solution is. In the absence of any requirement here, the HTTP specification's strict
    requirement to follow the Content-Type header prevails ("Content-Type specifies the media type
    of the underlying data." ... "If and only if the media type is not given by a Content-Type
    field, the recipient MAY attempt to guess the media type via inspection of its content
    and/or the name extension(s) of the URI used to identify the resource.").</p>

    <p>If fetching fails for any reason (network error, the server returns an error code, CORS
    fails, etc), or if <var>URL</var> is the empty string, then <a id=sourcing-out-of-band-text-tracks:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to first
    change the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-3>text track readiness state</a> to <a href=#text-track-failed-to-load id=sourcing-out-of-band-text-tracks:text-track-failed-to-load>failed to load</a> and then <a id=sourcing-out-of-band-text-tracks:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-error><a href=#event-track-error>error</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-19><a href=#the-track-element>track</a></code> element. This <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-3>task</a> must use the <a id=sourcing-out-of-band-text-tracks:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>.  </p>

    <p>If fetching does not fail, but the  type of the resource is not a supported
    text track format, or the file was not successfully processed (e.g., the format in question is
    an XML format and the file contained a well-formedness error that the XML specification requires
    be detected and reported to the application), then the <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-4>task</a>
    that is <a href=webappapis.html#queue-a-task id=sourcing-out-of-band-text-tracks:queue-a-task-6>queued</a> by the <a id=sourcing-out-of-band-text-tracks:networking-task-source-3 href=webappapis.html#networking-task-source>networking task source</a> in
    which the aforementioned problem is found must change the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-4>text track readiness
    state</a> to <a href=#text-track-failed-to-load id=sourcing-out-of-band-text-tracks:text-track-failed-to-load-2>failed to load</a> and <a id=sourcing-out-of-band-text-tracks:fire-a-simple-event-2 href=webappapis.html#fire-a-simple-event>fire a
    simple event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-error-2><a href=#event-track-error>error</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-20><a href=#the-track-element>track</a></code>
    element.</p>

    <p>If fetching does not fail, and the file was successfully processed, then the final <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-5>task</a> that is <a href=webappapis.html#queue-a-task id=sourcing-out-of-band-text-tracks:queue-a-task-7>queued</a> by the
    <a id=sourcing-out-of-band-text-tracks:networking-task-source-4 href=webappapis.html#networking-task-source>networking task source</a>, after it has finished parsing the data, must change the
    <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-5>text track readiness state</a> to <a href=#text-track-loaded id=sourcing-out-of-band-text-tracks:text-track-loaded>loaded</a>, and
    <a id=sourcing-out-of-band-text-tracks:fire-a-simple-event-3 href=webappapis.html#fire-a-simple-event>fire a simple event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-load><a href=#event-track-load>load</a></code> at the
    <code id=sourcing-out-of-band-text-tracks:the-track-element-21><a href=#the-track-element>track</a></code> element.</p>

    <p>If, while fetching is ongoing, either:</p>

    <ul><li>the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-3>track URL</a> changes so that it is no longer equal to <var>URL</var>, while the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-10>text track mode</a> is set to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-3>hidden</a> or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-5>showing</a>; or</li><li>the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-11>text track mode</a> changes to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-4>hidden</a>
     or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-6>showing</a>, while the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-4>track URL</a> is not
     equal to <var>URL</var></li></ul>

    <p>...then the user agent must abort <a href=https://fetch.spec.whatwg.org/#concept-fetch id=sourcing-out-of-band-text-tracks:concept-fetch-2 data-x-internal=concept-fetch>fetching</a>, discarding
    any pending <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-6>tasks</a> generated by that algorithm (and
    in particular, not adding any cues to the <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-4>text track list of cues</a> after the moment
    the URL changed), and then <a id=sourcing-out-of-band-text-tracks:queue-a-task-8 href=webappapis.html#queue-a-task>queue a task</a> that first changes the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-6>text track
    readiness state</a> to <a href=#text-track-failed-to-load id=sourcing-out-of-band-text-tracks:text-track-failed-to-load-3>failed to load</a> and
    then <a href=webappapis.html#fire-a-simple-event id=sourcing-out-of-band-text-tracks:fire-a-simple-event-4>fires a simple event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-error-3><a href=#event-track-error>error</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-22><a href=#the-track-element>track</a></code> element. This <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-7>task</a> must use the <a id=sourcing-out-of-band-text-tracks:dom-manipulation-task-source-2 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>.  </p>

   </li><li><p>Wait until the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-7>text track readiness state</a> is no longer set to <a href=#text-track-loading id=sourcing-out-of-band-text-tracks:text-track-loading-2>loading</a>.</li><li><p>Wait until the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-5>track URL</a> is no longer equal to <var>URL</var>, at
   the same time as the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-12>text track mode</a> is set to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-5>hidden</a> or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-7>showing</a>.</li><li><p>Jump to the step labeled <i>top</i>.</li></ol>

  <p>Whenever a <code id=sourcing-out-of-band-text-tracks:the-track-element-23><a href=#the-track-element>track</a></code> element has its <code id=sourcing-out-of-band-text-tracks:attr-track-src><a href=#attr-track-src>src</a></code> attribute
  set, changed, or removed, the user agent must <a id=sourcing-out-of-band-text-tracks:immediately href=infrastructure.html#immediately>immediately</a> empty the element's <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-19>text
  track</a>'s <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-5>text track list of cues</a>. (This also causes the algorithm above to stop
  adding cues from the resource being obtained using the previously given URL, if any.)</p>

  


  

  <h6 id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues>4.8.13.12.4 <dfn>Guidelines for exposing cues</dfn> in various formats as <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue>text track cues</a></h6>

  <p>How a specific format's text track cues are to be interpreted for the purposes of processing by
  an HTML user agent is defined by that format. In the absence of such a specification, this section
  provides some constraints within which implementations can attempt to consistently expose such
  formats.</p>

  <p>To support the <a href=#text-track id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track>text track</a> model of HTML, each unit of timed data is converted to a
  <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-2>text track cue</a>. Where the mapping of the format's features to the aspects of a
  <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-3>text track cue</a> as defined in this specification are not defined, implementations must
  ensure that the mapping is consistent with the definitions of the aspects of a <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-4>text track
  cue</a> as defined above, as well as with the following constraints:</p>

  <dl><dt>The <a href=#text-track-cue-identifier id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-identifier>text track cue identifier</a>
   <dd>
    <p>Should be set to the empty string if the format has no obvious analogue to a per-cue
    identifier.</p>
   <dt>The <a href=#text-track-cue-pause-on-exit-flag id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-pause-on-exit-flag>text track cue pause-on-exit flag</a>
   <dd>
    <p>Should be set to false.</p>
   </dl>

  


  <h6 id=text-track-api>4.8.13.12.5 テキストトラックAPI</h6>

  <pre class=idl>interface <dfn id=texttracklist>TextTrackList</dfn> : <a id=text-track-api:eventtarget href=infrastructure.html#eventtarget>EventTarget</a> {
  readonly attribute unsigned long <a href=#dom-texttracklist-length id=text-track-api:dom-texttracklist-length>length</a>;
  getter <a href=#texttrack id=text-track-api:texttrack>TextTrack</a> (unsigned long index);
  <a href=#texttrack id=text-track-api:texttrack-2>TextTrack</a>? <a href=#dom-texttracklist-gettrackbyid id=text-track-api:dom-texttracklist-gettrackbyid>getTrackById</a>(DOMString id);

  attribute <a id=text-track-api:eventhandler href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttracklist-onchange id=text-track-api:handler-texttracklist-onchange>onchange</a>;
  attribute <a id=text-track-api:eventhandler-2 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttracklist-onaddtrack id=text-track-api:handler-texttracklist-onaddtrack>onaddtrack</a>;
  attribute <a id=text-track-api:eventhandler-3 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttracklist-onremovetrack id=text-track-api:handler-texttracklist-onremovetrack>onremovetrack</a>;
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=text-track-api:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code> . <code>length</code><dd>
    <p><a href=#media-element id=text-track-api:media-element>メディア要素</a>（たとえば<code id=text-track-api:the-track-element><a href=#the-track-element>track</a></code>要素から）に関連付けられた<a href=#text-track id=text-track-api:text-track>テキストトラック</a>の数を返す。これは、<a href=#media-element id=text-track-api:media-element-2>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks>テキストトラックのリスト</a>で<a href=#text-track id=text-track-api:text-track-2>テキストトラック</a>の数である。</p>
   <dt><var>media</var> . <code id=text-track-api:dom-media-texttracks-2><a href=#dom-media-texttracks>textTracks[</a></code> <var>n</var> <code>]</code><dd>
    <p><a href=#media-element id=text-track-api:media-element-3>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-2>テキストトラックのリスト</a>で<var>n</var>番目の<a href=#text-track id=text-track-api:text-track-3>テキストトラック</a>を表す<code id=text-track-api:texttrack-3><a href=#texttrack>TextTrack</a></code>オブジェクトを返す。</p>
   <dt><var>textTrack</var> = <var>media</var> . <code id=text-track-api:dom-media-texttracks-3><a href=#dom-media-texttracks>textTracks</a></code> . <code id=text-track-api:dom-texttracklist-gettrackbyid-2><a href=#dom-texttracklist-gettrackbyid>getTrackById</a></code>( <var>id</var> )<dd>

    <p>与えられた識別子とともに<code id=text-track-api:texttrack-4><a href=#texttrack>TextTrack</a></code>オブジェクトを返す、または一切トラックがその識別子を持たない場合nullを返す。</p>

   </dl>

  

  <p>A <code id=text-track-api:texttracklist><a href=#texttracklist>TextTrackList</a></code> object represents a dynamically updating list of <a href=#text-track id=text-track-api:text-track-4>text tracks</a> in a given order.</p>

  <p>The <dfn id=dom-media-texttracks><code>textTracks</code></dfn> attribute of <a href=#media-element id=text-track-api:media-element-4>media elements</a> must return a <code id=text-track-api:texttracklist-2><a href=#texttracklist>TextTrackList</a></code> object
  representing the <code id=text-track-api:texttrack-5><a href=#texttrack>TextTrack</a></code> objects of the <a href=#text-track id=text-track-api:text-track-5>text tracks</a>
  in the <a href=#media-element id=text-track-api:media-element-5>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-3>list of text tracks</a>, in the same order as in the
  <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-4>list of text tracks</a>.</p>

  <p>The <dfn id=dom-texttracklist-length><code>length</code></dfn> attribute of a
  <code id=text-track-api:texttracklist-3><a href=#texttracklist>TextTrackList</a></code> object must return the number of <a href=#text-track id=text-track-api:text-track-6>text
  tracks</a> in the list represented by the <code id=text-track-api:texttracklist-4><a href=#texttracklist>TextTrackList</a></code> object.</p>

  <p>The <a id=text-track-api:supported-property-indices href=infrastructure.html#supported-property-indices>supported property indices</a> of a <code id=text-track-api:texttracklist-5><a href=#texttracklist>TextTrackList</a></code> object at any
  instant are the numbers from zero to the number of <a href=#text-track id=text-track-api:text-track-7>text tracks</a> in
  the list represented by the <code id=text-track-api:texttracklist-6><a href=#texttracklist>TextTrackList</a></code> object minus one, if any. If there are no
  <a href=#text-track id=text-track-api:text-track-8>text tracks</a> in the list, there are no <a id=text-track-api:supported-property-indices-2 href=infrastructure.html#supported-property-indices>supported property
  indices</a>.</p>

  <p>To <a id=text-track-api:determine-the-value-of-an-indexed-property href=infrastructure.html#determine-the-value-of-an-indexed-property>determine the value of an indexed property</a> of a <code id=text-track-api:texttracklist-7><a href=#texttracklist>TextTrackList</a></code>
  object for a given index <var>index</var>, the user agent must return the <var>index</var>th <a href=#text-track id=text-track-api:text-track-9>text track</a> in the list represented by the
  <code id=text-track-api:texttracklist-8><a href=#texttracklist>TextTrackList</a></code> object.</p>

  <p>The <dfn id=dom-texttracklist-gettrackbyid><code>getTrackById(<var>id</var>)</code></dfn> method must return the first <code id=text-track-api:texttrack-6><a href=#texttrack>TextTrack</a></code> in the
  <code id=text-track-api:texttracklist-9><a href=#texttracklist>TextTrackList</a></code> object whose <code id=text-track-api:dom-texttrack-id><a href=#dom-texttrack-id>id</a></code> IDL attribute
  would return a value equal to the value of the <var>id</var> argument. When no tracks
  match the given argument, the method must return null.</p>

  

  <hr>

  <pre class=idl>enum <dfn id=texttrackmode>TextTrackMode</dfn> { "<a href=#dom-texttrack-disabled id=text-track-api:dom-texttrack-disabled>disabled</a>",  "<a href=#dom-texttrack-hidden id=text-track-api:dom-texttrack-hidden>hidden</a>",  "<a href=#dom-texttrack-showing id=text-track-api:dom-texttrack-showing>showing</a>" };
enum <dfn id=texttrackkind>TextTrackKind</dfn> { "<a href=#dom-texttrack-kind-subtitles id=text-track-api:dom-texttrack-kind-subtitles>subtitles</a>",  "<a href=#dom-texttrack-kind-captions id=text-track-api:dom-texttrack-kind-captions>captions</a>",  "<a href=#dom-texttrack-kind-descriptions id=text-track-api:dom-texttrack-kind-descriptions>descriptions</a>",  "<a href=#dom-texttrack-kind-chapters id=text-track-api:dom-texttrack-kind-chapters>chapters</a>",  "<a href=#dom-texttrack-kind-metadata id=text-track-api:dom-texttrack-kind-metadata>metadata</a>" };
interface <dfn id=texttrack>TextTrack</dfn> : <a id=text-track-api:eventtarget-2 href=infrastructure.html#eventtarget>EventTarget</a> {
  readonly attribute <a href=#texttrackkind id=text-track-api:texttrackkind>TextTrackKind</a> <a href=#dom-texttrack-kind id=text-track-api:dom-texttrack-kind>kind</a>;
  readonly attribute DOMString <a href=#dom-texttrack-label id=text-track-api:dom-texttrack-label>label</a>;
  readonly attribute DOMString <a href=#dom-texttrack-language id=text-track-api:dom-texttrack-language>language</a>;

  readonly attribute DOMString <a href=#dom-texttrack-id id=text-track-api:dom-texttrack-id-2>id</a>;
  readonly attribute DOMString <a href=#dom-texttrack-inbandmetadatatrackdispatchtype id=text-track-api:dom-texttrack-inbandmetadatatrackdispatchtype>inBandMetadataTrackDispatchType</a>;

  attribute <a href=#texttrackmode id=text-track-api:texttrackmode>TextTrackMode</a> <a href=#dom-texttrack-mode id=text-track-api:dom-texttrack-mode>mode</a>;

  readonly attribute <a href=#texttrackcuelist id=text-track-api:texttrackcuelist>TextTrackCueList</a>? <a href=#dom-texttrack-cues id=text-track-api:dom-texttrack-cues>cues</a>;
  readonly attribute <a href=#texttrackcuelist id=text-track-api:texttrackcuelist-2>TextTrackCueList</a>? <a href=#dom-texttrack-activecues id=text-track-api:dom-texttrack-activecues>activeCues</a>;

  void <a href=#dom-texttrack-addcue id=text-track-api:dom-texttrack-addcue>addCue</a>(<a href=#texttrackcue id=text-track-api:texttrackcue>TextTrackCue</a> cue);
  void <a href=#dom-texttrack-removecue id=text-track-api:dom-texttrack-removecue>removeCue</a>(<a href=#texttrackcue id=text-track-api:texttrackcue-2>TextTrackCue</a> cue);

  attribute <a id=text-track-api:eventhandler-4 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttrack-oncuechange id=text-track-api:handler-texttrack-oncuechange>oncuechange</a>;
};</pre>

  <dl class=domintro><dt><var>textTrack</var> = <var>media</var> . <code id=text-track-api:dom-media-addtexttrack><a href=#dom-media-addtexttrack>addTextTrack</a></code>( <var>kind</var> [, <var>label</var> [, <var>language</var> ] ] )<dd>

    <p><a href=#media-element id=text-track-api:media-element-6>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-5>テキストトラックのリスト</a>に追加された新しい<code id=text-track-api:texttrack-7><a href=#texttrack>TextTrack</a></code>オブジェクトを作成して返す。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-kind-2><a href=#dom-texttrack-kind>kind</a></code><dd>

    <p><a href=#text-track-kind id=text-track-api:text-track-kind>テキストトラックの種類</a>の文字列を返す。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-label-2><a href=#dom-texttrack-label>label</a></code><dd>

    <p>存在する、または空の文字列（オブジェクトがユーザーに公開される場合、オブジェクトの他の属性からおそらく生成する必要があるカスタムラベルを示す）がある場合、<a href=#text-track-label id=text-track-api:text-track-label>テキストトラックのラベル</a>を返す。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-language-2><a href=#dom-texttrack-language>language</a></code><dd>
    <p><a href=#text-track-language id=text-track-api:text-track-language>テキストトラックの言語</a>の文字列を返す。</p>
   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-id-3><a href=#dom-texttrack-id>id</a></code><dd>

    <p>指定されたトラックのIDを返す。</p>

    <p>帯域内トラックに対して、フォーマットが<cite>Media Fragments URI</cite>構文をサポートし、<code id=text-track-api:dom-texttracklist-gettrackbyid-3><a href=#dom-texttracklist-gettrackbyid>getTrackById()</a></code>メソッドとともに使用できる場合、これは、フラグメント識別子で使用できるIDである。<a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>

    <p><code id=text-track-api:the-track-element-2><a href=#the-track-element>track</a></code>要素に対応する<code id=text-track-api:texttrack-8><a href=#texttrack>TextTrack</a></code>オブジェクトに対して、これは<code id=text-track-api:the-track-element-3><a href=#the-track-element>track</a></code>要素のIDである。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-inbandmetadatatrackdispatchtype-2><a href=#dom-texttrack-inbandmetadatatrackdispatchtype>inBandMetadataTrackDispatchType</a></code><dd>

    <p><a href=#text-track-in-band-metadata-track-dispatch-type id=text-track-api:text-track-in-band-metadata-track-dispatch-type>テキストトラック帯域内のメタデータトラックディスパッチタイプ</a>の文字列を返す。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-mode-2><a href=#dom-texttrack-mode>mode</a></code> [ = <var>value</var> ]<dd>

    <p>以下のリストから文字列によって表される、<a href=#text-track-mode id=text-track-api:text-track-mode>テキストトラックモード</a>を返す：</p>

    <dl><dt>"<code id=text-track-api:dom-texttrack-disabled-2><a href=#dom-texttrack-disabled>disabled</a></code>"<dd>
      <p><a href=#text-track-disabled id=text-track-api:text-track-disabled>テキストトラック無効</a>モード。</p>
     <dt>"<code id=text-track-api:dom-texttrack-hidden-2><a href=#dom-texttrack-hidden>hidden</a></code>"<dd>
      <p><a href=#text-track-hidden id=text-track-api:text-track-hidden>テキストトラック非表示</a>モード。</p>
     <dt>"<code id=text-track-api:dom-texttrack-showing-2><a href=#dom-texttrack-showing>showing</a></code>"<dd>
      <p><a href=#text-track-showing id=text-track-api:text-track-showing>テキストトラック表示</a>モード。</p>
     </dl>

    <p>モードを変更する設定が可能である。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-cues-2><a href=#dom-texttrack-cues>cues</a></code><dd>
    <p><code id=text-track-api:texttrackcuelist-3><a href=#texttrackcuelist>TextTrackCueList</a></code>オブジェクトとして、<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues>キューのテキストトラックリスト</a>を返す。</p>
   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-activecues-2><a href=#dom-texttrack-activecues>activeCues</a></code><dd>

    <p><code id=text-track-api:texttrackcuelist-4><a href=#texttrackcuelist>TextTrackCueList</a></code>オブジェクトとして、現在アクティブである<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-2>キューのテキストトラックリスト</a>から、<a href=#text-track-cue id=text-track-api:text-track-cue>テキストトラックキュー</a>を返す（つまり、<a href=#current-playback-position id=text-track-api:current-playback-position>現在の再生位置</a>の前に開始し、その後で終了する）。</p>

   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-addcue-2><a href=#dom-texttrack-addcue>addCue</a></code>( <var>cue</var> )<dd>
    <p><var>textTrack</var>の<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-3>キューのテキストトラックリスト</a>に指定されたキューを追加する。</p>
   <dt><var>textTrack</var> . <code id=text-track-api:dom-texttrack-removecue-2><a href=#dom-texttrack-removecue>removeCue</a></code>( <var>cue</var> )<dd>
    <p><var>textTrack</var>の<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-4>キューのテキストトラックリスト</a>から指定されたキューを削除する。</p>
   </dl>

  

  <p>The <dfn id=dom-media-addtexttrack><code>addTextTrack(<var>kind</var>, <var>label</var>, <var>language</var>)</code></dfn> method of <a href=#media-element id=text-track-api:media-element-7>media elements</a>, when invoked, must run the following steps:</p>

  <ol><li>

    <p>Create a new <code id=text-track-api:texttrack-9><a href=#texttrack>TextTrack</a></code> object.</p>

   </li><li>

    <p>Create a new <a href=#text-track id=text-track-api:text-track-10>text track</a> corresponding to the new object, and set its <a href=#text-track-kind id=text-track-api:text-track-kind-2>text
    track kind</a> to <var>kind</var>, its <a href=#text-track-label id=text-track-api:text-track-label-2>text track label</a> to <var>label</var>, its <a href=#text-track-language id=text-track-api:text-track-language-2>text track language</a> to <var>language</var>, its
    <a href=#text-track-readiness-state id=text-track-api:text-track-readiness-state>text track readiness state</a> to the <a href=#text-track-loaded id=text-track-api:text-track-loaded>text track loaded</a> state, its
    <a href=#text-track-mode id=text-track-api:text-track-mode-2>text track mode</a> to the <a href=#text-track-hidden id=text-track-api:text-track-hidden-2>text track hidden</a> mode, and its <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-5>text
    track list of cues</a> to an empty list.</p>

    <p>Initially, the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-6>text track list of cues</a> is not associated with any <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering>rules
    for updating the text track rendering</a>. When a <a href=#text-track-cue id=text-track-api:text-track-cue-2>text track cue</a> is added to it,
    the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-7>text track list of cues</a> has its rules permanently set accordingly.</p>

   </li><li>

    <p>Add the new <a href=#text-track id=text-track-api:text-track-11>text track</a> to the <a href=#media-element id=text-track-api:media-element-8>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-6>list of text
    tracks</a>.</p>

   </li><li>

    <p><a id=text-track-api:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a href=infrastructure.html#concept-event-fire id=text-track-api:concept-event-fire>fire</a> a <a href=infrastructure.html#concept-events-trusted id=text-track-api:concept-events-trusted>trusted</a> event with the name <code id=text-track-api:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>, that does not bubble and is not cancelable, and
    that uses the <code id=text-track-api:trackevent><a href=#trackevent>TrackEvent</a></code> interface, with the <code id=text-track-api:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code> attribute initialised to the new <a href=#text-track id=text-track-api:text-track-12>text
    track</a>'s <code id=text-track-api:texttrack-10><a href=#texttrack>TextTrack</a></code> object, at the <a href=#media-element id=text-track-api:media-element-9>media element</a>'s <code id=text-track-api:dom-media-texttracks-4><a href=#dom-media-texttracks>textTracks</a></code> attribute's <code id=text-track-api:texttracklist-10><a href=#texttracklist>TextTrackList</a></code>
    object.</p>

   </li><li>

    <p>Return the new <code id=text-track-api:texttrack-11><a href=#texttrack>TextTrack</a></code> object.</p>

   </li></ol>

  <hr>

  <p>The <dfn id=dom-texttrack-kind><code>kind</code></dfn> attribute must return the
  <a href=#text-track-kind id=text-track-api:text-track-kind-3>text track kind</a> of the <a href=#text-track id=text-track-api:text-track-13>text track</a> that the <code id=text-track-api:texttrack-12><a href=#texttrack>TextTrack</a></code> object
  represents.</p>

  <p>The <dfn id=dom-texttrack-label><code>label</code></dfn> attribute must return the
  <a href=#text-track-label id=text-track-api:text-track-label-3>text track label</a> of the <a href=#text-track id=text-track-api:text-track-14>text track</a> that the <code id=text-track-api:texttrack-13><a href=#texttrack>TextTrack</a></code>
  object represents.</p>

  <p>The <dfn id=dom-texttrack-language><code>language</code></dfn> attribute must return the
  <a href=#text-track-language id=text-track-api:text-track-language-3>text track language</a> of the <a href=#text-track id=text-track-api:text-track-15>text track</a> that the <code id=text-track-api:texttrack-14><a href=#texttrack>TextTrack</a></code>
  object represents.</p>

  <p>The <dfn id=dom-texttrack-id><code>id</code></dfn> attribute returns the track's
  identifier, if it has one, or the empty string otherwise. For tracks that correspond to
  <code id=text-track-api:the-track-element-4><a href=#the-track-element>track</a></code> elements, the track's identifier is the value of the element's <code id=text-track-api:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> attribute, if any. For in-band tracks, the track's identifier is
  specified by the <a href=#media-resource id=text-track-api:media-resource>media resource</a>. If the <a href=#media-resource id=text-track-api:media-resource-2>media resource</a> is in a format
  that supports the <cite>Media Fragments URI</cite> fragment identifier syntax, the identifier
  returned for a particular track must be the same identifier that would enable the track if used as
  the name of a track in the track dimension of such a fragment identifier. <a href=references.html#refsMEDIAFRAG>[MEDIAFRAG]</a></p>

  <p>The <dfn id=dom-texttrack-inbandmetadatatrackdispatchtype><code>inBandMetadataTrackDispatchType</code></dfn>
  attribute must return the <a href=#text-track-in-band-metadata-track-dispatch-type id=text-track-api:text-track-in-band-metadata-track-dispatch-type-2>text track in-band metadata track dispatch type</a> of the
  <a href=#text-track id=text-track-api:text-track-16>text track</a> that the <code id=text-track-api:texttrack-15><a href=#texttrack>TextTrack</a></code> object represents.</p>

  <p>The <dfn id=dom-texttrack-mode><code>mode</code></dfn> attribute, on getting, must return
  the string corresponding to the <a href=#text-track-mode id=text-track-api:text-track-mode-3>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-17>text track</a> that
  the <code id=text-track-api:texttrack-16><a href=#texttrack>TextTrack</a></code> object represents, as defined by the following list:</p>

  <dl><dt>"<dfn id=dom-texttrack-disabled><code>disabled</code></dfn>"<dd><a href=#text-track-disabled id=text-track-api:text-track-disabled-2>テキストトラック無効</a>モード。<dt>"<dfn id=dom-texttrack-hidden><code>hidden</code></dfn>"<dd><a href=#text-track-hidden id=text-track-api:text-track-hidden-3>テキストトラック非表示</a>モード。<dt>"<dfn id=dom-texttrack-showing><code>showing</code></dfn>"<dd><a href=#text-track-showing id=text-track-api:text-track-showing-2>テキストトラック表示</a>モード。</dl>

  <p>On setting, if the new value isn't equal to what the attribute would currently return, the new
  value must be processed as follows:</p>

  <dl class=switch><dt>If the new value is "<code id=text-track-api:dom-texttrack-disabled-3><a href=#dom-texttrack-disabled>disabled</a></code>"<dd>

    <p>Set the <a href=#text-track-mode id=text-track-api:text-track-mode-4>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-18>text track</a> that the
    <code id=text-track-api:texttrack-17><a href=#texttrack>TextTrack</a></code> object represents to the <a href=#text-track-disabled id=text-track-api:text-track-disabled-3>text track disabled</a> mode.</p>

   <dt>If the new value is "<code id=text-track-api:dom-texttrack-hidden-3><a href=#dom-texttrack-hidden>hidden</a></code>"<dd>

    <p>Set the <a href=#text-track-mode id=text-track-api:text-track-mode-5>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-19>text track</a> that the
    <code id=text-track-api:texttrack-18><a href=#texttrack>TextTrack</a></code> object represents to the <a href=#text-track-hidden id=text-track-api:text-track-hidden-4>text track hidden</a> mode.</p>

   <dt>If the new value is "<code id=text-track-api:dom-texttrack-showing-3><a href=#dom-texttrack-showing>showing</a></code>"<dd>

    <p>Set the <a href=#text-track-mode id=text-track-api:text-track-mode-6>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-20>text track</a> that the
    <code id=text-track-api:texttrack-19><a href=#texttrack>TextTrack</a></code> object represents to the <a href=#text-track-showing id=text-track-api:text-track-showing-3>text track showing</a> mode.</p>

   </dl>

  <p>If the <a href=#text-track-mode id=text-track-api:text-track-mode-7>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-21>text track</a> that the <code id=text-track-api:texttrack-20><a href=#texttrack>TextTrack</a></code> object represents is not the <a href=#text-track-disabled id=text-track-api:text-track-disabled-4>text track disabled</a> mode, then the <dfn id=dom-texttrack-cues><code>cues</code></dfn> attribute must return a <a id=text-track-api:live href=infrastructure.html#live>live</a> <code id=text-track-api:texttrackcuelist-5><a href=#texttrackcuelist>TextTrackCueList</a></code> object that represents the subset of the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-8>text track list of cues</a> of the <a href=#text-track id=text-track-api:text-track-22>text track</a> that the <code id=text-track-api:texttrack-21><a href=#texttrack>TextTrack</a></code> object represents whose <a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time>end times</a> occur at or after the <a href=#earliest-possible-position-when-the-script-started id=text-track-api:earliest-possible-position-when-the-script-started>earliest possible position when the script started</a>, in <a href=#text-track-cue-order id=text-track-api:text-track-cue-order>text track cue order</a>. そうでなければ、nullを返す。For each <code id=text-track-api:texttrack-22><a href=#texttrack>TextTrack</a></code> object, when an object is returned, the same <code id=text-track-api:texttrackcuelist-6><a href=#texttrackcuelist>TextTrackCueList</a></code> object must be returned each time.</p>

  <p>The <dfn id=earliest-possible-position-when-the-script-started>earliest possible position when the script started</dfn> is whatever the
  <a href=#earliest-possible-position id=text-track-api:earliest-possible-position>earliest possible position</a> was the last time the <a id=text-track-api:event-loop href=webappapis.html#event-loop>event loop</a> reached step
  1.</p>

  <p>If the <a href=#text-track-mode id=text-track-api:text-track-mode-8>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-23>text track</a> that the <code id=text-track-api:texttrack-23><a href=#texttrack>TextTrack</a></code> object represents is not the <a href=#text-track-disabled id=text-track-api:text-track-disabled-5>text track disabled</a> mode, then the <dfn id=dom-texttrack-activecues><code>activeCues</code></dfn> attribute must return a <a id=text-track-api:live-2 href=infrastructure.html#live>live</a> <code id=text-track-api:texttrackcuelist-7><a href=#texttrackcuelist>TextTrackCueList</a></code> object that represents the subset of the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-9>text track list of cues</a> of the <a href=#text-track id=text-track-api:text-track-24>text track</a> that the <code id=text-track-api:texttrack-24><a href=#texttrack>TextTrack</a></code> object represents whose <a href=#active-flag-was-set-when-the-script-started id=text-track-api:active-flag-was-set-when-the-script-started>active flag was set when the script started</a>, in <a href=#text-track-cue-order id=text-track-api:text-track-cue-order-2>text track cue order</a>. そうでなければ、nullを返す。For each <code id=text-track-api:texttrack-25><a href=#texttrack>TextTrack</a></code> object, when an object is returned, the same <code id=text-track-api:texttrackcuelist-8><a href=#texttrackcuelist>TextTrackCueList</a></code> object must be returned each time.</p>

  <p>A <a href=#text-track-cue id=text-track-api:text-track-cue-3>text track cue</a>'s <dfn id=active-flag-was-set-when-the-script-started>active flag was set when the script started</dfn> if its
  <a href=#text-track-cue-active-flag id=text-track-api:text-track-cue-active-flag>text track cue active flag</a> was set the last time the <a id=text-track-api:event-loop-2 href=webappapis.html#event-loop>event loop</a> reached
  <a href=webappapis.html#step1>step 1</a>.</p>

  <hr>

  <p>The <dfn id=dom-texttrack-addcue><code>addCue(<var>cue</var>)</code></dfn> method
  of <code id=text-track-api:texttrack-26><a href=#texttrack>TextTrack</a></code> objects, when invoked, must run the following steps:</p>

  <ol><li><p>If the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-10>text track list of cues</a> does not yet have any associated <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-2>rules
   for updating the text track rendering</a>, then associate the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-11>text track list of
   cues</a> with the <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-3>rules for updating the text track rendering</a> appropriate to <var>cue</var>.</p>

   </li><li><p>If <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-12>text track list of cues</a>' associated <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-4>rules for updating the text
   track rendering</a> are not the same <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-5>rules for updating the text track rendering</a>
   as appropriate for <var>cue</var>, then throw an <code id=text-track-api:invalidstateerror><a href=infrastructure.html#invalidstateerror>InvalidStateError</a></code>
   exception and abort these steps.</p>

   </li><li><p>If the given <var>cue</var> is in a <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-13>text track list of cues</a>, then
   remove <var>cue</var> from that <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-14>text track list of cues</a>.</li><li><p>Add <var>cue</var> to the method's <code id=text-track-api:texttrack-27><a href=#texttrack>TextTrack</a></code> object's <a href=#text-track id=text-track-api:text-track-25>text
   track</a>'s <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-15>text track list of cues</a>.</li></ol>

  <p>The <dfn id=dom-texttrack-removecue><code>removeCue(<var>cue</var>)</code></dfn>
  method of <code id=text-track-api:texttrack-28><a href=#texttrack>TextTrack</a></code> objects, when invoked, must run the following steps:</p>

  <ol><li><p>If the given <var>cue</var> is not currently listed in the method's
   <code id=text-track-api:texttrack-29><a href=#texttrack>TextTrack</a></code> object's <a href=#text-track id=text-track-api:text-track-26>text track</a>'s <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-16>text track list of cues</a>,
   then throw a <code id=text-track-api:notfounderror><a href=infrastructure.html#notfounderror>NotFoundError</a></code> exception and abort these steps.</li><li><p>Remove <var>cue</var> from the method's <code id=text-track-api:texttrack-30><a href=#texttrack>TextTrack</a></code> object's
   <a href=#text-track id=text-track-api:text-track-27>text track</a>'s <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-17>text track list of cues</a>.</li></ol>

  

  <div class=example>

   <p>この例において、<code id=text-track-api:the-audio-element><a href=#the-audio-element>audio</a></code>要素は、多数のサウンドエフェクトを含むサウンドファイルから特定のサウンドエフェクトを再生するために使用される。キューは、たとえブラウザが一部のスクリプトを実行してビジーであっても、オーディオがクリップの最後で正確に終了するよう、オーディオを一時停止するために使用される。ページがオーディオを一時停止するスクリプトに依存し、ブラウザは指定された正確な時間にスクリプトを実行することができなかった場合、次のクリップの出だしを聞いているかもしれない。</p>

   <pre>var sfx = new Audio('sfx.wav');
var sounds = sfx.addTextTrack('metadata');

// add sounds we care about
function addFX(start, end, name) {
  var cue = new VTTCue(start, end, '');
  cue.id = name;
  cue.pauseOnExit = true;
  sounds.addCue(cue);
}
addFX(12.783, 13.612, 'dog bark');
addFX(13.612, 15.091, 'kitten mew'))

function playSound(id) {
  sfx.currentTime = sounds.getCueById(id).startTime;
  sfx.play();
}

// play a bark as soon as we can
sfx.oncanplaythrough = function () {
  playSound('dog bark');
}
// meow when the user tries to leave
window.onbeforeunload = function () {
  playSound('kitten mew');
  return 'Are you sure you want to leave this awesome page?';
}</pre>

  </div>

  <hr>

  <pre class=idl>interface <dfn id=texttrackcuelist>TextTrackCueList</dfn> {
  readonly attribute unsigned long <a href=#dom-texttrackcuelist-length id=text-track-api:dom-texttrackcuelist-length>length</a>;
  getter <a href=#texttrackcue id=text-track-api:texttrackcue-3>TextTrackCue</a> (unsigned long index);
  <a href=#texttrackcue id=text-track-api:texttrackcue-4>TextTrackCue</a>? <a href=#dom-texttrackcuelist-getcuebyid id=text-track-api:dom-texttrackcuelist-getcuebyid>getCueById</a>(DOMString id);
};</pre>

  <dl class=domintro><dt><var>cuelist</var> . <code id=text-track-api:dom-texttrackcuelist-length-2><a href=#dom-texttrackcuelist-length>length</a></code><dd>
    <p>リスト内の<a href=#text-track-cue id=text-track-api:text-track-cue-4>キュー</a>の数を返す。</p>
   <dt><var>cuelist</var>[<var>index</var>]<dd>
    <p>リスト内のインデックス<var>index</var>を持つ<a href=#text-track-cue id=text-track-api:text-track-cue-5>テキストトラックキュー</a>を返す。キューは、<a href=#text-track-cue-order id=text-track-api:text-track-cue-order-3>テキストトラックキュー順</a>にソートされる。</p>
   <dt><var>cuelist</var> . <code id=text-track-api:dom-texttrackcuelist-getcuebyid-2><a href=#dom-texttrackcuelist-getcuebyid>getCueById</a></code>( <var>id</var> )<dd>
    <p><a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier>テキストトラックキュー識別子</a><var>id</var>を持つ（<a href=#text-track-cue-order id=text-track-api:text-track-cue-order-4>テキストトラックキュー順</a>で）最初の<a href=#text-track-cue id=text-track-api:text-track-cue-6>テキストトラックキュー</a>を返す。</p>
    <p>いずれのキューも指定された識別子を持たない場合、または引数が空の文字列である場合、nullを返す。</p>
   </dl>

  

  <p>A <code id=text-track-api:texttrackcuelist-9><a href=#texttrackcuelist>TextTrackCueList</a></code> object represents a dynamically updating list of <a href=#text-track-cue id=text-track-api:text-track-cue-7>text track cues</a> in a given order.</p>

  <p>The <dfn id=dom-texttrackcuelist-length><code>length</code></dfn> attribute must return
  the number of <a href=#text-track-cue id=text-track-api:text-track-cue-8>cues</a> in the list represented by the
  <code id=text-track-api:texttrackcuelist-10><a href=#texttrackcuelist>TextTrackCueList</a></code> object.</p>

  <p>The <a id=text-track-api:supported-property-indices-3 href=infrastructure.html#supported-property-indices>supported property indices</a> of a <code id=text-track-api:texttrackcuelist-11><a href=#texttrackcuelist>TextTrackCueList</a></code> object at any
  instant are the numbers from zero to the number of <a href=#text-track-cue id=text-track-api:text-track-cue-9>cues</a> in the
  list represented by the <code id=text-track-api:texttrackcuelist-12><a href=#texttrackcuelist>TextTrackCueList</a></code> object minus one, if any. If there are no
  <a href=#text-track-cue id=text-track-api:text-track-cue-10>cues</a> in the list, there are no <a id=text-track-api:supported-property-indices-4 href=infrastructure.html#supported-property-indices>supported property
  indices</a>.</p>

  <p>To <a id=text-track-api:determine-the-value-of-an-indexed-property-2 href=infrastructure.html#determine-the-value-of-an-indexed-property>determine the value of an indexed property</a> for a given index <var>index</var>, the user agent must return the <var>index</var>th <a href=#text-track-cue id=text-track-api:text-track-cue-11>text track
  cue</a> in the list represented by the <code id=text-track-api:texttrackcuelist-13><a href=#texttrackcuelist>TextTrackCueList</a></code> object.</p>

  <p>The <dfn id=dom-texttrackcuelist-getcuebyid><code>getCueById(<var>id</var>)</code></dfn> method, when called with an argument other than the empty string,
  must return the first <a href=#text-track-cue id=text-track-api:text-track-cue-12>text track cue</a> in the list represented by the
  <code id=text-track-api:texttrackcuelist-14><a href=#texttrackcuelist>TextTrackCueList</a></code> object whose <a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-2>text track cue identifier</a> is <var>id</var>, if any, or null otherwise. If the argument is the empty string, then the method
  must return null.</p>

  

  <hr>

  <pre class=idl>interface <dfn id=texttrackcue>TextTrackCue</dfn> : <a id=text-track-api:eventtarget-3 href=infrastructure.html#eventtarget>EventTarget</a> {
  readonly attribute <a href=#texttrack id=text-track-api:texttrack-31>TextTrack</a>? <a href=#dom-texttrackcue-track id=text-track-api:dom-texttrackcue-track>track</a>;

  attribute DOMString <a href=#dom-texttrackcue-id id=text-track-api:dom-texttrackcue-id>id</a>;
  attribute double <a href=#dom-texttrackcue-starttime id=text-track-api:dom-texttrackcue-starttime>startTime</a>;
  attribute double <a href=#dom-texttrackcue-endtime id=text-track-api:dom-texttrackcue-endtime>endTime</a>;
  attribute boolean <a href=#dom-texttrackcue-pauseonexit id=text-track-api:dom-texttrackcue-pauseonexit>pauseOnExit</a>;

  attribute <a id=text-track-api:eventhandler-5 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttrackcue-onenter id=text-track-api:handler-texttrackcue-onenter>onenter</a>;
  attribute <a id=text-track-api:eventhandler-6 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttrackcue-onexit id=text-track-api:handler-texttrackcue-onexit>onexit</a>;
};</pre>

  <dl class=domintro><dt><var>cue</var> . <a href=#dom-texttrackcue-track id=text-track-api:dom-texttrackcue-track-2>track</a><dd>
    <p>存在する場合、この<a href=#text-track-cue id=text-track-api:text-track-cue-13>テキストトラックキュー</a>が属する<code id=text-track-api:texttrack-32><a href=#texttrack>TextTrack</a></code>オブジェクトを返し、そうでなければnullを返す。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-id id=text-track-api:dom-texttrackcue-id-2>id</a> [ = <var>value</var> ]<dd>
    <p><a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-3>テキストトラックキュー識別子</a>を返す。</p>
    <p>設定可能である。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-starttime id=text-track-api:dom-texttrackcue-starttime-2>startTime</a> [ = <var>value</var> ]<dd>
    <p>秒単位で、<a href=#text-track-cue-start-time id=text-track-api:text-track-cue-start-time>テキストトラックキューの開始時刻</a>を返す。</p>
    <p>設定可能である。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-endtime id=text-track-api:dom-texttrackcue-endtime-2>endTime</a> [ = <var>value</var> ]<dd>
    <p>秒単位で、<a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time-2>テキストトラックキューの終了時刻</a>を返す。</p>
    <p>設定可能である。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-pauseonexit id=text-track-api:dom-texttrackcue-pauseonexit-2>pauseOnExit</a> [ = <var>value</var> ]<dd>
    <p><a href=#text-track-cue-pause-on-exit-flag id=text-track-api:text-track-cue-pause-on-exit-flag>テキスト·トラック·キューpause-on-exitフラグ</a>が設定される場合trueを返し、そうでなければfalseを返す。</p>
    <p>設定可能である。</p>
   </dl>

  

  <p>The <dfn id=dom-texttrackcue-track><code>track</code></dfn> attribute, on getting, must
  return the <code id=text-track-api:texttrack-33><a href=#texttrack>TextTrack</a></code> object of the <a href=#text-track id=text-track-api:text-track-28>text track</a> in whose <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-18>list of cues</a> the <a href=#text-track-cue id=text-track-api:text-track-cue-14>text track cue</a> that the
  <code id=text-track-api:texttrackcue-5><a href=#texttrackcue>TextTrackCue</a></code> object represents finds itself, if any; or null otherwise.</p>

  <p>The <dfn id=dom-texttrackcue-id><code>id</code></dfn> attribute, on getting, must return
  the <a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-4>text track cue identifier</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-15>text track cue</a> that the
  <code id=text-track-api:texttrackcue-6><a href=#texttrackcue>TextTrackCue</a></code> object represents. On setting, the <a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-5>text track cue
  identifier</a> must be set to the new value.</p>

  <p>The <dfn id=dom-texttrackcue-starttime><code>startTime</code></dfn> attribute, on
  getting, must return the <a href=#text-track-cue-start-time id=text-track-api:text-track-cue-start-time-2>text track cue start time</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-16>text track cue</a>
  that the <code id=text-track-api:texttrackcue-7><a href=#texttrackcue>TextTrackCue</a></code> object represents, in seconds. On setting, the <a href=#text-track-cue-start-time id=text-track-api:text-track-cue-start-time-3>text track
  cue start time</a> must be set to the new value, interpreted in seconds; then, if the
  <code id=text-track-api:texttrackcue-8><a href=#texttrackcue>TextTrackCue</a></code> object's <a href=#text-track-cue id=text-track-api:text-track-cue-17>text track cue</a> is in a <a href=#text-track id=text-track-api:text-track-29>text track</a>'s
  <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-19>list of cues</a>, and that <a href=#text-track id=text-track-api:text-track-30>text track</a> is in
  a <a href=#media-element id=text-track-api:media-element-10>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-7>list of text tracks</a>, and the <a href=#media-element id=text-track-api:media-element-11>media
  element</a>'s <a href=#show-poster-flag id=text-track-api:show-poster-flag>show poster flag</a> is not set, then run the <i id=text-track-api:time-marches-on><a href=#time-marches-on>time marches on</a></i> steps for that <a href=#media-element id=text-track-api:media-element-12>media element</a>.</p>

  <p>The <dfn id=dom-texttrackcue-endtime><code>endTime</code></dfn> attribute, on getting,
  must return the <a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time-3>text track cue end time</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-18>text track cue</a> that the
  <code id=text-track-api:texttrackcue-9><a href=#texttrackcue>TextTrackCue</a></code> object represents, in seconds. On setting, the <a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time-4>text track cue end
  time</a> must be set to the new value, interpreted in seconds; then, if the
  <code id=text-track-api:texttrackcue-10><a href=#texttrackcue>TextTrackCue</a></code> object's <a href=#text-track-cue id=text-track-api:text-track-cue-19>text track cue</a> is in a <a href=#text-track id=text-track-api:text-track-31>text track</a>'s
  <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-20>list of cues</a>, and that <a href=#text-track id=text-track-api:text-track-32>text track</a> is in
  a <a href=#media-element id=text-track-api:media-element-13>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-8>list of text tracks</a>, and the <a href=#media-element id=text-track-api:media-element-14>media
  element</a>'s <a href=#show-poster-flag id=text-track-api:show-poster-flag-2>show poster flag</a> is not set, then run the <i id=text-track-api:time-marches-on-2><a href=#time-marches-on>time marches on</a></i> steps for that <a href=#media-element id=text-track-api:media-element-15>media element</a>.</p>

  <p>The <dfn id=dom-texttrackcue-pauseonexit><code>pauseOnExit</code></dfn> attribute, on
  getting, must return true if the <a href=#text-track-cue-pause-on-exit-flag id=text-track-api:text-track-cue-pause-on-exit-flag-2>text track cue pause-on-exit flag</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-20>text
  track cue</a> that the <code id=text-track-api:texttrackcue-11><a href=#texttrackcue>TextTrackCue</a></code> object represents is set; or false otherwise.
  On setting, the <a href=#text-track-cue-pause-on-exit-flag id=text-track-api:text-track-cue-pause-on-exit-flag-3>text track cue pause-on-exit flag</a> must be set if the new value is
  true, and must be unset otherwise.</p>

  


  <h6 id=text-tracks-describing-chapters>4.8.13.12.6 章を記述するテキストトラック</h6>

  <p>章は、指定されたタイトルをもつ<a href=#media-resource id=text-tracks-describing-chapters:media-resource>メディアリソース</a>の区分である。文書アウトラインのセクションでサブセクションを持つことができるのと同じように、章は入れ子にできる。</p>

  <p>Each <a href=#text-track-cue id=text-tracks-describing-chapters:text-track-cue>text track cue</a> in a <a href=#text-track id=text-tracks-describing-chapters:text-track>text track</a> being used for describing
  chapters has three key features: the <a href=#text-track-cue-start-time id=text-tracks-describing-chapters:text-track-cue-start-time>text track cue start time</a>, giving the start time
  of the chapter, the <a href=#text-track-cue-end-time id=text-tracks-describing-chapters:text-track-cue-end-time>text track cue end time</a>, giving the end time of the chapter, and
  the <a href=#text-track-rules-for-extracting-the-chapter-title id=text-tracks-describing-chapters:text-track-rules-for-extracting-the-chapter-title>text track rules for extracting the chapter title</a>.</p>

  

  <p>The <dfn id=rules-for-constructing-the-chapter-tree-from-a-text-track>rules for constructing the chapter tree from a text track</dfn> are as follows. They
  produce a potentially nested list of chapters, each of which have a start time, end time, title,
  and a list of nested chapters. This algorithm discards cues that do not correctly nest within each
  other, or that are out of order.</p>

  <ol><li><p>Let <var>list</var> be a copy of the <a href=#text-track-list-of-cues id=text-tracks-describing-chapters:text-track-list-of-cues>list
   of cues</a> of the <a href=#text-track id=text-tracks-describing-chapters:text-track-2>text track</a> being processed.</li><li><p>Remove from <var>list</var> any <a href=#text-track-cue id=text-tracks-describing-chapters:text-track-cue-2>text track cue</a> whose <a href=#text-track-cue-end-time id=text-tracks-describing-chapters:text-track-cue-end-time-2>text
   track cue end time</a> is before its <a href=#text-track-cue-start-time id=text-tracks-describing-chapters:text-track-cue-start-time-2>text track cue start time</a>.</li><li><p>Let <var>output</var> be an empty list of chapters, where a chapter is a record
   consisting of a start time, an end time, a title, and a (potentially empty) list of nested
   chapters. For the purpose of this algorithm, each chapter also has a parent chapter.</li><li><p>Let <var>current chapter</var> be a stand-in chapter whose start time is negative
   infinity, whose end time is positive infinity, and whose list of nested chapters is <var>output</var>. (This is just used to make the algorithm easier to describe.)</li><li><p><i>Loop</i>: If <var>list</var> is empty, jump to the step labeled
   <i>end</i>.</li><li><p>Let <var>current cue</var> be the first cue in <var>list</var>, and then
   remove it from <var>list</var>.</li><li><p>If <var>current cue</var>'s <a href=#text-track-cue-start-time id=text-tracks-describing-chapters:text-track-cue-start-time-3>text track cue start time</a> is less than
   the start time of <var>current chapter</var>, then return to the step labeled
   <i>loop</i>.</p> 

   </li><li><p>While <var>current cue</var>'s <a href=#text-track-cue-start-time id=text-tracks-describing-chapters:text-track-cue-start-time-4>text track cue start time</a> is greater
   than or equal to <var>current chapter</var>'s end time, let <var>current
   chapter</var> be <var>current chapter</var>'s parent chapter.</li><li><p>If <var>current cue</var>'s <a href=#text-track-cue-end-time id=text-tracks-describing-chapters:text-track-cue-end-time-3>text track cue end time</a> is greater than
   the end time of <var>current chapter</var>, then return to the step labeled
   <i>loop</i>.</p> 

   </li><li>

    <p>Create a new chapter <var>new chapter</var>, whose start time is <var>current cue</var>'s <a href=#text-track-cue-start-time id=text-tracks-describing-chapters:text-track-cue-start-time-5>text track cue start time</a>, whose end time is <var>current cue</var>'s <a href=#text-track-cue-end-time id=text-tracks-describing-chapters:text-track-cue-end-time-4>text track cue end time</a>, whose title is the result of running <var>current cue</var>'s <a href=#text-track-rules-for-extracting-the-chapter-title id=text-tracks-describing-chapters:text-track-rules-for-extracting-the-chapter-title-2>text track rules for extracting the chapter title</a>, and whose list of nested chapters is
    empty.</p>

   </li><li><p>Append <var>new chapter</var> to <var>current chapter</var>'s list of
   nested chapters, and let <var>current chapter</var> be <var>new chapter</var>'s
   parent.</li><li><p>Let <var>current chapter</var> be <var>new chapter</var>.</li><li><p><i>loop</i>にラベル付けされた手順に戻る。</li><li><p><i>End</i>: Return <var>output</var>.</li></ol>

  

  <div class=example>

   <p><a id=text-tracks-describing-chapters:webvtt-file href=infrastructure.html#webvtt-file>WebVTTファイル</a>の以下の断片は、ネストされた章をマークアップする様子を示す。ファイルは、3つの50分の章、"Astrophysics"、"Computational Physics"、および"General Relativity"を記述する。1つ目は3つのサブチャプターを持ち、2つ目は4つ、3つ目は2つのサブチャプターを持つ。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

   <pre>WEBVTT

00:00:00.000 --&gt; 00:50:00.000
Astrophysics

00:00:00.000 --&gt; 00:10:00.000
Introduction to Astrophysics

00:10:00.000 --&gt; 00:45:00.000
The Solar System

00:00:00.000 --&gt; 00:10:00.000
Coursework Description

00:50:00.000 --&gt; 01:40:00.000
Computational Physics

00:50:00.000 --&gt; 00:55:00.000
Introduction to Programming

00:55:00.000 --&gt; 01:30:00.000
Data Structures

01:30:00.000 --&gt; 01:35:00.000
Answers to Last Exam

01:35:00.000 --&gt; 01:40:00.000
Coursework Description

01:40:00.000 --&gt; 02:30:00.000
General Relativity

01:40:00.000 --&gt; 02:00:00.000
Tensor Algebra

02:00:00.000 --&gt; 02:30:00.000
The General Relativistic Field Equations</pre>

  </div>


  

  <h6 id=cue-events>4.8.13.12.7 Event handlers for objects of the text track APIs</h6>

  <p>The following are the <a id=cue-events:event-handlers href=webappapis.html#event-handlers>event handlers</a> that (and their corresponding <a href=webappapis.html#event-handler-event-type id=cue-events:event-handler-event-type>event handler event types</a>) must be supported, as <a id=cue-events:event-handler-idl-attributes href=webappapis.html#event-handler-idl-attributes>event handler IDL
  attributes</a>, by all objects implementing the <code id=cue-events:texttracklist><a href=#texttracklist>TextTrackList</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=cue-events:event-handlers-2>イベントハンドラ</a> </th><th><a id=cue-events:event-handler-event-type-2 href=webappapis.html#event-handler-event-type>イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-texttracklist-onchange><code>onchange</code></dfn> </td><td> <code id=cue-events:event-media-change><a href=#event-media-change>change</a></code>
    </td></tr><tr><td><dfn id=handler-texttracklist-onaddtrack><code>onaddtrack</code></dfn> </td><td> <code id=cue-events:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>
    </td></tr><tr><td><dfn id=handler-texttracklist-onremovetrack><code>onremovetrack</code></dfn> </td><td> <code id=cue-events:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code>
  </td></tr></table>

  <p>The following are the <a id=cue-events:event-handlers-3 href=webappapis.html#event-handlers>event handlers</a> that (and their corresponding <a href=webappapis.html#event-handler-event-type id=cue-events:event-handler-event-type-3>event handler event types</a>) must be supported, as <a id=cue-events:event-handler-idl-attributes-2 href=webappapis.html#event-handler-idl-attributes>event handler IDL
  attributes</a>, by all objects implementing the <code id=cue-events:texttrack><a href=#texttrack>TextTrack</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=cue-events:event-handlers-4>イベントハンドラ</a> </th><th><a id=cue-events:event-handler-event-type-4 href=webappapis.html#event-handler-event-type>イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-texttrack-oncuechange><code>oncuechange</code></dfn> </td><td> <code id=cue-events:event-media-cuechange><a href=#event-media-cuechange>cuechange</a></code>
  </td></tr></table>

  <p>The following are the <a id=cue-events:event-handlers-5 href=webappapis.html#event-handlers>event handlers</a> that (and their corresponding <a href=webappapis.html#event-handler-event-type id=cue-events:event-handler-event-type-5>event handler event types</a>) must be supported, as <a id=cue-events:event-handler-idl-attributes-3 href=webappapis.html#event-handler-idl-attributes>event handler IDL
  attributes</a>, by all objects implementing the <code id=cue-events:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=cue-events:event-handlers-6>イベントハンドラ</a> </th><th><a id=cue-events:event-handler-event-type-6 href=webappapis.html#event-handler-event-type>イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-texttrackcue-onenter><code>onenter</code></dfn> </td><td> <code id=cue-events:event-media-enter><a href=#event-media-enter>enter</a></code>
    </td></tr><tr><td><dfn id=handler-texttrackcue-onexit><code>onexit</code></dfn> </td><td> <code id=cue-events:event-media-exit><a href=#event-media-exit>exit</a></code>
  </td></tr></table>

  



  <h6 id=best-practices-for-metadata-text-tracks>4.8.13.12.8 メタデータテキストトラックに対するベストプラクティス</h6>

  <p><i>この節は非規範的である。</i></p>

  <p>テキストトラックは、対話型または拡張されたビューに対して、メディアデータに関連するデータを格納するために使用することができる。 </p>

  <p>たとえば、スポーツ中継を表示するページは、現在のスコアに関する情報を含むだろう。ロボット工学のコンテストがライブストリーミングされていたとする。次のように、画像にスコアを重ねることができる：</p>

  <p><iframe src="data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%0A%3Cstyle%3E%0A%20body%2C%20html%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20overflow%3A%20hidden%3B%20%7D%0A%20div%20%7B%20width%3A%20600px%3B%20height%3A%20400px%3B%20position%3A%20relative%3B%20%7D%0A%20p%20%7B%20position%3A%20absolute%3B%20top%3A%200%3B%20margin%3A%200.25em%3B%20font%3A%20small-caps%20900%202em%20sans-serif%3B%20text-shadow%3A%20white%200%200%204px%3B%20%7D%0A%20span%20%7B%20display%3A%20block%3B%20%7D%0A%20.left%20%7B%20color%3A%20red%3B%20left%3A%200%3B%20text-align%3A%20left%3B%20%7D%0A%20.right%20%7B%20color%3A%20blue%3B%20right%3A%200%3B%20text-align%3A%20right%3B%20%7D%0A%20.middle%20%7B%20color%3A%20white%3B%20top%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%20text-align%3A%20center%3B%20text-shadow%3A%20black%200%200%204px%3B%20%7D%0A%20.middle%20span%20%7B%20display%3A%20inline-block%3B%20margin%3A%200%201em%3B%20font-size%3A%200.75em%3B%20text-transform%3A%20uppercase%3B%20%7D%0A%3C%2Fstyle%3E%0A%3Cdiv%3E%0A%20%3Cimg%20src%3D%22https%3A%2F%2Fimages.whatwg.org%2Frobots.jpeg%22%3E%0A%20%3Cp%20class%3D%22score%20left%22%3E%3Cspan%3ERed%20Alliance%3C%2Fspan%3E%20%3Cspan%3E78%3C%2Fspan%3E%3C%2Fp%3E%0A%20%3Cp%20class%3D%22score%20right%22%3E%3Cspan%3EBlue%20Alliance%3C%2Fspan%3E%20%3Cspan%3E66%3C%2Fspan%3E%3C%2Fp%3E%0A%20%3Cp%20class%3D%22score%20middle%22%3E%3Cspan%3EQual%20Match%2037%3C%2Fspan%3E%20%3Cspan%3EFriday%2014%3A21%3C%2Fspan%3E%0A%3C%2Fdiv%3E" width=600 height=400></iframe>

  <p>ユーザーがビデオ内の任意のポイントをシークするたびに、スコア表示を正しく描画させるために、メタデータテキストトラックキューは、スコアに適切であるようにする必要がある。たとえば、上のフレームにおいて、試合数を与える試合の長さに続く1つのキュー、青の同盟のスコアが変化するまで続く1つのキュー、そして赤の同盟のスコアが変化するまで続く1つのキューがおそらくあるだろう。ビデオがちょうどライブイベントのストリームである場合、右下における時間は、キューに基づくよりもむしろ、おそらく自動的に現在のビデオの時間から派生になる。しかし、ビデオが単なるハイライトだった場合、それはまたキューに記載されるかもしれない。</p>

  <p>次は、このようなものの断片がWebVTTファイル内のようになるものを示す：</p>

  <pre>WEBVTT

...

05:10:00.000 --&gt; 05:12:15.000
matchtype:qual
matchnumber:37

...

05:11:02.251 --&gt; 05:11:17.198
red:78

05:11:03.672 --&gt; 05:11:54.198
blue:66

05:11:17.198 --&gt; 05:11:25.912
red:80

05:11:25.912 --&gt; 05:11:26.522
red:83

05:11:26.522 --&gt; 05:11:26.982
red:86

05:11:26.982 --&gt; 05:11:27.499
red:89

...</pre>

  <p>ここで重要なことは、該当するイベントが適用する時間の長さに及ぶキューに情報が与えられることに注目することである。代わりに、スコアが変化する際に、スコアがゼロ長さ（または非常に短い、ほぼゼロ長さ）のキューとして指定された場合、
たとえば05:11:17.198で"red+2"、05:11:25.912で"red+3"などと言ったときに、問題は発生する。主に、スクリプトが一切の通知を見逃されていないことを確認するためにキューのリスト全体を渡り歩く必要があるため、シークは実装がはるかに困難である。キューが短い場合、スクリプトが明確にキューをリッスンしない限り、スクリプトはキューがアクティブであることを見ることはない。</p>

  <p>この方法でキューを使用する場合、著者は、現在の注釈を更新するために<code id=best-practices-for-metadata-text-tracks:event-media-cuechange><a href=#event-media-cuechange>cuechange</a></code>イベントを使用することを勧める。（具体的には、それはキューが変更されていない場合でも、仕事をすることを必要とするように<code id=best-practices-for-metadata-text-tracks:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code>イベントを使用することがあまり適切でなく、そしてより重要なことは、<code id=best-practices-for-metadata-text-tracks:event-media-timeupdate-2><a href=#event-media-timeupdate>timeupdate</a></code>イベントがレート制限されているため、メタデータキューがアクティブになる場合、かつ表示が更新される場合、間のより高いレイテンシーを導入する。）</p>




  <h5 id=user-interface>4.8.13.13 ユーザーインターフェース</h5>

  <p><dfn id=attr-media-controls><code>controls</code></dfn>属性は<a id=user-interface:boolean-attribute href=infrastructure.html#boolean-attribute>真偽属性</a>である。存在する場合、著者がスクリプト化されたコントローラを提供しておらず、ユーザーエージェントに独自のコントロールセットを提供したいと考えていることを示す。</p>

  

  <p>If the attribute is present, or if <a href=webappapis.html#concept-n-noscript id=user-interface:concept-n-noscript>scripting is
  disabled</a> for the <a href=#media-element id=user-interface:media-element>media element</a>, then the user agent should <dfn id=expose-a-user-interface-to-the-user>expose a user
  interface to the user</dfn>. This user interface should include features to begin playback, pause
  playback, seek to an arbitrary position in the content (if the content supports arbitrary
  seeking), change the volume, change the display of closed captions or embedded sign-language
  tracks, select different audio tracks or turn on audio descriptions, and show the media content in
  manners more suitable to the user (e.g. fullscreen video or in an independent resizable window).
  Other controls may also be made available.</p>

  <p>If the <a href=#media-element id=user-interface:media-element-2>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller>current media controller</a>, then the user
  agent should expose audio tracks from all the <a href=#slaved-media-elements id=user-interface:slaved-media-elements>slaved media elements</a> (although
  avoiding duplicates if the same <a href=#media-resource id=user-interface:media-resource>media resource</a> is being used several times). If a
  <a href=#media-resource id=user-interface:media-resource-2>media resource</a>'s audio track exposed in this way has no known name, and it is the
  only audio track for a particular <a href=#media-element id=user-interface:media-element-3>media element</a>, the user agent should use the
  element's <code id=user-interface:attr-title><a href=dom.html#attr-title>title</a></code> attribute, if any, as the name (or as part of the
  name) of that track.</p>

  <p>Even when the attribute is absent, however, user agents may provide controls to affect playback
  of the media resource (e.g. play, pause, seeking, track selection, and volume controls), but such
  features should not interfere with the page's normal rendering. For example, such features could
  be exposed in the <a href=#media-element id=user-interface:media-element-4>media element</a>'s context menu. The user agent may implement this
  simply by <a href=#expose-a-user-interface-to-the-user id=user-interface:expose-a-user-interface-to-the-user>exposing a user interface to the
  user</a> as described above (as if the <code id=user-interface:attr-media-controls><a href=#attr-media-controls>controls</a></code>
  attribute was present).</p>

  <p>If the user agent <a href=#expose-a-user-interface-to-the-user id=user-interface:expose-a-user-interface-to-the-user-2>exposes a user interface to
  the user</a> by displaying controls over the <a href=#media-element id=user-interface:media-element-5>media element</a>, then the user agent
  should suppress any user interaction events while the user agent is interacting with this
  interface. (For example, if the user clicks on a video's playback control, <code id=user-interface:event-mousedown><a href=infrastructure.html#event-mousedown>mousedown</a></code> events and so forth would not simultaneously be fired at
  elements on the page.)</p>

  <p>Where possible (specifically, for starting, stopping, pausing, and unpausing playback, for
  seeking, for changing the rate of playback, for fast-forwarding or rewinding, for listing,
  enabling, and disabling text tracks, and for muting or changing the volume of the audio), user
  interface features exposed by the user agent must be implemented in terms of the DOM API described
  above, so that, e.g., all the same events fire.</p>

  <p>When a <a href=#media-element id=user-interface:media-element-6>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller-2>current media controller</a>, the user agent's
  user interface for pausing and unpausing playback, for seeking, for changing the rate of playback,
  for fast-forwarding or rewinding, and for muting or changing the volume of audio of the entire
  group must be implemented in terms of the <code id=user-interface:mediacontroller><a href=#mediacontroller>MediaController</a></code> API exposed on that
  <a href=#current-media-controller id=user-interface:current-media-controller-3>current media controller</a>. When a <a href=#media-element id=user-interface:media-element-7>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller-4>current media
  controller</a>, and all the <a href=#slaved-media-elements id=user-interface:slaved-media-elements-2>slaved media elements</a> of that
  <code id=user-interface:mediacontroller-2><a href=#mediacontroller>MediaController</a></code> are paused, the user agent should also unpause all the <a href=#slaved-media-elements id=user-interface:slaved-media-elements-3>slaved
  media elements</a> when the user invokes a user agent interface control for beginning
  playback.</p>

  <p>The "play" function in the user agent's interface must set the <code>playbackRate</code> attribute to the value of the <code>defaultPlaybackRate</code> attribute before invoking the <code>play()</code>
  method. When a <a href=#media-element id=user-interface:media-element-8>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller-5>current media controller</a>, the
  attributes and method with those names on that <code id=user-interface:mediacontroller-3><a href=#mediacontroller>MediaController</a></code> object must be used.
  Otherwise, the attributes and method with those names on the <a href=#media-element id=user-interface:media-element-9>media element</a> itself
  must be used.  </p>

  <p>Features such as fast-forward or rewind must be implemented by only changing the <code>playbackRate</code> attribute (and not the <code>defaultPlaybackRate</code>
  attribute). Again, when a <a href=#media-element id=user-interface:media-element-10>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller-6>current media controller</a>,
  the attributes with those names on that <code id=user-interface:mediacontroller-4><a href=#mediacontroller>MediaController</a></code> object must be used;
  otherwise, the attributes with those names on the <a href=#media-element id=user-interface:media-element-11>media element</a> itself must be used.</p>

  <p>When a <a href=#media-element id=user-interface:media-element-12>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller-7>current media controller</a>, seeking must be
  implemented in terms of the <code id=user-interface:dom-mediacontroller-currenttime><a href=#dom-mediacontroller-currenttime>currentTime</a></code>
  attribute on that <code id=user-interface:mediacontroller-5><a href=#mediacontroller>MediaController</a></code> object. Otherwise, the user agent must directly
  <a href=#dom-media-seek id=user-interface:dom-media-seek>seek</a> to the requested position in the <a href=#media-element id=user-interface:media-element-13>media
  element</a>'s <a href=#media-timeline id=user-interface:media-timeline>media timeline</a>. For media resources where seeking to an arbitrary
  position would be slow, user agents are encouraged to use the <i>approximate-for-speed</i> flag
  when seeking in response to the user manipulating an approximate position interface such as a seek
  bar.</p>

  <p>When a <a href=#media-element id=user-interface:media-element-14>media element</a> has a <a href=#current-media-controller id=user-interface:current-media-controller-8>current media controller</a>, user agents may
  additionally provide the user with controls that directly manipulate an individual <a href=#media-element id=user-interface:media-element-15>media
  element</a> without affecting the <code id=user-interface:mediacontroller-6><a href=#mediacontroller>MediaController</a></code>, but such features are
  considered relatively advanced and unlikely to be useful to most users.</p>

  <p>For the purposes of listing chapters in the <a href=#media-resource id=user-interface:media-resource-3>media resource</a>, only <a href=#text-track id=user-interface:text-track>text tracks</a> in the <a href=#media-element id=user-interface:media-element-16>media element</a>'s <a href=#list-of-text-tracks id=user-interface:list-of-text-tracks>list of text tracks</a>
  that are <a href=#text-track-showing id=user-interface:text-track-showing>showing</a> and whose <a href=#text-track-kind id=user-interface:text-track-kind>text track kind</a> is
  <code id=user-interface:dom-texttrack-kind-chapters><a href=#dom-texttrack-kind-chapters>chapters</a></code> should be used. Such tracks must be
  interpreted according to the <a href=#rules-for-constructing-the-chapter-tree-from-a-text-track id=user-interface:rules-for-constructing-the-chapter-tree-from-a-text-track>rules for constructing the chapter tree from a text
  track</a>. When seeking in response to a user manipulating a chapter selection interface, user
  agents should not use the <i>approximate-for-speed</i> flag.</p>

  <p>The <dfn id=dom-media-controls><code>controls</code></dfn> IDL attribute must
  <a id=user-interface:reflect href=infrastructure.html#reflect>reflect</a> the content attribute of the same name.</p>

  <hr>

  

  <dl class=domintro><dt><var>media</var> . <code id=user-interface:dom-media-volume><a href=#dom-media-volume>volume</a></code> [ = <var>value</var> ]<dd>

    <p>0.0から1.0までの範囲の数字として、現在の再生音量を返す。ここで0.0は最小音量で1.0は最大音量である。</p>

    <p>音量を変更する設定が可能である。</p>

    <p>新しい値が範囲0.0から1.0に含まれない場合、<code id=user-interface:indexsizeerror><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code>を投げる。 </p>

   <dt><var>media</var> . <code id=user-interface:dom-media-muted><a href=#dom-media-muted>muted</a></code> [ = <var>value</var> ]<dd>

    <p><code id=user-interface:dom-media-volume-2><a href=#dom-media-volume>volume</a></code>属性を上書きし、音声がミュートである場合trueを返し、<code id=user-interface:dom-media-volume-3><a href=#dom-media-volume>volume</a></code>属性が無視される場合、falseを返す。</p>

    <p>オーディオがミュートであるかどうかを変更する設定が可能である。</p>

   </dl>

  

  <p>A <a href=#media-element id=user-interface:media-element-17>media element</a> has a <dfn id=concept-media-volume>playback volume</dfn>, which is a fraction in the range 0.0 (silent) to 1.0 (loudest).
  Initially, the volume should be 1.0, but user agents may remember the last set value across
  sessions, on a per-site basis or otherwise, so the volume may start at other values.</p>

  <p>The <dfn id=dom-media-volume><code>volume</code></dfn> IDL attribute must return the
  <a href=#concept-media-volume id=user-interface:concept-media-volume>playback volume</a> of any audio portions of the
  <a href=#media-element id=user-interface:media-element-18>media element</a>. On setting, if the new value is in the range 0.0 to 1.0 inclusive, the
  <a href=#media-element id=user-interface:media-element-19>media element</a>'s <a href=#concept-media-volume id=user-interface:concept-media-volume-2>playback volume</a> must be
  set to the new value. If the new value is outside the range 0.0 to 1.0 inclusive, then, on
  setting, an <code id=user-interface:indexsizeerror-2><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code> exception must be thrown instead.</p>

  <p>A <a href=#media-element id=user-interface:media-element-20>media element</a> can also be <dfn id=concept-media-muted>muted</dfn>. If
  anything is muting the element, then it is muted. (For example, when the <a href=#direction-of-playback id=user-interface:direction-of-playback>direction of
  playback</a> is backwards, the element is muted.)</p>

  <p>The <dfn id=dom-media-muted><code>muted</code></dfn> IDL attribute must return the value
  to which it was last set. When a <a href=#media-element id=user-interface:media-element-21>media element</a> is created, if the element has a <code id=user-interface:attr-media-muted><a href=#attr-media-muted>muted</a></code> content attribute specified, then the <code id=user-interface:dom-media-muted-2><a href=#dom-media-muted>muted</a></code> IDL attribute should be set to true; otherwise, the user
  agents may set the value to the user's preferred value (e.g. remembering the last set value across
  sessions, on a per-site basis or otherwise). While the <code id=user-interface:dom-media-muted-3><a href=#dom-media-muted>muted</a></code>
  IDL attribute is set to true, the <a href=#media-element id=user-interface:media-element-22>media element</a> must be <a href=#concept-media-muted id=user-interface:concept-media-muted>muted</a>.</p>

  <p>Whenever either of the values that would be returned by the <code id=user-interface:dom-media-volume-4><a href=#dom-media-volume>volume</a></code> and <code id=user-interface:dom-media-muted-4><a href=#dom-media-muted>muted</a></code> IDL
  attributes change, the user agent must <a id=user-interface:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a id=user-interface:fire-a-simple-event href=webappapis.html#fire-a-simple-event>fire a simple
  event</a> named <code id=user-interface:event-media-volumechange><a href=#event-media-volumechange>volumechange</a></code> at the <a href=#media-element id=user-interface:media-element-23>media
  element</a>.</p>

  <p>An element's <dfn id=effective-media-volume>effective media volume</dfn> is determined as follows:</p>

  <ol><li><p>If the user has indicated that the user agent is to override the volume of the element,
   then the element's <a href=#effective-media-volume id=user-interface:effective-media-volume>effective media volume</a> is the volume desired by the user. Abort
   these steps.</li><li><p>If the element's audio output is <a href=#concept-media-muted id=user-interface:concept-media-muted-2>muted</a>, the
   element's <a href=#effective-media-volume id=user-interface:effective-media-volume-2>effective media volume</a> is zero. Abort these steps.</li><li><p>If the element has a <a href=#current-media-controller id=user-interface:current-media-controller-9>current media controller</a> and that
   <code id=user-interface:mediacontroller-7><a href=#mediacontroller>MediaController</a></code> object's <a href=#media-controller-mute-override id=user-interface:media-controller-mute-override>media controller mute override</a> is true, the
   element's <a href=#effective-media-volume id=user-interface:effective-media-volume-3>effective media volume</a> is zero. Abort these steps.</li><li><p>Let <var>volume</var> be the <a href=#concept-media-volume id=user-interface:concept-media-volume-3>playback
   volume</a> of the audio portions of the <a href=#media-element id=user-interface:media-element-24>media element</a>, in range 0.0 (silent) to
   1.0 (loudest).</li><li><p>If the element has a <a href=#current-media-controller id=user-interface:current-media-controller-10>current media controller</a>, multiply <var>volume</var> by that <code id=user-interface:mediacontroller-8><a href=#mediacontroller>MediaController</a></code> object's <a href=#media-controller-volume-multiplier id=user-interface:media-controller-volume-multiplier>media controller
   volume multiplier</a>. (The <a href=#media-controller-volume-multiplier id=user-interface:media-controller-volume-multiplier-2>media controller volume multiplier</a> is in the range
   0.0 to 1.0, so this can only reduce the value.)</li><li><p>The element's <a href=#effective-media-volume id=user-interface:effective-media-volume-4>effective media volume</a> is <var>volume</var>,
   interpreted relative to the range 0.0 to 1.0, with 0.0 being silent, and 1.0 being the loudest
   setting, values in between increasing in loudness. The range need not be linear. The loudest
   setting may be lower than the system's loudest possible setting; for example the user could have
   set a maximum volume.</li></ol>

  

  <p><a href=#media-element id=user-interface:media-element-25>メディア要素</a>の<dfn id=attr-media-muted><code>muted</code></dfn>属性は、潜在的にユーザー設定を上書きし、<a href=#media-resource id=user-interface:media-resource-4>メディアリソース</a>に属するオーディオ出力のデフォルトの状態を制御する<a id=user-interface:boolean-attribute-2 href=infrastructure.html#boolean-attribute>真偽属性</a>である。</p>

  

  <p>The <dfn id=dom-media-defaultmuted><code>defaultMuted</code></dfn> IDL attribute must
  <a id=user-interface:reflect-2 href=infrastructure.html#reflect>reflect</a> the <code id=user-interface:attr-media-muted-2><a href=#attr-media-muted>muted</a></code> content attribute.</p>

  

  <p class=note>この属性は動的効果（要素のデフォルトの状態のみを制御する）を持たない。</p>

  <div class=example>

   <p>このビデオ（広告）は自動再生するが、ユーザーを悩ますのを避けるために音なしで再生して、ユーザーが音声をオンにできるようにする。</p>

   <pre>&lt;video src="adverts.cgi?kind=video" controls autoplay loop muted&gt;&lt;/video&gt;</pre>

  </div>




  <h5 id=time-ranges>4.8.13.14 時間範囲</h5>

  <p><code id=time-ranges:timeranges><a href=#timeranges>TimeRanges</a></code>インターフェースを実装したオブジェクトは、時間の範囲（期間）のリストを表す。</p>

  <pre class=idl>interface <dfn id=timeranges>TimeRanges</dfn> {
  readonly attribute unsigned long <a href=#dom-timeranges-length id=time-ranges:dom-timeranges-length>length</a>;
  double <a href=#dom-timeranges-start id=time-ranges:dom-timeranges-start>start</a>(unsigned long index);
  double <a href=#dom-timeranges-end id=time-ranges:dom-timeranges-end>end</a>(unsigned long index);
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=time-ranges:dom-timeranges-length-2><a href=#dom-timeranges-length>length</a></code><dd>

    <p>オブジェクト内の範囲の数を返す。</p>

   <dt><var>time</var> = <var>media</var> . <code id=time-ranges:dom-timeranges-start-2><a href=#dom-timeranges-start>start</a></code>(<var>index</var>)<dd>

    <p>指定されたインデックスをもつ範囲の開始時刻を返す。</p>

    <p>インデックスが範囲外の場合<code id=time-ranges:indexsizeerror><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code>を投げる。</p>

   <dt><var>time</var> = <var>media</var> . <code id=time-ranges:dom-timeranges-end-2><a href=#dom-timeranges-end>end</a></code>(<var>index</var>)<dd>

    <p>指定されたインデックスをもつ範囲の終了時刻を返す。</p>

    <p>インデックスが範囲外の場合<code id=time-ranges:indexsizeerror-2><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code>を投げる。</p>

   </dl>

  

  <p>The <dfn id=dom-timeranges-length><code>length</code></dfn> IDL attribute must return the
  number of ranges represented by the object.</p>

  <p>The <dfn id=dom-timeranges-start><code>start(<var>index</var>)</code></dfn>
  method must return the position of the start of the <var>index</var>th range represented
  by the object, in seconds measured from the start of the timeline that the object covers.</p>

  <p>The <dfn id=dom-timeranges-end><code>end(<var>index</var>)</code></dfn> method
  must return the position of the end of the <var>index</var>th range represented by the
  object, in seconds measured from the start of the timeline that the object covers.</p>

  <p>These methods must throw <code id=time-ranges:indexsizeerror-3><a href=infrastructure.html#indexsizeerror>IndexSizeError</a></code> exceptions if called with an <var>index</var> argument greater than or equal to the number of ranges represented by the
  object.</p>

  <p>When a <code id=time-ranges:timeranges-2><a href=#timeranges>TimeRanges</a></code> object is said to be a <dfn id=normalised-timeranges-object>normalised <code>TimeRanges</code>
  object</dfn>, the ranges it represents must obey the following criteria:</p>

  <ul><li>The start of a range must be greater than the end of all earlier ranges.</li><li>The start of a range must be less than or equal to the end of that same range.</li></ul>

  <p>In other words, the ranges in such an object are ordered, don't overlap, and don't touch
  (adjacent ranges are folded into one bigger range). A range can be empty (referencing just a
  single moment in time), e.g. to indicate that only one frame is currently buffered in the case
  that the user agent has discarded the entire <a href=#media-resource id=time-ranges:media-resource>media resource</a> except for the current
  frame, when a <a href=#media-element id=time-ranges:media-element>media element</a> is paused.</p>

  <p>Ranges in a <code id=time-ranges:timeranges-3><a href=#timeranges>TimeRanges</a></code> object must be inclusive.</p>

  <p class=example>Thus, the end of a range would be equal to the start of a following adjacent
  (touching but not overlapping) range. Similarly, a range covering a whole timeline anchored at
  zero would have a start equal to zero and an end equal to the duration of the timeline.</p>

  <p>The timelines used by the objects returned by the <code id=time-ranges:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code>, <code id=time-ranges:dom-media-seekable><a href=#dom-media-seekable>seekable</a></code> and
  <code id=time-ranges:dom-media-played><a href=#dom-media-played>played</a></code> IDL attributes of <a href=#media-element id=time-ranges:media-element-2>media
  elements</a> must be that element's <a href=#media-timeline id=time-ranges:media-timeline>media timeline</a>.</p>

  


  <h5 id=the-trackevent-interface>4.8.13.15 The <code id=the-trackevent-interface:trackevent><a href=#trackevent>TrackEvent</a></code> interface</h5>

  <pre class=idl>[Constructor(DOMString type, optional <a href=#trackeventinit id=the-trackevent-interface:trackeventinit>TrackEventInit</a> eventInitDict)]
interface <dfn id=trackevent>TrackEvent</dfn> : <a id=the-trackevent-interface:event href=infrastructure.html#event>Event</a> {
  readonly attribute (<a href=#videotrack id=the-trackevent-interface:videotrack>VideoTrack</a> or <a href=#audiotrack id=the-trackevent-interface:audiotrack>AudioTrack</a> or <a href=#texttrack id=the-trackevent-interface:texttrack>TextTrack</a>)? <a href=#dom-trackevent-track id=the-trackevent-interface:dom-trackevent-track>track</a>;
};

dictionary <dfn id=trackeventinit>TrackEventInit</dfn> : <a id=the-trackevent-interface:eventinit href=infrastructure.html#eventinit>EventInit</a> {
  (<a href=#videotrack id=the-trackevent-interface:videotrack-2>VideoTrack</a> or <a href=#audiotrack id=the-trackevent-interface:audiotrack-2>AudioTrack</a> or <a href=#texttrack id=the-trackevent-interface:texttrack-2>TextTrack</a>)? track;
};</pre>

  <dl class=domintro><dt><var>event</var> . <code id=the-trackevent-interface:dom-trackevent-track-2><a href=#dom-trackevent-track>track</a></code><dd>

    <p>イベントが関連するトラックオブジェクト（<code id=the-trackevent-interface:texttrack-3><a href=#texttrack>TextTrack</a></code>、<code id=the-trackevent-interface:audiotrack-3><a href=#audiotrack>AudioTrack</a></code>、または<code id=the-trackevent-interface:videotrack-3><a href=#videotrack>VideoTrack</a></code>）を返す。</p>

   </dl>

  

  <p>The <dfn id=dom-trackevent-track><code>track</code></dfn> attribute must return the value it was initialised to. オブジェクトが作成される際、この属性はnullに初期化しなければならない。It represents the context information for the event.</p>

  



  <h5 id=mediaevents>4.8.13.16 イベントの概要</h5>

  <p><i>この節は非規範的である。</i></p>

  <p>上記の処理モデルの一部として、<a href=#media-element id=mediaevents:media-element>メディア要素</a>で以下のイベントが発火する：</p>

  <table><thead><tr><th>イベント名
     </th><th>インターフェース
     </th><th>発火条件
     </th><th>Preconditions

   

   <tbody></th></tr><tr><td><dfn id=event-media-loadstart><code>loadstart</code></dfn>

     </td><td><code id=mediaevents:event><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#concept-media-load-algorithm id=mediaevents:concept-media-load-algorithm>リソース選択アルゴリズム</a>の一部として、<a href=#media-data id=mediaevents:media-data>メディアデータ</a>を探し始める。

     </td><td><code id=mediaevents:dom-media-networkstate><a href=#dom-media-networkstate> networkState</a></code>が<code id=mediaevents:dom-media-network_loading><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>と等しい

    </td></tr><tr><td><dfn id=event-media-progress><code>progress</code></dfn>

     </td><td><code id=mediaevents:event-2><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#media-data id=mediaevents:media-data-2>メディアデータ</a>をフェッチしている。

     </td><td><code id=mediaevents:dom-media-networkstate-2><a href=#dom-media-networkstate> networkState</a></code>が<code id=mediaevents:dom-media-network_loading-2><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>と等しい

    </td></tr><tr><td><dfn id=event-media-suspend><code>suspend</code></dfn>

     </td><td><code id=mediaevents:event-3><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、意図的に現在の<a href=#media-data id=mediaevents:media-data-3>メディアデータ</a>をフェッチしていない。

     </td><td><code id=mediaevents:dom-media-networkstate-3><a href=#dom-media-networkstate> networkState</a></code>は<code id=mediaevents:dom-media-network_idle><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>と等しい

    </td></tr><tr><td><dfn id=event-media-abort><code>abort</code></dfn>

     </td><td><code id=mediaevents:event-4><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、完全にダウンロードされる前に<a href=#media-data id=mediaevents:media-data-4>メディアデータ</a>のフェッチを停止するが、エラーによるものではない。

     </td><td><code id=mediaevents:dom-media-error><a href=#dom-media-error>error</a></code>は、コード<code id=mediaevents:dom-mediaerror-media_err_aborted><a href=#dom-mediaerror-media_err_aborted>MEDIA_ERR_ABORTED</a></code>をもつオブジェクトである。<code id=mediaevents:dom-media-networkstate-4><a href=#dom-media-networkstate> networkState</a></code>は、ダウンロードが中止された時期に応じて、<code id=mediaevents:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>または<code id=mediaevents:dom-media-network_idle-2><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>のいずれかに等しい。

    </td></tr><tr><td><dfn id=event-media-error><code>error</code></dfn>

     </td><td><code id=mediaevents:event-5><a href=infrastructure.html#event>Event</a></code>

     </td><td>An error occurs while fetching the <a href=#media-data id=mediaevents:media-data-5>media data</a> or the type of the resource
     is not supported media format.

     

     </td><td><code id=mediaevents:dom-media-error-2><a href=#dom-media-error>error</a></code>は、コード<code id=mediaevents:dom-mediaerror-media_err_network><a href=#dom-mediaerror-media_err_network>MEDIA_ERR_NETWORK</a></code>以上をもつオブジェクトである。<code id=mediaevents:dom-media-networkstate-5><a href=#dom-media-networkstate> networkState</a></code>は、ダウンロードが中止された時期に応じて、<code id=mediaevents:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>または<code id=mediaevents:dom-media-network_idle-3><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>のいずれかに等しい。

    </td></tr><tr><td><dfn id=event-media-emptied><code>emptied</code></dfn>

     </td><td><code id=mediaevents:event-6><a href=infrastructure.html#event>Event</a></code>

     </td><td>以前<code id=mediaevents:dom-media-network_empty-3><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>状態でなかった<code id=mediaevents:dom-media-networkstate-6><a href=#dom-media-networkstate>networkState</a></code>である<a href=#media-element id=mediaevents:media-element-2>メディア要素</a>が、その状態にちょうど切り替わった（ロード中に致命的なエラーが発生したため、<a href=#concept-media-load-algorithm id=mediaevents:concept-media-load-algorithm-2>リソース選択アルゴリズム</a>がすでに実行している間に<code id=mediaevents:dom-media-load><a href=#dom-media-load>load()</a></code>メソッドが呼び出されたためのいずれか）。

     </td><td><code id=mediaevents:dom-media-networkstate-7><a href=#dom-media-networkstate>networkState</a></code>は<code id=mediaevents:dom-media-network_empty-4><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>であり、すべてのIDL属性は、初期状態である。

    </td></tr><tr><td><dfn id=event-media-stalled><code>stalled</code></dfn>

     </td><td><code id=mediaevents:event-7><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#media-data id=mediaevents:media-data-6>メディアデータ</a>をフェッチしようとしているが、データが突発的に用意されない。

     </td><td><code id=mediaevents:dom-media-networkstate-8><a href=#dom-media-networkstate>networkState</a></code>は<code id=mediaevents:dom-media-network_loading-3><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>である。

   <tbody></td></tr><tr><td><dfn id=event-media-loadedmetadata><code>loadedmetadata</code></dfn>

     </td><td><code id=mediaevents:event-8><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、ちょうど<a href=#media-resource id=mediaevents:media-resource>メディアリソース</a>と<a href=#the-text-tracks-are-ready id=mediaevents:the-text-tracks-are-ready>テキストトラックの準備</a>の期間と寸法を決定した。

     </td><td><code id=mediaevents:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code>は初期時間に対して新たに<code id=mediaevents:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>に等しいかそれ以上である。

    </td></tr><tr><td><dfn id=event-media-loadeddata><code>loadeddata</code></dfn>

     </td><td><code id=mediaevents:event-9><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、初期時間に対して<a href=#current-playback-position id=mediaevents:current-playback-position>現在の再生位置</a>で<a href=#media-data id=mediaevents:media-data-7>メディアデータ</a>をレンダリングできる。

     </td><td><code id=mediaevents:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code>は、初期時間に対して新たに<code id=mediaevents:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>以上に増加した。

    </td></tr><tr><td><dfn id=event-media-canplay><code>canplay</code></dfn>

     </td><td><code id=mediaevents:event-10><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#media-data id=mediaevents:media-data-8>メディアデータ</a>の再生を再開できるが、再生を今すぐ開始されることになったかどうかを推定し、<a href=#media-resource id=mediaevents:media-resource-2>メディアリソース</a>は、コンテンツの追加のバッファリングに対して停止させることなく、終わりに現在の再生レートでレンダリングできなかった。

     </td><td><code id=mediaevents:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code>は、新たに<code id=mediaevents:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>以上に増加した。

    </td></tr><tr><td><dfn id=event-media-canplaythrough><code>canplaythrough</code></dfn>

     </td><td><code id=mediaevents:event-11><a href=infrastructure.html#event>Event</a></code>

     </td><td>ユーザーエージェントは、再生が今すぐ開始されることになったかどうかを推定し、<a href=#media-resource id=mediaevents:media-resource-3>メディアリソース</a>は追加のバッファリングに対して停止することなく、現在の再生レートの最後までのすべての方法でレンダリングできる。

     </td><td><code id=mediaevents:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code>は最近の<code id=mediaevents:dom-media-have_enough_data><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>に等しい。

    </td></tr><tr><td><dfn id=event-media-playing><code>playing</code></dfn>

     </td><td><code id=mediaevents:event-12><a href=infrastructure.html#event>Event</a></code>

     </td><td>再生は、<a href=#media-data id=mediaevents:media-data-9>メディアデータ</a>の不足のために、一時停止または遅延された後に開始する準備ができている。

     </td><td><code id=mediaevents:dom-media-readystate-5><a href=#dom-media-readystate>readyState</a></code>が新たに等しいまたは<code id=mediaevents:dom-media-have_future_data-2><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>を超えており、<code id=mediaevents:dom-media-paused><a href=#dom-media-paused>paused</a></code>はfalseであり、または<code id=mediaevents:dom-media-paused-2><a href=#dom-media-paused>paused</a></code>が新たにfalseであり、<code id=mediaevents:dom-media-readystate-6><a href=#dom-media-readystate>readyState</a></code>が等しいか、または<code id=mediaevents:dom-media-have_future_data-3><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>より大きい。たとえこのイベントが発火しても、 要素は依然として<a href=#potentially-playing id=mediaevents:potentially-playing>潜在的に再生</a>されていないかもしれない。たとえば、要素が<a href=#blocked-on-its-media-controller id=mediaevents:blocked-on-its-media-controller>メディアコントローラ上でブロックされる</a>場合（たとえば、<a href=#current-media-controller id=mediaevents:current-media-controller>現在のメディアコントローラ</a>が一時停止するか、または別の<a href=#slaved-media-elements id=mediaevents:slaved-media-elements>従属メディア要素</a>が何らかの形でストールしているため、または<a href=#media-resource id=mediaevents:media-resource-4>メディアリソース</a>が<a href=#media-controller-position id=mediaevents:media-controller-position>メディアコントローラの位置</a>に対応するデータがないため）、または要素が<a href=#paused-for-user-interaction id=mediaevents:paused-for-user-interaction>ユーザーとの対話のために一時停止</a>または<a href=#paused-for-in-band-content id=mediaevents:paused-for-in-band-content>帯域内コンテンツのために一時停止</a>である。

    </td></tr><tr><td><dfn id=event-media-waiting><code>waiting</code></dfn>

     </td><td><code id=mediaevents:event-13><a href=infrastructure.html#event>Event</a></code>

     </td><td>次のフレームが利用できないため、再生が停止したが、ユーザーエージェントは、そのフレームがやがて利用できるようになると予想する。

     </td><td><code id=mediaevents:dom-media-readystate-7><a href=#dom-media-readystate>readyState</a></code>が等しいか、または<code id=mediaevents:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>未満であり、<code id=mediaevents:dom-media-paused-3><a href=#dom-media-paused>paused</a></code>はfalseである。<code id=mediaevents:dom-media-seeking><a href=#dom-media-seeking>seeking</a></code>はtrueである、または<a href=#current-playback-position id=mediaevents:current-playback-position-2>現在の再生位置</a>は<code id=mediaevents:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code>内の領域のいずれかに含まれていないかのいずれか。再生が<code id=mediaevents:dom-media-paused-4><a href=#dom-media-paused>paused</a></code>がfalseでなしにその他の理由で停止することは可能であるが、それらの理由はこのイベントは発火しない（そしてそのような状況が解決するときに、別々の<code id=mediaevents:event-media-playing><a href=#event-media-playing>playing</a></code>イベントがどちらか発火しない）：たとえば、要素が新たに<a href=#blocked-on-its-media-controller id=mediaevents:blocked-on-its-media-controller-2>そのメディアコントローラ上でブロック</a>される、<a href=#ended-playback id=mediaevents:ended-playback>再生が終了</a>する、または再生が<a href=#stopped-due-to-errors id=mediaevents:stopped-due-to-errors>エラーにより停止</a>され、または要素が<a href=#paused-for-user-interaction id=mediaevents:paused-for-user-interaction-2>ユーザーとの対話のために一時停止</a>または<a href=#paused-for-in-band-content id=mediaevents:paused-for-in-band-content-2>帯域内コンテンツのために一時停止</a>している。

   <tbody></td></tr><tr><td><dfn id=event-media-seeking><code>seeking</code></dfn>

     </td><td><code id=mediaevents:event-14><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-seeking-2><a href=#dom-media-seeking>seeking</a></code>IDL属性がtrueに変更され、かつユーザーエージェントが新しい位置を探し始めている。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-seeked><code>seeked</code></dfn>

     </td><td><code id=mediaevents:event-15><a href=infrastructure.html#event>Event</a></code>

     </td><td><a href=#current-playback-position id=mediaevents:current-playback-position-3>current playback position</a>が変更された後に、<code id=mediaevents:dom-media-seeking-3><a href=#dom-media-seeking>seeking</a></code>IDL属性がfalseに変更された。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-ended><code>ended</code></dfn>

     </td><td><code id=mediaevents:event-16><a href=infrastructure.html#event>Event</a></code>

     </td><td><a href=#media-resource id=mediaevents:media-resource-5>メディアリソース</a>の終わりに達したため、再生が停止した。

     </td><td><code id=mediaevents:dom-media-currenttime><a href=#dom-media-currenttime>currentTime</a></code>は、<a href=#media-resource id=mediaevents:media-resource-6>メディアリソース</a>の最後に等しく、<code id=mediaevents:dom-media-ended><a href=#dom-media-ended>ended</a></code>はtrueである。

   <tbody></td></tr><tr><td><dfn id=event-media-durationchange><code>durationchange</code></dfn>

     </td><td><code id=mediaevents:event-17><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-duration><a href=#dom-media-duration>duration</a></code>属性はちょうど更新された。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-timeupdate><code>timeupdate</code></dfn>

     </td><td><code id=mediaevents:event-18><a href=infrastructure.html#event>Event</a></code>

     </td><td><a href=#current-playback-position id=mediaevents:current-playback-position-4>現在の再生位置</a>が、通常の再生の一部として、または、たとえば不連続的に、特に興味深い方法で変更された。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-play><code>play</code></dfn>

     </td><td><code id=mediaevents:event-19><a href=infrastructure.html#event>Event</a></code>

     </td><td>要素はもはや一時停止でない。<code id=mediaevents:dom-media-play><a href=#dom-media-play>play()</a></code>メソッドが返された後、または<code id=mediaevents:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code>属性を開始する再生を起こす際に発火した。

     </td><td><code id=mediaevents:dom-media-paused-5><a href=#dom-media-paused>paused</a></code>は、新たにfalseである。

    </td></tr><tr><td><dfn id=event-media-pause><code>pause</code></dfn>

     </td><td><code id=mediaevents:event-20><a href=infrastructure.html#event>Event</a></code>

     </td><td>要素が一時停止された。<code id=mediaevents:dom-media-pause><a href=#dom-media-pause>pause()</a></code>メソッドが返された後に発火した。

     </td><td><code id=mediaevents:dom-media-paused-6><a href=#dom-media-paused>paused</a></code>は、新たにtrueである。

    </td></tr><tr><td><dfn id=event-media-ratechange><code>ratechange</code></dfn>

     </td><td><code id=mediaevents:event-21><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-defaultplaybackrate><a href=#dom-media-defaultplaybackrate> defaultPlaybackRate</a></code>または<code id=mediaevents:dom-media-playbackrate><a href=#dom-media-playbackrate> playbackRate</a></code>属性が更新されたばかりのいずれか。

     </td><td>

   <tbody></td></tr><tr><td><dfn id=event-media-resize><code>resize</code></dfn>

     </td><td><code id=mediaevents:event-22><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-video-videowidth><a href=#dom-video-videowidth>videoWidth</a></code>と<code id=mediaevents:dom-video-videoheight><a href=#dom-video-videoheight>videoHeight</a></code>属性のいずれかまたは両方がちょうど更新されている。

     </td><td><a href=#media-element id=mediaevents:media-element-3>メディア要素</a>は<code id=mediaevents:the-video-element><a href=#the-video-element>video</a></code>要素である。<code id=mediaevents:dom-media-readystate-8><a href=#dom-media-readystate>readyState</a></code>は<code id=mediaevents:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>でない。

    </td></tr><tr><td><dfn id=event-media-volumechange><code>volumechange</code></dfn>

     </td><td><code id=mediaevents:event-23><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-volume><a href=#dom-media-volume>volume</a></code>属性または<code id=mediaevents:dom-media-muted><a href=#dom-media-muted>muted</a></code>属性のいずれかが変更された。関連する属性のセッターが返された後に発火した。

     </td><td>

  </td></tr></table>


  <p>The following event fires on <code id=mediaevents:the-source-element><a href=#the-source-element>source</a></code> element:</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェース

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-source-error><code>error</code></dfn>

     </td><td><code id=mediaevents:event-24><a href=infrastructure.html#event>Event</a></code>

     </td><td>An error occurs while fetching the <a href=#media-data id=mediaevents:media-data-10>media data</a> or the type of the resource
     is not supported media format.

  

  </td></tr></table>


  <p><code id=mediaevents:mediacontroller><a href=#mediacontroller>MediaController</a></code>オブジェクトで次のイベントが発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェース

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-mediacontroller-emptied><code>emptied</code></dfn>

     </td><td><code id=mediaevents:event-25><a href=infrastructure.html#event>Event</a></code>

     </td><td>すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-2>従属メディア要素</a>は、新たに<code id=mediaevents:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>以上に設定した<code id=mediaevents:dom-media-readystate-9><a href=#dom-media-readystate>readyState</a></code>をもつか、または<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-3>従属メディア要素</a>がもはや存在しない。

    </td></tr><tr><td><dfn id=event-mediacontroller-loadedmetadata><code>loadedmetadata</code></dfn>

     </td><td><code id=mediaevents:event-26><a href=infrastructure.html#event>Event</a></code>

     </td><td>すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-4>従属メディア要素</a>の<code id=mediaevents:dom-media-readystate-10><a href=#dom-media-readystate>readyState</a></code>が新た<code id=mediaevents:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>以上に設定される。

    </td></tr><tr><td><dfn id=event-mediacontroller-loadeddata><code>loadeddata</code></dfn>

     </td><td><code id=mediaevents:event-27><a href=infrastructure.html#event>Event</a></code>

     </td><td>すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-5>従属メディア要素</a>の<code id=mediaevents:dom-media-readystate-11><a href=#dom-media-readystate>readyState</a></code>が新た<code id=mediaevents:dom-media-have_current_data-3><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>以上に設定される。

    </td></tr><tr><td><dfn id=event-mediacontroller-canplay><code>canplay</code></dfn>

     </td><td><code id=mediaevents:event-28><a href=infrastructure.html#event>Event</a></code>

     </td><td>すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-6>従属メディア要素</a>の<code id=mediaevents:dom-media-readystate-12><a href=#dom-media-readystate>readyState</a></code>が新た<code id=mediaevents:dom-media-have_future_data-4><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>以上に設定される。

    </td></tr><tr><td><dfn id=event-mediacontroller-canplaythrough><code>canplaythrough</code></dfn>

     </td><td><code id=mediaevents:event-29><a href=infrastructure.html#event>Event</a></code>

     </td><td>すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-7>従属メディア要素</a>の<code id=mediaevents:dom-media-readystate-13><a href=#dom-media-readystate>readyState</a></code>が新た<code id=mediaevents:dom-media-have_enough_data-2><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>に設定される。

    </td></tr><tr><td><dfn id=event-mediacontroller-playing><code>playing</code></dfn>

     </td><td><code id=mediaevents:event-30><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:mediacontroller-2><a href=#mediacontroller>MediaController</a></code>は、もはや<a href=#blocked-media-controller id=mediaevents:blocked-media-controller>ブロックメディアコントローラ</a>ではない。

    </td></tr><tr><td><dfn id=event-mediacontroller-waiting><code>waiting</code></dfn>

     </td><td><code id=mediaevents:event-31><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:mediacontroller-3><a href=#mediacontroller>MediaController</a></code>は現在、<a href=#blocked-media-controller id=mediaevents:blocked-media-controller-2>ブロックされたメディアコントローラ</a>である。

    </td></tr><tr><td><dfn id=event-mediacontroller-ended><code>ended</code></dfn>

     </td><td><code id=mediaevents:event-32><a href=infrastructure.html#event>Event</a></code>

     </td><td>すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-8>従属メディア要素</a>は、新たに<a href=#ended-playback id=mediaevents:ended-playback-2>再生を終了して</a>いる。<code id=mediaevents:mediacontroller-4><a href=#mediacontroller>MediaController</a></code>は、すべての<a href=#slaved-media-elements id=mediaevents:slaved-media-elements-9>従属メディア要素</a>の終わりに達した。

   <tbody></td></tr><tr><td><dfn id=event-mediacontroller-durationchange><code>durationchange</code></dfn>

     </td><td><code id=mediaevents:event-33><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-mediacontroller-duration><a href=#dom-mediacontroller-duration>duration</a></code>属性はちょうど更新された。

    </td></tr><tr><td><dfn id=event-mediacontroller-timeupdate><code>timeupdate</code></dfn>

     </td><td><code id=mediaevents:event-34><a href=infrastructure.html#event>Event</a></code>

     </td><td><a href=#media-controller-position id=mediaevents:media-controller-position-2>メディアコントローラの位置</a>が変更された。

    </td></tr><tr><td><dfn id=event-mediacontroller-play><code>play</code></dfn>

     </td><td><code id=mediaevents:event-35><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-mediacontroller-paused><a href=#dom-mediacontroller-paused>paused</a></code>属性が新たにfalseである。

    </td></tr><tr><td><dfn id=event-mediacontroller-pause><code>pause</code></dfn>

     </td><td><code id=mediaevents:event-36><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-mediacontroller-paused-2><a href=#dom-mediacontroller-paused>paused</a></code>属性が新たにtrueである。

    </td></tr><tr><td><dfn id=event-mediacontroller-ratechange><code>ratechange</code></dfn>

     </td><td><code id=mediaevents:event-37><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-mediacontroller-defaultplaybackrate><a href=#dom-mediacontroller-defaultplaybackrate>defaultPlaybackRate</a></code>属性または<code id=mediaevents:dom-mediacontroller-playbackrate><a href=#dom-mediacontroller-playbackrate>playbackRate</a></code>属性がちょうど更新されたかのいずれか。

    </td></tr><tr><td><dfn id=event-mediacontroller-volumechange><code>volumechange</code></dfn>

     </td><td><code id=mediaevents:event-38><a href=infrastructure.html#event>Event</a></code>

     </td><td><code id=mediaevents:dom-mediacontroller-volume><a href=#dom-mediacontroller-volume>volume</a></code>属性または<code id=mediaevents:dom-mediacontroller-muted><a href=#dom-mediacontroller-muted>muted</a></code>属性がちょうど更新されたかのいずれか。

  </td></tr></table>


  <p><code id=mediaevents:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>、<code id=mediaevents:videotracklist><a href=#videotracklist>VideoTrackList</a></code>、および<code id=mediaevents:texttracklist><a href=#texttracklist>TextTrackList</a></code> オブジェクトで次のイベントが発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェース

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-media-change><code>change</code></dfn>

     </td><td><code id=mediaevents:event-39><a href=infrastructure.html#event>Event</a></code>

     </td><td>トラックリストの1つ以上のトラックが有効か無効である。

    </td></tr><tr><td><dfn id=event-media-addtrack><code>addtrack</code></dfn>

     </td><td><code id=mediaevents:trackevent><a href=#trackevent>TrackEvent</a></code>

     </td><td>トラックはトラックリストに加えられている。

    </td></tr><tr><td><dfn id=event-media-removetrack><code>removetrack</code></dfn>

     </td><td><code id=mediaevents:trackevent-2><a href=#trackevent>TrackEvent</a></code>

     </td><td>トラックはトラックリストから削除されている。

  </td></tr></table>



  <p>以下のイベントは、<code id=mediaevents:texttrack><a href=#texttrack>TextTrack</a></code>オブジェクトおよび<code id=mediaevents:the-track-element><a href=#the-track-element>track</a></code>要素で発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェース

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-media-cuechange><code>cuechange</code></dfn>

     </td><td><code id=mediaevents:event-40><a href=infrastructure.html#event>Event</a></code>

     </td><td>トラック内の1つ以上のキューがアクティブになるか、アクティブで停止している。

  </td></tr></table>


  <p>次のイベントは、<code id=mediaevents:the-track-element-2><a href=#the-track-element>track</a></code>要素で発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェース

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-track-error><code>error</code></dfn>

     </td><td><code id=mediaevents:event-41><a href=infrastructure.html#event>Event</a></code>

     </td><td>An error occurs while fetching the track data or the type of the resource is not supported text track format.

    

    </td></tr><tr><td><dfn id=event-track-load><code>load</code></dfn>

     </td><td><code id=mediaevents:event-42><a href=infrastructure.html#event>Event</a></code>

     </td><td>A track data has been fetched and successfully processed.
  
  </td></tr></table>


  <p>次のイベントは、<code id=mediaevents:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code>オブジェクトで発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェース

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-media-enter><code>enter</code></dfn>

     </td><td><code id=mediaevents:event-43><a href=infrastructure.html#event>Event</a></code>

     </td><td>キューはアクティブになっている。

    </td></tr><tr><td><dfn id=event-media-exit><code>exit</code></dfn>

     </td><td><code id=mediaevents:event-44><a href=infrastructure.html#event>Event</a></code>

     </td><td>キューはアクティブになるのを停止している。

  </td></tr></table>



  

  <h5 id=security-and-privacy-considerations>4.8.13.17 Security and privacy considerations</h5>

  <p>The main security and privacy implications of the <code id=security-and-privacy-considerations:the-video-element><a href=#the-video-element>video</a></code> and <code id=security-and-privacy-considerations:the-audio-element><a href=#the-audio-element>audio</a></code>
  elements come from the ability to embed media cross-origin. There are two directions that threats
  can flow: from hostile content to a victim page, and from a hostile page to victim content.</p>

  <hr>

  <p>If a victim page embeds hostile content, the threat is that the content might contain scripted
  code that attempts to interact with the <code id=security-and-privacy-considerations:document><a href=dom.html#document>Document</a></code> that embeds the content. To avoid
  this, user agents must ensure that there is no access from the content to the embedding page. In
  the case of media content that uses DOM concepts, the embedded content must be treated as if it
  was in its own unrelated <a id=security-and-privacy-considerations:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a>.</p>

  <p class=example>For instance, if an SVG animation was embedded in a <code id=security-and-privacy-considerations:the-video-element-2><a href=#the-video-element>video</a></code> element,
  the user agent would not give it access to the DOM of the outer page. From the perspective of
  scripts in the SVG resource, the SVG file would appear to be in a lone top-level browsing context
  with no parent.</p>

  <hr>

  <p>If a hostile page embeds victim content, the threat is that the embedding page could obtain
  information from the content that it would not otherwise have access to. The API does expose some
  information: the existence of the media, its type, its duration, its size, and the performance
  characteristics of its host. Such information is already potentially problematic, but in practice
  the same information can more or less be obtained using the <code id=security-and-privacy-considerations:the-img-element><a href=#the-img-element>img</a></code> element, and so it
  has been deemed acceptable.</p>

  <p>However, significantly more sensitive information could be obtained if the user agent further
  exposes metadata within the content such as subtitles or chapter titles. Such information is
  therefore only exposed if the video resource passes a CORS <span>resource sharing check</span>.
  The <code id=security-and-privacy-considerations:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> attribute allows authors to control
  how this check is performed. <a href=references.html#refsFETCH>[FETCH]</a></p>

  <p class=example>Without this restriction, an attacker could trick a user running within a
  corporate network into visiting a site that attempts to load a video from a previously leaked
  location on the corporation's intranet. If such a video included confidential plans for a new
  product, then being able to read the subtitles would present a serious confidentiality breach.</p>

  



  <h5 id=best-practices-for-authors-using-media-elements>4.8.13.18 メディア要素を使用する著者に対するベストプラクティス</h5>

  <p><i>この節は非規範的である。</i></p>

  <p>セットトップボックスや携帯電話などの小型機器上でオーディオおよびビデオを再生するリソースは多くの場合、限られたデバイスのハードウェアリソースによって制限される。たとえば、デバイスは3つの一斉ビデオのみをサポートするかもしれない。このような理由から、要素への参照をすべて削除することに関して非常に慎重であり、かつガーベジコレクションすることによって、または要素の<code id=best-practices-for-authors-using-media-elements:attr-media-src><a href=#attr-media-src>src</a></code>属性と任意の<code id=best-practices-for-authors-using-media-elements:the-source-element><a href=#the-source-element>source</a></code>要素の子孫を削除してから、要素の<code id=best-practices-for-authors-using-media-elements:dom-media-load><a href=#dom-media-load>load()</a></code>メソッドを呼び出ことによってのいずれかで、それらが再生し終わった際、<a href=#media-element id=best-practices-for-authors-using-media-elements:media-element>メディア要素</a>が保持するリソースを解放することを推奨する。</p>

  <p>同様に、再生速度が正確に1.0でない場合、ハードウェア、ソフトウェア、またはフォーマットの制限はビデオフレームに欠落や、オーディオに音途切れや無音をもたらすかもしれない。</p>


  

  <h5 id=best-practices-for-implementors-of-media-elements>4.8.13.19 メディア要素を使用する著者に対するベストプラクティス</h5>

  <p><i>この節は非規範的である。</i></p>

  <p>How accurately various aspects of the <a href=#media-element id=best-practices-for-implementors-of-media-elements:media-element>media element</a> API are implemented is
  considered a quality-of-implementation issue.</p>

  <p>For example, when implementing the <code id=best-practices-for-implementors-of-media-elements:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code> attribute,
  how precise an implementation reports the ranges that have been buffered depends on how carefully
  the user agent inspects the data. Since the API reports ranges as times, but the data is obtained
  in byte streams, a user agent receiving a variable-bit-rate stream might only be able to determine
  precise times by actually decoding all of the data. User agents aren't required to do this,
  however; they can instead return estimates (e.g. based on the average bitrate seen so far) which
  get revised as more information becomes available.</p>

  <p>As a general rule, user agents are urged to be conservative rather than optimistic. For
  example, it would be bad to report that everything had been buffered when it had not.</p>

  <p>Another quality-of-implementation issue would be playing a video backwards when the codec is
  designed only for forward playback (e.g. there aren't many key frames, and they are far apart, and
  the intervening frames only have deltas from the previous frame). User agents could do a poor job,
  e.g. only showing key frames; however, better implementations would do more work and thus do a
  better job, e.g. actually decoding parts of the video forwards, storing the complete frames, and
  then playing the frames backwards.</p>

  <p>Similarly, while implementations are allowed to drop buffered data at any time (there is no
  requirement that a user agent keep all the media data obtained for the lifetime of the media
  element), it is again a quality of implementation issue: user agents with sufficient resources to
  keep all the data around are encouraged to do so, as this allows for a better user experience. For
  example, if the user is watching a live stream, a user agent could allow the user only to view the
  live video; however, a better user agent would buffer everything and allow the user to seek
  through the earlier material, pause it, play it forwards and backwards, etc.</p>

  <p>When multiple tracks are synchronised with a <code id=best-practices-for-implementors-of-media-elements:mediacontroller><a href=#mediacontroller>MediaController</a></code>, it is possible for
  scripts to add and remove media elements from the <code id=best-practices-for-implementors-of-media-elements:mediacontroller-2><a href=#mediacontroller>MediaController</a></code>'s list of
  <a href=#slaved-media-elements id=best-practices-for-implementors-of-media-elements:slaved-media-elements>slaved media elements</a>, even while these tracks are playing. How smoothly the media
  plays back in such situations is another quality-of-implementation issue.</p>

  <hr>

  <p>When a <a href=#media-element id=best-practices-for-implementors-of-media-elements:media-element-2>media element</a> that is paused is <a href=infrastructure.html#remove-an-element-from-a-document id=best-practices-for-implementors-of-media-elements:remove-an-element-from-a-document>removed from a document</a> and not reinserted before the next time the <a id=best-practices-for-implementors-of-media-elements:event-loop href=webappapis.html#event-loop>event
  loop</a> reaches <a href=webappapis.html#step1>step 1</a>, implementations that are resource constrained are encouraged to take
  that opportunity to release all hardware resources (like video planes, networking resources, and
  data buffers) used by the <a href=#media-element id=best-practices-for-implementors-of-media-elements:media-element-3>media element</a>. (User agents still have to keep track of the
  playback position and so forth, though, in case playback is later restarted.)</p>

  



  <h4 id=the-map-element>4.8.14 <dfn><code>map</code></dfn>要素</h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-map-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-map-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-map-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-map-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-map-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-map-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-map-element:concept-element-content-model>コンテンツモデル</a>：<dd><a id=the-map-element:transparent href=dom.html#transparent>透過的</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-map-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-map-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-map-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-map-element:attr-map-name><a href=#attr-map-name>name</a></code> - <code id=the-map-element:attr-hyperlink-usemap><a href=#attr-hyperlink-usemap>usemap</a></code>属性から参照する<a href=#image-map id=the-map-element:image-map>イメージマップ</a>名 <dt><a href=dom.html#concept-element-dom id=the-map-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlmapelement>HTMLMapElement</dfn> : <a id=the-map-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-map-name id=the-map-element:dom-map-name>name</a>;
  [SameObject] readonly attribute <a id=the-map-element:htmlcollection href=infrastructure.html#htmlcollection>HTMLCollection</a> <a href=#dom-map-areas id=the-map-element:dom-map-areas>areas</a>;
};</pre>
   </dl>

  <p><code id=the-map-element:the-map-element><a href=#the-map-element>map</a></code>要素は、<code id=the-map-element:the-img-element><a href=#the-img-element>img</a></code>要素および任意の<code id=the-map-element:the-area-element><a href=#the-area-element>area</a></code>要素の子孫と連動して、<a href=#image-map id=the-map-element:image-map-2>イメージマップ</a>を定義する。要素は、その子を<a id=the-map-element:represents href=dom.html#represents>表す</a>。</p>

  <p><dfn id=attr-map-name><code>name</code></dfn>属性は、マップを参照できるようマップに名前を与える。属性は存在しなければならず、<a href=infrastructure.html#space-character id=the-map-element:space-character>空白文字</a>なしで非空白の値を持たなければならない。<code id=the-map-element:attr-map-name-2><a href=#attr-map-name>name</a></code>属性の値は、同じ文書で別の<code id=the-map-element:the-map-element-2><a href=#the-map-element>map</a></code>要素の<code id=the-map-element:attr-map-name-3><a href=#attr-map-name>name</a></code>属性値とマッチする<a href=infrastructure.html#compatibility-caseless id=the-map-element:compatibility-caseless>互換性大文字・小文字不区別</a>であってはならない。<code id=the-map-element:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code>属性がまた指定される場合、両方の属性が同じ値を持たなければならない。</p>


  <dl class=domintro><dt><var>map</var> . <code id=the-map-element:dom-map-areas-2><a href=#dom-map-areas>areas</a></code><dd>

    <p><code id=the-map-element:the-map-element-3><a href=#the-map-element>map</a></code>の<code id=the-map-element:the-area-element-2><a href=#the-area-element>area</a></code>要素の<code id=the-map-element:htmlcollection-2><a href=infrastructure.html#htmlcollection>HTMLCollection</a></code>を返す。</p>

   </dl>

  

  <p><dfn id=dom-map-areas><code>areas</code></dfn>属性は、フィルタが<code id=the-map-element:the-area-element-3><a href=#the-area-element>area</a></code>要素のみに一致する、<code id=the-map-element:the-map-element-4><a href=#the-map-element>map</a></code>要素でルートとなる<code id=the-map-element:htmlcollection-3><a href=infrastructure.html#htmlcollection>HTMLCollection</a></code>を返さなければならない。</p>

  <p><dfn id=dom-map-name><code>name</code></dfn>IDL属性は、同じ名前のコンテンツ属性を<a id=the-map-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  


  <div class=example>

   <p>イメージマップは、メンテナンスを容易にするために、ページ上の他のコンテンツと組み合わせて定義できる。この例は、ページの上部に、イメージマップと下部のテキストリンクの対応するセットを使用したページである。</p>

   <pre>&lt;!DOCTYPE HTML&gt;
&lt;TITLE&gt;Babies™: Toys&lt;/TITLE&gt;
&lt;HEADER&gt;
 &lt;H1&gt;Toys&lt;/H1&gt;
 &lt;IMG SRC="/images/menu.gif"
      ALT="Babies™ navigation menu. Select a department to go to its page."
      USEMAP="#NAV"&gt;
&lt;/HEADER&gt;
 ...
&lt;FOOTER&gt;
 &lt;MAP NAME="NAV"&gt;
  &lt;P&gt;
   &lt;A HREF="/clothes/"&gt;Clothes&lt;/A&gt;
   &lt;AREA ALT="Clothes" COORDS="0,0,100,50" HREF="/clothes/"&gt; |
   &lt;A HREF="/toys/"&gt;Toys&lt;/A&gt;
   &lt;AREA ALT="Toys" COORDS="100,0,200,50" HREF="/toys/"&gt; |
   &lt;A HREF="/food/"&gt;Food&lt;/A&gt;
   &lt;AREA ALT="Food" COORDS="200,0,300,50" HREF="/food/"&gt; |
   &lt;A HREF="/books/"&gt;Books&lt;/A&gt;
   &lt;AREA ALT="Books" COORDS="300,0,400,50" HREF="/books/"&gt;
  &lt;/P&gt;
 &lt;/MAP&gt;
&lt;/FOOTER&gt;</pre>

  </div>



  <h4 id=the-area-element>4.8.15 <dfn><code>area</code></dfn>要素</h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-area-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-area-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-area-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-area-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-area-element:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>が期待される場所、ただし先祖<code id=the-area-element:the-map-element><a href=#the-map-element>map</a></code>要素または先祖<code id=the-area-element:the-template-element><a href=scripting.html#the-template-element>template</a></code>要素が存在する場合のみを除く。<dt><a href=dom.html#concept-element-content-model id=the-area-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-area-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-area-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-area-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-area-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-area-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-area-element:attr-area-alt><a href=#attr-area-alt>alt</a></code> — 画像が利用不可である場合に使用する置換テキスト<dd><code id=the-area-element:attr-area-coords><a href=#attr-area-coords>coords</a></code> - <a href=#image-map id=the-area-element:image-map>イメージマップ</a>内に作成する図形の座標<dd><code id=the-area-element:attr-area-shape><a href=#attr-area-shape>shape</a></code> - <a href=#image-map id=the-area-element:image-map-2>イメージマップ</a>内に作成する図形の種類<dd><code id=the-area-element:attr-hyperlink-href><a href=semantics.html#attr-hyperlink-href>href</a></code> — <a id=the-area-element:hyperlink href=semantics.html#hyperlink>ハイパーリンク</a>のアドレス<dd><code id=the-area-element:attr-hyperlink-target><a href=semantics.html#attr-hyperlink-target>target</a></code> -<a id=the-area-element:hyperlink-2 href=semantics.html#hyperlink>ハイパーリンク</a><a href=browsers.html#navigate id=the-area-element:navigate>ナビゲーション</a>に対する<a id=the-area-element:browsing-context href=browsers.html#browsing-context>ブラウジングコンテキスト</a><dd><code id=the-area-element:attr-hyperlink-download><a href=semantics.html#attr-hyperlink-download>download</a></code> — リソースをナビゲートする代わりにダウンロードし、その場合リソースのファイル名にするかどうか<dd><code id=the-area-element:ping><a href=semantics.html#ping>ping</a></code> — <a href=infrastructure.html#url id=the-area-element:url>URL</a>へのping<dd><code id=the-area-element:attr-hyperlink-rel><a href=semantics.html#attr-hyperlink-rel>rel</a></code> — ハイパーリンクと宛先のリソースを含む文書の関係<dt><a href=dom.html#concept-element-dom id=the-area-element:concept-element-dom>DOMインターフェース</a>：<dd>
<pre class=idl>interface <dfn id=htmlareaelement>HTMLAreaElement</dfn> : <a id=the-area-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  attribute DOMString <a href=#dom-area-alt id=the-area-element:dom-area-alt>alt</a>;
  attribute DOMString <a href=#dom-area-coords id=the-area-element:dom-area-coords>coords</a>;
  attribute DOMString <a href=#dom-area-shape id=the-area-element:dom-area-shape>shape</a>;
  attribute DOMString <a href=#dom-area-target id=the-area-element:dom-area-target>target</a>;
  attribute DOMString <a href=#dom-area-download id=the-area-element:dom-area-download>download</a>;
  [SameObject, PutForwards=<a href=infrastructure.html#dom-domtokenlist-value id=the-area-element:dom-domtokenlist-value>value</a>] readonly attribute <a id=the-area-element:domtokenlist href=infrastructure.html#domtokenlist>DOMTokenList</a> <a href=#dom-area-ping id=the-area-element:dom-area-ping>ping</a>;
  attribute DOMString <a href=#dom-area-rel id=the-area-element:dom-area-rel>rel</a>;
  [SameObject, PutForwards=<a href=infrastructure.html#dom-domtokenlist-value id=the-area-element:dom-domtokenlist-value-2>value</a>] readonly attribute <a id=the-area-element:domtokenlist-2 href=infrastructure.html#domtokenlist>DOMTokenList</a> <a href=#dom-area-rellist id=the-area-element:dom-area-rellist>relList</a>;
};
<a href=#htmlareaelement id=the-area-element:htmlareaelement>HTMLAreaElement</a> implements <a id=the-area-element:htmlhyperlinkelementutils href=semantics.html#htmlhyperlinkelementutils>HTMLHyperlinkElementUtils</a>;</pre>
   </dl>

  <p><code id=the-area-element:the-area-element><a href=#the-area-element>area</a></code>要素は、テキストと<a href=#image-map id=the-area-element:image-map-3>イメージマップ</a>で領域に対応をもつハイパーリンク、またはイメージマップ上の不感領域のいずれかを<a id=the-area-element:represents href=dom.html#represents>表す</a>。</p>

  <p>親ノードとともに<code id=the-area-element:the-area-element-2><a href=#the-area-element>area</a></code>要素は、<code id=the-area-element:the-map-element-2><a href=#the-map-element>map</a></code>要素の祖先または<code id=the-area-element:the-template-element-2><a href=scripting.html#the-template-element>template</a></code>要素の祖先を持たなければならない。</p>

  <p><code id=the-area-element:the-area-element-3><a href=#the-area-element>area</a></code>要素が<code id=the-area-element:attr-hyperlink-href-2><a href=semantics.html#attr-hyperlink-href>href</a></code>属性を持つ場合、<code id=the-area-element:the-area-element-4><a href=#the-area-element>area</a></code>要素は<a id=the-area-element:hyperlink-3 href=semantics.html#hyperlink>ハイパーリンク</a>を表す。この場合、<dfn id=attr-area-alt><code>alt</code></dfn>属性が存在しなければならない。この属性は、ハイパーリンクのテキストを指定する。属性値は、<a href=#image-map id=the-area-element:image-map-4>イメージマップ</a>の他のハイパーリンクに指定されるテキストを伴い、かつ画像の代替テキストを伴うが、画像なしで提示された場合、テキストでなければならず、テキストなしだが画像に適用される形状を伴うような場合、ハイパーリンクとして同じ選択の種類をユーザーに提供しなければならない。同じリソースを指す<a href=#image-map id=the-area-element:image-map-5>イメージマップ</a>と非空白の<code id=the-area-element:attr-area-alt-3><a href=#attr-area-alt>alt</a></code>属性を持つ別の<code id=the-area-element:the-area-element-5><a href=#the-area-element>area</a></code>要素が存在する場合、<code id=the-area-element:attr-area-alt-2><a href=#attr-area-alt>alt</a></code>属性は空白のままであってもよい。</p>

  <p><code id=the-area-element:the-area-element-6><a href=#the-area-element>area</a></code>要素が<code id=the-area-element:attr-hyperlink-href-3><a href=semantics.html#attr-hyperlink-href>href</a></code>属性を持たない場合、その要素によって表される領域を選択できず、<code id=the-area-element:attr-area-alt-4><a href=#attr-area-alt>alt</a></code>属性を省略しなければならない。</p>

  <p>どちらの場合も、<code id=the-area-element:attr-area-shape-2><a href=#attr-area-shape>shape</a></code>と<code id=the-area-element:attr-area-coords-2><a href=#attr-area-coords>coords</a></code>属性は領域を指定する。</p>

  <p><dfn id=attr-area-shape><code>shape</code></dfn>属性は、<a id=the-area-element:enumerated-attribute href=infrastructure.html#enumerated-attribute>列挙属性</a>である。以下の表は、この属性に対して定義されたキーワードを列挙する。キーワードとともにその行の最初のセルに与えられた状態は、これらキーワードが対応する状態を与える。最後の列に記載されているように、キーワードの一部は非適合である。</p>

  <table><thead><tr><th>状態
     </th><th>キーワード
     </th><th>注
   <tbody></th></tr><tr><td rowspan=2><a href=#attr-area-shape-circle id=the-area-element:attr-area-shape-circle>Circle state</a>
     </td><td><dfn id=attr-area-shape-keyword-circle><code>circle</code></dfn>
     </td><td>
    </td></tr><tr><td><dfn id=attr-area-shape-keyword-circ><code>circ</code></dfn>
     </td><td>非適合
    </td></tr><tr><td><a href=#attr-area-shape-default id=the-area-element:attr-area-shape-default>Default state</a>
     </td><td><dfn id=attr-area-shape-keyword-default><code>default</code></dfn>
     </td><td>
    </td></tr><tr><td rowspan=2><a href=#attr-area-shape-poly id=the-area-element:attr-area-shape-poly>Polygon state</a>
     </td><td><dfn id=attr-area-shape-keyword-poly><code>poly</code></dfn>
     </td><td>
    </td></tr><tr><td><dfn id=attr-area-shape-keyword-polygon><code>polygon</code></dfn>
     </td><td>非適合
    </td></tr><tr><td rowspan=2><a href=#attr-area-shape-rect id=the-area-element:attr-area-shape-rect>Rectangle state</a>
     </td><td><dfn id=attr-area-shape-keyword-rect><code>rect</code></dfn>
     </td><td>
    </td></tr><tr><td><dfn id=attr-area-shape-keyword-rectangle><code>rectangle</code></dfn>
     </td><td>非適合
  </td></tr></table>

  <p>属性は省略してもよい。<i id=the-area-element:missing-value-default><a href=infrastructure.html#missing-value-default>欠損値のデフォルト</a></i>は、<a href=#attr-area-shape-rect id=the-area-element:attr-area-shape-rect-2>rectangle</a>状態である。</p>

  <p><dfn id=attr-area-coords><code>coords</code></dfn>属性が指定される場合、<a id=the-area-element:valid-list-of-floating-point-numbers href=infrastructure.html#valid-list-of-floating-point-numbers>浮動小数点数の妥当なリスト</a>を含まなければならない。この属性は、<code id=the-area-element:attr-area-shape-3><a href=#attr-area-shape>shape</a></code>属性によって記述された図形の座標を与える。この属性に対する処理は、<a href=#image-map id=the-area-element:image-map-6>イメージマップ</a>処理モデルの一部として説明される。</p>

  

  <p><dfn id=attr-area-shape-circle>circle state</dfn>において、<code id=the-area-element:the-area-element-7><a href=#the-area-element>area</a></code>要素は、最後の整数は非負でなければならない、3つの整数とともに、存在する<code id=the-area-element:attr-area-coords-3><a href=#attr-area-coords>coords</a></code>属性を持たなければならない。最初の整数は画像の左端から円の中心までのCSSピクセル単位距離でなければならず、2番目の整数は画像の上端から円の中心までのCSSピクセル単位距離でなければならず、3番目の整数はCSSピクセル単位距離で円の半径でなければならない。</p>

  <p><dfn id=attr-area-shape-default>default state</dfn>状態において、<code id=the-area-element:the-area-element-8><a href=#the-area-element>area</a></code>要素は<code id=the-area-element:attr-area-coords-4><a href=#attr-area-coords>coords</a></code>属性を持ってはならない。（領域は全体の画像である。）</p>

  <p><dfn id=attr-area-shape-poly>polygon state</dfn>において、<code id=the-area-element:the-area-element-9><a href=#the-area-element>area</a></code>要素は少なくとも6つの整数をもつ<code id=the-area-element:attr-area-coords-5><a href=#attr-area-coords>coords</a></code>属性を持たなければならず、その整数は偶数個でなければならない。整数の各ペアは、CSSピクセルでそれぞれ画像の左からおよび上からの距離として指定された座標を表さなければならず、順に、すべての座標はポリゴンの点を表さなければならない。</p>

  <p><dfn id=attr-area-shape-rect>rectangle state</dfn>において、<code id=the-area-element:the-area-element-10><a href=#the-area-element>area</a></code>要素は正確に4つの整数をもつ<code id=the-area-element:attr-area-coords-6><a href=#attr-area-coords>coords</a></code>属性を持たなければならない。1番目の整数は3番目の整数未満でなければならず、2番目の整数は4番目の整数未満でなければならない。4点は、それぞれすべてCSSピクセルで、矩形の左側から画像の左辺までの距離、上側から上辺までの距離、左側から左辺までの距離、下側から上辺までの距離を表さなければならない。</p>

  

  <p>次のセクションで説明するように、ユーザーエージェントが<code id=the-area-element:the-area-element-11><a href=#the-area-element>area</a></code>要素を使用して作成される<a href=semantics.html#following-hyperlinks-2 id=the-area-element:following-hyperlinks-2>ハイパーリンクを辿る</a>または<a href=semantics.html#downloading-hyperlinks id=the-area-element:downloading-hyperlinks>ハイパーリンクをダウンロードする</a>ことをユーザーに可能にする場合、<code id=the-area-element:attr-hyperlink-href-4><a href=semantics.html#attr-hyperlink-href>href</a></code>、<code id=the-area-element:attr-hyperlink-target-2><a href=semantics.html#attr-hyperlink-target>target</a></code>、<code id=the-area-element:attr-hyperlink-download-2><a href=semantics.html#attr-hyperlink-download>download</a></code>および<code id=the-area-element:ping-2><a href=semantics.html#ping>ping</a></code>属性は、リンクが辿られる方法を決定する。<code id=the-area-element:attr-hyperlink-rel-2><a href=semantics.html#attr-hyperlink-rel>rel</a></code>属性は、ユーザーがリンクを辿る前に対象のリソースの見込みのある性質をユーザーに表すために使用されてもよい。</p>

  

  <p><code id=the-area-element:attr-hyperlink-href-5><a href=semantics.html#attr-hyperlink-href>href</a></code>属性が存在しない場合、<code id=the-area-element:attr-hyperlink-target-3><a href=semantics.html#attr-hyperlink-target>target</a></code>、<code id=the-area-element:attr-hyperlink-download-3><a href=semantics.html#attr-hyperlink-download>download</a></code>、<code id=the-area-element:ping-3><a href=semantics.html#ping>ping</a></code>、および<code id=the-area-element:attr-hyperlink-rel-3><a href=semantics.html#attr-hyperlink-rel>rel</a></code>属性は省略しなければならない。</p>

  <p><code id=the-area-element:the-area-element-12><a href=#the-area-element>area</a></code>要素で<code id=the-area-element:names:-the-itemprop-attribute><a href=microdata.html#names:-the-itemprop-attribute>itemprop</a></code>が指定される場合、<code id=the-area-element:attr-hyperlink-href-6><a href=semantics.html#attr-hyperlink-href>href</a></code>属性も指定されなければならない。</p>

  

  <p><code id=the-area-element:the-area-element-13><a href=#the-area-element>area</a></code> 要素の<a id=the-area-element:activation-behaviour href=interaction.html#activation-behaviour>活性化挙動</a>は、次の手順を実行するものである：</p>

  <ol><li><p><code id=the-area-element:the-area-element-14><a href=#the-area-element>area</a></code>要素の<a id=the-area-element:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>ノード文書</a>が<a id=the-area-element:fully-active href=browsers.html#fully-active>完全にアクティブ</a>でない場合、この手順を中止する。</li><li>

    <p><code id=the-area-element:the-area-element-15><a href=#the-area-element>area</a></code>要素が<code id=the-area-element:attr-hyperlink-download-4><a href=semantics.html#attr-hyperlink-download>download</a></code>属性を持ちかつアルゴリズムは<a id=the-area-element:allowed-to-show-a-popup href=browsers.html#allowed-to-show-a-popup>ポップアップ表示を許可</a>しない、またはユーザーがリンクを辿るための特定の<a id=the-area-element:browsing-context-2 href=browsers.html#browsing-context>ブラウジングコンテキスト</a>を示しておらずかつ要素の<code id=the-area-element:attr-hyperlink-target-4><a href=semantics.html#attr-hyperlink-target>target</a></code>属性が存在し、<a id=the-area-element:the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name href=browsers.html#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name>与えられたブラウジングコンテキスト名を選択するための規則</a>を適用する、ブラウジングコンテキスト名として<code id=the-area-element:attr-hyperlink-target-5><a href=semantics.html#attr-hyperlink-target>target</a></code>属性の値を使用する場合、選択されていないブラウジングコンテキストをもたらし、次の下位手順を実行する：</p>

    <ol><li><p><a id=the-area-element:entry-settings-object href=webappapis.html#entry-settings-object>設定オブジェクトのエントリー</a>が存在する場合、<code id=the-area-element:invalidaccesserror><a href=infrastructure.html#invalidaccesserror>InvalidAccessError</a></code>例外を投げる。</li><li><p>ハイパーリンクを辿らずこの手順を中止する。</li></ol>

   </li><li><p>ユーザーエージェントは、<code id=the-area-element:attr-hyperlink-download-5><a href=semantics.html#attr-hyperlink-download>download</a></code>属性によって決定されるおよび任意の表現されるユーザーの好みとして、<code id=the-area-element:the-area-element-16><a href=#the-area-element>area</a></code>要素によって作成される<a href=semantics.html#following-hyperlinks-2 id=the-area-element:following-hyperlinks-2-2>ハイパーリンクを辿る</a>または<a href=semantics.html#downloading-hyperlinks id=the-area-element:downloading-hyperlinks-2>ハイパーリンクをダウンロード</a>しなければならない。</li></ol>

  <p>IDL属性<dfn id=dom-area-alt><code>alt</code></dfn>、<dfn id=dom-area-coords><code>coords</code></dfn>、<dfn id=dom-area-target><code>target</code></dfn>、<dfn id=dom-area-download><code>download</code></dfn>、<dfn id=dom-area-ping><code>ping</code></dfn>、および<dfn id=dom-area-rel><code>rel</code></dfn>、は、同じ名前のそれぞれのコンテンツ属性を<a id=the-area-element:reflect href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p>IDL属性<dfn id=dom-area-shape><code>shape</code></dfn>は、<code id=the-area-element:attr-area-shape-4><a href=#attr-area-shape>shape</a></code>コンテンツ属性を<a id=the-area-element:reflect-2 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  <p>IDL属性<dfn id=dom-area-rellist><code>relList</code></dfn>は、<code id=the-area-element:attr-hyperlink-rel-4><a href=semantics.html#attr-hyperlink-rel>rel</a></code>コンテンツ属性を<a id=the-area-element:reflect-3 href=infrastructure.html#reflect>反映</a>しなければならない。</p>

  



  <h4 id=image-maps>4.8.16 イメージマップ</h4>

  

  

  <h5 id=authoring>4.8.16.1 オーサリング</h5>

  

  <p><dfn id=image-map>イメージマップ</dfn>は、<a href=semantics.html#hyperlink id=authoring:hyperlink>ハイパーリンク</a>に関連付けられるような画像で幾何学的な領域を可能にする。</p>

  <p><code id=authoring:the-img-element><a href=#the-img-element>img</a></code>要素や画像を表す<code id=authoring:the-object-element><a href=#the-object-element>object</a></code>要素の形式において、画像は、<code id=authoring:the-img-element-2><a href=#the-img-element>img</a></code>や<code id=authoring:the-object-element-2><a href=#the-object-element>object</a></code>要素上で<dfn id=attr-hyperlink-usemap><code>usemap</code></dfn>属性を指定することにより（<code id=authoring:the-map-element><a href=#the-map-element>map</a></code>要素の形式で）イメージマップに関連付けてもよい。<code id=authoring:attr-hyperlink-usemap><a href=#attr-hyperlink-usemap>usemap</a></code>属性が指定される場合、<code id=authoring:the-map-element-2><a href=#the-map-element>map</a></code>要素に<a id=authoring:valid-hash-name-reference href=infrastructure.html#valid-hash-name-reference>妥当なハッシュ名の参照</a>でなければならない。</p>

  <div class=example>

   <p>次のような画像を考えてみよう：</p>

   <p><img src=https://html.spec.whatwg.org/multipage/images/sample-usemap.png width=600 alt="A line with four shapes in it, equally spaced: a red hollow box, a green circle, a blue triangle, and a yellow four-pointed star." height=150></p>

   <p>色付きの領域のみをクリック可能にしたい場合、次のようにするだろう：</p>

   <pre>&lt;p&gt;
 Please select a shape:
 &lt;img src="shapes.png" usemap="#shapes"
      alt="Four shapes are available: a red hollow box, a green circle, a blue triangle, and a yellow four-pointed star."&gt;
 &lt;map name="shapes"&gt;
  &lt;area shape=rect coords="50,50,100,100"&gt; &lt;!-- the hole in the red box --&gt;
  &lt;area shape=rect coords="25,25,125,125" href="red.html" alt="Red box."&gt;
  &lt;area shape=circle coords="200,75,50" href="green.html" alt="Green circle."&gt;
  &lt;area shape=poly coords="325,25,262,125,388,125" href="blue.html" alt="Blue triangle."&gt;
  &lt;area shape=poly coords="450,25,435,60,400,75,435,90,450,125,465,90,500,75,465,60"
        href="yellow.html" alt="Yellow star."&gt;
 &lt;/map&gt;
&lt;/p&gt;</pre>

  </div>

  

  <h5 id=processing-model>4.8.16.2 処理モデル</h5>

  <p>画像を表す<code id=processing-model:the-img-element><a href=#the-img-element>img</a></code>要素または<code id=processing-model:the-object-element><a href=#the-object-element>object</a></code>要素が<code id=processing-model:attr-hyperlink-usemap><a href=#attr-hyperlink-usemap>usemap</a></code>属性を指定する場合、ユーザエージェントは次のように要素を処理しなければならない：</p>

  <ol><li><p>コンテキストノードとして要素の<a id=processing-model:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>ノード文書</a>をもつ、<code id=processing-model:the-map-element><a href=#the-map-element>map</a></code>要素に<a id=processing-model:rules-for-parsing-a-hash-name-reference href=infrastructure.html#rules-for-parsing-a-hash-name-reference>ハッシュ名参照を解析するための規則</a>を使用する属性値を解析する。これは、要素（<var>map</var>）またはnullのいずれかを返す。</li><li><p>それがnullを返した場合、この手順を中止する。画像は、結局のところイメージマップに関連付けられない。</li><li><p>そうでなければ、ユーザーエージェントは、<var>map</var>の子孫である全<code id=processing-model:the-area-element><a href=#the-area-element>area</a></code>要素を収集しなければならない。それらを<var>areas</var>にする。</li></ol>

  <p>イメージマップ（<var>areas</var>）を形成する<code id=processing-model:the-area-element-2><a href=#the-area-element>area</a></code>要素のリストを取得した、インタラクティブなユーザーエージェントは、2つのうちどちらかの方法でリストを処理しなければならない。</p>

  <p>ユーザーエージェントが<code id=processing-model:the-img-element-2><a href=#the-img-element>img</a></code>要素が表すテキストを表示しようとする場合、次の手順を使用しなければならない。</p>

  <p class=note>画像をサポートしない、または画像を無効するユーザーエージェントにおいて、<code id=processing-model:the-object-element-2><a href=#the-object-element>object</a></code>要素は画像を表現できず、したがってこのセクションは適用されない（<a id=processing-model:fallback-content href=dom.html#fallback-content>フォールバックコンテンツ</a>が代わりに表示される）。したがって次の手順は、<code id=processing-model:the-img-element-3><a href=#the-img-element>img</a></code>要素にのみ適用される。</p>

  <ol><li><p><code id=processing-model:attr-hyperlink-href><a href=semantics.html#attr-hyperlink-href>href</a></code>属性を持たない<var>areas</var>におけるすべての<code id=processing-model:the-area-element-3><a href=#the-area-element>area</a></code>要素を削除する。</li><li><p><code id=processing-model:attr-hyperlink-href-2><a href=semantics.html#attr-hyperlink-href>href</a></code>属性で同じ値をもつおよび空でない<code id=processing-model:attr-area-alt-3><a href=#attr-area-alt>alt</a></code>属性も持つ<var>areas</var>における別の<code id=processing-model:the-area-element-5><a href=#the-area-element>area</a></code>の要素が存在する<em>場合</em>、<code id=processing-model:attr-area-alt><a href=#attr-area-alt>alt</a></code>属性を持たないまたはその<code id=processing-model:attr-area-alt-2><a href=#attr-area-alt>alt</a></code>属性の値が空文字列である、<var>areas</var>におけるすべての<code id=processing-model:the-area-element-4><a href=#the-area-element>area</a></code>要素を削除する。</li><li><p><var>areas</var>における残りの各<code id=processing-model:the-area-element-6><a href=#the-area-element>area</a></code>要素は、<a id=processing-model:hyperlink href=semantics.html#hyperlink>ハイパーリンク</a>を表す。このハイパーリンクは、すべての<code id=processing-model:the-img-element-4><a href=#the-img-element>img</a></code>のテキストに関連した方法でユーザーに利用できるようにすべきである。</p>

   <p>このコンテキストにおいて、ユーザエージェントは、適切な著者提供テキストの欠如を示すことを意図したユーザーエージェント定義の方法で、指定された<code>alt</code>属性をもたない、または<code>alt</code>属性が空文字列または一部の他の非表示テキストである<code id=processing-model:the-area-element-7><a href=#the-area-element>area</a></code>および<code id=processing-model:the-img-element-5><a href=#the-img-element>img</a></code>要素を表してもよい。</li></ol>

  <p>ユーザーエージェントが画像を表示することを意図し、かつハイパーリンクを選択する画像との相互作用を可能にする場合、その画像は、逆<a id=processing-model:tree-order href=infrastructure.html#tree-order>ツリー</a>順で、<var>areas</var>で<code id=processing-model:the-area-element-8><a href=#the-area-element>area</a></code>要素から採取した、層状の形状のセットに関連付けられなければならない（よって、<a id=processing-model:tree-order-2 href=infrastructure.html#tree-order>ツリー順</a>に、<var>map</var>における最後に指定された<code id=processing-model:the-area-element-9><a href=#the-area-element>area</a></code>要素が一番下の形状であり、かつ<var>map</var>における最初の要素が最上位の形状である）。</p>

  <p><var>areas</var>における各<code id=processing-model:the-area-element-10><a href=#the-area-element>area</a></code>要素は、画像の上に層状にする形状を得るために、次のように処理されなければならない：</p>

  <ol><li><p>要素の<code id=processing-model:attr-area-shape><a href=#attr-area-shape>shape</a></code>属性が表す状態を検索する。</li><li><p>存在する場合、要素の<code id=processing-model:attr-area-coords><a href=#attr-area-coords>coords</a></code>属性を解析するために<a id=processing-model:rules-for-parsing-a-list-of-floating-point-numbers href=infrastructure.html#rules-for-parsing-a-list-of-floating-point-numbers>浮動小数点数のリストを解析するための規則</a>を使用し、結果を<var>coords</var>リストにする。属性が存在しない場合、<var>coords</var>リストを空のリストにする。</li><li>

    <p><var>coords</var>リストにおける項目の数が、次の表の通り、<code id=processing-model:the-area-element-11><a href=#the-area-element>area</a></code>要素の現在の状態で指定される最小数よりも小さい場合、形状は空である。この手順を中止する。</p>

    <table><thead><tr><th>状態
       </th><th>最小項目数
     <tbody></th></tr><tr><td><a href=#attr-area-shape-circle id=processing-model:attr-area-shape-circle>Circle state</a>
       </td><td>3
      
      </td></tr><tr><td><a href=#attr-area-shape-default id=processing-model:attr-area-shape-default>Default state</a>
       </td><td>0
      
      </td></tr><tr><td><a href=#attr-area-shape-poly id=processing-model:attr-area-shape-poly>Polygon state</a>
       </td><td>6
      
      </td></tr><tr><td><a href=#attr-area-shape-rect id=processing-model:attr-area-shape-rect>Rectangle state</a>
       </td><td>4
    
    </td></tr></table>

   </li><li>

    <p><code id=processing-model:attr-area-shape-2><a href=#attr-area-shape>shape</a></code>属性の状態に対応する次のリストにおけるエントリーごとに<var>coords</var>リストにおける過剰項目をチェックする。</p>

    <dl class=switch><dt><a href=#attr-area-shape-circle id=processing-model:attr-area-shape-circle-2>Circle state</a><dd>3つを超えるリスト内の任意の項目を削除する。<dt><a href=#attr-area-shape-default id=processing-model:attr-area-shape-default-2>Default state</a><dd>リスト内のすべての項目を削除する。<dt><a href=#attr-area-shape-poly id=processing-model:attr-area-shape-poly-2>Polygon state</a><dd>項目の数が奇数である場合に最後の項目を削除する。<dt><a href=#attr-area-shape-rect id=processing-model:attr-area-shape-rect-2>Rectangle state</a><dd>4つを越えるリスト内の任意の項目を削除する。</dl>

   </li><li><p><code id=processing-model:attr-area-shape-3><a href=#attr-area-shape>shape</a></code>属性が<a href=#attr-area-shape-rect id=processing-model:attr-area-shape-rect-3>rectangle state</a>を表し、かつリストの最初の数がリストの3番目の数よりも数値的に大きい場合、周りでこの2つの数値を交換する。</li><li><p><code id=processing-model:attr-area-shape-4><a href=#attr-area-shape>shape</a></code>属性が<a href=#attr-area-shape-rect id=processing-model:attr-area-shape-rect-4>rectangle state</a>を表し、かつリストの2番目の数がリストの4番目の数よりも数値的に小さい場合、周りでこの2つの数値を交換する。</li><li><p><code id=processing-model:attr-area-shape-5><a href=#attr-area-shape>shape</a></code>属性が<a href=#attr-area-shape-circle id=processing-model:attr-area-shape-circle-3>circle state</a>を示し、リストの3番目の数が0以下である場合、形状が空であり、この手順を中止する。</li><li><p>さて、要素によって表される形状は、<code id=processing-model:attr-area-shape-6><a href=#attr-area-shape>shape</a></code>属性の状態に対応する次のリストの項目について説明されるいずれかである。</p>

    <dl class=switch><dt><a href=#attr-area-shape-circle id=processing-model:attr-area-shape-circle-4>Circle state</a><dd>

      <p><var>x</var>を<var>coords</var>における最初の数字にし、<var>y</var>を2番目に数字にし、<var>r</var>を3番目の数字にする。</p>

      <p>形状は、中心が画像の左端からの<var>x</var> CSSピクセルかつ画像の上端からの<var>y</var> CSSピクセルであり、かつ半径が<var>r</var>ピクセルである円となる。</p>

     <dt><a href=#attr-area-shape-default id=processing-model:attr-area-shape-default-3>Default state</a><dd>

      <p>形状は、正確に画像全体を覆う長方形である。</p>

     <dt><a href=#attr-area-shape-poly id=processing-model:attr-area-shape-poly-3>Polygon state</a><dd>

      <p><var>x<sub><var>i</var></sub></var>を<var>coords</var>で<span>(2<var>i</var>)</span>番目のエントリーにし、<var>y<sub><var>i</var></sub></var>を<var>coords</var>で<span>(2<var>i</var>+1)</span>番目のエントリーにする（インデックス0をもつ1つである<var>coords</var>の最初のエントリ）。</p>

      <p>画像の左上から測定されるCSSピクセルで解釈される、0から<span>(<var>N</var>/2)-1</span>までの<var>i</var>のすべての整数値について、<var>the coordinates</var>を(<var>x<sub><var>i</var></sub></var>, <var>y<sub><var>i</var></sub></var>)にする。ここで<var>N</var>は<var>COORDS</var>内の項目数である。</p>

      <p>形状は、頂点が奇偶規則を使用して確立された、頂点が<var>the coordinates</var>で与えられる多角形である。<a href=references.html#refsGRAPHICS>[GRAPHICS]</a></p>

      

     <dt><a href=#attr-area-shape-rect id=processing-model:attr-area-shape-rect-5>Rectangle state</a><dd>

      <p><var>x<sub>1</sub></var>を<var>coords</var>の最初の数、<var>y<sub>1</sub></var>を2番目の数、<var>x<sub>2</sub></var>を3番目の数、および<var>y<sub>2</sub></var>を4番目の数にする。</p>

      <p>形状は、左上隅が座標(<var>x<sub>1</sub></var>, <var>y<sub>1</sub></var>)によって与えられ、かつ右下隅が座標(<var>x<sub>2</sub></var>, <var>y<sub>2</sub></var>)で与えられる長方形であり、その座標は画像の左上隅からCSSピクセルとして解釈される。</p>

     </dl>

    <p>For historical reasons, the coordinates must be interpreted relative to the
    <em>displayed</em> image after any stretching caused by the CSS 'width' and 'height' properties
    (or, for non-CSS browsers, the image element's <code>width</code> and <code>height</code> attributes — CSS browsers map those attributes to the
    aforementioned CSS properties).</p>

    <p class=note>ブラウザーのズーム機能および変換は、座標に影響しないCSSまたはSVGを使用して適用される。</p>

   </li></ol>

  <p>その点を覆う形状が存在しない場合、上記のアルゴリズムごとに積層形状のセットに関連する画像をもつポインティングデバイス作用は、ポインティングデバイスが指示した点、もしあれば、または画像要素自身を覆う最上位の形状に最初に発火される関連するユーザーとの対話イベントをもたらさなければならない。ユーザエージェントはまた、（例えば、キーボードを使用して）<a href=semantics.html#hyperlink id=processing-model:hyperlink-2>ハイパーリンク</a>を表す個々の<code id=processing-model:the-area-element-12><a href=#the-area-element>area</a></code>要素を選択して活性化することを可能にすることができる。</p>

  <p class=note><code id=processing-model:the-map-element-2><a href=#the-map-element>map</a></code>要素（およびその<code id=processing-model:the-area-element-13><a href=#the-area-element>area</a></code>要素）は複数の<code id=processing-model:the-img-element-6><a href=#the-img-element>img</a></code>と<code id=processing-model:the-object-element-3><a href=#the-object-element>object</a></code>要素に関連付けることができるので、<code id=processing-model:the-area-element-14><a href=#the-area-element>area</a></code>要素は文書の複数の<i id=processing-model:focusable-area><a href=interaction.html#focusable-area>フォーカス可能領域</a></i>に対応することが可能である。</p>

  <p>イメージマップは<a id=processing-model:live href=infrastructure.html#live>ライブ</a>である。DOMが突然変異される場合、ユーザーエージェントは、あたかもイメージマップに対するアルゴリズムを再実行したかのように動作しなければならない。</p>

  



  <h4 id=mathml>4.8.17 MathML</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>24+</span></span><span class="and_uc partial"><span><span>UC Browser for Android</span> (limited) </span><span>9.9+</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0-5.1+</span></span><span class="firefox yes"><span>Firefox</span> <span>2+</span></span><span class="safari yes"><span>Safari</span> <span>5.1+</span></span><span class="opera partial"><span><span>Opera</span> (limited) </span><span>9.5-9.6+</span></span><span class="edge no"><span>Edge</span> <span>None</span></span><span class="ie_mob no"><span>IE Mobile</span> <span>None</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=mathml">caniuse.com</a></div>

  <p><a id=mathml:mathml-namespace href=infrastructure.html#mathml-namespace>MathML名前空間</a>由来の<dfn id=math><code>math</code></dfn>要素は、この仕様におけるコンテンツモデルの意味に対して<a id=mathml:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>、<a id=mathml:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>、<a id=mathml:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>、および<a id=mathml:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>のカテゴリーに分類される。</p>

  <p>この仕様は、複数の特定MathMLの要素を参照する。具体的には：<dfn id=math:annotation-xml><code>annotation-xml</code></dfn>、<dfn id=math:merror><code>merror</code></dfn>、<dfn id=math:mi><code>mi</code></dfn>、<dfn id=math:mn><code>mn</code></dfn>、<dfn id=math:mo><code>mo</code></dfn>、<dfn id=math:ms><code>ms</code></dfn>、および<dfn id=math:mtext><code>mtext</code></dfn>。
  </p>

  <p>MathMLの<code id=mathml:math:annotation-xml><a href=#math:annotation-xml>annotation-xml</a></code>要素が<a id=mathml:html-namespace-2 href=infrastructure.html#html-namespace-2>HTML名前空間</a>由来の要素を含む場合、そのような要素は、すべて<a id=mathml:flow-content-2-2 href=dom.html#flow-content-2>フローコンテンツ</a>でなければならない。<a href=references.html#refsMATHML>[MATHML]</a></p>

  <p>MathMLのトークン要素（<code id=mathml:math:mi><a href=#math:mi>mi</a></code>、<code id=mathml:math:mo><a href=#math:mo>mo</a></code>、<code id=mathml:math:mn><a href=#math:mn>mn</a></code>、<code id=mathml:math:ms><a href=#math:ms>ms</a></code>、および<code id=mathml:math:mtext><a href=#math:mtext>mtext</a></code>）がHTML要素の子孫である場合、要素は<a id=mathml:html-namespace-2-2 href=infrastructure.html#html-namespace-2>HTML名前空間</a>由来の<a id=mathml:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>要素を含んでもよい。<a href=references.html#refsMATHML>[MATHML]</a></p>
  

  

  

  <p>ユーザーエージェントは、コンテンツモデルがMathMLコンテンツモデル、レイアウト、および<a id=mathml:mathml-namespace-2 href=infrastructure.html#mathml-namespace>MathML名前空間</a>要素で<code id=mathml:math:mtext-2><a href=#math:mtext>mtext</a></code>要素に実際に包まれるテキストをレンダリングするためにふりをすることで連続したテキストを許可しないMathMLで見つけられる<a id=mathml:inter-element-whitespace href=dom.html#inter-element-whitespace>要素間空白文字</a>以外のテキストを処理しなければならない。（しかし、そのようなテキストは適合しない。）</p>

  <p>ユーザーエージェントは、一部の適切なエラーメッセージを含む<a id=mathml:mathml-namespace-3 href=infrastructure.html#mathml-namespace>MathML名前空間</a>における<code id=mathml:math:merror><a href=#math:merror>merror</a></code>要素によって、MathMLのレイアウトおよびレンダリングのために、要素のコンテンツモデルとマッチしないコンテンツモデルの任意のMathML要素が置換されたかのように動作しなければならない。</p>

  <p>MathMLのXML形式でMathMLを単に受け入れるMathMLのツールを使用する著者に可能性を与えるために、対話型のHTMLユーザーエージェントは、XML名前空間整形式のXML断片として任意のMathML断片を公開する方法を提供することを勧める。</p>

  

  <p>MathMLの要素のセマンティックは、MathML仕様や<a id=mathml:other-applicable-specifications href=infrastructure.html#other-applicable-specifications>その他の適用可能な仕様</a>で定義される。<a href=references.html#refsMATHML>[MATHML]</a></p>

  <div class=example>

   <p>HTML文書でのMathMLの使用例は、次のとおり：</p>

   <pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;The quadratic formula&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
  &lt;h1&gt;The quadratic formula&lt;/h1&gt;
  &lt;p&gt;
   &lt;math&gt;
    &lt;mi&gt;x&lt;/mi&gt;
    &lt;mo&gt;=&lt;/mo&gt;
    &lt;mfrac&gt;
     &lt;mrow&gt;
      &lt;mo form="prefix"&gt;−&lt;/mo&gt; &lt;mi&gt;b&lt;/mi&gt;
      &lt;mo&gt;±&lt;/mo&gt;
      &lt;msqrt&gt;
       &lt;msup&gt; &lt;mi&gt;b&lt;/mi&gt; &lt;mn&gt;2&lt;/mn&gt; &lt;/msup&gt;
       &lt;mo&gt;−&lt;/mo&gt;
       &lt;mn&gt;4&lt;/mn&gt; &lt;mo&gt;⁢&lt;/mo&gt; &lt;mi&gt;a&lt;/mi&gt; &lt;mo&gt;⁢&lt;/mo&gt; &lt;mi&gt;c&lt;/mi&gt;
      &lt;/msqrt&gt;
     &lt;/mrow&gt;
     &lt;mrow&gt;
      &lt;mn&gt;2&lt;/mn&gt; &lt;mo&gt;⁢&lt;/mo&gt; &lt;mi&gt;a&lt;/mi&gt;
     &lt;/mrow&gt;
    &lt;/mfrac&gt;
   &lt;/math&gt;
  &lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre>

  </div>



  <h4 id=svg-0>4.8.18 SVG</h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> <span class="chrome yes"><span>Chrome</span> <span>7+</span></span><span class="and_chr yes"><span>Chrome for Android</span> <span>47+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>9.9+</span></span><span class="ie yes"><span>IE</span> <span>9+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>5.0-5.1+</span></span><span class="firefox yes"><span>Firefox</span> <span>4+</span></span><span class="op_mini yes"><span>Opera Mini</span> <span>5.0-8.0+</span></span><span class="android yes"><span>Android Browser</span> <span>3+</span></span><span class="safari yes"><span>Safari</span> <span>5.1+</span></span><span class="opera yes"><span>Opera</span> <span>11.6+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="ie_mob yes"><span>IE Mobile</span> <span>10+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=svg-html5">caniuse.com</a></div>

  <p><a id=svg-0:svg-namespace href=infrastructure.html#svg-namespace>SVG名前空間</a>由来の<dfn id=svg><code>svg</code></dfn>要素は、この仕様におけるコンテンツモデルの意味に対して<a id=svg-0:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>、<a id=svg-0:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>、<a id=svg-0:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>、および<a id=svg-0:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>のカテゴリーに分類される。</p>

  

  <p>SVGのXML形式でSVGを単に受け入れるSVGのツールを使用する著者に可能性を与えるために、対話型のHTMLユーザーエージェントは、XML名前空間整形式のXML断片として任意のMathML断片を公開する方法を提供することを勧める。</p>

  

  <p>SVGの<code>foreignObject</code>要素が<a id=svg-0:html-namespace-2 href=infrastructure.html#html-namespace-2>HTML名前空間</a>の要素を含む場合、そのような要素は、すべて<a id=svg-0:flow-content-2-2 href=dom.html#flow-content-2>フローコンテンツ</a>でなければならない。<a href=references.html#refsSVG>[SVG]</a></p>

  <p><a id=svg-0:html-documents href=infrastructure.html#html-documents>HTML文書</a>内部の<a id=svg-0:svg-namespace-2 href=infrastructure.html#svg-namespace>SVG名前空間</a>で<code>title</code>要素のコンテンツモデルは<a id=svg-0:phrasing-content-2-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>である。（これはSVG仕様で指定された要件をさらに制約する。）</p>

  <p>SVGの要素のセマンティックは、SVG仕様や<a id=svg-0:other-applicable-specifications href=infrastructure.html#other-applicable-specifications>その他の適用可能な仕様</a>で定義される。<a href=references.html#refsSVG>[SVG]</a></p>

  <p><strong>User agent requirements</strong>: SVG as implemented today follows neither SVG 1.1 nor
  SVG Tiny 1.2 precisely, instead implementing subsets of each. Although it is hoped that the
  in-progress SVG 2 specification is a more realistic target for implementations, until that
  specification is ready, user agents must implement the SVG 1.1 specification with the following
  willful violations and additions. <a href=#refsSVG11>[SVG11]</a> <a href=#refsSVGTiny12>[SVGTiny12]</a> <a href=#refsSVG2>[SVG2]</a></p>

  <p>The following features from SVG 1.1 must not be implemented:</p>

  <ul><li>The <code>tref</code> element</li><li>The <code>cursor</code> element (use CSS's <code>cursor</code> property
      instead)</li><li>The font-defining elements: <code>font</code>, <code>glyph</code>,
      <code>missing-glyph</code>, <code>hkern</code>,
      <code>vkern</code>, <code>font-face</code>,
      <code>font-face-src</code>, <code>font-face-uri</code>,
      <code>font-face-format</code>, and <code>font-face-name</code> (use
      CSS's <code>@font-face</code> instead)</li><li>The <code>externalResourcesRequired</code> attribute</li><li>The <code>enable-background</code> property</li><li>The <code>contentScriptType</code> and <code>contentStyleType</code>
      attributes (use the <code>type</code> attribute on the <code>script</code>
      and <code>style</code> elements instead)</li></ul>

  <p>The following features from SVG Tiny 1.2 must be implemented:</p>

  <ul><li>The <code>non-scaling-stroke</code> value for the
      <code>vector-effect</code> property</li><li>The <code>class</code> attribute is allowed on all SVG elements</li><li>The <code>tabindex</code> attribute is allowed on visible SVG elements</li><li>The ARIA accessibility attributes are allowed on all SVG elements</li></ul>

  <hr>



  <dl class=domintro><dt><var>doc</var> = <var>iframe</var> . <code id=svg-0:dom-media-getsvgdocument><a href=#dom-media-getsvgdocument>getSVGDocument</a></code>()<dt><var>doc</var> = <var>embed</var> . <code id=svg-0:dom-media-getsvgdocument-2><a href=#dom-media-getsvgdocument>getSVGDocument</a></code>()<dt><var>doc</var> = <var>object</var> . <code id=svg-0:dom-media-getsvgdocument-3><a href=#dom-media-getsvgdocument>getSVGDocument</a></code>()<dd>

    <p>埋め込まれたSVG画像を使用している<code id=svg-0:the-iframe-element><a href=#the-iframe-element>iframe</a></code>、<code id=svg-0:the-embed-element><a href=#the-embed-element>embed</a></code>、または<code id=svg-0:the-object-element><a href=#the-object-element>object</a></code>の場合、<code id=svg-0:document><a href=dom.html#document>Document</a></code>を返す。</p>

   </dl>

  

  <p><dfn id=dom-media-getsvgdocument><code>getSVGDocument()</code></dfn>メソッドは、次の手順を実行しなければならない：</p>

  <ol><li><p>要素が<a id=svg-0:nested-browsing-context href=browsers.html#nested-browsing-context>ネストされるブラウジングコンテキスト</a>を持たない場合、nullを返しこの手順を中止する。</li><li><p><a id=svg-0:nested-browsing-context-2 href=browsers.html#nested-browsing-context>ネストされるブラウジングコンテキスト</a>の<a id=svg-0:active-document href=browsers.html#active-document>アクティブな文書</a>が要素の<a id=svg-0:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>ノード文書</a>と<a id=svg-0:effective-script-origin href=browsers.html#effective-script-origin>同じ</a><a href=browsers.html#same-origin id=svg-0:same-origin>実効スクリプト生成元</a>を持たない場合、nullを返しこの手順を中止する。</li><li><p>If the <a id=svg-0:nested-browsing-context-3 href=browsers.html#nested-browsing-context>nested browsing context</a>'s <a id=svg-0:active-document-2 href=browsers.html#active-document>active document</a> was created by
   the <a href=browsers.html#read-xml id=svg-0:read-xml>page load processing model for XML files</a> section because
   the <a href=https://mimesniff.spec.whatwg.org/#computed-mime-type id=svg-0:content-type-sniffing-2 data-x-internal=content-type-sniffing-2>computed type of the resource</a> in the <span>
   navigate</span> algorithm was <code id=svg-0:image/svg+xml><a href=indices.html#image/svg+xml>image/svg+xml</a></code>, then return that
   <code id=svg-0:document-2><a href=dom.html#document>Document</a></code> object and abort these steps.</li><li><p>そうでなければ、nullを返す。</li></ol>

  





  <h4 id=dimension-attributes>4.8.19 <dfn>次元属性</dfn></h4>

  <p><strong>著者要件</strong>：<code id=dimension-attributes:the-img-element><a href=#the-img-element>img</a></code>、<code id=dimension-attributes:the-iframe-element><a href=#the-iframe-element>iframe</a></code>、<code id=dimension-attributes:the-embed-element><a href=#the-embed-element>embed</a></code>、<code id=dimension-attributes:the-object-element><a href=#the-object-element>object</a></code>、<code id=dimension-attributes:the-video-element><a href=#the-video-element>video</a></code>上の<dfn id=attr-dim-width><code>width</code></dfn>および<dfn id=attr-dim-height><code>height</code></dfn>属性、および、その<code id=dimension-attributes:attr-input-type><a href=forms.html#attr-input-type>type</a></code>属性が<a href="forms.html#image-button-state-(type=image)" id="dimension-attributes:image-button-state-(type=image)">Image Button</a>状態にある場合、<code id=dimension-attributes:the-input-element><a href=forms.html#the-input-element>input</a></code>要素は、CSSピクセルで、その要素の（出力媒体の名目上の方向に対して、幅と高さそれぞれ）視覚コンテンツの次元を与えるために指定してもよい。属性が指定される場合、<a href=infrastructure.html#valid-non-negative-integer id=dimension-attributes:valid-non-negative-integer>妥当な非負整数</a>である値を持たなければならない。</p>

  <p>リソースはCSSピクセルの解像度とは異なる解像度を持つかもしれないので、与えられた指定次元は、リソース自体で指定された次元と異なるかもしれない。（画面では、CSSのピクセルが96ppiの解像度を持つが、一般にCSSピクセル解像度が読み取り距離に依存する。）両方の属性が指定される場合、次のいずれかの命題が真でなければならない：</p>

  <ul><li><span><var>specified width</var> - 0.5 ≤
             <var>specified height</var> * <var>target ratio</var> ≤
             <var>specified width</var> + 0.5</span></li><li><span><var>specified height</var> - 0.5 ≤
             <var>specified width</var> / <var>target ratio</var> ≤
             <var>specified height</var> + 0.5</span></li><li><span><var>specified height</var> = <var>specified width</var> = 0</span></li></ul>

  <p><var>target ratio</var>は、リソースの<a id=dimension-attributes:intrinsic-width href=infrastructure.html#intrinsic-width>内在幅</a>と<a id=dimension-attributes:intrinsic-height href=infrastructure.html#intrinsic-height>内在高さ</a>の比率である。<var>specified width</var>と<var>specified height</var>は、それぞれ<code id=dimension-attributes:attr-dim-width><a href=#attr-dim-width>width</a></code>と<code id=dimension-attributes:attr-dim-height><a href=#attr-dim-height>height</a></code>属性の値である。</p>

  <p>問題のリソースが<a id=dimension-attributes:intrinsic-width-2 href=infrastructure.html#intrinsic-width>内在幅</a>と<a id=dimension-attributes:intrinsic-height-2 href=infrastructure.html#intrinsic-height>内在高さ</a>の両方を持たない場合、2つの属性は省略しなければならない。</p>

  <p>2つの属性がともに0である場合、要素がユーザーに意図されない（たとえば、ページビューをカウントするサービスの一部であるかもしれない）ことを示す。</p>

  <p class=note>次元属性は、画像を伸ばすために使用することを意図しない。</p>

  

  <p><strong>User agent requirements</strong>: User agents are expected to use these attributes <a href=rendering.html#dimRendering>as hints for the rendering</a>.</p>

  <p>The <dfn id=dom-dim-width><code>width</code></dfn> and <dfn id=dom-dim-height><code>height</code></dfn> IDL attributes on the <code id=dimension-attributes:the-iframe-element-2><a href=#the-iframe-element>iframe</a></code>,
  <code id=dimension-attributes:the-embed-element-2><a href=#the-embed-element>embed</a></code>, <code id=dimension-attributes:the-object-element-2><a href=#the-object-element>object</a></code>, and <code id=dimension-attributes:the-video-element-2><a href=#the-video-element>video</a></code> elements must <a id=dimension-attributes:reflect href=infrastructure.html#reflect>reflect</a>
  the respective content attributes of the same name.</p>

  <p class=note>For <code id=dimension-attributes:the-iframe-element-3><a href=#the-iframe-element>iframe</a></code>, <code id=dimension-attributes:the-embed-element-3><a href=#the-embed-element>embed</a></code>, and <code id=dimension-attributes:the-object-element-3><a href=#the-object-element>object</a></code> the IDL
  attributes are <code id=dimension-attributes:idl-domstring><a href=infrastructure.html#idl-domstring>DOMString</a></code>; for <code id=dimension-attributes:the-video-element-3><a href=#the-video-element>video</a></code> the IDL attributes are <code id=dimension-attributes:idl-unsigned-long><a href=infrastructure.html#idl-unsigned-long>unsigned long</a></code>.</p>

  <p class=note>The corresponding IDL attributes for <code id=dimension-attributes:dom-img-height><a href=#dom-img-height>img</a></code> and
  <code id=dimension-attributes:dom-input-height><a href=forms.html#dom-input-height>input</a></code> elements are defined in those respective elements'
  sections, as they are slightly more specific to those elements' other behaviours.</p>

  



  <nav><a href=semantics.html>← 4 HTMLの要素</a> – <a href=index.html>目次</a> – <a href=tables.html>4.9 テーブルデータ →</a></nav>
</body></html>