<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="ja">
<HEAD>
<TITLE>CSS&nbsp;2.2の手引き</TITLE>
<link rel="stylesheet" href="style/default.css" type="text/css">
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD.css" type="text/css">
<link rel="prev" href="about.html">
<link rel="next" href="conform.html">
<link rel="contents" href="Overview.html#minitoc">
<link rel="CSS-properties" href="propidx.html" title="properties">
<link rel="index" href="indexlist.html" title="index">
<link rel="first" href="Overview.html">
<script type="text/javascript" src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

</HEAD>
<BODY>
<div class="navbar">
<p><a href="about.html">前章</a> &nbsp; <a href="conform.html">次章</a> &nbsp; <a href="Overview.html#minitoc">目次</a> &nbsp; <a href="propidx.html">プロパティ</a> &nbsp; <a href="indexlist.html">索引</a> &nbsp;
</div>
<hr class="navbar">

<H1><a name="q0">2 CSS&nbsp;2.2の手引き</a></H1> 
<div id="toc" class="subtoc">
<p><strong>目次</strong>
  <ul class="toc">
    <li><a href="intro.html#html-tutorial" class="tocxref">2.1 HTMLのための簡潔なCSS&nbsp;2.2チュートリアル</a>
    </li><li><a href="intro.html#xml-tutorial" class="tocxref">2.2 XMLのための簡潔なCSS&nbsp;2.2チュートリアル</a>
    </li><li><a href="intro.html#processing-model" class="tocxref">2.3 CSS&nbsp;2.2処理モデル</a>
    <ul class="toc">
      <li><a href="intro.html#the-canvas" class="tocxref">2.3.1 キャンバス</a>
      </li><li><a href="intro.html#addressing" class="tocxref">2.3.2 CSS&nbsp;2.2アドレス指定モデル</a>
    </li></ul>
    </li><li><a href="intro.html#design-principles" class="tocxref">2.4 CSS設計原則</a>
  </li></ul>
</div>


<H2>2.1 <a name="html-tutorial">HTMLのための簡潔なCSS&nbsp;2.2チュートリアル</a></H2>

<p>この節は非規範的である。

<P> このチュートリアルでは、単純なスタイルシートの設計がいかに容易であるかを示す。このチュートリアルに関しては、わずかなHTML <a href="refs.html#ref-HTML4" rel="biblioentry" class="noxref"><span class="informref">[HTML4]</span></a>と基本的なDTP用語についての知識が必要である。

<P>小さなHTML文書から始める：</p>

<PRE class="html example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
  &lt;TITLE&gt;Bach's home page&lt;/TITLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Bach's home page&lt;/H1&gt;
    &lt;P&gt;Johann Sebastian Bach was a prolific composer.
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P>H1要素のテキストの色を赤に設定するために、次のCSS規則を記述するとよい：</P>

<PRE class="example">
  h1 { color: red }
</PRE>

<P>CSS規則は、<a
href="selector.html">セレクタ</a>（'h1'）および宣言（'color:red'）という2つの主要部分から構成される。HTMLにおいて、要素名は大文字と小文字を区別しないため、'h1'は'H1'とまったく同じ働きをする。宣言は、プロパティ名（'color'）とプロパティ値（'red'）という2つの要素を持つ。上の例は、HTML文書のレンダリングに必要なプロパティの1つのみに影響を及ぼすよう試みたにすぎないとはいえ、それだけでスタイルシートであると言える。他のスタイルシートと組み合わせることで（CSSの基本的な機能の1つは、スタイルシートを組み合わせることにある）、最終的な外観が決定される。

<P> HTML 4仕様は、スタイルシート規則をHTML文書内に、または外部スタイルシートを経由して指定する方法を定義する。スタイルシートを文書に埋め込むためには、STYLE要素を使用するとよい：</p>

<PRE class="html example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
  &lt;TITLE&gt;Bach's home page&lt;/TITLE&gt;
  &lt;STYLE type="text/css"&gt;
    h1 { color: red }
  &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Bach's home page&lt;/H1&gt;
    &lt;P&gt;Johann Sebastian Bach was a prolific composer.
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P> 柔軟性を最大限に高めるために、著者は外部スタイルシートを指定することを推奨する。外部スタイルシートは、ソースHTML文書を修正することなくスタイルシートを変更でき、また複数の文書間でスタイルシートを共有できる。外部スタイルシートにリンクするためには、LINK要素を使用するとよい：</p>

<PRE class="html example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
  &lt;TITLE&gt;Bach's home page&lt;/TITLE&gt;
  &lt;LINK rel="stylesheet" href="bach.css" type="text/css"&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Bach's home page&lt;/H1&gt;
    &lt;P&gt;Johann Sebastian Bach was a prolific composer.
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P>LINK要素は以下の事項を指定する：</p>

<ul>
<li>リンクの種類が"stylesheet"であること。
</li><li>スタイルシートの位置が"href"属性を経由すること。 
</li><li>リンクされるスタイルシートのタイプが"text/css"であること。
</li></ul>

<P>スタイルシートと構造化マークアップとの間の密接な関係を示すために、このチュートリアルでSTYLE要素を使用しつづける。より多くの色を追加してみよう：

<PRE class="html example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
  &lt;TITLE&gt;Bach's home page&lt;/TITLE&gt;
  &lt;STYLE type="text/css"&gt;
    body { color: black; background: white }
    h1 { color: red; background: white }
  &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Bach's home page&lt;/H1&gt;
    &lt;P&gt;Johann Sebastian Bach was a prolific composer.
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P>今、スタイルシートは4つの規則を含んでいる：最初の2つはBODY要素の色と背景を設定する（テキストの色と背景色を同時に設定することはよいアイデアといえる）と同時に、最後の2つはH1要素の色と背景を設定している。P要素には色が設定されていないので、親要素、つまりBODY要素から色を継承することになる。H1要素もまたBODY要素の子要素であるが、2番目の規則が継承値を上書きする。CSSでは、異なる値の間でこのような衝突がたびたびあるが、この仕様はそれらを解決する方法を説明する。

<P>CSS&nbsp;2.2は、<a href="colors.html#propdef-color" class="noxref"><span
class="propinst-color">'color'</span></a>を含む90以上のプロパティを持つ。その他のプロパティも見てみよう：

<PRE class="example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
  &lt;TITLE&gt;Bach's home page&lt;/TITLE&gt;
  &lt;STYLE type="text/css"&gt;
    body {
      font-family: "Gill Sans", sans-serif;
      font-size: 12pt;
      margin: 3em;
    }
  &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;H1&gt;Bach's home page&lt;/H1&gt;
    &lt;P&gt;Johann Sebastian Bach was a prolific composer.
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P>最初に気づくことは、複数の宣言が波括弧で囲まれたブロック内でグループ化され（{...}）、セミコロンで区切られていることだろう。しかし、最後の宣言はセミコロンがついてもよい。

<P>BODY要素の最初の宣言は、"Gill Sans"フォントファミリーを設定している。このフォントが利用できない場合、ユーザーエージェント（たいてい"ブラウザ"と呼ばれる）は、'sans-serif'フォントファミリーを使用するだろう。これは5つある総称フォントファミリーのうちの1つで、すべてのユーザーエージェントが認識するものである。BODY要素の子要素は、<a href="fonts.html#propdef-font-family" class="noxref"><span
class="propinst-font-family">'font-family'</span></a>プロパティの値を継承する。

<P>2番目の宣言は、BODY要素のフォントサイズを12ポイントに設定している。"ポイント"という単位は、一般にフォントサイズやその他の長さの値を示すために、印刷に基づく組版において用いられる。これは、環境に呼応して増減しない絶対単位の例である。 

<P>3番目の宣言は、その環境に関しては増減する相対単位を用いている。"em"という単位は要素のフォントサイズを参照する。この場合、BODY要素の周囲のマージンはフォントサイズの3倍幅のある数値となる。

<H2>2.2 <a name="xml-tutorial">XMLのための簡潔なCSS&nbsp;2.2チュートリアル</a></H2>

<p>この節は非規範的である。

<P>CSSは、たとえば拡張可能なマークアップ言語<a href="refs.html#ref-XML11" rel="biblioentry" class="noxref"><span class="informref">[XML11]</span></a>のアプリケーションのような、どのような構造化文書形式でも利用できる。実際に、著者はユーザーエージェントが表示する方法を知らないXML要素をマークアップすることができるので、XMLはHTML以上にスタイルシートに依存する。

<P>簡単なXMLの断片を以下に示す：

<PRE class="xml example">
&lt;ARTICLE&gt;
  &lt;HEADLINE&gt;Fredrick the Great meets Bach&lt;/HEADLINE&gt;
  &lt;AUTHOR&gt;Johann Nikolaus Forkel&lt;/AUTHOR&gt;
  &lt;PARA&gt;
    One evening, just as he was getting his
    &lt;INSTRUMENT&gt;flute&lt;/INSTRUMENT&gt; ready and his
    musicians were assembled, an officer brought him a list of
    the strangers who had arrived.
  &lt;/PARA&gt;
&lt;/ARTICLE&gt;
</PRE>

<P>この断片を文書に適した方式で表示させるために、要素がインラインレベル（すなわち改行をさせない）であるか、ブロックレベル（すなわち改行をさせる）であるかを最初に宣言しなければならない。 

<PRE class="example">
INSTRUMENT { display: inline }
ARTICLE, HEADLINE, AUTHOR, PARA { display: block }
</PRE>

<P>最初の規則でINSTRUMENTがインラインであると宣言し、コンマ区切りのセレクタの羅列である2番目の規則は、他のすべての要素がブロックレベルであると宣言している。XMLにおいて要素名は大文字・小文字を区別する。そのため、小文字で書かれたセレクタ（たとえば、'instrument'）と大文字で書かれたセレクタ（たとえば、'INSTRUMENT'）は異なるものとなる。

<P>XML文書にスタイルシートをリンクさせる1つの方法は、処理命令を使用することである：

<PRE class="xml example">
<?xml-stylesheet type="text/css" href="bach.css"?>
&lt;ARTICLE&gt;
  &lt;HEADLINE&gt;Fredrick the Great meets Bach&lt;/HEADLINE&gt;
  &lt;AUTHOR&gt;Johann Nikolaus Forkel&lt;/AUTHOR&gt;
  &lt;PARA&gt;
    One evening, just as he was getting his
    &lt;INSTRUMENT&gt;flute&lt;/INSTRUMENT&gt; ready and his
    musicians were assembled, an officer brought him a list of
    the strangers who had arrived.
  &lt;/PARA&gt;
&lt;/ARTICLE&gt;
</PRE>

<P>視覚ユーザーエージェントは上記の例を次のように書式を設定する：

<div class="figure">
<p><img src="https://www.w3.org/TR/CSS2/images/bach1.png" alt="レンダリング例"><SPAN class="dlink">&nbsp;&nbsp;&nbsp;<A name="img-bach1" href="https://www.w3.org/TR/CSS2/images/longdesc/bach1-desc.html" title="バッハについてのXMLの整形例・その1">[D]</A></SPAN>
</div>

<P>単語"flute"がインライン要素INSTRUMENTのコンテンツであるため、段落内にとどまっていることに注目する。

<P>依然として、テキストは意図したとおりに整形されてない。たとえば、見出しは残りのテキストよりも大きなフォントサイズにすべきであるし、著者の名前をイタリック体で表示させてもよい：</P>

<PRE class="example">
INSTRUMENT { display: inline }
ARTICLE, HEADLINE, AUTHOR, PARA { display: block }
HEADLINE { font-size: 1.3em }
AUTHOR { font-style: italic }
ARTICLE, HEADLINE, AUTHOR, PARA { margin: 0.5em }
</PRE>

<P>視覚ユーザーエージェントは上記の例を次のように書式を設定する：

<div class="figure">
<p><img src="https://www.w3.org/TR/CSS2/images/bach2.png" alt="レンダリング例"><SPAN class="dlink">&nbsp;&nbsp;&nbsp;<A name="img-bach2" href="https://www.w3.org/TR/CSS2/images/longdesc/bach2-desc.html" title="バッハについてのXMLの整形例・その2">[D]</A></SPAN>
</div>

<P>スタイルシートにより多くの規則を追加することで、文書の表現をより向上させることができるだろう。 


<H2>2.3 <a name="processing-model">CSS&nbsp;2.2処理モデル</a></H2>

<p>この節は小節も含めて非規範的である。

<P>この節は、ユーザーエージェントがCSSをサポートする動作方法として可能な1つのモデルを提示する。これは抽象的なモデルにすぎない。実際の実装は異なってもよい。

<P>このモデルにおいて、ユーザーエージェントは以下の操作によってソースを処理する：</P>

<ol>
<li>ソース文書を構文解析し、<a
href="conform.html#doctree">文書ツリー</a>を作成する。</li>

<li>ターゲット<a href="media.html">メディアタイプ</a>を識別する。

</li><li>ターゲット<a href="media.html">メディアタイプ</a>に指定された文書に関連する、すべてのスタイルシート取り出す。

</li><li>ターゲット<a href="media.html">メディアタイプ</a>に適用可能なすべての<a href="syndata.html#properties">プロパティ</a>に単一の値を割り当てることにより、文書ツリーのすべての要素に注釈を付ける。プロパティは<a href="cascade.html">カスケーディングと継承</a>の節で説明する手順にしたがって値を割り当てられる。 

<P>値の計算の一部は、ターゲット<a href="media.html">メディアタイプ</a>に適切な整形アルゴリズムに依存する。たとえば、ターゲットメディアが画面であれば、ユーザーエージェントは<a href="visuren.html">視覚整形モデル</a>を適用する。 

</li><li>注釈付きの文書ツリーから、<span class="index-def" title="formatting structure"><a name="formatting-structure"><dfn>整形構造</dfn></a></span>を生成する。整形構造は文書ツリーとしばしば酷似するが、特に著者が疑似要素または生成内容を使用した場合、著しく異なることもある。まず、整形構造は少しも"ツリー状"である必要はない―構造の特性は実装に依存する。次に、整形構造は文書ツリー以上または以下の情報を含んでもよい。たとえば、文書ツリー内のある要素が<a href="visuren.html#propdef-display" class="noxref"><span
class="propinst-display">'display'</span></a>プロパティに'none'の値を持つ場合、その要素は整形構造には何も生成しないだろう。一方リスト要素は、整形構造でより多くの情報を生成してもよい：リスト要素の内容とリストスタイルの情報（たとえば、黒丸の画像）。

<P>CSSユーザーエージェントはこの段階で文書ツリーを改変しないことに注意されたい。とくに、スタイルシートに起因する内容生成は、文書言語プロセッサにフィードバックされることはない（たとえば、再解析のために）。

</li><li>整形構造をターゲットメディアに転送する（たとえば、結果を印刷する、画面上に表示する、音声として表現する、など）。
</li></ol>

<h3>2.3.1 <a name="the-canvas">キャンバス</a></h3>

<P>すべてのメディアに対して、用語<span class="index-def" title="canvas"><a
name="canvas"><dfn>キャンバス</dfn></a></span>は"整形構造がレンダリングされる空間"を表す。キャンバスは各次元について無限空間であるが、一般的にレンダリングは、ターゲットメディアによって設置されたキャンバスの有限範囲で行われる。たとえば、画面表示をするユーザーエージェントは、一般的に最小幅を設け、<a href="visuren.html#viewport">ビューポート</a>の次元に基づく初期幅を選択する。ページ出力をするユーザーエージェントは一般的に幅と高さに制限を設ける。聴覚ユーザーエージェントは音声空間に関する制限をしてもよいが、時間の制限をしない。 

<h3>2.3.2 <a name="addressing">CSS&nbsp;2.2アドレス指定モデル</a></h3>

<P> CSS&nbsp;2.2<a href="selector.html">セレクタ</a>およびプロパティは、文書またはユーザーエージェントの以下の部分の参照をスタイルシートに割り当てる：</p>

<ul>
<li>文書ツリーの要素と要素間にある関係（<a href="selector.html">セレクタ</a>の節を参照）。

</li><li>文書ツリー内の要素の属性と属性値（<a
href="selector.html#attribute-selectors">属性セレクタ</a>の節を参照）。

</li><li>要素内容の一部（<a
href="selector.html#first-line">:first-line</a>および<a
href="selector.html#first-letter">:first-letter</a>疑似要素を参照）。

</li><li>特定の状態にある文書ツリーの要素（<a href="selector.html#pseudo-classes">疑似クラス</a>の節を参照）。

</li><li>文書がレンダリングされる<a href="#canvas">キャンバス</a>の外観。

</li><li>いくつかのシステム情報（<a href="ui.html">ユーザーインターフェイス</a>の節を参照）。
</li></ul>

<H2>2.4 <a name="design-principles">CSS設計原則</a></H2>

<p>この節は非規範的である。

<P>以前のCSS2およびCSS1と同様に、CSS&nbsp;2.2は一連の設計原則に基づいている：</p>

<UL>

<LI>
<P><STRONG>前方および後方互換性</STRONG>。CSS&nbsp;2.2のユーザーエージェントはスタイルシートを解釈することができる。CSS1ユーザーエージェントはCSS&nbsp;2.2スタイルシートを読むことができ、解釈できない部分は破棄する。また、CSSをサポートしないユーザーエージェントでも、スタイルの拡張された文書を表示できるだろう。もちろん、CSSによって可能となったスタイルの機能強化はレンダリングされないが、すべての内容は表示される。</P>
</LI>

<LI>
<P><STRONG>構造化文書の補完</STRONG>。スタイルシートは、マークアップテキストにスタイル情報を与えることで、構造化文書（たとえば、HTMLやXMLアプリケーション）を補完する。マークアップに影響を与えることなくスタイルシートを容易に変更できるはずである。</P>
</LI>

<LI>
<P><STRONG>ベンダー、プラットフォーム、デバイスからの独立</STRONG>。スタイルシートは、ベンダー、プラットフォーム、デバイスからの独立を保つ文書を可能にする。スタイルシート自身もまたベンダーやプラットフォームから独立しているが、CSS&nbsp;2.2はある種のデバイス（たとえば、プリンタ）を対象にしたスタイルシートを認めている。</P>
</LI>

<LI>
<P><STRONG>保全性</STRONG>。文書からスタイルシートを指定することによって、ウェブマスターがサイトのメンテナンスを簡素化し、サイトのいたるところで一貫した外観を保持する。たとえば、背景色を変更する場合、ただ1つのファイルを変更するだけでよい。</P>
</LI>

<LI>
<P><STRONG>容易性</STRONG>。CSSは、人間が読み書き可能である簡潔なスタイル言語である。CSSプロパティは可能な限り最大の範囲で相互に独立するよう保持され、通常、ある効果を達成する唯一の方法が存在する。</P>
</LI>

<LI> 
<P><STRONG>ネットワークの性能</STRONG>。CSSは、コンテンツを表示するための簡素なエンコーディングを提供する。レンダリング効果を得るためによく用いられる画像や音声ファイルと比べて、スタイルシートはコンテンツ量を最も減少させる。また、より少ないネットワーク接続は、さらなるネットワークパフォーマンスの増加をもたらす。</P> </LI>

<LI>
<P><STRONG>柔軟性</STRONG>。CSSはさまざまな方法でコンテンツに適用できる。キーポイントとなる特徴は、（ユーザーエージェントの）デフォルトスタイルシート、ユーザースタイルシート、リンクされたスタイルシート、文書のヘッダー、文書の本体にある要素の属性、といった方法で指定されたスタイル情報をカスケードする機能である。</P>
</LI>

<LI>
<P><STRONG>豊かさ</STRONG>。レンダリング効果の豊富な設定を著者に提供することで、表現メディアとしてのウェブの豊かさが向上する。デザイナーは、DTPやスライドショー・アプリケーションに共通して見られるような機能性を待ち望んでいる。要求された一部のレンダリング効果はデバイスの独立性と矛盾するが、CSS 2.2はデザイナーの要求を容認するのに大きな役割を果たす。</P>
</LI>

<LI>
<P><STRONG>他言語との結びつき</STRONG>。本仕様に記述された一連のCSSプロパティは、視覚および聴覚表現のための一貫性のある整形モデルを構成する。この整形モデルはCSS言語を通してアクセスされるが、他の言語に結びつけることも可能である。たとえば、JavaScriptプログラムは、ある要素の<a href="colors.html#propdef-color" class="noxref"><span
class="propinst-color">'color'</span></a>プロパティの値を動的に変化させることができる。</P>
</LI>

<LI>
<P><STRONG>アクセシビリティー</STRONG>。複数のCSSの機能は、障害を持つユーザーをウェブによりアクセスしやすくする。</p>

<UL>

<LI>フォントの外観を制御するプロパティは、著者がアクセスできないビットマップのテキスト画像を排除することを可能にする。 

</LI><li>位置調整プロパティは、レイアウトを押し込むためのマークアップトリック（たとえば、見えない画像）を排除することを可能にする。

</li><LI><tt>!important</tt>規則は、特定の見栄え要件のためにユーザーが著者のスタイルシートを上書きできることを意味する。

</LI><li>すべてのプロパティにとって'inherit'値は、カスケーディングの一般性を向上させ、より容易で一貫性のあるスタイル調整を可能にする。

</li><li>braille、embossed、ttyメディアグループなどの改良されたメディアサポートは、ユーザーおよび著者がページやデバイスを調整することを可能にする。

</li></UL>

<div class="note"><P> <em><strong>注。</strong> CSSおよびHTMLを用いたアクセシブルな文書の設計についてのより詳しい情報は、<a href="refs.html#ref-WCAG20" rel="biblioentry" class="noxref"><span class="informref">[WCAG20]</span></a>を参照のこと。</em>
</div>
</LI></UL>


<hr class="navbar">

<div class="navbar">
<p><a href="about.html">前章</a> &nbsp; <a href="conform.html">次章</a> &nbsp; <a href="Overview.html#minitoc">目次</a> &nbsp; <a href="propidx.html">プロパティ</a> &nbsp; <a href="indexlist.html">索引</a> &nbsp;
</div>
</BODY>
</HTML>

