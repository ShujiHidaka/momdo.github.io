<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="ja">

<HEAD>
<TITLE>Conformance: requirements and recommendations</TITLE>
<link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" type="text/css">
<link rel="stylesheet" href="style/default.css" type="text/css">
<link rel="prev" href="intro.html">
<link rel="next" href="syndata.html">
<link rel="contents" href="cover.html#minitoc">
<link rel="CSS-properties" href="propidx.html" title="properties">
<link rel="index" href="indexlist.html" title="index">
<link rel="first" href="cover.html">


</HEAD>
<BODY>
<div class="navbar">
<p><a href="intro.html">前章</a> &nbsp; <a href="syndata.html">次章</a> &nbsp; <a href="cover.html#minitoc">目次</a> &nbsp; <a href="propidx.html">プロパティー</a> &nbsp; <a href="indexlist.html">索引</a> &nbsp;
</div>
<hr class="navbar">

<H1><a name="q0">3 適合性：必要条件と推奨事項</a></H1>
<div class="subtoc">
<p><strong>目次</strong>
  <ul class="toc">
    <li class="tocline2"><a href="conform.html#defs" class="tocxref">3.1 定義</a>
    </li><li class="tocline2"><a href="conform.html#conformance" class="tocxref">3.2 ユーザーエージェントの適合性</a>
    </li><li class="tocline2"><a href="conform.html#errors" class="tocxref">3.3 エラーの処理方法</a>
    </li><li class="tocline2"><a href="conform.html#text-css" class="tocxref">3.4 <span class="index-def" title="text/css">text/css content-type</span></a>
  </li></ul>
</div>


<H2>3.1 <a name="defs">定義</a></H2>

<P>この文書（の原文）における<a name="x0"><span class="index-def" title="MUST">"MUST"</span></a>、<a name="x1"><span class="index-def" title="MUST NOT">"MUST NOT"</span></a>、<a name="x2"><span
class="index-def" title="REQUIRED">"REQUIRED"</span></a>、<a name="x3"><span
class="index-def" title="SHALL">"SHALL"</span></a>、<a name="x4"><span
class="index-def" title="SHALL NOT">"SHALL NOT"</span></a>、<a name="x5"><span
class="index-def" title="SHOULD">"SHOULD"</span></a>、<a name="x6"><span
class="index-def" title="SHOULD NOT">"SHOULD NOT"</span></a>、<a name="x7"><span
class="index-def" title="RECOMMENDED">"RECOMMENDED"</span></a>、<a name="x8"><span
class="index-def" title="MAY">"MAY"</span></a>、<a name="x9"><span
class="index-def" title="OPTIONAL">"OPTIONAL"</span></a>のキーワードは、RFC 2119に示されたとおりに解釈される（<a href="refs.html#ref-RFC2119" rel="biblioentry" class="noxref"><span class="normref">[RFC2119]</span></a>参照）。しかし、読みやすさのために、これらの単語はこの仕様で大文字のみで出現しない。

<P>折に触れて、この仕様は著者やユーザーエージェントにとって都合のよい事例を推奨する。この推奨事項は規範的なものではなく、推奨事項の実現をせずともこの仕様に適合する。推奨事項は、"推奨する…"、"本仕様は…推奨する"、またはそれに準じる表現を含む。</P>

<P>機能がdeprecated（廃止）としてマークされるもの（具体的には<a
href="aural.html#aural-media-group">'aural'</a>キーワード）やCSS3で廃止予定とされているもの（具体的には<a
href="ui.html#system-colors">システム色</a>）は、適合性に影響することはない。（たとえば、'aural'は非規範的としてマークされているので、ユーザーエージェントはサポートする必要がない。システム色は規範的であり、ユーザーエージェントはサポートする必要がある。）

<p>付録も含めたこの仕様のすべての節は、特に断りのない限り規範的である。

<p><a href="about.html#notes-and-examples">例と注</a>は規範的ではない。

<div class=example><P style="display:none">例：</P><p>例は、常に単語"例"が文頭近くにあり（"例："、"以下の例は…"、"たとえば"など） この段落のように栗色で表示する。</p></div>

<div class=note><p>注は、単語"注"で始まり、この段落のように字下げした緑色で表示する。</p></div>

<p>図は説明のためだけのものにすぎない。明示的に指定しない限り、規範的なレンダリングではない。

<dl>



<dt><strong><span class="index-def" title="style sheet"><a name="style-sheet">スタイルシート</a></span></strong>

<dd>文書の見栄えを指定した一連の文。

<P>スタイルシートは、<a
href="#author">著者</a>、<a href="#user">ユーザー</a>、<a
href="#user-agent">ユーザーエージェント</a>の3つの異なる起源を持つことができる。これら起源の相互作用は、<a href="cascade.html">カスケーディングと継承</a>の節で説明される。

<dt><strong><span class="index-def" title="valid style sheet|validity"><a name="valid-style-sheet">妥当なスタイルシート</a></span></strong>

<dd>スタイルシートの妥当性は、スタイルシートに用いるCSSのレベルに依存する。すべての妥当なCSS1スタイルシートはCSS&nbsp;2.2スタイルシートとして妥当だが、一部のCSS1からの変更は、少数のCSS1スタイルシートがCSS&nbsp;2.2においてわずかに異なる意味を持つことがある。CSS2のいくつかの機能はCSS&nbsp;2.2の一部でなく、その結果、すべてのCSS2スタイルシートが妥当なCSS&nbsp;2.2スタイルシートとは限らない。

<P>妥当なCSS&nbsp;2.2スタイルシートは<a
href="grammar.html">CSS&nbsp;2.2の文法</a>に従って記述されなければならない。さらに、@規則、プロパティー名およびプロパティー値は、この仕様で定義されたもののみを含まなければならない。<span
class="index-def"><strong><a
name="illegal">不正な</a></strong></span>（無効な）@規則、プロパティー名、プロパティー値が1つでも存在すれば妥当ではない。

<dt><strong><span class="index-def" title="source document"><a name="source-document">ソース文書</a></span></strong>

<dd>1つ以上のスタイルシートが参照する文書。文書は、<a
href="#element">要素</a>のツリーとして表現される言語でエンコードされる。各要素は、要素の種類、任意な多数の<a
href="#attribute">属性</a>および（場合によって空の）<a
href="#content">コンテンツ</a>を識別する名前で構成される。たとえば、ソース文書はXMLまたはSGMLであるかもしれない。</dd>

<dt><strong><span class="index-def" title="document language"><a
name="doclanguage">文書言語</a></span></strong>

<dd>ソース文書（たとえば、HTML、XHTMLまたはSVGなど）の符号化言語。CSSは文書言語の見栄えに使われ、そしてCSSは文書言語の根本的なセマンティックを変更しない。

<dt><strong><span class="index-def" title="element"><a
name="element">要素</a></span></strong>

<dd>（SGML用語。<a href="refs.html#ref-ISO8879" rel="biblioentry" class="noxref"><span class="normref">[ISO8879]</span></a>を参照。）文書言語の最も重要な構文上の構成物。ほとんどのCSSスタイルシートの規則は、要素のレンダリングされるべき方法を指定するために、（HTMLにおけるP、TABLE、OLなどの）要素の名前を使用する。

<dt><strong><span class="index-def" title="replaced element">
<a name="replaced-element">置換要素</a></span></strong>

<dd><p>画像、埋め込み文書、またはアプレットなど、コンテンツがCSS整形モデルの範囲外である要素。たとえば、HTMLのIMG要素のコンテンツは多くの場合、"src"属性が指定する画像に置換される。置換要素は多くの場合、固有の幅、固有の高さ、固有の比率といった固有の寸法を持つ。たとえば、ビットマップの画像は、（固有の比率を明確に規定できることから）絶対単位で指定された固有の幅と高さを持つ。一方、他の文書は固有の寸法を持つとは限らない（たとえば、空白のHTML文書など）。

<p>ユーザーエージェントは、これらの寸法がサードパーティーに機密情報を漏洩してると考えられる場合、固有の寸法を1つも持たない置換要素を検討してもよい。たとえば、HTML文書がユーザーの銀行残高に応じて固有の大きさを変更する場合、ユーザーエージェントはリソースの固有の寸法を持たなかったかのように振る舞うことを望むかもしれない。

<p>置換要素のコンテンツは、CSSレンダリングモデルにおいて考慮されない。

<dt><strong><span class="index-def" title="intrinsic dimensions"><a name="intrinsic">固有の寸法</a></span></strong>

<dd>要素自身によって定義された幅と高さで、周囲に影響されないもの。CSSは固有の寸法を発見する方法を定義しない。CSS&nbsp;2.2において、置換要素のみが固有の寸法を伴うことができるる。信頼できる解像度情報を持たないラスタ画像の場合、画像ソースピクセルあたり1ピクセル単位の大きさを仮定しなければならない。

<dt><strong><span class="index-def" title="attribute"><a
name="attribute">属性</a></span></strong>

<dd>名前で構成される要素、および（テキストの）値に関連付けられる値。

<dt><strong><span class="index-def" title="content"><a
name="content">コンテンツ</a></span></strong>

<dd>ソース文書における要素と関連付けられるコンテンツ。コンテンツが<strong><span class="index-def"
title="empty"><a name="empty">空</a></span></strong>と呼ばれる場合に、いくつかの要素はコンテンツを持たない。要素のコンテンツは、その下位要素の<strong><span class="index-def"
title="parent"><a name="parent">親</a></span></strong>と要素が呼ばれる場合に、テキストおよび多数の下位要素を含んでもよい。

<dt><strong><span class="index-def"
title="ignore"><a name="ignore">無視する</a></span></strong>

<dd>この用語は、この仕様において2つの若干異なる意味を持つ。第一に、CSSパーサがスタイルシートにおいて未知または不正な構文を検出した場合、CSSパーサは特定の規則に従う必要がある。その後、パーサはスタイルシートの特定の部分を無視しなければならない。厳密な規則に対して無視されなければならない部分は、<a
href="syndata.html#declaration">宣言とプロパティー</a>、<a
href="syndata.html#parsing-errors">構文解析エラー規則</a>、<a href="syndata.html#unsupported-values">サポートしない値</a>の節で説明される。または用語"無視する"が出現するテキストにおいて説明されてもよい。第二に、たとえ構文が正当であっても、ユーザーエージェントは、スタイルシートにおいてあるプロパティーまたは値を無視してもよい（場合によっては、しなければならない）。たとえば、テーブルの列要素は列のフォントに影響を与えることができず、その結果フォントプロパティーは無視しなければならない。


<dt><strong><span class="index-def" title="rendered content|content::rendered"><a name="rendered-content">レンダリングコンテンツ</a></span></strong>

<dd>関連するスタイルシートにしたがって要素に適用された、レンダリング後の要素のコンテンツ。どのように置換要素のコンテンツがレンダリングされるかは、この仕様で定義しない。レンダリングコンテンツは要素の代替テキスト（たとえば、XHTMLの"alt"属性値）であってもよく、黒丸や番号付けなどの、スタイルシートによって暗黙的または明示的に挿入される項目を含んでもよい。

<dt><strong><span class="index-def" title="document tree">
<a name="doctree">文書ツリー</a></span></strong>

<dd>ソース文書でエンコードされた文書のツリー。ツリーにおける各要素は、<strong><span class="index-def" title="root"><a
name="root">ルート</a></span></strong>要素が何も持たないことを除き、厳密に1つの親を持つ。

<dt><strong><span class="index-def"
title="child"><a name="child">子</a></span></strong>

<dd>BがAの親である場合、かつその場合に限り、ある要素Aは要素Bの子と呼ばれる。

<dt><strong><span class="index-def"
title="descendant"><a name="descendant">子孫</a></span></strong>

<dd>(1) AがBの子である、または(2) Aが、Bの子孫である一部の要素Cの子である、のいずれかである場合、ある要素Aは、要素Bの子孫と呼ばれる。

<dt><strong><span class="index-def"
title="ancestor"><a name="ancestor">先祖</a></span></strong>

<dd>BがAの子孫である場合、かつその場合に限り、ある要素Aは要素Bの先祖と呼ばれる。

<dt><strong><span class="index-def"
title="sibling"><a name="sibling">兄弟</a></span></strong>

<dd>BとAが同一の親要素を共有する場合、かつその場合に限り、ある要素Aは要素Bの兄弟という。文書ツリーでBの前に現れる場合、要素Aは兄である。文書ツリーでAの前に現れる場合、要素Bは弟である。

<dt><strong><span class="index-def" title="preceding element|element::preceding"><a name="preceding">先行要素</a></span></strong>

<dd>(1) AがBの祖先である、または(2) Bの兄に当てはまる場合、かつその場合に限り、ある要素Aは要素Bの先行要素と呼ばれる。

<dt><strong><span class="index-def" title="following element|element::following"><a name="following">後行要素</a></span></strong>

<dd>BがAの先行要素である場合、かつその場合に限り、要素Aは要素Bの後行要素と呼ばれる。

<dt><strong><span
class="index-def"><a name="author">著者</a></span></strong>

<dd>著者とは、文書および関連するスタイルシートを記述する人である。<strong><span class="index-def"><a name="authoring">オーサリングツール</a></span></strong>とは、スタイルシートを生成する<a href="#user-agent">ユーザーエージェント</a>である。</dd>

<dt><strong><span
class="index-def"><a name="user">ユーザー</a></span></strong>

<dd> ユーザーとは、文書および文書のスタイルシートを見る、聞く、または別の方法で使用するユーザーエージェントと情報交換する人のことである。ユーザーは、自分好みにエンコードする個人用のスタイルシートを提供してもよい。
</dd>

<dt><strong><span class="index-def"><a name="user-agent">ユーザーエージェント（UA）</a></span></strong>

<dd><span class="index-def" title="user agent|UA"><a name="ua">ユーザーエージェント</a></span>とは、文書言語で記述された文書を解釈し、この仕様書の用語に従って関連するスタイルシートを適用する任意のプログラムである。ユーザーエージェントは、文書を表示したり、音声読み上げしたり、印刷したり、別のファイル形式に変換したりしてもよい。</dd>

<DD>HTMLユーザーエージェントは、1つ以上のHTML仕様をサポートするものである。HTMLではなくXHTML <a href="refs.html#ref-XHTML" rel="biblioentry" class="noxref"><span class="informref">[XHTML]</span></a>をサポートするユーザーエージェントは、この仕様に適合する意図でHTMLユーザーエージェントとはみなさない。

<dt><strong><span
class="index-def"><a name="property">プロパティー</a></span></strong>

<dd>CSSは、プロパティーと呼ばれる、文書のレンダリングを指示する有限集合のパラメータを定義する。各プロパティーは、名前（たとえば、'color'、'font'、'border'）と値（たとえば、'red'、'12pt Times'、'dotted'）を持つ。プロパティーは、さまざまな部分および、特異性、カスケーディング、継承の仕組み（<a href="cascade.html">プロパティー値とカスケーディング、継承の割り当て</a>の節を参照）によって表示される文書上のページに付属する。

</dl>

<div class="html-example">
<p>HTMLで記述されたソース文書の例を以下に示す：

<PRE>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;   
  &lt;TITLE&gt;My home page&lt;/TITLE&gt;
  &lt;BODY&gt;
    &lt;H1&gt;My home page&lt;/H1&gt;
    &lt;P&gt;Welcome to my home page! Let me tell you about my favorite
		composers:
    &lt;UL&gt;
      &lt;LI&gt; Elvis Costello
      &lt;LI&gt; Johannes Brahms
      &lt;LI&gt; Georges Brassens
    &lt;/UL&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P>これは以下のツリーをもたらす：</P>

<div class="figure">
<P><IMG src="http://www.w3.org/TR/CSS2/images/doctree.png" alt="文書ツリー例"><SPAN class="dlink">&nbsp;&nbsp;&nbsp;<A name="img-doctree" href="http://www.w3.org/TR/CSS2/images/longdesc/doctree-desc.html" title="文書ツリーのサンプル図について">[D]</A></SPAN></p>
</div>

<P>HTML 4の定義によれば、たとえ"head"タグが文書ソース中に存在しなくても、HEAD要素は構文解析中に推定され、文書ツリーの一部となる。同様に、&lt;/p&gt;や&lt;/li&gt;タグがソース中に存在しないにもかかわらず、どこでP要素やLI要素が終了するかをパーサは認識する。

<P>XHTML（および他のXMLベースの言語）で記述された文書は異なる動作をする。推定される要素は一切存在せず、すべての要素は終了タグを持たなければならない。

</div>



<h2>3.2 <a name="conformance">ユーザーエージェントの適合性</a></h2>

<P>この節は、CSS&nbsp;2.2仕様に限定した<span class="index-def"
title="conformance"><a name="conformance-term">適合性</a></span>を定義する。将来における他のCSSレベルは、異なる機能の集合に準拠することをユーザーエージェントに対して実装するよう要求してもよい。

<P>一般に、この仕様に適合性を主張するユーザーエージェントは、以下の項目を遵守しなければならない：</P>

<ol>

<li>1つ以上のCSS&nbsp;2.2<a href="media.html">メディアタイプ</a>を認識しなければならない。

</li><li>各ソース文書に対して、認識されるメディアタイプに適切なすべての関連するスタイルシートの取得を試みなければならない。（たとえば、ネットワークのエラーにより）すべての関連するスタイルシートを取得できない場合、取得できたスタイルシートを用いて文書を表示しなければならない。

</li><li>この仕様に従ってスタイルシートを解析しなければならない。具体的には、すべての@規則、ブロック、宣言、およびセレクタを認識しなければならない（<a href="grammar.html">CSS&nbsp;2.2の文法</a>を参照）。ユーザーエージェントがサポートされるメディアタイプに適合するプロパティーを検出した場合、ユーザーエージェントはプロパティーの定義に従って値を解析しなければならない。これは、ユーザーエージェントがすべての妥当な値を受け入れなければならず、さらに不正な値を持つ宣言を<a name="x44"><span class="index-inst" title="ignore">無視</span></a>しなければならないことを意味する。ユーザーエージェントは、サポートしない<a href="media.html">メディアタイプ</a>に適用される規則を<a name="x45"><span class="index-inst" title="ignore">無視</span></a>しなければならない。



</li><li><a href="#doctree">文書ツリー</a>内の各要素に対して、ユーザーエージェントは、プロパティーの定義および<a
href="cascade.html">カスケードと継承</a>の規則に従って、すべてのプロパティーの値を割り当てなければならない。

</li><li>ソース文書が代替スタイルシート（たとえば、HTML 4 <a href="refs.html#ref-HTML4" rel="biblioentry" class="noxref"><span class="informref">[HTML4]</span></a>の"alternate"キーワードなど）を伴う場合、ユーザーエージェントは、どのスタイルシートをユーザーエージェントが適用すべきかを選択するのを可能にしなければならない。

</li><li>ユーザーエージェントは、ユーザーが著者スタイルシートの影響を切ることができるようにしなければならない。

</li></ol>

<P>しかし、すべてのユーザーエージェントが全項目を順守しなければならないということではない：</p>

<ul>

<li>任意のコンテンツをレンダリングすることなく、スタイルシートを読み込むアプリケーション（たとえば、CSS&nbsp;2.2バリデータ）は項目1-3を順守しなければならない。

</li><li>オーサリングツールは、<a
href="#valid-style-sheet">妥当なスタイルシート</a>の出力のみが要求される。

</li><li>関連するスタイルシートをもつ文書を<em>レンダリングする</em>ユーザーエージェントは、項目1-6を順守し、この仕様書に記載されているメディア固有の要件に従って文書をレンダリングしなければならない。ユーザーエージェントによって要求された場合、<a href="cascade.html#actual-value">値</a>を近似してもよい。

</li></ul>

<P>特定デバイスの制限のためにこの仕様の一部を実装することができないユーザーエージェント（たとえば、モノクロのモニタやページで色をレンダリングすることはできないユーザーエージェント）は、不適合を意味しない。 </P>

<p>ユーザーエージェントは、ユーザーにユーザースタイルシートを含むファイルを指定できるようにしなければならない。ファイルの書き込みまたは指定の手段を持たない任意のデバイスで実行するユーザーエージェントは、この要件から免除される。さらに、たとえばGUIを経由するなど、ユーザーエージェントはユーザー設定を指定するために他の手段を提供してもよい。

<p>CSS&nbsp;2.2は、プロパティーがフォームコントロールおよびフレームに適用されるかどうか、すなわちどのようにCSSがそれらをスタイル付けするために使用されるかを定義しない。ユーザーエージェントは、これらの要素にCSSプロパティーを適用してもよい。著者は実験的なサポートとして扱うことが推奨される。CSSの将来のレベルは、これをさらに規定してもよい。


<h2>3.3 <a name="errors">エラーの処理方法</a></h2>

<p>一般にこの文書は、仕様の至る所にエラー処理の動作を規定する。例として、<a
href="syndata.html#parsing-errors">構文解析エラーの処理規定</a>を参照のこと。 

<h2>3.4 <span class="index-def" title="text/css"><a
name="text-css">text/css content-type</a></span></h2>

<p>個々のファイルに存在するCSSスタイルシートは、符号化情報を伴ったバイトシーケンスとして、インターネットを通して送信される。<span class="index-def" title="message
entity"><a name="message-entity"><strong>メッセージボディ</strong></a></span>と呼ばれる伝送構造体は、RFC 2045およびRFC 2616で定義される（<a href="refs.html#ref-RFC2045" rel="biblioentry" class="noxref"><span class="normref">[RFC2045]</span></a>および<a href="refs.html#ref-RFC2616" rel="biblioentry" class="noxref"><span class="normref">[RFC2616]</span></a>を参照）。"text/css"のコンテンツタイプをもつメッセージ実体は、独立したCSS文書を表す。"text/css"content-typeはRFC 2318に登録されている（<a href="refs.html#ref-2318" rel="biblioentry" class="noxref"><span class="normref">[RFC2318]</span></a>）。

<hr class="navbar">

<div class="navbar">
<p><a href="intro.html">前章</a> &nbsp; <a href="syndata.html">次章</a> &nbsp; <a href="cover.html#minitoc">目次</a> &nbsp; <a href="propidx.html">プロパティー</a> &nbsp; <a href="indexlist.html">索引</a> &nbsp;
</div>
</BODY>
</html>

